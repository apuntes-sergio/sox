{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Introducci\u00f3n al curso","text":"<p>Apuntes del m\u00f3dulo de SOX (Sistemes Operatius en Xarxa) para el ciclo formativo de grado medio de SMX (Sistemes Microinform\u00e0tics en Xarxa)</p> <p>En este espacio encontrar\u00e1s los apuntes b\u00e1sicos sobre el m\u00f3dulo, que constar\u00e1 de los siguiente Bloques y Unidades Did\u00e1cticas:</p> <ol> <li>Instalaci\u00f3n de Sistemas Operativos libres y privativos</li> </ol> <p>En este primer bloque del curso vamos a aprender los conceptos b\u00e1sicos sobre sistemas operativos para servidores y vamos a instalar sistemas tanto libres como privativos.</p> <p>El bloque est\u00e1 compuesto por las siguientes unidades did\u00e1cticas:</p> <ul> <li>UD 1 - Introducci\u00f3n a los Sistemas Operativos servidor y dise\u00f1o de sistemas.</li> <li>UD 2 - Instalaci\u00f3n y configuraci\u00f3n de sistemas operativos servidor privativos: Windows Server</li> <li>UD 3 - Centralizaci\u00f3n de la admninistraci\u00f3n: Gesti\u00f3n del dominio en Windows Server. Gesti\u00f3n de usuarios y grupos</li> <li>UD 4 - Gesti\u00f3n de recursos compartidos</li> <li>UD 5 - Directivas y otras configuraciones avanzadas</li> <li>UD 6 - Gesti\u00f3n avanzada del dominio en Windows Server</li> </ul> <p>Apuntes desarrollados por Sergio Rey Mart\u00ednez</p> <p>Licenciado bajo la Licencia Creative Commons Atribuci\u00f3n Compartir Igual 4.0</p>"},{"location":"01_1_introducci%C3%B3n/","title":"Introducci\u00f3n","text":"<p>Los sistemas operativos servidores, podemos definirlos c\u00f3mo aquellos que est\u00e1n pensados y creados para ser utilizados en m\u00e1quinas que realizar\u00e1n alguna tarea como servidor en la red.</p> Windows Admin Center <p>Una red de ordenadores o red inform\u00e1tica es un conjunto de equipos inform\u00e1ticos y software conectados entre s\u00ed por medio de dispositivos f\u00edsicos con el fin de compartir informaci\u00f3n, recursos y ofrecer servicios.</p> <p>Para crear una red de ordenadores se necesita un sistema operativo de red, que permite el interconexionado de ordenadores para poder acceder a sus servicios y recursos creando redes de ordenadores. En los sistemas operativos modernos (tanto GNU/Linux como Windows o Mac OS) el sistema operativo de red es parte del sistema operativo (tanto de los servidores como de los clientes).</p> <p>Las funcionalidades que tiene que tener un sistema operativo de red son:</p> <ul> <li>Interconectar los equipos y recursos de la red.</li> <li>Proporcionar seguridad, controlando el acceso a los datos y recursos.</li> <li>Coordinar las funciones de red con las propias del equipo.</li> <li>Compartir recursos.</li> <li>Monitorizar y gestionar la red y sus componentes.</li> </ul>"},{"location":"01_2_arquitectura_cliente_servidor/","title":"Arquitectura cliente/servidor","text":"<p>Seg\u00fan c\u00f3mo se relacionan entre s\u00ed los diferentes equipos miembros de una red tenemos 2 tipos de redes:</p> <ul> <li>Redes que utilizan el modelo entre iguales o \u201cpeer to peer\u201d. En este modelo todos los ordenadores de la red son iguales y no hay ninguno que se encargue de controlar o dirigir el resto. Arquitectura Peer To Peer (P2P)</li> </ul> Esquema red peer to peer <p>Redes que utilizan el modelo cliente/servidor - C/S. En este modelo uno (o m\u00e1s) de los ordenadores de la red es el ordenador principal o servidor que proporciona apoyo al resto de equipos de la red, llamados clientes. En este tipo de redes los clientes realizan peticiones al servidor que los da respuesta.</p> Arquitecturas: p2p vs server <p>Los sistemas operativos instalados en los ordenadores de los usuarios de la red (sistemas Windows 7, 8, 10, 11, Linux de escritorio...) tienen la posibilidad de conectarse a un grupo de trabajo (en ese caso trabajamos en una red \u201cpeer to peer\u201d) o a un dominio en este caso habr\u00e1 un servidor principal con un sistema operativo de servidor como Windows Server, Linux, etc.</p> <p>Cada opci\u00f3n tiene ventajas e inconvenientes que tendremos que valorar a la vez de elegir el tipo de sistema inform\u00e1tico a crear. La principal ventaja de una red \"peer to peer\" es su simplicidad pero este tambi\u00e9n es su principal inconveniente porque dificulta el control sobre el que sucede en la red y no permite una gesti\u00f3n centralizada de la misma el que la hace inviable en redes grandes.</p> <p>Los principales par\u00e1metros que nos har\u00e1n elegir un tipo de red u otro son:</p> <ul> <li>Nivel de seguridad: una red \u201cpeer to peer\u201d no permite el nivel de seguridad y el control sobre usuarios y recursos que permite un entorno con servidor.</li> <li>N\u00famero de usuarios: si tenemos pocos usuarios es m\u00e1s sencillo y m\u00e1s barato trabajar en una red peer to peer. Cuando crece el n\u00famero de usuarios una red entre iguales es muy dif\u00edcil de gestionar adecuadamente y es m\u00e1s pr\u00e1ctico utilizar el modelo cliente/servidor.</li> <li>N\u00famero de equipos clientes: es el mismo caso de los usuarios. Si son muy pocos puede ser \u00fatil una red \u201cpeer to peer\u201d, pero cuando crece su n\u00famero se tiene que ir a una soluci\u00f3n con uno o m\u00e1s servidores.</li> <li>Servicios a prestar: si los clientes solo necesitan compartir una conexi\u00f3n en Internet no tiene sentido crear una red con servidor. Seg\u00fan aumentan los servicios necesarios (compartici\u00f3n de ficheros, de impresoras, servicios de red, gesti\u00f3n centralizada de usuarios...) se necesitar\u00e1 uno o m\u00e1s servidores para proporcionar esos servicios.</li> </ul>"},{"location":"01_2_arquitectura_cliente_servidor/#red-clienteservidor","title":"Red cliente/servidor","text":"<p>La red cliente-servidor es una red de comunicaciones en la cual los clientes est\u00e1n conectados a un servidor, en el cual se centralizan los diversos recursos y aplicaciones con las que cuenta sistema, y que los pone a disposici\u00f3n de los clientes cada vez que estos son solicitados.</p> MODELO CLIENTE SERVIDOR - REDES"},{"location":"01_2_arquitectura_cliente_servidor/#componentes-de-arquitectura-clienteservidor","title":"Componentes de arquitectura cliente/servidor","text":"<p>Los componentes habituales de este tipo de redes son:</p> <ul> <li>Servidores: Son equipos con sistemas operativos en red que proporcionan recursos a los clientes, haci\u00e9ndolos accesibles a los equipos de la red, sea a otros servidores o, habitualmente, a clientes.</li> <li>Clientes: Son equipos con un sistema operativo mmonopuesto conectados para empezar a trabajar en red. A diferencia de los servidores, no comparten sus recursos.</li> <li>Dominio: Es una agrupaci\u00f3n l\u00f3gica de elementos de la red (equipos, usuarios, recursos compartidos) que permite realizar una gesti\u00f3n centralizada, es decir, desde una ubicaci\u00f3n se controla los servicios administrativos del dominio. Los recursos los gestiona el servidor principal. La separaci\u00f3n entre cliente y servidor es una separaci\u00f3n de tipo l\u00f3gico, donde el servidor no se ejecuta necesariamente sobre una sola m\u00e1quina ni es necesariamente un \u00fanico programa.</li> </ul>"},{"location":"01_2_arquitectura_cliente_servidor/#tipos-de-servidores","title":"Tipos de servidores","text":"<p>En este tipo de arquitectura el servidor es el ordenador que controla la red y permite compartir sus recursos con el resto de equipos. Hay muchos tipos de servidores:</p> <ul> <li>Servidor de archivos: permite que los usuarios puedan acceder a sus archivos y controla que un usuario tenga los permisos necesarios para acceder a un fichero</li> <li>Servidor de impresi\u00f3n: tiene una o m\u00e1s impresoras y permite que los usuarios autorizados podamos imprimir en ellas</li> <li>Servidor de comunicaciones: permite enlazar diferentes redes (por ejemplo nuestra red local con Internet)</li> <li>Servidor de correo: proporciona servicios de correo electr\u00f3nico en la red</li> <li>Servidor web: proporciona p\u00e1ginas web a los usuarios que acceden por medio de su navegador</li> <li>Servidor DHCP: proporciona direcciones IP a los equipos cliente para conectarse en la red</li> <li>Otras: servidores DNS, proxy, FTP, HTTP...</li> </ul> <p>Estos servicios pueden estar todos en un \u00fanico servidor o repartidos en diferentes servidores de la red. Si el n\u00famero de usuarios es muy grande es posible que el servidor est\u00e9 demasiado cargado de trabajo por lo cual es conveniente dividir los servicios que presta entre diferentes servidores de la red.</p> <p>Un servidor puede ser dedicado o no dedicado. Un servidor se llama que es dedicado si solo se utiliza como servidor y no como ordenador normal de trabajo. No es recomendable utilizar servidores no dedicados porque cualquier problema en su uso puede hacer que el ordenador dejo de funcionar y con \u00e9l la red entera.</p>"},{"location":"01_2_arquitectura_cliente_servidor/#ventajas-e-inconvenientes-de-redes-clienteservidor","title":"Ventajas e inconvenientes de redes Cliente/Servidor","text":"<p>Las redes cliente/servidor tienen ventajas sobre una red \"peer tono peer\" como:</p> <ul> <li>Centralizaci\u00f3n de la gesti\u00f3n: la gesti\u00f3n de toda la red y sus recursos se puede hacer desde el servidor el que facilita enormemente la tarea del administrador del sistema. Centralizaci\u00f3n del control: los accesos a recursos son controlados por el servidor, que hace m\u00e1s sencilla y segura su gesti\u00f3n.</li> <li>Escalabilidad: se puede aumentar la capacidad de clientes y servidores por separado. Cualquier elemento puede ser aumentado (o mejorado) en cualquier momento, o se pueden a\u00f1adir nuevos nodos en la red (clientes y/o servidores).</li> <li>F\u00e1cil mantenimiento: en poderse distribuir las funciones y responsabilidades entre varios servidores independientes, es posible reemplazar, reparar, actualizar, o incluso trasladar un servidor, y los clientes no se ver\u00e1n afectados por ese cambio (o solo m\u00ednimamente).</li> </ul> <p>Este tipo de arquitectura tambi\u00e9n tiene inconvenientes, como:</p> <ul> <li>Cuellos de botella: cuando una gran cantidad de clientes env\u00edan peticiones simult\u00e1neas al mismo servidor, pueden llegar a colapsarlo. Esto se puede solucionar dimensionando la red adecuadamente y utilizando los servidores necesarios.</li> <li>Robustez de la red: cuando un servidor est\u00e1 ca\u00eddo, las peticiones de los clientes no pueden ser satisfechas. En las redes P2P, los recursos est\u00e1n generalmente distribuidos en varios nodos de la red y aunque algunos caigan otros pueden continuar atendiendo las peticiones.</li> <li>El software y el hardware de un servidor tiene que ser espec\u00edfico: un hardware normal de un ordenador personal puede no ser suficiente para una determinada cantidad de clientes. El sistema operativo tiene que proporcionar los servicios necesarios el que lo encarece en el caso de sistemas privativos (una licencia de Windows Server es mucho m\u00e1s cara que una de Windows 10). Disponibilidad: El cliente no podr\u00e1 acceder a los datos ni a las impresoras ni posiblemente a Internet si el servidor no est\u00e1 disponible.</li> </ul> MODELO CLIENTE SERVIDOR"},{"location":"01_3_funciones_SO/","title":"Funciones de Sistemas Operativos en Red","text":"<p>El sistema operativo de red es el software encargado de coordinar y gestionar los recursos compartidos entre los equipos conectados a una red. Su prop\u00f3sito principal es garantizar que los dispositivos cliente puedan comunicarse, acceder a servicios comunes y trabajar de forma eficiente y segura. Entre sus funciones m\u00e1s relevantes destacan:</p> <ul> <li>Gesti\u00f3n de usuarios</li> <li>Gesti\u00f3n de la red</li> <li>Gesti\u00f3n de ficheros</li> <li>Compartici\u00f3n de recursos</li> </ul> Esquema de Funciones de un Sistema Operativos Servidor"},{"location":"01_3_funciones_SO/#gestion-de-usuarios","title":"Gesti\u00f3n de usuarios","text":"<p>El administrador de la red tiene la responsabilidad de definir qui\u00e9n puede acceder a qu\u00e9 recursos, y bajo qu\u00e9 condiciones. Esta gesti\u00f3n es esencial para mantener la seguridad, la organizaci\u00f3n y el buen funcionamiento del entorno de red.</p> <p>Funciones principales:</p> <ul> <li>Crear y eliminar usuarios y grupos: Permite organizar a los usuarios seg\u00fan departamentos, roles o niveles de acceso.</li> <li>Asignar permisos: Define qu\u00e9 acciones puede realizar cada usuario (leer, escribir, modificar, eliminar) sobre recursos como carpetas, impresoras o aplicaciones.</li> <li>Establecer pol\u00edticas de acceso: Incluye restricciones como horarios de conexi\u00f3n, dispositivos autorizados, ubicaci\u00f3n geogr\u00e1fica, etc.</li> <li>Autenticaci\u00f3n y autorizaci\u00f3n: Verifica la identidad del usuario y determina si tiene permiso para realizar una acci\u00f3n espec\u00edfica.</li> </ul> <p>Ejemplo</p> <p>Un usuario del departamento de contabilidad puede tener acceso de lectura y escritura a los informes financieros, mientras que uno del departamento de marketing solo puede verlos.</p>"},{"location":"01_3_funciones_SO/#gestion-de-la-red","title":"Gesti\u00f3n de la red","text":"<p>La administraci\u00f3n centralizada de la red permite supervisar su rendimiento, detectar fallos y aplicar mejoras. El sistema operativo de red facilita esta tarea mediante herramientas y servicios integrados.</p> <p>Incluye:</p> <ul> <li>Servicios de comunicaci\u00f3n: Protocolos como TCP/IP, que permiten la transmisi\u00f3n de datos entre dispositivos.</li> <li>DHCP (Dynamic Host Configuration Protocol): Asigna direcciones IP autom\u00e1ticamente a los equipos conectados.</li> <li>DNS (Domain Name System): Traduce nombres de dominio en direcciones IP, facilitando la navegaci\u00f3n y el acceso a servicios.</li> <li>Monitorizaci\u00f3n del tr\u00e1fico: Detecta congestiones, ca\u00eddas de servicio o intentos de acceso no autorizado.</li> <li>Actualizaciones y mantenimiento remoto: Permite aplicar parches de seguridad o configurar dispositivos sin intervenci\u00f3n f\u00edsica.</li> </ul> <p>Ejemplo</p> <p>Si un servidor presenta una sobrecarga, el administrador puede redistribuir el tr\u00e1fico o ampliar los recursos desde la consola de gesti\u00f3n.</p>"},{"location":"01_3_funciones_SO/#gestion-de-ficheros","title":"Gesti\u00f3n de ficheros","text":"<p>En un entorno de red, m\u00faltiples usuarios pueden necesitar acceder a los mismos archivos simult\u00e1neamente. El sistema operativo de red se encarga de coordinar este acceso para evitar conflictos o p\u00e9rdida de datos.</p> <p>Funciones clave:</p> <ul> <li>Control de concurrencia: Impide que dos usuarios modifiquen el mismo archivo al mismo tiempo.</li> <li>Bloqueo de registros: Permite bloquear partes espec\u00edficas de un archivo mientras se editan.</li> <li>Versionado de archivos: Guarda diferentes versiones para evitar sobrescrituras accidentales.</li> <li>Auditor\u00eda de accesos: Registra qui\u00e9n accede, modifica o elimina cada archivo.</li> </ul> <p>Ejemplo</p> <p>En una empresa, varios empleados pueden consultar una hoja de c\u00e1lculo compartida, pero solo uno puede editarla a la vez.</p>"},{"location":"01_3_funciones_SO/#comparticion-de-recursos","title":"Compartici\u00f3n de recursos","text":"<p>Una de las funciones m\u00e1s esenciales del sistema operativo de red es permitir que los recursos f\u00edsicos y digitales se compartan de forma segura y eficiente entre los usuarios autorizados.</p> <p>Recursos compartidos t\u00edpicos:</p> <ul> <li>Impresoras</li> <li>Unidades de almacenamiento</li> <li>Aplicaciones empresariales</li> <li>Conexiones a internet</li> </ul> <p>Caracter\u00edsticas importantes:</p> <ul> <li>Gesti\u00f3n de colas de impresi\u00f3n: Coordina m\u00faltiples solicitudes de impresi\u00f3n para evitar conflictos.</li> <li>Asignaci\u00f3n de cuotas: Limita el uso de recursos como espacio en disco o n\u00famero de impresiones.</li> <li>Acceso por niveles: Permite definir distintos niveles de privilegio seg\u00fan el usuario o grupo.</li> </ul> <p>Ejemplo</p> <p>Si tres usuarios env\u00edan documentos a la misma impresora, el sistema organiza la cola de impresi\u00f3n seg\u00fan prioridad o orden de llegada.*</p>"},{"location":"01_4_sistemas_operativos_servidor/","title":"Principales sistemas operativos servidor","text":"<p>Veamos los sistemas operativos que pueden ser utilizados como servidores. Tenemos dos grupos, los privativos on Microsoft Windows Server y los diferentes servidores derivados de las distribuciones GNU/Linux</p>"},{"location":"01_4_sistemas_operativos_servidor/#servidores-windows-server","title":"Servidores Windows Server","text":"<p>Microsoft comenz\u00f3 desarrollando sistemas operativos monousuario como MS-DOS y Windows 95, pero en los a\u00f1os 90 lanz\u00f3 su primer sistema operativo de red: Windows NT, dise\u00f1ado para competir con Unix y Novell NetWare, que dominaban el mercado en ese momento.</p> Windows Server"},{"location":"01_4_sistemas_operativos_servidor/#evolucion-de-windows-server","title":"Evoluci\u00f3n de Windows Server","text":"<p>Desde Windows NT, Microsoft ha lanzado m\u00faltiples versiones orientadas a servidores:</p> Versi\u00f3n A\u00f1o de lanzamiento Caracter\u00edsticas destacadas Windows Server 2000 2000 Primer con Active Directory Windows Server 2003 2003 Mejoras en seguridad y rendimiento Windows Server 2008 / R2 2008 / 2009 Virtualizaci\u00f3n con Hyper-V Windows Server 2012 2012 Interfaz Metro, integraci\u00f3n con la nube Windows Server 2016 2016 Contenedores, Nano Server Windows Server 2019 2018 Seguridad avanzada, integraci\u00f3n h\u00edbrida Windows Server 2022 2021 Rendimiento mejorado, seguridad multicapa Windows Server 2025 2024 IA, Zero Trust, SMB sobre QUIC, interfaz estilo Windows 11"},{"location":"01_4_sistemas_operativos_servidor/#novedades-recientes","title":"Novedades recientes","text":""},{"location":"01_4_sistemas_operativos_servidor/#windows-server-2022","title":"Windows Server 2022","text":"<ul> <li>Seguridad multicapa con Credential Guard y cifrado de datos </li> <li>Mejoras en virtualizaci\u00f3n y compatibilidad con Azure </li> <li>Nuevas ediciones: Standard, Datacenter, Essentials y Azure Edition</li> </ul>"},{"location":"01_4_sistemas_operativos_servidor/#windows-server-2025","title":"Windows Server 2025","text":"<ul> <li>Integraci\u00f3n con inteligencia artificial y almacenamiento NVMe de alta velocidad  </li> <li>Modelo Zero Trust para proteger datos y usuarios en entornos complejos  </li> <li>SMB sobre QUIC para transferencias seguras de archivos por Internet  </li> <li>Interfaz renovada con estilo Windows 11, soporte para Bluetooth, Wi-Fi y WinGet </li> <li>Herramienta nativa DTrace para an\u00e1lisis en tiempo real</li> </ul> <p>Amplia tu informaci\u00f3n en internet sobre Window Server: Windows Server: todo lo que necesitas saber Amplia tu informaci\u00f3n sobre las novedades de Windows Server 2025</p>"},{"location":"01_4_sistemas_operativos_servidor/#modelo-de-dominio-en-windows-server","title":"Modelo de dominio en Windows Server","text":"<p>Windows Server utiliza un modelo de dominio, que agrupa equipos cliente y servidor bajo una pol\u00edtica de seguridad com\u00fan y una base de datos centralizada llamada Active Directory.</p> Modelo de dominio en Windows Server"},{"location":"01_4_sistemas_operativos_servidor/#tipos-de-servidores-en-el-dominio","title":"Tipos de servidores en el dominio","text":"<ol> <li> <p>Controladores de dominio </p> <ul> <li>Gestionan el Directorio Activo  </li> <li>Controlan usuarios, equipos y pol\u00edticas de seguridad</li> </ul> </li> <li> <p>Servidores de servicios </p> <ul> <li>Ofrecen funciones espec\u00edficas como impresi\u00f3n, almacenamiento o aplicaciones  </li> <li>Pueden coexistir con los controladores de dominio o ser independientes</li> </ul> </li> </ol>"},{"location":"01_4_sistemas_operativos_servidor/#coste-de-licencias","title":"Coste de licencias","text":"<p>El uso de Windows Server implica dos tipos de licencias:</p> <ul> <li>Licencia del servidor: seg\u00fan el tipo de procesador y edici\u00f3n (Standard o Datacenter)  </li> <li>Licencias CAL (Client Access License): necesarias para cada usuario o dispositivo que acceda al servidor simult\u00e1neamente</li> </ul> <p>CAL</p> <p>CAL = Client Access License</p>"},{"location":"01_4_sistemas_operativos_servidor/#ediciones-de-microsoft-windows-11-para-equipos-cliente","title":"Ediciones de Microsoft Windows (11) para equipos cliente.","text":"<p>Windows 11 est\u00e1 disponible en varias ediciones dise\u00f1adas para distintos tipos de usuarios y entornos, desde uso dom\u00e9stico hasta grandes organizaciones. Aqu\u00ed tienes un resumen actualizado de las principales versiones de Windows 11 y sus caracter\u00edsticas clave:</p>"},{"location":"01_4_sistemas_operativos_servidor/#ediciones-principales-de-windows-11","title":"Ediciones principales de Windows 11","text":"Versi\u00f3n P\u00fablico objetivo Caracter\u00edsticas destacadas Windows 11 Home Usuarios dom\u00e9sticos Interfaz moderna, apps b\u00e1sicas, sin uni\u00f3n a dominio Windows 11 Pro Profesionales y PYMEs Uni\u00f3n a dominio, BitLocker, Hyper-V, pol\u00edticas de grupo Windows 11 Enterprise Grandes empresas Seguridad avanzada, control granular, AppLocker, DirectAccess Windows 11 Education Centros educativos Similar a Enterprise, adaptado a entornos acad\u00e9micos Windows 11 SE Educaci\u00f3n b\u00e1sica (equipos low-cost) Simplificado, optimizado para dispositivos con pocos recursos Windows 11 Pro for Workstations Estaciones de trabajo Soporte para hardware avanzado, sistema de archivos ReFS, memoria persistente Windows 11 IoT Enterprise Dispositivos industriales Personalizaci\u00f3n profunda, soporte extendido, sin interfaz gr\u00e1fica por defecto <p>Versiones por actualizaci\u00f3n</p> <p>Microsoft publica actualizaciones anuales con mejoras de seguridad y nuevas funciones. Las m\u00e1s recientes son:</p> <ul> <li>Windows 11 24H2 (octubre 2024): versi\u00f3n estable actual, con soporte hasta 2026 para ediciones Home y Pro, y hasta 2027 para Enterprise y Education.</li> <li>Windows 11 25H2 (prevista para finales de 2025): actualmente en vista previa, incluye mejoras menores, eliminaci\u00f3n de herramientas obsoletas como PowerShell 2.0 y WMIC, y m\u00e1s control sobre apps preinstaladas.</li> </ul>"},{"location":"01_4_sistemas_operativos_servidor/#caracteristicas-principales-ediciones-principales-de-windows-11","title":"Caracter\u00edsticas principales ediciones principales de Windows 11","text":"<p>Windows 11 se distribuye en distintas ediciones, cada una dise\u00f1ada para un tipo de usuario o entorno. En contextos empresariales, especialmente cuando se trabaja con redes gestionadas mediante dominios, no todas las ediciones son v\u00e1lidas. A continuaci\u00f3n se explican las principales licencias disponibles y cu\u00e1les son aptas para entornos corporativos.</p>"},{"location":"01_4_sistemas_operativos_servidor/#windows-11-home","title":"Windows 11 Home","text":"<ul> <li>Pensada para uso dom\u00e9stico.</li> <li>Incluye funciones b\u00e1sicas como Microsoft Store, Cortana, y sincronizaci\u00f3n con OneDrive.</li> <li>Limitaciones importantes:<ul> <li>No permite unirse a un dominio de Active Directory.</li> <li>No incluye herramientas de administraci\u00f3n como pol\u00edticas de grupo (Group Policy).</li> <li>No tiene soporte para Hyper-V ni BitLocker completo.</li> </ul> </li> </ul>"},{"location":"01_4_sistemas_operativos_servidor/#windows-11-pro","title":"Windows 11 Pro","text":"<ul> <li>Dirigida a profesionales y peque\u00f1as empresas.</li> <li>Incluye todas las funciones de la edici\u00f3n Home, adem\u00e1s de:<ul> <li>Uni\u00f3n a dominios locales (Active Directory) y en la nube (Azure AD)</li> <li>BitLocker para cifrado de disco</li> <li>Hyper-V para virtualizaci\u00f3n</li> <li>Pol\u00edticas de grupo</li> <li>Escritorio remoto como host</li> <li>Windows Update for Business</li> </ul> </li> </ul>"},{"location":"01_4_sistemas_operativos_servidor/#windows-11-enterprise","title":"Windows 11 Enterprise","text":"<ul> <li>Pensada para grandes organizaciones.</li> <li>Se distribuye mediante licencias por volumen o suscripciones (Microsoft 365 E3/E5).</li> <li>Incluye todo lo de la edici\u00f3n Pro, m\u00e1s:<ul> <li>Seguridad avanzada (Credential Guard, AppLocker, Windows Defender Application Control)</li> <li>Control granular de dispositivos y aplicaciones</li> <li>DirectAccess y gesti\u00f3n remota avanzada</li> <li>Integraci\u00f3n con herramientas de virtualizaci\u00f3n y administraci\u00f3n centralizada</li> </ul> </li> </ul>"},{"location":"01_4_sistemas_operativos_servidor/#comparativa-rapida","title":"Comparativa r\u00e1pida","text":"Edici\u00f3n Uso recomendado \u00bfPuede unirse a dominio? Caracter\u00edsticas clave Windows 11 Home Uso dom\u00e9stico \u274c No B\u00e1sico, sin gesti\u00f3n centralizada Windows 11 Pro PYMEs y profesionales \u2705 S\u00ed BitLocker, pol\u00edticas de grupo, Hyper-V Windows 11 Enterprise Empresas grandes \u2705 S\u00ed Seguridad avanzada, control granular <p>Windows Home no sirve en entornos empresariales</p> <p>Las redes empresariales suelen estar basadas en dominios, gestionados por servidores con Active Directory. Esto permite:</p> <ul> <li>Autenticaci\u00f3n centralizada de usuarios</li> <li>Aplicaci\u00f3n de pol\u00edticas de seguridad</li> <li>Control de acceso a recursos compartidos</li> <li>Administraci\u00f3n remota de equipos</li> </ul> <p>La edici\u00f3n Home no incluye el cliente de dominio ni las herramientas necesarias para integrarse en este tipo de redes. Por tanto, solo las ediciones Pro y Enterprise permiten que un equipo se una a un dominio y sea gestionado de forma centralizada.</p>"},{"location":"01_4_sistemas_operativos_servidor/#sistemas-operativos-de-red-linux","title":"Sistemas Operativos de Red Linux","text":"<p>GNU/Linux es un sistema operativo robusto y vers\u00e1til, dise\u00f1ado para entornos multiusuario y multiprocesador. Ofrece soporte para tecnolog\u00edas como RAID, virtualizaci\u00f3n, infraestructura de red, servidores web, y destaca por su alta seguridad y compatibilidad multiplataforma. Es la principal alternativa a los sistemas operativos de Microsoft, tanto en equipos cliente como en servidores.</p>"},{"location":"01_4_sistemas_operativos_servidor/#origen-y-arquitectura","title":"Origen y arquitectura","text":"<p>Linux est\u00e1 basado en Unix, el sistema operativo que domin\u00f3 el mundo de los servidores desde los a\u00f1os 70. De \u00e9l hereda su fiabilidad, eficiencia y estructura modular. Adem\u00e1s, es multiplataforma, con versiones disponibles para arquitecturas como:</p> <ul> <li>Intel / AMD (x86, x86_64)</li> <li>ARM (usado en servidores y dispositivos IoT)</li> <li>PowerPC</li> <li>Alpha</li> <li>SPARC (Sun Microsystems)</li> </ul>"},{"location":"01_4_sistemas_operativos_servidor/#software-libre-y-distribuciones","title":"Software libre y distribuciones","text":"<p>GNU/Linux se distribuye bajo la licencia GPL (General Public License), lo que permite a cualquier usuario:</p> <ul> <li>Descargarlo libremente</li> <li>Modificar su c\u00f3digo fuente</li> <li>Redistribuir versiones personalizadas</li> </ul> <p>Esto ha dado lugar a cientos de variantes conocidas como distribuciones, que son conjuntos organizados de software (kernel + herramientas + entorno) listos para instalar.</p>"},{"location":"01_4_sistemas_operativos_servidor/#cliente-y-servidor-misma-base-distinto-proposito","title":"Cliente y servidor: misma base, distinto prop\u00f3sito","text":"<p>Todas las versiones de Linux comparten el mismo n\u00facleo (kernel), lo que permite que cualquier distribuci\u00f3n pueda funcionar como cliente o como servidor. La diferencia radica en los servicios y aplicaciones instaladas.</p> <p>Adem\u00e1s, Linux puede funcionar sin entorno gr\u00e1fico, lo que es habitual en servidores por razones de:</p> <ul> <li>Eficiencia (menos consumo de recursos)</li> <li>Seguridad (menos superficie de ataque)</li> </ul> <p>Ejemplo: Ubuntu</p> <p>Ubuntu ofrece dos versiones: - Ubuntu Desktop (cliente, con entorno gr\u00e1fico) - Ubuntu Server (servidor, sin entorno gr\u00e1fico por defecto)</p>"},{"location":"01_4_sistemas_operativos_servidor/#distribuciones-mas-utilizadas-en-servidores","title":"Distribuciones m\u00e1s utilizadas en servidores","text":""},{"location":"01_4_sistemas_operativos_servidor/#distribuciones-comerciales-de-pago","title":"Distribuciones comerciales (de pago)","text":"Distribuci\u00f3n Empresa Caracter\u00edsticas Red Hat Enterprise Linux (RHEL) Red Hat Licencia comercial, soporte profesional, estabilidad empresarial SUSE Linux Enterprise Server (SLES) SUSE Ciclos largos de soporte, mantenimiento garantizado, ideal para entornos cr\u00edticos"},{"location":"01_4_sistemas_operativos_servidor/#distribuciones-libres-gratuitas","title":"Distribuciones libres (gratuitas)","text":"Distribuci\u00f3n Mantenida por Caracter\u00edsticas Debian Comunidad Estable, sin dependencia empresarial, base de muchas otras distros Ubuntu Server Canonical Ltd. F\u00e1cil de usar, gran comunidad, basada en Debian CentOS / AlmaLinux / Rocky Linux Comunidad Derivadas de RHEL, ideales para servidores sin coste de licencia <p>Nota</p> <p>CentOS ha cambiado su enfoque desde 2021. Las alternativas actuales como AlmaLinux y Rocky Linux contin\u00faan su legado como forks comunitarios de RHEL.*</p>"},{"location":"01_4_sistemas_operativos_servidor/#guia-comparativa-de-distribuciones-gnulinux-para-servidores","title":"Gu\u00eda comparativa de distribuciones GNU/Linux para servidores","text":"Distribuci\u00f3n Tipo de licencia Mantenida por Soporte t\u00e9cnico Uso recomendado Comunidad activa Debian Libre (GPL) Comunidad No oficial Servidores estables y seguros \u2705 Muy activa Ubuntu Server Libre (GPL) Canonical Ltd. Opcional (de pago) F\u00e1cil de usar, entornos mixtos \u2705 Muy activa Red Hat Enterprise Linux Comercial Red Hat (IBM) Oficial (de pago) Empresas, entornos cr\u00edticos \u2705 Muy activa CentOS (legacy) Libre (GPL) Comunidad (basado en RHEL) No oficial Servidores sin coste de licencia \u26a0\ufe0f Discontinuado AlmaLinux Libre (GPL) AlmaLinux Foundation Opcional (de pago) Sustituto de CentOS \u2705 Activa Rocky Linux Libre (GPL) Rocky Enterprise Software Foundation Opcional (de pago) Sustituto de CentOS \u2705 Activa SUSE Linux Enterprise Server Comercial SUSE Oficial (de pago) Infraestructura empresarial \u2705 Activa <p>Notas clave</p> <ul> <li>Debian es ideal para quienes buscan estabilidad y control total sin depender de empresas.</li> <li>Ubuntu Server es muy popular por su facilidad de uso y compatibilidad con servicios modernos.</li> <li>RHEL y SUSE ofrecen soporte profesional, ideal para empresas que requieren mantenimiento garantizado.</li> <li>CentOS ha sido reemplazado por AlmaLinux y Rocky Linux, que mantienen su filosof\u00eda libre y comunitaria.</li> </ul>"},{"location":"01_4_sistemas_operativos_servidor/#redes-mixtas-interoperabilidad-linuxwindows","title":"Redes mixtas: interoperabilidad Linux\u2013Windows","text":"<p>En el pasado, era com\u00fan que las redes empresariales usaran Windows tanto en clientes (XP, 7, 10) como en servidores (Windows Server). Sin embargo, muchas organizaciones han adoptado Linux en todos sus equipos por razones de coste, seguridad y flexibilidad.</p> Redes Mixtas <p>Hoy en d\u00eda, es habitual encontrar redes mixtas, donde conviven equipos con Windows y Linux. Esto no representa ning\u00fan problema gracias a:</p> <ul> <li>Compatibilidad con protocolos est\u00e1ndar (SMB, NFS, LDAP, etc.)</li> <li>Herramientas de interoperabilidad como Samba, Kerberos, y OpenSSH</li> <li>Windows Subsystem for Linux (WSL) en Windows 10/11, que permite ejecutar Linux directamente en Windows</li> </ul> <p>Note</p> <p>La interoperabilidad entre sistemas es cada vez m\u00e1s fluida, permitiendo entornos h\u00edbridos sin fricciones.</p>"},{"location":"01_5_recordatorio_red/","title":"Repaso conceptos de red","text":""},{"location":"01_5_recordatorio_red/#concepto-red-local-lan","title":"Concepto red local (LAN)","text":"<p>Una red local (Local Area Network) es un conjunto de dispositivos interconectados dentro de un \u00e1rea f\u00edsica limitada, como una oficina, un aula, un laboratorio o un edificio. Su prop\u00f3sito principal es permitir que los equipos compartan recursos (archivos, impresoras, conexi\u00f3n a Internet) y se comuniquen entre s\u00ed de forma r\u00e1pida y segura.</p> <p>En una LAN, todos los dispositivos (ordenadores, impresoras, servidores, etc.) est\u00e1n conectados mediante cables Ethernet o redes Wi-Fi, y forman parte de un mismo esquema de direccionamiento IP.</p> <p>Para que esta comunicaci\u00f3n sea posible, cada dispositivo debe tener correctamente configurados los siguientes par\u00e1metros:</p> Configuraci\u00f3n IPv4 equipo Windows <p>Recordemos qu\u00e9 es lo que significa cada uno de estos elementos.</p>"},{"location":"01_5_recordatorio_red/#direccion-ip","title":"Direcci\u00f3n IP","text":"<p>La direcci\u00f3n IP (Internet Protocol) es un identificador \u00fanico que se asigna a cada dispositivo dentro de la red. Es como el n\u00famero de matr\u00edcula de un coche: permite saber qui\u00e9n es qui\u00e9n en la red.</p> <p>En redes locales, se suelen usar direcciones IP privadas, que no son accesibles desde Internet. Algunos rangos t\u00edpicos de IP privadas son:</p> <ul> <li>Para redes de tipo A: <code>10.0.0.0</code> a <code>10.255.255.255</code></li> <li>Para redes de tipo B: <code>172.16.0.0</code> a <code>172.31.255.255</code></li> <li>Para redes de tipo C: <code>192.168.0.0</code> a <code>192.168.255.255</code></li> </ul> <p>Example</p> <p>Un ordenador puede tener la IP <code>192.168.1.10</code>, mientras otro tiene <code>192.168.1.11</code>.</p> <p>M\u00e1s informaci\u00f3n: \u00bfQu\u00e9 es una direcci\u00f3n IP?</p>"},{"location":"01_5_recordatorio_red/#mascara-de-subred","title":"M\u00e1scara de subred","text":"<p>La m\u00e1scara de subred determina qu\u00e9 parte de la direcci\u00f3n IP identifica la red y qu\u00e9 parte identifica al dispositivo dentro de esa red. Sirve para delimitar el tama\u00f1o de la red y saber qu\u00e9 dispositivos pueden comunicarse directamente entre s\u00ed.</p> <p>La m\u00e1scara m\u00e1s com\u00fan en redes peque\u00f1as es:</p> <ul> <li><code>255.255.255.0</code> \u2192 permite hasta 254 dispositivos en la misma red</li> </ul> <p>Example</p> <p>Si dos equipos tienen IPs <code>192.168.1.10</code> y <code>192.168.1.20</code> con m\u00e1scara <code>255.255.255.0</code>, est\u00e1n en la misma red y pueden comunicarse directamente.</p> <p>M\u00e1s informaci\u00f3n: M\u00e1scara de subred: concepto y ejemplos</p>"},{"location":"01_5_recordatorio_red/#puerta-de-enlace","title":"Puerta de enlace","text":"<p>La puerta de enlace (gateway) es el dispositivo que conecta la red local con otras redes, como Internet. Normalmente, es el router.</p> <p>Todos los equipos de la red deben tener configurada la misma puerta de enlace para poder salir de la red local.</p> <p>Example</p> <p>Si el router tiene la IP <code>192.168.1.1</code>, esa ser\u00e1 la puerta de enlace para todos los dispositivos.</p> <p>Todo esto quiere decir que si un equipo no queremos que se conecte a internet o a otras redes que se encuentren fuera del alcance definido por su m\u00e1scara, entonces simplemente dejamos la puerta de enlace en blanco.</p> <p>Tip</p> <p>Los equipos destinados a producci\u00f3n que no queremos que accedan a internet para evitar cualquier tipo de malware, los dejamos sin GW.</p> <p>M\u00e1s informaci\u00f3n: Puerta de enlace predeterminada</p>"},{"location":"01_5_recordatorio_red/#servidor-dns","title":"Servidor DNS","text":"<p>El DNS (Domain Name System) es el sistema que traduce nombres de dominio (como <code>www.google.com</code>) en direcciones IP que los equipos pueden entender.</p> <p>Sin DNS, los usuarios tendr\u00edan que recordar y escribir direcciones IP para acceder a p\u00e1ginas web, lo cual no es pr\u00e1ctico.</p> <p>En redes locales, se puede usar:</p> <ul> <li>Un DNS p\u00fablico (como <code>8.8.8.8</code> de Google)</li> <li>Un DNS interno (si hay un servidor de dominio)</li> </ul> <p>Importante</p> <p>Debemos tener claro quien es el DNS de nuestro sistemas, ya que no es lo mismo traducir nombres asociados a internet que traducir nombres asociados a un dominio. Si tengo el nombre de un equipo y quiero obtener cual es su direcci\u00f3n IP, entonces el servidor DNS ser\u00e1 el servidor de la red, ya que por ejemplo el servidor de google, no sabr\u00e1 quien es ese equipo.</p> <p>De la misma forma, debemos saber que cuando ponemos como DNS nuestro router, este tiene configurado un DNS internamente, normalmente proporcionado por el IPS ( Internet Service Provider )</p> <p>M\u00e1s informaci\u00f3n: Qu\u00e9 es el DNS y c\u00f3mo funciona</p>"},{"location":"01_5_recordatorio_red/#configuracion-basica-de-red-local","title":"Configuraci\u00f3n b\u00e1sica de red local","text":"<p>Vamos a ver ejemplos de c\u00f3mo se configura un equipo, para ello veremos la diferencia que hay al configurar un equipo dentro de una red local domestica y un equipo que se encuentra dentro de una red local controlada por un dominio.</p>"},{"location":"01_5_recordatorio_red/#red-local-domestica-sin-dominio","title":"Red local domestica (sin dominio)","text":"<p>Cuando no hay un dominio, cada equipo se gestiona de forma independiente. La red puede funcionar con IPs est\u00e1ticas o din\u00e1micas (DHCP), pero no hay control centralizado de usuarios ni pol\u00edticas.</p> <p>Ejemplo de configuraci\u00f3n manual:</p> Par\u00e1metro Valor ejemplo Explicaci\u00f3n IP <code>192.168.1.10</code> Direcci\u00f3n \u00fanica para cada equipo M\u00e1scara de subred <code>255.255.255.0</code> Define qu\u00e9 IPs est\u00e1n en la misma red Puerta de enlace <code>192.168.1.1</code> IP del router que conecta con Internet DNS <code>8.8.8.8</code> Servidor que traduce nombres de dominio (Google DNS, por ejemplo) <p>Note</p> <p>En este caso, cada equipo se configura manualmente o por DHCP del router, y los usuarios se gestionan localmente en cada m\u00e1quina.</p>"},{"location":"01_5_recordatorio_red/#red-local-dentro-de-un-dominio","title":"Red local dentro de un dominio","text":"<p>Cuando la red est\u00e1 dentro de un dominio, hay un servidor central (Controlador de Dominio) que gestiona usuarios, equipos y recursos. Este servidor usa Active Directory para organizar todo.</p> <p>Ejemplo de configuraci\u00f3n en red con dominio:</p> Par\u00e1metro Valor ejemplo Explicaci\u00f3n IP <code>192.168.1.50</code> IP \u00fanica para cada equipo M\u00e1scara de subred <code>255.255.255.0</code> Igual que en red sin dominio Puerta de enlace <code>192.168.1.x</code> IP del que enruta a otras redes DNS <code>192.168.1.x</code> IP del servidor de dominio (resuelve nombres internos como <code>equipo01.local</code>)"},{"location":"01_5_recordatorio_red/#creacion-de-un-diagrama-de-red-local","title":"Creaci\u00f3n de un d\u00edagrama de red local","text":"<p>Una vez comprendidos los conceptos fundamentales de redes (IP, m\u00e1scara de subred, puerta de enlace, DNS...), es momento de aplicar ese conocimiento en un caso pr\u00e1ctico: el dise\u00f1o de una red local para unas oficinas.</p>"},{"location":"01_5_recordatorio_red/#elementos-basicos-de-un-diagrama-de-red","title":"Elementos b\u00e1sicos de un diagrama de red","text":"<p>El objetivo es crear un diagrama de red que refleje c\u00f3mo se conectan los distintos dispositivos de una oficina. Este diagrama debe incluir:</p> <ul> <li>Equipos cliente (ordenadores, impresoras, etc.)</li> <li>Switches y routers</li> <li>Servidor (si lo hay)</li> <li>Conexi\u00f3n a Internet</li> </ul> <p>Cada dispositivo debe estar identificado con:</p> <ul> <li>Direcci\u00f3n IP</li> <li>M\u00e1scara de subred</li> <li>Puerta de enlace (Gateway)</li> <li>Servidor DNS</li> </ul> <p>Tip</p> <p>Es buena pr\u00e1ctica reservar rangos para cada tipo de departamento. Por ejemplo, del <code>.1</code> al <code>.20</code> para infraestructura, del <code>.50</code> al <code>.60</code> para PCs de un departamento... , y del <code>.200</code> en adelante para perif\u00e9ricos.</p>"},{"location":"01_5_recordatorio_red/#herramientas-y-recomendaciones-de-uso","title":"Herramientas y recomendaciones de uso.","text":"<p>Puedes usar herramientas como draw.io, Lucidchart, o incluso papel y l\u00e1piz. Lo importante es que el diagrama sea claro y represente:</p> <ul> <li>Las conexiones f\u00edsicas (cables entre router, switch y equipos)</li> <li>Todos los datos de direcciones IP asignadas</li> <li>El nombre del dispositivo</li> <li>Su agrupaci\u00f3n l\u00f3gica</li> </ul> <p>Recomendaciones para el diagrama</p> <ul> <li>Usa \u00edconos o formas distintas para cada tipo de dispositivo.</li> <li>A\u00f1ade etiquetas con la IP y el nombre del equipo.</li> <li>Indica claramente qu\u00e9 dispositivo act\u00faa como puerta de enlace.</li> <li>Si hay servidores DNS internos, se\u00f1\u00e1lalos.</li> </ul> <p>Mas informaci\u00f3n: Qu\u00e9 es un Diagrama de Red y C\u00f3mo Hacer uno para Visualizar tu Infraestructura</p>"},{"location":"02_1_instalacion_SO_introduccion/","title":"Introducci\u00f3n","text":"<p>Introducci\u00f3n a la Instalaci\u00f3n de sistemas operativos de servidor privativos. Administraci\u00f3n de Dominios en Windows Server</p>"},{"location":"02_1_instalacion_SO_introduccion/#objetivos-de-la-unidad","title":"Objetivos de la unidad","text":"<p>Los objetivos a conseguir en esta unidad son:</p> <ul> <li>Implementar dominios  </li> <li>Administrar cuentas de usuario y cuentas de equipo  </li> <li>Organizar los objetos del dominio para facilitar su administraci\u00f3n  </li> <li>Utilizar m\u00e1quinas virtuales para administrar dominios y verificar su funcionamiento  </li> <li>Incorporar equipos al dominio  </li> <li>Bloquear accesos no autorizados al dominio  </li> <li>Hacer cumplir los requerimientos de seguridad  </li> <li>Documentar la estructura del dominio, las tareas realizadas y las incidencias producidas  </li> </ul>"},{"location":"02_1_instalacion_SO_introduccion/#conceptos-clave","title":"Conceptos clave","text":"<p>Los conceptos m\u00e1s importantes que se abordar\u00e1n en esta unidad son:</p> <ul> <li>La red inform\u00e1tica  </li> <li>Arquitectura cliente/servidor  </li> <li>Principales sistemas operativos de servidor  </li> <li>Instalar y configurar Windows Server  </li> <li>El dominio en Windows  </li> <li>Documentar el proceso  </li> </ul>"},{"location":"02_1_instalacion_SO_introduccion/#conocimiento-previo","title":"Conocimiento previo","text":"<p>Antes de comenzar esta unidad, el alumno deber\u00eda tener conocimientos sobre:</p> <ul> <li>Cu\u00e1les son los sistemas operativos de servidor m\u00e1s utilizados en la arquitectura PC  </li> <li>C\u00f3mo utilizar software de virtualizaci\u00f3n para crear m\u00e1quinas virtuales  </li> <li>Gestionar unidades de almacenamiento y sus particiones  </li> <li>Qu\u00e9 son los sistemas de archivos utilizados por los sistemas Microsoft y sus ventajas e inconvenientes  </li> <li>C\u00f3mo asignar permisos a ficheros y carpetas en sistemas de archivos NTFS  </li> <li>C\u00f3mo utilizar la terminal para realizar tareas b\u00e1sicas en una m\u00e1quina  </li> </ul>"},{"location":"02_2_instalacion_windows_server/","title":"Instalaci\u00f3n de Windows Server","text":"<p>El sistema operativo (SO) es el componente esencial que permite que el hardware de un equipo funcione correctamente y que el usuario pueda interactuar con \u00e9l. La elecci\u00f3n del sistema operativo influye directamente en:</p> <ul> <li>La compatibilidad con el software disponible  </li> <li>El rendimiento y aprovechamiento del hardware </li> <li>La experiencia de usuario y las funcionalidades accesibles  </li> <li>La seguridad y la estabilidad del sistema</li> </ul> <p>Example</p> <p>Ejemplo: Un sistema operativo ligero como Linux puede aprovechar mejor recursos limitados, mientras que Windows ofrece mayor compatibilidad con software comercial.</p>"},{"location":"02_2_instalacion_windows_server/#eleccion-del-sistema-operativo","title":"Elecci\u00f3n del sistema operativo","text":"<p>Cambiar de sistema operativo no es una tarea trivial. Implica:</p> <ul> <li>Instalar el nuevo sistema  </li> <li>Configurar el entorno y los servicios  </li> <li>Instalar y adaptar el software necesario  </li> <li>Migrar datos y perfiles de usuario  </li> <li>Verificar compatibilidad con perif\u00e9ricos y redes</li> </ul> <p>Por ello, es crucial elegir el sistema operativo que mejor se adapte a las necesidades del usuario o del entorno, ya sea en un equipo personal, empresarial o servidor.</p>"},{"location":"02_2_instalacion_windows_server/#requisitos-del-hardware","title":"Requisitos del hardware","text":"<p>Antes de instalar un sistema operativo, hay que evaluar cuidadosamente el equipo:</p> <ul> <li>\u00bfCumple los requisitos m\u00ednimos del sistema?  </li> <li>\u00bfTiene recursos suficientes para un funcionamiento fluido y estable?  </li> <li>\u00bfEs compatible con los controladores (drivers) necesarios?</li> </ul> <p>Note</p> <p>Instalar un sistema en un equipo con recursos limitados puede provocar lentitud, errores o incluso fallos de instalaci\u00f3n.</p>"},{"location":"02_2_instalacion_windows_server/#planificacion-de-la-instalacion","title":"Planificaci\u00f3n de la instalaci\u00f3n","text":"<p>Una vez elegido el sistema operativo, especialmente en entornos de servidor, es fundamental planificar la instalaci\u00f3n:</p> <ul> <li>Definir el tipo de instalaci\u00f3n (limpia, dual boot, virtualizada)  </li> <li>Preparar el disco duro (particiones, formato de archivos)  </li> <li>Establecer pol\u00edticas de seguridad y usuarios </li> <li>Documentar cada paso para facilitar el mantenimiento posterior  </li> <li>Realizar pruebas de funcionamiento y rendimiento</li> </ul> <p>Note</p> <p>Una instalaci\u00f3n bien planificada evita problemas futuros y garantiza una base s\u00f3lida para el sistema.</p> <p>Detallamos a continuaci\u00f3n los aspectos a tener en cuenta en la planificaci\u00f3n. </p>"},{"location":"02_2_instalacion_windows_server/#eleccion-de-la-version-y-edicion-del-sistema-operativo","title":"Elecci\u00f3n de la versi\u00f3n y edici\u00f3n del sistema operativo","text":"<p>El primer paso en cualquier instalaci\u00f3n es decidir qu\u00e9 sistema operativo vamos a utilizar, teniendo en cuenta las necesidades reales de la empresa. Si optamos por un entorno Windows, es fundamental conocer las versiones disponibles y asegurarnos de que el hardware cumple sobradamente con los requisitos t\u00e9cnicos.</p> <p>Las versiones m\u00e1s comunes de Windows Server son:</p> <ul> <li>Windows Server 2019  </li> <li>Windows Server 2022  </li> <li>Windows Server 2025  </li> </ul> <p>Lo habitual es instalar la versi\u00f3n m\u00e1s reciente disponible, siempre que sea compatible con el hardware y el software que vamos a utilizar. Sin embargo, tambi\u00e9n es importante elegir la edici\u00f3n adecuada dentro de cada versi\u00f3n (Standard, Datacenter, Essentials, etc.), ya que cada una ofrece caracter\u00edsticas distintas y precios diferentes.</p> Windows Server 2025 selecci\u00f3n de versi\u00f3n <p>No tiene sentido pagar por una edici\u00f3n como Datacenter si no vamos a aprovechar sus ventajas, como la virtualizaci\u00f3n ilimitada o el almacenamiento definido por software. La elecci\u00f3n debe responder tanto a las necesidades actuales como a las previsiones de crecimiento a medio plazo.</p>"},{"location":"02_2_instalacion_windows_server/#pasos-previos-a-la-instalacion","title":"Pasos previos a la instalaci\u00f3n","text":"<p>Instalar un sistema operativo en un servidor no es una tarea que se deba hacer a la ligera. El servidor ser\u00e1 el n\u00facleo de la red, por lo que hay que tener muy claro qu\u00e9 uso se le va a dar y qu\u00e9 cambios podr\u00edan surgir en el futuro. Tanto si se trata de una instalaci\u00f3n nueva como de una actualizaci\u00f3n, es imprescindible planificar bien el proceso.</p> <p>Planificar significa:</p> <ul> <li>Definir las tareas a realizar  </li> <li>Estimar el tiempo necesario  </li> <li>Asignar los recursos humanos y t\u00e9cnicos adecuados  </li> </ul> <p>Los pasos previos m\u00e1s habituales incluyen:</p> <ol> <li> <p>Copia de seguridad: Si el equipo ya contiene datos importantes, hay que hacer una copia antes de comenzar. En nuestro caso, al tratarse de una instalaci\u00f3n nueva, este paso no ser\u00e1 necesario.</p> </li> <li> <p>Verificaci\u00f3n del hardware: Comprobar que el equipo cumple con los requisitos del sistema operativo. Esto incluye procesador, memoria RAM, espacio en disco y compatibilidad con perif\u00e9ricos.</p> </li> <li> <p>Dise\u00f1o de particiones: Decidir c\u00f3mo se dividir\u00e1 el disco. Esto implica elegir entre MBR o GPT, definir el sistema de archivos (NTFS, ReFS, etc.) y decidir si se usar\u00e1n discos b\u00e1sicos o din\u00e1micos. Herramientas como GParted pueden ayudar en esta tarea, aunque el propio asistente de instalaci\u00f3n tambi\u00e9n permite crear particiones.</p> </li> <li> <p>Descarga del software y drivers: Tener preparada la imagen ISO del sistema operativo y los controladores necesarios, especialmente si se usan dispositivos RAID o SCSI que no est\u00e1n incluidos por defecto.</p> </li> <li> <p>Preparaci\u00f3n del medio de instalaci\u00f3n: Crear un USB, DVD o configurar una instalaci\u00f3n por red (PXE) seg\u00fan el entorno.</p> </li> <li> <p>Configuraci\u00f3n de la BIOS/UEFI: Ajustar la secuencia de arranque para que el equipo inicie desde el medio de instalaci\u00f3n.</p> </li> <li> <p>Instalaci\u00f3n del sistema operativo: El proceso var\u00eda seg\u00fan el sistema elegido, pero suele ser guiado por un asistente.</p> </li> <li> <p>Configuraci\u00f3n post-instalaci\u00f3n: Ajustar el sistema a las necesidades del usuario o de la empresa, incluyendo la red, usuarios, servicios y pol\u00edticas de seguridad.</p> </li> <li> <p>Verificaci\u00f3n del funcionamiento: Comprobar que todo funciona correctamente y que el sistema responde como se espera.</p> </li> <li> <p>Documentaci\u00f3n: Registrar todo el proceso, incluyendo configuraciones realizadas, incidencias detectadas y soluciones aplicadas. Esta documentaci\u00f3n ser\u00e1 clave para futuras intervenciones o auditor\u00edas.</p> </li> </ol>"},{"location":"02_2_instalacion_windows_server/#consideraciones-adicionales","title":"Consideraciones adicionales","text":"<p>En instalaciones de servidor, es habitual plantearse el uso de RAID para mejorar el rendimiento o la seguridad de los datos. Tambi\u00e9n hay que decidir si se utilizar\u00e1n discos b\u00e1sicos o din\u00e1micos, seg\u00fan las necesidades de flexibilidad y gesti\u00f3n.</p> <p>Si se utilizan controladoras RAID o dispositivos SCSI que no est\u00e1n en la lista de compatibilidad del sistema, ser\u00e1 necesario localizar y preparar los drivers antes de iniciar la instalaci\u00f3n, ya que el asistente puede solicitarlos en el proceso.</p> <p>Aqu\u00ed tienes el contenido revisado, mejorado y adaptado a un estilo t\u00e9cnico m\u00e1s fluido, sin excesiva estructura artificial, y formateado en Markdown para que puedas integrarlo f\u00e1cilmente en tus apuntes o documentaci\u00f3n:</p> <p>\u00a1Vamos all\u00e1, Sergio! Aqu\u00ed tienes una gu\u00eda clara y completa para realizar la instalaci\u00f3n gr\u00e1fica de Windows Server 2025, ideal si est\u00e1s montando un servidor desde cero o en entorno virtual.</p>"},{"location":"02_2_instalacion_windows_server/#pasos-para-la-instalacion-grafica-de-windows-server-2025","title":"Pasos para la instalaci\u00f3n gr\u00e1fica de Windows Server 2025","text":"<ol> <li> <p>Descargar la imagen ISO oficial</p> <ul> <li>Visita el Centro de evaluaci\u00f3n de Microsoft y descarga la ISO de Windows Server 2025.</li> <li>Puedes elegir entre versiones como Standard, Datacenter o Datacenter Azure Edition, seg\u00fan tus necesidades.</li> </ul> </li> <li> <p>Crear una m\u00e1quina virtual (si aplica)</p> <ul> <li>Usa VirtualBox, VMware o Hyper-V.</li> <li>Asigna al menos:<ul> <li>2 n\u00facleos de CPU</li> <li>4 GB de RAM (m\u00ednimo recomendado)</li> <li>60 GB de disco duro</li> </ul> </li> <li>Monta la ISO como unidad de arranque.</li> </ul> </li> <li> <p>Iniciar la instalaci\u00f3n</p> <ul> <li>Al arrancar desde la ISO, ver\u00e1s el asistente gr\u00e1fico.</li> <li>Selecciona:<ul> <li>Idioma</li> <li>Formato de hora y moneda</li> <li>Teclado</li> </ul> </li> </ul> </li> <li> <p>Instalar ahora</p> <ul> <li>Haz clic en \u201cInstalar ahora\u201d.</li> <li>Elige la edici\u00f3n que deseas instalar (con o sin interfaz gr\u00e1fica).</li> <li>Acepta los t\u00e9rminos de licencia.</li> </ul> </li> <li> <p>Tipo de instalaci\u00f3n</p> <ul> <li>Selecciona \u201cInstalaci\u00f3n personalizada\u201d para una instalaci\u00f3n limpia.</li> <li>Elige el disco donde se instalar\u00e1 el sistema. Puedes crear particiones si lo deseas.</li> </ul> </li> <li> <p>Proceso de instalaci\u00f3n</p> <ul> <li>El sistema copiar\u00e1 archivos, instalar\u00e1 caracter\u00edsticas y reiniciar\u00e1 autom\u00e1ticamente.</li> <li>Este proceso puede tardar entre 10 y 30 minutos seg\u00fan el hardware.</li> </ul> </li> <li> <p>Configurar contrase\u00f1a de administrador</p> <ul> <li>Al finalizar, se te pedir\u00e1 establecer la contrase\u00f1a del usuario Administrador.</li> </ul> </li> <li> <p>Primer inicio de sesi\u00f3n</p> <ul> <li>Inicia sesi\u00f3n con la contrase\u00f1a que acabas de crear.</li> <li>Se abrir\u00e1 el Administrador del servidor, desde donde podr\u00e1s:<ul> <li>Cambiar el nombre del equipo</li> <li>Unirte a un dominio</li> <li>Configurar la red</li> <li>Instalar roles y caracter\u00edsticas</li> </ul> </li> </ul> </li> </ol> <p>Procesos detallados paso a paso en internet</p> <p>Puedes ver capturas de pantalla detalladas en esta gu\u00eda paso a paso de SomeBooks.es.</p> <p>y aqu\u00ed tienes enlaces con im\u00e1genes reales del proceso de otras gu\u00edas:</p> <ul> <li>Instalaci\u00f3n paso a paso con capturas</li> <li>Gu\u00eda visual desde RDR-IT</li> <li>Tutorial en v\u00eddeo (YouTube)</li> </ul>"},{"location":"02_2_instalacion_windows_server/#finalizar-la-instalacion","title":"Finalizar la instalaci\u00f3n","text":"<p>Una vez completada la instalaci\u00f3n del sistema operativo, es recomendable realizar una serie de comprobaciones antes de comenzar con la configuraci\u00f3n:</p> <ul> <li>Estado de los dispositivos: Desde el Administrador de dispositivos, verificamos que todo el hardware est\u00e9 correctamente detectado y que no haya problemas con los controladores.</li> <li>Configuraci\u00f3n de red: Es fundamental que la red est\u00e9 bien configurada. Podemos comprobar la conectividad con comandos como <code>ping</code> o <code>tracert</code>, y tambi\u00e9n desde el Centro de redes y recursos compartidos.</li> <li>Registros de sucesos: El Visor de eventos nos permite detectar errores o advertencias que podr\u00edan indicar fallos en el sistema.</li> <li>Particiones: Conviene asegurarse de que el sistema reconoce correctamente todos los discos y particiones.</li> </ul> <p>Una vez revisado todo, se recomienda reiniciar el equipo para confirmar que el arranque se realiza sin problemas.</p>"},{"location":"02_2_instalacion_windows_server/#configuracion-basica-inicial","title":"Configuraci\u00f3n b\u00e1sica inicial","text":"<p>Desde el panel Administrador del servidor \u2192 Servidor local, realizamos las siguientes tareas:</p>"},{"location":"02_2_instalacion_windows_server/#informacion-del-equipo","title":"Informaci\u00f3n del equipo","text":"<ul> <li>Nombre del equipo: Debe ser \u00fanico dentro del dominio, no superar los 15 caracteres y utilizar \u00fanicamente letras, n\u00fameros o guiones.</li> <li>Dominio o grupo de trabajo: Si el servidor se integrar\u00e1 en un dominio existente, indicamos su nombre. Si ser\u00e1 el controlador de dominio o no se usar\u00e1 dominio, lo dejamos como grupo de trabajo (m\u00e1s adelante se podr\u00e1 crear el dominio).</li> <li>Firewall de Windows: Debe estar activado y correctamente configurado.</li> <li>Escritorio remoto: Podemos habilitarlo si los usuarios van a conectarse al servidor mediante Terminal Server.</li> <li>Zona horaria: Es recomendable verificarla y ajustarla si es necesario.</li> </ul>"},{"location":"02_2_instalacion_windows_server/#configuracion-de-red","title":"Configuraci\u00f3n de red","text":"<p>En servidores, lo habitual es utilizar direcciones IP est\u00e1ticas, ya que suelen actuar como servidores DHCP para los clientes. Si no se ha hecho durante la instalaci\u00f3n, ahora es el momento de asignar las IPs correspondientes a cada tarjeta de red.</p> Panel de control. Conexiones de Red <p>Como caso particular, si el servidor va a actuar como servidor de comunicaciones y puerta de enlace hacia Internet, debe contar con al menos dos tarjetas de red:</p> <ul> <li> <p>Tarjeta externa: Conectada al router o dispositivo que proporciona acceso a Internet. Se configura con una IP est\u00e1tica en la misma subred que el gateway, y se especifica la puerta de enlace correspondiente. En entornos virtuales (como VirtualBox), la IP depender\u00e1 del tipo de adaptador (puente o NAT).</p> </li> <li> <p>Tarjeta interna: Conectada al switch que enlaza con los clientes. No se configura gateway en esta tarjeta, ya que la salida ser\u00e1 la tarjeta externa. Se asigna una IP est\u00e1tica en la misma subred que los clientes (por ejemplo, 192.168.224.1).</p> </li> </ul> <p>Para que los clientes puedan acceder a Internet a trav\u00e9s del servidor, es necesario encaminar el tr\u00e1fico entre ambas tarjetas. Esto se logra instalando el Servicio de enrutamiento, disponible dentro de \u201cAcceso y directivas de red\u201d.</p> <p>Tip</p> <p>Si no se va a utilizar IPv6 en la red, es recomendable desactivarlo para evitar conflictos o configuraciones innecesarias.</p>"},{"location":"02_2_instalacion_windows_server/#actualizacion-del-servidor","title":"Actualizaci\u00f3n del servidor","text":"<p>Mantener el servidor actualizado es esencial para garantizar la seguridad y estabilidad del sistema. A diferencia de los equipos cliente, un servidor expuesto a vulnerabilidades puede comprometer toda la red.</p> <p>Sin embargo, hay que tener precauci\u00f3n:</p> <ul> <li>Algunas actualizaciones requieren reiniciar el sistema, lo que puede afectar la disponibilidad del servicio.</li> <li>En casos poco frecuentes, una actualizaci\u00f3n puede generar incompatibilidades con hardware o software instalado.</li> </ul> <p>Por ello, muchos administradores prefieren que las actualizaciones se descarguen autom\u00e1ticamente pero no se instalen, permitiendo aplicar los cambios manualmente en momentos de baja actividad. Esta es la configuraci\u00f3n por defecto en Windows Server.</p> <p>Cuidado</p> <p>En nuestro caso, desactivaremos las actualizaciones autom\u00e1ticas para evitar saturar la red del instituto.</p>"},{"location":"02_2_instalacion_windows_server/#roles-y-caracteristicas","title":"Roles y caracter\u00edsticas","text":"<p>Desde el Administrador del servidor (en modo gr\u00e1fico) o mediante PowerShell, podemos agregar o quitar roles y caracter\u00edsticas:</p> Agregar roles y caracter\u00edsticas <ul> <li>Roles: Servicios principales del servidor (DNS, DHCP, Active Directory, etc.)</li> <li>Caracter\u00edsticas: Funcionalidades adicionales como copias de seguridad, cifrado, balanceo de carga, etc.</li> </ul>"},{"location":"02_2_instalacion_windows_server/#version-de-evaluacion","title":"Versi\u00f3n de evaluaci\u00f3n","text":"<p>Windows nos ofrece un tiempo de cortes\u00eda antes de activar la licencia para poder probar este sistema.</p> <p>Si hemos instalado una versi\u00f3n de evaluaci\u00f3n de Windows Server, podemos consultar el tiempo restante con:</p> <pre><code>slmgr.vbs -dli\n</code></pre> Agregar roles y caracter\u00edsticas <p>Y ampliar el periodo de prueba con:</p> <pre><code>slmgr.vbs -rearm\n</code></pre> <p>T\u00ecp</p> <p>Ejecuta esta orden solo cuando se acerque la fecha de expiraci\u00f3n. Requiere reiniciar el sistema tras su ejecuci\u00f3n.</p>"},{"location":"02_2_instalacion_windows_server/#configuracion-inicial-del-servidor-desde-la-terminal","title":"Configuraci\u00f3n inicial del servidor desde la terminal","text":"<p>Cuando instalamos Windows Server sin entorno gr\u00e1fico (Server Core), la configuraci\u00f3n debe realizarse desde la terminal. Al iniciar el sistema, se abre autom\u00e1ticamente la herramienta <code>sconfig</code>, que permite configurar de forma sencilla aspectos b\u00e1sicos como el nombre del equipo, la red, el dominio, actualizaciones, etc.</p> Server Core. Configuraci\u00f3n con sconfig <p>Adem\u00e1s, podemos utilizar directamente PowerShell, que ofrece un control m\u00e1s avanzado y flexible.</p>"},{"location":"02_2_instalacion_windows_server/#comandos-utiles-en-powershell","title":"Comandos \u00fatiles en PowerShell","text":"<ul> <li>Cambiar el nombre del servidor</li> </ul> <pre><code>Rename-Computer -NewName \"MISERVIDOR\"\nRestart-Computer -Force\n</code></pre> <ul> <li>Configurar la red</li> </ul> <pre><code>Get-NetAdapter \u2013Name \"Ethernet\" | Remove-NetIPAddress -Confirm:$false\nGet-NetAdapter \u2013Name \"Ethernet\" | New-NetIPAddress \u2013AddressFamily IPv4 \u2013IpAddress 192.168.1.25 -PrefixLength 24 -DefaultGateway 192.168.1.1\n</code></pre> <ul> <li>Habilitar DHCP</li> </ul> <pre><code>Set-NetIPInterface -InterfaceAlias \"Ethernet\" -Dhcp Enabled\n</code></pre> <ul> <li>Ver tabla de enrutamiento</li> </ul> <pre><code>Get-NetRoute\n</code></pre> <ul> <li>Establecer servidores DNS</li> </ul> <pre><code>Set-DNSClientServerAddress -InterfaceAlias \"Ethernet\" -ServerAddresses (\"192.168.1.1\", \"8.8.8.8\")\n</code></pre> <ul> <li>Deshabilitar IPv6</li> </ul> <pre><code>Disable-NetAdapterBinding \u2013Name \"Ethernet\" -ComponentID ms_tcpip6\n</code></pre> <ul> <li>Para ver los componentes disponibles:</li> </ul> <pre><code>Get-NetAdapterBinding\n</code></pre> <ul> <li>Para ver las interfaces de red:</li> </ul> <pre><code>Get-NetIPInterface\n</code></pre> <ul> <li>Configuraci\u00f3n del Firewall</li> </ul> <p>En Windows Server 2022, el firewall bloquea por defecto el tr\u00e1fico ICMP (ping) desde equipos fuera del dominio. Para comprobar la red, podemos desactivarlo temporalmente:</p> <pre><code>Set-NetFirewallProfile -Profile Domain,Public,Private -Enabled False\n</code></pre> <p>Y volver a activarlo:</p> <pre><code>Set-NetFirewallProfile -Profile Domain,Public,Private -Enabled True\n</code></pre> <ul> <li>Crear regla para permitir pings (ICMPv4)</li> </ul> <pre><code>New-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\" -Direction Inbound -Protocol ICMPv4 -IcmpType 8 -RemoteAddress \"192.168.200.0/24\" -Action Allow\n</code></pre> <p>Para m\u00faltiples rangos de IP:</p> <pre><code>$ips = @(\"192.168.0.11-192.168.0.40\", \"192.168.100.10-192.168.100.200\", \"192.168.200.0/24\")\nNew-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\" -Direction Inbound -Protocol ICMPv4 -IcmpType 8 -RemoteAddress $ips -Action Allow\n</code></pre> <ul> <li>Deshabilitar una regla:</li> </ul> <pre><code>Disable-NetFirewallRule \u2013DisplayName \"Allow inbound ICMPv4\"\n</code></pre> <ul> <li>Eliminar una regla (\u26a0\ufe0f nunca sin <code>DisplayName</code>):</li> </ul> <pre><code>Remove-NetFirewallRule \u2013DisplayName \"Allow inbound ICMPv4\"\n</code></pre> <ul> <li>Ver todas las reglas:</li> </ul> <pre><code>Get-NetFirewallRule\n</code></pre> <ul> <li>Ver IPs y puertos de una regla:</li> </ul> <pre><code>Get-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\" | Get-NetFirewallAddressFilter\nGet-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\" | Get-NetFirewallPortFilter\n</code></pre> <ul> <li>Mostrar reglas activas en formato tabla:</li> </ul> <pre><code>Get-NetFirewallRule -Action Allow -Enabled True -Direction Inbound |\nFormat-Table -Property Name,\n@{Name=\"Protocol\";Expression={($_ | Get-NetFirewallPortFilter).Protocol}},\n@{Name=\"LocalPort\";Expression={($_ | Get-NetFirewallPortFilter).LocalPort}},\n@{Name=\"RemotePort\";Expression={($_ | Get-NetFirewallPortFilter).RemotePort}},\n@{Name=\"RemoteAddress\";Expression={($_ | Get-NetFirewallAddressFilter).RemoteAddress}},\nEnabled, Profile, Direction, Action\n</code></pre> <ul> <li> <p>Alternativa con <code>netsh</code> para configurar el firewall</p> </li> <li> <p>A\u00f1adir regla:</p> </li> </ul> <pre><code>netsh advfirewall firewall add rule name=\"Allow inbound ICMPv4\" protocol=icmpv4:8,any dir=in action=allow\n</code></pre> <ul> <li>Bloquear regla:</li> </ul> <pre><code>netsh advfirewall firewall add rule name=\"Allow inbound ICMPv4\" protocol=icmpv4:8,any dir=in action=block\n</code></pre>"},{"location":"02_3_config_basica/","title":"Configuraci\u00f3n b\u00e1sica","text":"<p>Ya tenemos Windows Server correctamente instalado en nuestra m\u00e1quina, pero todav\u00eda no se comporta como un servidor. Ahora falta instalar los servicios necesarios para convertir a este equipo en el servidor del nuestra red.</p>"},{"location":"02_3_config_basica/#instalacion-de-roles-y-caracteristicas-en-windows-server","title":"Instalaci\u00f3n de Roles y Caracter\u00edsticas en Windows Server","text":"<p>Una vez instalado Windows Server, el sistema operativo se comporta como cualquier versi\u00f3n de Windows hasta que se le asignan funciones espec\u00edficas de servidor. Estas funciones se activan mediante la instalaci\u00f3n de roles y caracter\u00edsticas, que son componentes que permiten al sistema ofrecer servicios a otros equipos de la red.</p>"},{"location":"02_3_config_basica/#que-son-los-roles","title":"\u00bfQu\u00e9 son los roles?","text":"<p>Los roles son conjuntos de servicios que definen el prop\u00f3sito principal del servidor. Al instalar un rol, el servidor adquiere capacidades espec\u00edficas como gestionar usuarios, ofrecer servicios de red, alojar aplicaciones web, etc.</p>"},{"location":"02_3_config_basica/#principales-roles-disponibles-en-windows-server","title":"Principales roles disponibles en Windows Server:","text":"<ul> <li> <p>Servicios de dominio de Active Directory (AD DS)   Permite crear y administrar un dominio. Gestiona usuarios, equipos, pol\u00edticas y autenticaci\u00f3n centralizada.</p> </li> <li> <p>Servidor DHCP   Asigna autom\u00e1ticamente direcciones IP a los equipos cliente de la red.</p> </li> <li> <p>Servidor DNS   Traduce nombres de dominio en direcciones IP, facilitando la navegaci\u00f3n y la resoluci\u00f3n de nombres en la red.</p> </li> <li> <p>Servicios de archivo   Ofrece almacenamiento compartido, replicaci\u00f3n de archivos, cuotas de disco y acceso remoto a carpetas.</p> </li> <li> <p>Servicios de impresi\u00f3n   Administra impresoras en red y servidores de impresi\u00f3n, permitiendo compartir dispositivos entre usuarios.</p> </li> <li> <p>Servicios de acceso y directivas de red   Incluye herramientas como el servicio de enrutamiento, acceso remoto (VPN), y control de acceso a la red.</p> </li> <li> <p>Terminal Services / Servicios de Escritorio remoto   Permite a los usuarios conectarse al servidor de forma remota, ya sea al escritorio completo o a aplicaciones espec\u00edficas.</p> </li> <li> <p>Servidor web (IIS)   Integra el servidor web Internet Information Services, compatible con ASP.NET, PHP y otros entornos web.</p> </li> </ul>"},{"location":"02_3_config_basica/#que-son-las-caracteristicas","title":"\u00bfQu\u00e9 son las caracter\u00edsticas?","text":"<p>Las caracter\u00edsticas son componentes adicionales que complementan los roles o a\u00f1aden funcionalidades espec\u00edficas al servidor. No definen su funci\u00f3n principal, pero pueden ser esenciales seg\u00fan el entorno.</p> <p>Ejemplos de caracter\u00edsticas:</p> <ul> <li>Copia de seguridad de Windows Server</li> <li>Cifrado de unidad BitLocker</li> <li>Balanceo de carga de red</li> <li>Windows Defender</li> <li>Hyper-V (para virtualizaci\u00f3n)</li> </ul>"},{"location":"02_3_config_basica/#como-instalar-roles-y-caracteristicas","title":"C\u00f3mo instalar roles y caracter\u00edsticas","text":"<p>La instalaci\u00f3n se realiza desde el Administrador del servidor, una consola gr\u00e1fica que se abre autom\u00e1ticamente al iniciar sesi\u00f3n en el servidor.</p> Asistente para la instalaci\u00f3n de roles y caracter\u00edsticas <ul> <li> <p>Pasos:</p> </li> <li> <p>Abre el Administrador del servidor.</p> </li> <li>Ve a Administrar \u2192 Agregar roles y caracter\u00edsticas.</li> <li>Selecciona el tipo de instalaci\u00f3n: basada en roles o caracter\u00edsticas.</li> <li>Elige el servidor destino (puede ser local o remoto).</li> <li>Marca los roles que deseas instalar.</li> <li>A\u00f1ade las caracter\u00edsticas necesarias si el asistente lo solicita.</li> <li>Confirma y comienza la instalaci\u00f3n.</li> <li>Reinicia el servidor si es necesario.</li> </ul> <p>Aqu\u00ed tienes un video demostrativo de c\u00f3mo realizar esta instalaci\u00f3n: </p>"},{"location":"02_3_config_basica/#instalacion-y-gestion-de-roles-en-windows-server-con-powershell","title":"Instalaci\u00f3n y gesti\u00f3n de roles en Windows Server con PowerShell","text":"<p>PowerShell permite instalar, consultar y eliminar roles de servidor de forma r\u00e1pida y automatizada. A diferencia del entorno gr\u00e1fico, no incluye las herramientas de administraci\u00f3n del rol a menos que se especifique expl\u00edcitamente con el par\u00e1metro <code>-IncludeManagementTools</code>.</p> <ul> <li>Instalar un rol</li> </ul> <pre><code>Install-WindowsFeature -Name &lt;feature_name&gt; -ComputerName &lt;computer_name&gt; -IncludeManagementTools -Restart\n</code></pre> <ul> <li><code>-Name</code>: nombre del rol o caracter\u00edstica a instalar (por ejemplo, <code>AD-Domain-Services</code>)</li> <li><code>-ComputerName</code>: nombre del equipo remoto (si se omite, se instala en el equipo local)</li> <li><code>-IncludeManagementTools</code>: instala tambi\u00e9n las herramientas de administraci\u00f3n del rol</li> <li><code>-Restart</code>: reinicia el equipo autom\u00e1ticamente si es necesario</li> </ul> <p>Ejemplo: instalar Active Directory en el equipo local con herramientas de administraci\u00f3n</p> <pre><code>Install-WindowsFeature -Name AD-Domain-Services -IncludeManagementTools -Restart\n</code></pre> <ul> <li>Consultar roles disponibles</li> </ul> <p>Para ver la lista de roles y caracter\u00edsticas que se pueden instalar:</p> <pre><code>Get-WindowsFeature\n</code></pre> <p>Para consultar los roles disponibles en otro equipo:</p> <pre><code>Get-WindowsFeature -ComputerName &lt;computer_name&gt;\n</code></pre> <ul> <li>Desinstalar un rol</li> </ul> <p>Para eliminar un rol del servidor:</p> <pre><code>Uninstall-WindowsFeature -Name &lt;feature_name&gt; -ComputerName &lt;computer_name&gt; -IncludeManagementTools -Restart\n</code></pre> <p>Recuerda que al desinstalar tambi\u00e9n puedes eliminar las herramientas de administraci\u00f3n si lo indicas con <code>-IncludeManagementTools</code>.</p>"},{"location":"02_3_config_basica/#ejemplos-comunes-de-nombres-de-roles","title":"Ejemplos comunes de nombres de roles","text":"Rol Nombre en PowerShell Active Directory Domain Services AD-Domain-Services DHCP Server DHCP DNS Server DNS File Server FS-FileServer Web Server (IIS) Web-Server Remote Desktop Services RDS-RD-Server <p>Puedes obtener el nombre exacto de cada rol con <code>Get-WindowsFeature</code>.</p>"},{"location":"02_3_config_basica/#servicio-de-enrutamiento-en-windows-server","title":"Servicio de enrutamiento en Windows Server","text":"<p>El servicio de enrutamiento permite que los clientes de una red interna puedan acceder a redes externas, como Internet. Para ello, el servidor debe disponer de dos tarjetas de red:</p> <ul> <li>Una tarjeta conectada a la red interna (clientes)</li> <li>Otra tarjeta conectada a la red externa (salida a Internet)</li> </ul> <p>Una vez configuradas ambas interfaces, el servidor puede actuar como puerta de enlace, pero por defecto las dos redes no est\u00e1n comunicadas. Para que los clientes puedan salir al exterior, es necesario enrutar el tr\u00e1fico desde la tarjeta interna hacia la externa.</p>"},{"location":"02_3_config_basica/#instalacion-del-servicio","title":"Instalaci\u00f3n del servicio","text":"<p>Este servicio se encuentra dentro del rol Acceso remoto. Una vez instalado, debe configurarse mediante el asistente de configuraci\u00f3n.</p> <p>Durante la configuraci\u00f3n:</p> <ol> <li>Se solicita el tipo de servicio. En este caso, se selecciona NAT (Network Address Translation) para permitir que los clientes accedan a Internet.</li> <li>Se indica cu\u00e1l es la tarjeta externa que proporciona acceso a Internet.</li> <li>El asistente informa que no hay servidores DNS ni DHCP configurados. Como se instalar\u00e1n m\u00e1s adelante, se elige no configurar estos servicios en este momento.</li> </ol> <p>El asistente solo permite enrutar una tarjeta interna. Si el servidor tiene m\u00e1s de una red interna, las dem\u00e1s interfaces deben configurarse manualmente desde: Enrutamiento y acceso remoto \u2192 [nombre del servidor] \u2192 IPv4 \u2192 NAT</p> <p>Desde ah\u00ed se pueden a\u00f1adir las interfaces internas adicionales.</p> Enrutamiento y acceso remoto"},{"location":"02_3_config_basica/#verificacion-del-funcionamiento","title":"Verificaci\u00f3n del funcionamiento","text":"<p>Una vez configurado el enrutamiento, se puede comprobar su funcionamiento desde un cliente de la red interna utilizando los comandos:</p> <pre><code>ping [direcci\u00f3n externa]\ntracert [direcci\u00f3n externa]\n</code></pre> <p>En el servidor, el comando <code>ipconfig</code> muestra la configuraci\u00f3n de red actual. Para informaci\u00f3n m\u00e1s detallada, se puede usar:</p> <pre><code>ipconfig /all\n</code></pre>"},{"location":"02_3_config_basica/#enrutamiento-desde-la-terminal-mediante-powershell","title":"Enrutamiento desde la terminal mediante PowerShell","text":"<p>Tambi\u00e9n es posible realizar el enrutamiento mediante PowerShell, sin necesidad de instalar el servicio completo de enrutamiento. Para ello se utiliza el cmdlet <code>New-NetNat</code>.</p> <p>Ejemplo para enrutar la red interna <code>192.168.100.0/24</code>:</p> <pre><code>New-NetNat -Name \"Enruta red 100\" -InternalIPInterfaceAddressPrefix 192.168.100.0/24\n</code></pre> <p>Este comando crea una regla NAT que permite que los paquetes provenientes de esa red se enruten hacia la red externa.</p> <p>Para enrutar m\u00faltiples redes internas, se pueden crear varias reglas NAT.</p> <p>Para consultar las reglas existentes:</p> <pre><code>Get-NetNat\n</code></pre>"},{"location":"02_3_config_basica/#configuracion-del-firewall-en-windows","title":"Configuraci\u00f3n del Firewall en Windows","text":"<p>En este apartado aprenderemos c\u00f3mo abrir el Firewall de Windows para permitir el tr\u00e1fico ICMP, necesario para realizar pruebas de conectividad mediante el comando <code>ping</code>. Esta configuraci\u00f3n debe aplicarse en cada equipo Windows, tanto cliente como servidor.</p> Firewall <p>Puedes consultar una imagen representativa del Firewall en Softwareg.com.au.</p>"},{"location":"02_3_config_basica/#configuracion-desde-la-interfaz-grafica","title":"Configuraci\u00f3n desde la interfaz gr\u00e1fica","text":"<p>Pasos para crear una regla de entrada que permita tr\u00e1fico ICMPv4:</p> <ol> <li>Acceder a Firewall de Windows con seguridad avanzada.</li> <li>En el panel izquierdo, hacer clic derecho sobre Reglas de entrada y seleccionar Nueva regla.</li> <li>Elegir la opci\u00f3n Personalizada.</li> <li>Permitir el acceso a todos los programas.</li> <li>Seleccionar el protocolo ICMPv4.</li> <li>Permitir el tr\u00e1fico desde cualquier direcci\u00f3n IP.</li> <li>Asignar un nombre a la regla (por ejemplo, \"Permitir ICMPv4\") y finalizar.</li> </ol> <p>Esta regla permitir\u00e1 que el equipo responda a solicitudes de <code>ping</code> desde otras m\u00e1quinas.</p> Firewall de Windows Defender con seguridad avanzada"},{"location":"02_3_config_basica/#configuracion-desde-powershell","title":"Configuraci\u00f3n desde PowerShell","text":"<p>En Windows Server 2022, el Firewall bloquea por defecto el tr\u00e1fico ICMP desde equipos que no pertenecen al dominio. Para comprobar la red, se puede desactivar temporalmente el Firewall:</p> <pre><code>Set-NetFirewallProfile -Profile Domain,Public,Private -Enabled false\n</code></pre> <p>Y volver a activarlo:</p> <pre><code>Set-NetFirewallProfile -Profile Domain,Public,Private -Enabled true\n</code></pre> <ul> <li>Crear una regla para permitir ICMPv4</li> </ul> <pre><code>New-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\" -Direction Inbound -Protocol ICMPv4 -IcmpType 8 -RemoteAddress 192.168.200.0/24 -Action Allow\n</code></pre> <ul> <li>Permitir tr\u00e1fico ICMP desde m\u00faltiples redes</li> </ul> <pre><code>$ips = @(\"192.168.0.11-192.168.0.40\", \"192.168.100.10-192.168.100.200\", \"192.168.200.0/24\")\nNew-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\" -Direction Inbound -Protocol ICMPv4 -IcmpType 8 -RemoteAddress $ips -Action Allow\n</code></pre> <ul> <li>Habilitar o deshabilitar una regla</li> </ul> <pre><code>Enable-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\"\nDisable-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\"\n</code></pre> <ul> <li>Eliminar una regla (siempre especificando el nombre)</li> </ul> <pre><code>Remove-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\"\n</code></pre> <ul> <li>Consultar reglas existentes</li> </ul> <pre><code>Get-NetFirewallRule\n</code></pre> <ul> <li>Ver detalles de una regla espec\u00edfica</li> </ul> <pre><code>Get-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\" | Get-NetFirewallAddressFilter\nGet-NetFirewallRule -DisplayName \"Allow inbound ICMPv4\" | Get-NetFirewallPortFilter\n</code></pre> <ul> <li>Mostrar reglas activas en formato tabla</li> </ul> <pre><code>Get-NetFirewallRule -Action Allow -Enabled True -Direction Inbound |\nFormat-Table -Property Name,\n@{Name=\"Protocol\";Expression={($_ | Get-NetFirewallPortFilter).Protocol}},\n@{Name=\"LocalPort\";Expression={($_ | Get-NetFirewallPortFilter).LocalPort}},\n@{Name=\"RemotePort\";Expression={($_ | Get-NetFirewallPortFilter).RemotePort}},\n@{Name=\"RemoteAddress\";Expression={($_ | Get-NetFirewallAddressFilter).RemoteAddress}},\nEnabled, Profile, Direction, Action\n</code></pre>"},{"location":"02_3_config_basica/#configuracion-con-netsh","title":"Configuraci\u00f3n con netsh","text":"<p>Tambi\u00e9n se puede configurar el Firewall mediante <code>netsh</code>:</p> <ul> <li>A\u00f1adir regla</li> </ul> <pre><code>netsh advfirewall firewall add rule name=\"Allow inbound ICMPv4\" protocol=icmpv4:8,any dir=in action=allow\n</code></pre> <ul> <li>Eliminar regla</li> </ul> <pre><code>netsh advfirewall firewall add rule name=\"Allow inbound ICMPv4\" protocol=icmpv4:8,any dir=in action=block\n</code></pre> <p>Aqu\u00ed tienes el contenido revisado, ampliado y estructurado en formato Markdown, con una redacci\u00f3n clara y t\u00e9cnica, ideal para documentaci\u00f3n profesional o acad\u00e9mica:</p>"},{"location":"02_3_config_basica/#administracion-remota-rsat-y-windows-admin-center","title":"Administraci\u00f3n remota: RSAT y Windows Admin Center","text":"<p>Existen herramientas b\u00e1sicas para la administraci\u00f3n de servidores y Active Directory remotamente desde equipos cliente. </p> <p>Lo habitual para el administrador del sistema es trabajar desde su equipo, que nunca debe ser el propio servidor. Estas herramientas le van a permitir gestionar aspectos del dominio y el servidor desde su equipo.</p>"},{"location":"02_3_config_basica/#rsat-remote-server-administration-tools","title":"RSAT (Remote Server Administration Tools)","text":"<p>Las herramientas de administraci\u00f3n remota del servidor (RSAT) permiten gestionar servidores Windows desde equipos cliente, sin necesidad de acceder f\u00edsicamente al servidor ni instalar entorno gr\u00e1fico en \u00e9l. Esto es especialmente \u00fatil en entornos donde se recomienda instalar Windows Server en modo Core.</p>"},{"location":"02_3_config_basica/#activacion-en-windows-10-version-1809-o-superior","title":"Activaci\u00f3n en Windows 10 (versi\u00f3n 1809 o superior)","text":"<p>Las herramientas RSAT se instalan como caracter\u00edsticas opcionales desde: Configuraci\u00f3n \u2192 Aplicaciones y caracter\u00edsticas \u2192 Caracter\u00edsticas opcionales \u2192 Agregar una caracter\u00edstica</p> Agregar caracter\u00edstica RSAT <p>Para comprobar la versi\u00f3n del sistema, se puede ejecutar el comando:</p> <pre><code>winver\n</code></pre>"},{"location":"02_3_config_basica/#herramientas-recomendadas","title":"Herramientas recomendadas","text":"<p>Al menos se deben instalar las siguientes:</p> <ul> <li> <p>RSAT: Administrador del servidor   Permite acceder al panel de administraci\u00f3n del servidor.</p> </li> <li> <p>RSAT: Herramientas de Active Directory Domain Services y Lightweight Directory Services   Incluye herramientas como Usuarios y Equipos de Active Directory.</p> </li> <li> <p>RSAT: Herramientas de Administraci\u00f3n de directivas de grupo   Para crear y gestionar GPOs.</p> </li> </ul> <p>Otras herramientas \u00fatiles seg\u00fan los roles instalados:</p> <ul> <li>RSAT: Herramientas de servidor DNS</li> <li>RSAT: Herramientas de servidor DHCP</li> <li>RSAT: Herramientas de servicios de archivo</li> </ul> <p>Note</p> <p>Es necesario tener acceso a Internet y tener activo el servicio Windows Update para instalar estas caracter\u00edsticas.</p>"},{"location":"02_3_config_basica/#agregar-servidores-al-administrador-del-servidor","title":"Agregar servidores al Administrador del servidor","text":"<p>Una vez instaladas las herramientas, se puede abrir el Administrador del servidor y agregar servidores desde: Administrar \u2192 Agregar servidores \u2192 Buscar ahora</p> Agregar servidor a RSAT <p>No es necesario escribir el nombre ni la direcci\u00f3n IP del servidor.</p>"},{"location":"02_3_config_basica/#instalacion-por-consola","title":"Instalaci\u00f3n por consola","text":"<p>Tambi\u00e9n se pueden instalar herramientas RSAT desde PowerShell o CMD:</p> <pre><code>dism /online /add-capability /CapabilityName:Rsat.GroupPolicy.Management.Tools~~~~0.0.1.0 /CapabilityName:Rsat.Dns.Tools~~~~0.0.1.0 /CapabilityName:Rsat.ActiveDirectory.DS-LDS.Tools~~~~0.0.1.0\n</code></pre> <p>En versiones anteriores a Windows 10 1809, RSAT se descarga como paquete desde el sitio oficial de Microsoft.</p> <p>Puedes consultar una gu\u00eda visual en SomeBooks.es.</p>"},{"location":"02_3_config_basica/#windows-admin-center-wac","title":"Windows Admin Center (WAC)","text":"<p>Windows Admin Center es una herramienta moderna para administrar servidores y equipos Windows desde un navegador web. Microsoft la recomienda como alternativa al Administrador del servidor tradicional.</p> WAC: Windows Admin Center"},{"location":"02_3_config_basica/#instalacion","title":"Instalaci\u00f3n","text":"<p>Debe instalarse en el equipo desde el que se administrar\u00e1n los servidores. Las instrucciones est\u00e1n disponibles en la documentaci\u00f3n oficial de Microsoft.</p> <ul> <li>Por defecto usa el puerto 6516, aunque se puede cambiar.</li> <li>Al abrirlo por primera vez, solicita seleccionar un certificado. Se recomienda usar el certificado Windows Admin Cliente.</li> <li>Luego se agregan los servidores que se desean administrar.</li> </ul>"},{"location":"02_3_config_basica/#interfaz-y-funcionalidades","title":"Interfaz y funcionalidades","text":"<p>Al acceder a un servidor, se muestra informaci\u00f3n similar a la del Administrador del servidor. En el men\u00fa lateral se encuentran opciones como:</p> <ul> <li>Almacenamiento: discos y vol\u00famenes</li> <li>Archivos y uso compartido: explorador de archivos y configuraci\u00f3n de recursos compartidos</li> <li>Dispositivos: equivalente al Administrador de dispositivos</li> <li>Eventos: visor de sucesos</li> <li>Roles y caracter\u00edsticas: instalaci\u00f3n y eliminaci\u00f3n de roles</li> <li>Firewall, PowerShell, Redes, Servicios, Tareas programadas, entre otros</li> </ul>"},{"location":"02_3_config_basica/#extensiones-adicionales","title":"Extensiones adicionales","text":"<p>Desde el men\u00fa de configuraci\u00f3n se pueden instalar extensiones para:</p> <ul> <li>Active Directory</li> <li>DHCP</li> <li>DNS</li> </ul> <p>Algunas extensiones requieren herramientas RSAT adicionales, que se instalan autom\u00e1ticamente si el sistema lo permite.</p> <p>Puedes ampliar esta informaci\u00f3n en el sitio oficial de Windows Admin Center o consultar el documento Managing Windows Server - with Windows Admin Center (PDF).</p>"},{"location":"02_4_documentar_instalacion/","title":"Documentaci\u00f3n","text":""},{"location":"02_4_documentar_instalacion/#documentacion-de-la-instalacion-del-servidor","title":"Documentaci\u00f3n de la instalaci\u00f3n del servidor","text":"<p>Durante el proceso de instalaci\u00f3n de un servidor, es fundamental registrar toda la informaci\u00f3n relevante en un documento t\u00e9cnico. Esta documentaci\u00f3n servir\u00e1 como referencia para futuras intervenciones, auditor\u00edas, mantenimiento o restauraciones.</p>"},{"location":"02_4_documentar_instalacion/#informacion-que-debe-incluirse","title":"Informaci\u00f3n que debe incluirse","text":"<ul> <li> <p>Fecha y hora de la instalaci\u00f3n   Registro cronol\u00f3gico del inicio y finalizaci\u00f3n del proceso.</p> </li> <li> <p>Versi\u00f3n y n\u00famero de serie del sistema operativo   Incluye tambi\u00e9n las licencias de cliente instaladas (CALs).</p> </li> <li> <p>Especificaciones del hardware   Detalles del equipo: procesador, memoria RAM, discos duros, tarjeta gr\u00e1fica, tarjetas de red, etc.</p> </li> <li> <p>Discos duros y particiones   Nombre de cada volumen, tama\u00f1o, sistema de archivos (NTFS, ReFS, etc.), y uso previsto.</p> </li> <li> <p>Identificaci\u00f3n del equipo   Nombre del equipo, contrase\u00f1a del administrador, ubicaci\u00f3n f\u00edsica (sala, rack, puesto).</p> </li> <li> <p>Software adicional instalado   Nombre del programa, versi\u00f3n, descripci\u00f3n, utilidad y fecha de instalaci\u00f3n.</p> </li> <li> <p>Configuraci\u00f3n de red   Direcci\u00f3n IP, m\u00e1scara de subred, puerta de enlace, servidores DNS, n\u00famero de roseta en el switch o rack, nombre del dominio o grupo de trabajo.</p> </li> <li> <p>Actualizaciones instaladas   Nombre de la actualizaci\u00f3n, utilidad y fecha de instalaci\u00f3n.</p> </li> <li> <p>Clientes conectados   IP, sistema operativo, nombre del equipo, tipo de dispositivo, ubicaci\u00f3n, usuario habitual, observaciones.</p> </li> <li> <p>Otros datos relevantes   Antivirus instalado, cortafuegos, gestor de base de datos, servidores a los que est\u00e1 conectado, servicios activos.</p> </li> <li> <p>Configuraciones adicionales   Detalles sobre la configuraci\u00f3n de elementos como el cortafuegos, antivirus, gestor de base de datos, etc.</p> </li> <li> <p>Impresoras conectadas   Nombre, tipo, direcci\u00f3n IP o puerto, ubicaci\u00f3n f\u00edsica.</p> </li> </ul>"},{"location":"02_4_documentar_instalacion/#consideraciones","title":"Consideraciones","text":"<ul> <li>La documentaci\u00f3n debe mantenerse actualizada cada vez que se realice un cambio en la configuraci\u00f3n del servidor.</li> <li>Es recomendable utilizar una plantilla estructurada para facilitar la recogida de datos.</li> <li>Puedes consultar un ejemplo de plantilla en la documentaci\u00f3n oficial o en recursos como la propuesta de textcortex.com.</li> </ul>"},{"location":"02_4_documentar_instalacion/#documento-ejemplo","title":"Documento ejemplo","text":"<p>A continuaci\u00f3n tienes enlace a documento tipo ejemplo para documentar:</p> <p>Descargar documentaci\u00f3n del equipo ISCA </p>"},{"location":"02_4_documentar_instalacion/#recomendacion-post-instalacion","title":"Recomendaci\u00f3n post-instalaci\u00f3n","text":"<p>Una vez finalizada la instalaci\u00f3n y configuraci\u00f3n del servidor, es muy recomendable crear una imagen del sistema. Esta copia de seguridad permitir\u00e1 restaurar el servidor r\u00e1pidamente en caso de fallo grave, corrupci\u00f3n del sistema o p\u00e9rdida de datos.</p>"},{"location":"02_5_administrar_discos/","title":"Administrar discos","text":""},{"location":"02_5_administrar_discos/#administracion-de-discos-en-windows-server","title":"Administraci\u00f3n de discos en Windows Server","text":""},{"location":"02_5_administrar_discos/#tipos-de-discos","title":"Tipos de discos","text":"<p>En Windows Server existen dos tipos principales de discos:</p>"},{"location":"02_5_administrar_discos/#discos-basicos","title":"Discos b\u00e1sicos","text":"<ul> <li>Utilizan particiones tradicionales.</li> <li>Pueden tener dos tipos de tablas de particiones:</li> <li>MBR (Master Boot Record): permite hasta 4 particiones primarias, una de las cuales puede ser extendida para contener particiones l\u00f3gicas.</li> <li>GPT (GUID Partition Table): m\u00e1s moderna, permite hasta 128 particiones primarias sin necesidad de particiones extendidas.</li> </ul>"},{"location":"02_5_administrar_discos/#discos-dinamicos","title":"Discos din\u00e1micos","text":"<ul> <li>No se organizan en particiones, sino en vol\u00famenes.</li> <li>No son accesibles desde sistemas que no sean Windows Server.</li> <li>Permiten mayor flexibilidad: los vol\u00famenes pueden abarcar varios discos, redimensionarse sin reiniciar y ofrecer tolerancia a fallos.</li> </ul>"},{"location":"02_5_administrar_discos/#tipos-de-volumenes-dinamicos","title":"Tipos de vol\u00famenes din\u00e1micos","text":"<p>Al igual que en un disco b\u00e1sico creamos particiones (que aqu\u00ed se llaman \"vol\u00famenes simples\") en un disco din\u00e1mico se crean vol\u00famenes din\u00e1micos. No hay l\u00edmite en el n\u00famero de vol\u00famenes que se pueden crear. Un volumen puede estar formado por una o m\u00e1s partes de un solo disco o puede extenderse por m\u00e1s de un disco. Otra ventaja importante de los vol\u00famenes es que se pueden redimensionar sin tener que reiniciar el sistema.</p> <ul> <li>Volumen distribuido: se extiende por varios discos. \u00datil para ampliar espacio.</li> <li>Volumen seccionado (RAID-0): divide los datos entre discos para mejorar la velocidad.</li> <li>Volumen reflejado (RAID-1): duplica los datos en dos o tres discos para ofrecer redundancia.</li> <li>RAID-5 (con paridad): requiere al menos tres discos. Ofrece tolerancia a fallos con mejor aprovechamiento del espacio que RAID-1.</li> </ul> <p>Tanto los discos b\u00e1sicos como los din\u00e1micos se gestionan desde el Administrador de discos.</p> <p>Aqu\u00ed tienes enlace para refrescar informaci\u00f3n sobre los Tipos de Volumenes de Disco</p>"},{"location":"02_5_administrar_discos/#herramientas-de-administracion","title":"Herramientas de administraci\u00f3n","text":"<p>Para la administraci\u00f3n de discos en Windows Server tenemos 3 posibles herramientas o formas: </p> <ul> <li>Mediante el Administrador de discos: disponible en el Administrador de equipos.</li> <li>Usando el comando <code>Diskpart</code>: herramienta de l\u00ednea de comandos.</li> <li>Usando comando de PowerShell: permite automatizar tareas de administraci\u00f3n.</li> </ul> <p>Puedes ver ejemplos visuales en Microsoft Learn o en SomeBooks.es.</p>"},{"location":"02_5_administrar_discos/#creacion-de-volumenes","title":"Creaci\u00f3n de vol\u00famenes","text":"<p>Windows Server no utiliza la palabra partici\u00f3n sino que la denomina volumen simple. Antes de poder trabajar con un disco desde la Administraci\u00f3n de discos el disco debe haberse inicializado (como disco MBR o GPT). Si no aparece la siguiente pantalla desde la que se crea la tabla de particiones del disco:</p> Inicializar disco"},{"location":"02_5_administrar_discos/#volumen-simple-desde-gui","title":"Volumen simple (desde GUI)","text":"<p>Para crear una nueva partici\u00f3n en un espacio sin particionar desde el men\u00fa contextual seleccionamos Nuevo volumen simple y en la siguiente pantalla indicamos el tama\u00f1o de la partici\u00f3n a crear. A continuaci\u00f3n le asignamos una letra a la nueva unidad o una carpeta donde se montar\u00e1 (Windows Server nos da la posibilidad de acceder a una unidad mediante una letra de unidad como el resto de sistemas Windows o montando la unidad en una carpeta como los sistemas UNIX y Linux):</p> <p>A continuaci\u00f3n elegimos el sistema de archivos. Podemos seleccionar el tama\u00f1o de cl\u00faster</p> <p>Finalmente el asistente nos muestra un resumen de las opciones elegidas y cuando pulsamos Finalizar se crea la nueva partici\u00f3n.</p> <p>Pasos:</p> <ol> <li>Inicializar el disco como MBR o GPT.</li> <li>Seleccionar espacio sin particionar \u2192 Nuevo volumen simple.      Asistente para nuevo volumen simple </li> <li>Indicar tama\u00f1o, letra de unidad o carpeta de montaje.      Asistente para nuevo volumen simple </li> <li>Elegir sistema de archivos (NTFS, ReFS) y tama\u00f1o de cl\u00faster.</li> <li>Finalizar el asistente.</li> </ol> <p>Desde el men\u00fa contextual de un volumen ya creado se puede:</p> <ul> <li>Cambiar letra o ruta de acceso.</li> <li>Extender o reducir volumen.</li> <li>Eliminar volumen.</li> <li>Agregar reflejo (RAID-1).</li> </ul>"},{"location":"02_5_administrar_discos/#volumen-simple-powershell","title":"Volumen simple (PowerShell)","text":"<pre><code>Get-Disk\nInitialize-Disk -Number 1 -PartitionStyle GPT\nNew-Partition -DiskNumber 1 -Size 200GB -AssignDriveLetter\nFormat-Volume -DriveLetter E -FileSystem NTFS\n</code></pre>"},{"location":"02_5_administrar_discos/#conversion-de-discos","title":"Conversi\u00f3n de discos","text":"<p>Convertir un disco en din\u00e1mico nos da nuevas posibilidades (como utilizar RAID) pero tambi\u00e9n tiene limitaciones, sobre todo de compatibilidad, como hemos visto antes. Si queremos convertir un disco en din\u00e1mico desde su men\u00fa contextual (el del disco, a la izquierda, no el de las particiones) seleccionamos Convertir en disco din\u00e1mico. Aparece una pantalla donde elegir qu\u00e9 discos queremos convertir en din\u00e1micos.</p> <p>Para convertir un disco din\u00e1mico en b\u00e1sico debemos eliminar previamente todos los vol\u00famenes del disco (es decir, vamos a perder todos los datos) y luego desde su men\u00fa contextual seleccionamos Convertir en disco b\u00e1sico.</p> <ul> <li>De b\u00e1sico a din\u00e1mico: desde el men\u00fa contextual del disco \u2192 Convertir en disco din\u00e1mico.</li> <li>De din\u00e1mico a b\u00e1sico: eliminar todos los vol\u00famenes \u2192 Convertir en disco b\u00e1sico.</li> </ul> Asistente para nuevo volumen simple"},{"location":"02_5_administrar_discos/#volumenes-avanzados","title":"Vol\u00famenes avanzados","text":"<p>En un disco b\u00e1sico podemos crear un volumen b\u00e1sico como hemos visto antes o un volumen distribuido que incluye partes de m\u00e1s de un disco. Se hace desde su men\u00fa contextual seleccionando Nuevo volumen distribuido:</p> Asistente para nuevo volumen distribuido <p>En esta pantalla a\u00f1adimos todos los discos por los que se extender\u00e1 el volumen y indicamos el espacio a coger de cada disco. El resto del proceso es igual que para un volumen b\u00e1sico: asignamos letra o ruta de acceso y luego el sistema de archivos crear.</p> <p>Resumen:</p> <ul> <li>Se crea desde el men\u00fa contextual \u2192 Nuevo volumen distribuido.</li> <li>Se seleccionan los discos y el espacio a usar en cada uno.</li> </ul> <p>Despu\u00e9s desde el administrador de discos, podemos ver el resultado:</p> Administrador de discos"},{"location":"02_5_administrar_discos/#volumen-seccionado-raid-0","title":"Volumen seccionado (RAID-0)","text":"RAID 0 <p>El volumen seccionado, tambi\u00e9n conocido como RAID-0, es una configuraci\u00f3n que distribuye los datos entre dos o m\u00e1s discos. Para implementarlo, se requiere al menos dos discos con espacio libre, y es importante que el tama\u00f1o asignado sea igual en cada uno. Esta t\u00e9cnica divide los archivos en bloques y los escribe simult\u00e1neamente en los discos participantes, lo que permite aumentar significativamente la velocidad de lectura y escritura.</p> Administrador de discos. Discos Seccionados <p>Sin embargo, RAID-0 no ofrece tolerancia a fallos. Si uno de los discos falla, se pierde toda la informaci\u00f3n del volumen, ya que los datos est\u00e1n fragmentados entre los discos sin ning\u00fan tipo de redundancia. Por esta raz\u00f3n, se utiliza principalmente en entornos donde el rendimiento es prioritario y la p\u00e9rdida de datos no es cr\u00edtica, como en estaciones de trabajo para edici\u00f3n de v\u00eddeo o entornos de pruebas.</p>"},{"location":"02_5_administrar_discos/#volumen-reflejado-raid-1","title":"Volumen reflejado (RAID-1)","text":"RAID 1 <p>El volumen reflejado, o RAID-1, consiste en duplicar los datos en dos discos. Se crea f\u00e1cilmente desde el men\u00fa contextual del Administrador de discos seleccionando la opci\u00f3n Agregar reflejo. Para ello, se necesita un segundo disco con espacio libre igual o superior al volumen que se desea reflejar.</p> Administrador de discos. Discos Reflejados <p>Esta configuraci\u00f3n proporciona alta disponibilidad y tolerancia a fallos, ya que si uno de los discos falla, el sistema puede seguir funcionando con el otro sin p\u00e9rdida de datos. Es ideal para servidores que manejan informaci\u00f3n cr\u00edtica, como bases de datos o sistemas de autenticaci\u00f3n, donde la integridad de los datos es m\u00e1s importante que el rendimiento.</p> <p>Adem\u00e1s, en Windows Server, al agregar un reflejo a un volumen b\u00e1sico, el sistema convierte autom\u00e1ticamente ambos discos en din\u00e1micos, lo que permite gestionar el volumen reflejado como una unidad l\u00f3gica.</p>"},{"location":"02_5_administrar_discos/#volumen-raid-5","title":"Volumen RAID-5","text":"RAID 5 <p>RAID-5 es una configuraci\u00f3n m\u00e1s avanzada que combina rendimiento, capacidad y tolerancia a fallos. Para crear un volumen RAID-5 en Windows Server, se necesitan al menos tres discos din\u00e1micos. La creaci\u00f3n se realiza desde el men\u00fa contextual del Administrador de discos, seleccionando Nuevo volumen RAID-5.</p> Administrador de discos. Discos distribuidos <p>En esta configuraci\u00f3n, los datos y la informaci\u00f3n de paridad se distribuyen entre todos los discos. Si uno de ellos falla, el sistema puede reconstruir los datos perdidos utilizando la paridad almacenada en los discos restantes. Esto permite mantener el servicio activo sin p\u00e9rdida de informaci\u00f3n.</p> <p>En caso de fallo de un disco, el procedimiento habitual es:</p> <ul> <li>Quitar el volumen del disco da\u00f1ado.</li> <li>Reparar el volumen utilizando otro disco con espacio libre que no forme parte del RAID.</li> </ul> <p>Aunque RAID-5 ofrece una buena relaci\u00f3n entre seguridad y aprovechamiento del espacio, tiene como desventaja una escritura m\u00e1s lenta, ya que debe calcular y almacenar la paridad. Por eso, en entornos de alta carga, se suele implementar mediante controladoras RAID por hardware, que descargan ese trabajo de la CPU.</p>"},{"location":"02_5_administrar_discos/#volumenes-dinamicos-vs-raid-por-bios","title":"Vol\u00famenes din\u00e1micos vs RAID por BIOS","text":"<p>La elecci\u00f3n entre vol\u00famenes din\u00e1micos y RAID por BIOS (hardware) depende del entorno, del presupuesto y de los requisitos t\u00e9cnicos del sistema.</p>"},{"location":"02_5_administrar_discos/#raid-por-bios-hardware","title":"RAID por BIOS (hardware)","text":"<p>Este tipo de RAID se configura antes de iniciar el sistema operativo, generalmente desde el firmware del equipo. El sistema operativo no ve los discos f\u00edsicos individuales, sino un \u00fanico disco virtual que representa el conjunto RAID.</p> <p>Las ventajas principales son:</p> <ul> <li>Mayor rendimiento, ya que el procesamiento lo realiza la controladora RAID.</li> <li>Menor carga para la CPU, lo que libera recursos para otras tareas.</li> <li>Mayor fiabilidad, especialmente en configuraciones avanzadas como RAID 6 o RAID 10.</li> <li>Compatibilidad con m\u00e1s tipos de RAID, incluyendo combinaciones como RAID 01, 10, 50, etc.</li> </ul> <p>Este tipo de configuraci\u00f3n es ideal para servidores de producci\u00f3n, sistemas cr\u00edticos y entornos empresariales donde la disponibilidad y el rendimiento son esenciales.</p>"},{"location":"02_5_administrar_discos/#raid-por-software-volumenes-dinamicos","title":"RAID por software (vol\u00famenes din\u00e1micos)","text":"<p>Los vol\u00famenes din\u00e1micos se configuran directamente desde el sistema operativo, sin necesidad de hardware adicional. Son m\u00e1s f\u00e1ciles de implementar, y permiten utilizar discos de diferentes capacidades, tipos o velocidades.</p> <p>Sus ventajas son:</p> <ul> <li>Flexibilidad en la configuraci\u00f3n.</li> <li>Menor coste, ya que no requiere controladoras RAID dedicadas.</li> <li>Gesti\u00f3n directa desde Windows Server, con herramientas como el Administrador de discos o PowerShell.</li> </ul> <p>Sin embargo, presentan algunas limitaciones:</p> <ul> <li>Menor rendimiento, especialmente en RAID-0 o RAID-5, ya que la CPU debe gestionar la distribuci\u00f3n de datos y la paridad.</li> <li>Menor fiabilidad, ya que dependen del sistema operativo para funcionar correctamente.</li> <li>Compatibilidad limitada, ya que otros sistemas operativos no siempre reconocen vol\u00famenes din\u00e1micos.</li> </ul> <p>En resumen, si el presupuesto lo permite y se busca rendimiento y fiabilidad, es recomendable optar por RAID por hardware. Si se necesita flexibilidad y se trabaja en entornos menos exigentes, los vol\u00famenes din\u00e1micos pueden ser una soluci\u00f3n v\u00e1lida.</p> <p>M\u00e1s informaci\u00f3n sobre tipos de RAID en RedesZone.net y Wikipedia RAID.</p>"},{"location":"02_5_administrar_discos/#powershell","title":"PowerShell","text":"<p>Puedes consultar c\u00f3mo crear vol\u00famenes con PowerShell en la documentaci\u00f3n oficial de Microsoft.</p>"},{"location":"02_6_dominio/","title":"Active Directory","text":""},{"location":"02_6_dominio/#administracion-centralizada-de-redes-con-active-directory","title":"Administraci\u00f3n centralizada de redes con Active Directory","text":"<p>En la actualidad, los ordenadores de cualquier organizaci\u00f3n suelen estar conectados en red, lo que permite compartir informaci\u00f3n, recursos y servicios de forma eficiente. Esta conectividad, sin embargo, requiere una administraci\u00f3n adecuada para garantizar la seguridad, el rendimiento y la disponibilidad de los sistemas.</p> <p>Una forma de simplificar la gesti\u00f3n de la red es centralizar la administraci\u00f3n mediante un servidor que almacene y controle toda la informaci\u00f3n sobre los elementos conectados: usuarios, equipos, impresoras, carpetas compartidas, etc.</p>"},{"location":"02_6_dominio/#el-servidor-en-redes-windows","title":"El servidor en redes Windows","text":"<p>En entornos Windows, el servidor que gestiona la red ejecuta una versi\u00f3n del sistema operativo Windows Server, como:</p> <ul> <li>Windows Server 2012  </li> <li>Windows Server 2016  </li> <li>Windows Server 2019  </li> <li>Windows Server 2022 </li> <li>Windows Server 2025 (versi\u00f3n m\u00e1s reciente, con mejoras en seguridad, virtualizaci\u00f3n y administraci\u00f3n remota)</li> </ul> <p>Este servidor no solo proporciona servicios b\u00e1sicos, sino que tambi\u00e9n se encarga de la autenticaci\u00f3n de usuarios, la aplicaci\u00f3n de pol\u00edticas de grupo, la gesti\u00f3n de recursos compartidos y la seguridad de la red.</p>"},{"location":"02_6_dominio/#el-directorio-nucleo-de-la-administracion","title":"El directorio: n\u00facleo de la administraci\u00f3n","text":"<p>La informaci\u00f3n de la red se organiza en una estructura jer\u00e1rquica llamada directorio o Active Directory, que almacena objetos como:</p> <ul> <li>Equipos y servidores  </li> <li>Usuarios y grupos  </li> <li>Impresoras  </li> <li>Carpetas compartidas  </li> <li>Pol\u00edticas de seguridad  </li> </ul> Active Directory (AD) <p>Microsoft denomina a su servicio de directorio Active Directory (AD). Este sistema sigue el est\u00e1ndar LDAP (Lightweight Directory Access Protocol), lo que permite interoperabilidad con otros sistemas que tambi\u00e9n lo utilizan, como OpenLDAP en GNU/Linux.</p>"},{"location":"02_6_dominio/#dominio-y-controlador-de-dominio","title":"Dominio y controlador de dominio","text":"<p>La estructura l\u00f3gica que representa la red administrada se llama dominio. Al instalar el rol de Servicios de dominio de Active Directory en un servidor Windows, este se convierte en un controlador de dominio (DC).</p> <p>En una red con arquitectura cliente-servidor, debe existir al menos un controlador de dominio principal, aunque es habitual contar con controladores secundarios que replican la informaci\u00f3n del directorio para mejorar la disponibilidad y la tolerancia a fallos.</p> <p>Cada dominio tiene un nombre \u00fanico que sigue la notaci\u00f3n de DNS, como por ejemplo <code>iesconsueloaranda.es</code>. Por ello, es imprescindible contar con un servidor DNS que resuelva los nombres de los equipos y servicios del dominio. Si no se dispone de uno, Windows Server instala y configura autom\u00e1ticamente el servicio DNS al activar Active Directory.</p>"},{"location":"02_6_dominio/#arboles-y-bosques-de-dominios","title":"\u00c1rboles y bosques de dominios","text":"<p>Un dominio puede tener subdominios, como <code>www.iesconsueloaranda.es</code> o <code>moodle.iesconsueloaranda.es</code>. El conjunto formado por el dominio principal y sus subdominios se denomina \u00e1rbol de dominios, siendo el dominio principal el dominio ra\u00edz.</p> <p>En organizaciones m\u00e1s complejas, puede haber varios dominios independientes, como <code>departamentos.lan</code>, con subdominios como <code>departamento1.departamentos.lan</code>, <code>departamento2.departamentos.lan</code>, etc. El conjunto de varios \u00e1rboles de dominios se llama bosque.</p> Active Directory Tree and Forest"},{"location":"02_6_dominio/#relaciones-de-confianza-entre-dominios","title":"Relaciones de confianza entre dominios","text":"<p>Active Directory permite establecer relaciones de confianza entre dominios, incluso si pertenecen a \u00e1rboles o bosques distintos. Estas relaciones permiten que los usuarios de un dominio puedan acceder a recursos de otro, siempre que se haya configurado la confianza correspondiente.</p> <p>Cuando en una empresa hay m\u00e1s de un dominio en ocasiones un usuario de un dominio puede necesitar acceder a un recurso de otro dominio. Para evitar que el usuario tenga que tener una cuenta en cada dominio y autenticarse en cada uno cuando necesita un recurso de ese dominio se establecen relaciones de confianza entre los diferentes dominios. </p> <p>Tipos de relaciones de confianza:</p> <ul> <li>Confianzas transitivas: autom\u00e1ticas entre dominios del mismo bosque.</li> <li>Confianzas externas: entre dominios de bosques distintos.</li> <li>Confianzas de bosque: permiten la autenticaci\u00f3n entre bosques completos.</li> <li>Confianzas de reino: para conectar con dominios no basados en Active Directory (por ejemplo, Kerberos en sistemas UNIX).</li> </ul> Active Directory relaciones de confianza <p>Estas relaciones se basan en protocolos como Kerberos v5, aunque tambi\u00e9n se admite NTLM y autenticaci\u00f3n mediante SSL/TLS.</p> <p>Puedes ampliar esta informaci\u00f3n en la entrada de Active Directory en Wikipedia.</p>"},{"location":"02_6_dominio/#la-funcion-del-dominio-en-una-red-windows","title":"La funci\u00f3n del dominio en una red Windows","text":"<p>En una red con arquitectura cliente-servidor, el dominio es la estructura l\u00f3gica que permite centralizar la administraci\u00f3n de todos los recursos conectados. Esta centralizaci\u00f3n se logra mediante el uso de un directorio, que act\u00faa como una base de datos jer\u00e1rquica y estructurada, gestionada por el servidor a trav\u00e9s de Active Directory.</p> <p>El directorio tiene como funci\u00f3n principal almacenar informaci\u00f3n sobre los objetos de la red. Estos objetos pueden clasificarse en tres grandes grupos:</p> <ul> <li>Recursos: dispositivos f\u00edsicos o virtuales que ofrecen servicios a los usuarios, como impresoras, carpetas compartidas, unidades de red, etc.</li> <li>Servicios: funcionalidades que se ejecutan en la red, como correo electr\u00f3nico, acceso remoto, autenticaci\u00f3n, DNS, DHCP, entre otros.</li> <li>Usuarios: cuentas individuales, grupos de usuarios, roles administrativos, etc., que representan a las personas o entidades que interact\u00faan con la red.</li> </ul> <p>Cada objeto en el directorio posee una serie de atributos que lo identifican y definen. Por ejemplo:</p> <ul> <li>Un usuario puede tener atributos como nombre completo, nombre de inicio de sesi\u00f3n, direcci\u00f3n de correo electr\u00f3nico, departamento, etc.</li> <li>Una impresora puede tener atributos como marca, modelo, ubicaci\u00f3n f\u00edsica, tipo de conexi\u00f3n, etc.</li> </ul> <p>Adem\u00e1s, los objetos pueden contener otros objetos. Por ejemplo, un grupo de seguridad puede incluir m\u00faltiples cuentas de usuario, y una unidad organizativa puede agrupar equipos, usuarios y pol\u00edticas.</p> <p>La centralizaci\u00f3n de la informaci\u00f3n en el dominio ofrece m\u00faltiples beneficios:</p> <ul> <li>Inicio de sesi\u00f3n \u00fanico (Single Sign-On): el usuario se autentica una sola vez y, si tiene los permisos adecuados, puede acceder a todos los recursos del dominio sin necesidad de volver a identificarse.</li> <li>Aplicaci\u00f3n de pol\u00edticas comunes: mediante las Directivas de Grupo (GPO), el administrador puede definir configuraciones est\u00e1ndar para todos los equipos o usuarios, como restricciones de acceso, configuraci\u00f3n del escritorio, instalaci\u00f3n de software, etc.</li> <li>Despliegue de actualizaciones y software: es posible instalar programas o aplicar parches de seguridad de forma remota y simult\u00e1nea en m\u00faltiples equipos.</li> <li>Control de acceso y seguridad: se pueden establecer permisos precisos sobre cada recurso, definir contrase\u00f1as seguras, auditar accesos y aplicar medidas de protecci\u00f3n a nivel de red.</li> <li>Escalabilidad: el dominio puede crecer f\u00e1cilmente, a\u00f1adiendo nuevos usuarios, equipos o servicios sin perder el control ni la coherencia en la administraci\u00f3n.</li> </ul>"},{"location":"02_6_dominio/#instalacion-y-configuracion-de-dominios-en-windows-server","title":"Instalaci\u00f3n y configuraci\u00f3n de dominios en Windows Server","text":"<p>Para que un servidor Windows act\u00fae como controlador de dominio (DC), es necesario instalar el rol de Servicios de dominio de Active Directory (AD DS). Este proceso consta de dos fases: la instalaci\u00f3n del rol y su posterior configuraci\u00f3n.</p>"},{"location":"02_6_dominio/#instalacion-del-rol","title":"Instalaci\u00f3n del rol","text":"<p>Se realiza desde el Administrador del servidor, en la secci\u00f3n: Administrar \u2192 Agregar roles y caracter\u00edsticas \u2192 Servicios de dominio de Active Directory</p> Agregar rol de Active Directory <p>Una vez finalizada la instalaci\u00f3n, se puede iniciar la configuraci\u00f3n desde el asistente que aparece autom\u00e1ticamente o ejecutando el comando:</p> <pre><code>dcpromo.exe\n</code></pre> <p>Note</p> <p>En versiones modernas como Windows Server 2022 y Windows Server 2025, el comando <code>dcpromo.exe</code> ha sido reemplazado por el asistente gr\u00e1fico y por cmdlets de PowerShell como <code>Install-ADDSForest</code>.</p>"},{"location":"02_6_dominio/#configuracion-del-dominio","title":"Configuraci\u00f3n del dominio","text":"<p>Durante la configuraci\u00f3n, se deben tomar decisiones clave:</p> <ul> <li>Agregar un nuevo bosque: Esta opci\u00f3n se selecciona cuando no existe ning\u00fan dominio previo en la red. Se crea el dominio ra\u00edz del bosque.</li> <li>Nombre del dominio: Debe tener al menos dos niveles, por ejemplo <code>iesconsueloaranda.lan</code>, siguiendo la notaci\u00f3n DNS.</li> <li>Nivel funcional del bosque y del dominio: Se recomienda seleccionar el nivel m\u00e1s alto compatible con todos los controladores de dominio. En entornos nuevos, se puede establecer Windows Server 2025 para aprovechar todas sus funcionalidades.</li> <li>Instalaci\u00f3n del servicio DNS: Si no hay un servidor DNS en la red, el asistente instalar\u00e1 y configurar\u00e1 uno autom\u00e1ticamente.</li> <li>Ubicaci\u00f3n de los componentes del dominio: Si el servidor tiene varios discos, se recomienda distribuir los archivos de base de datos, registros y SYSVOL para mejorar el rendimiento. En instalaciones b\u00e1sicas, se puede dejar todo en <code>C:\\</code>.</li> </ul> <p>Una vez completada la configuraci\u00f3n, el servidor se reinicia y pasa a ser un controlador de dominio.</p>"},{"location":"02_6_dominio/#degradar-un-controlador-de-dominio","title":"Degradar un controlador de dominio","text":"<p>Si es necesario eliminar el rol de controlador de dominio, el proceso se realiza desde el mismo asistente o mediante PowerShell.</p> <ul> <li>Si el servidor es el \u00faltimo controlador del dominio, se debe marcar la opci\u00f3n correspondiente para eliminar el dominio completo, lo que implica la p\u00e9rdida de toda la informaci\u00f3n del directorio.</li> <li>Si existen otros controladores, el servidor simplemente se degrada a servidor miembro, conservando su pertenencia al dominio pero sin funciones de control.</li> </ul> <p>En versiones modernas, el proceso se realiza con el cmdlet:</p> <pre><code>Uninstall-ADDSDomainController\n</code></pre>"},{"location":"02_6_dominio/#creacion-de-otros-dominios","title":"Creaci\u00f3n de otros dominios","text":"<p>Aunque lo habitual es trabajar con un \u00fanico dominio, en algunas organizaciones se requiere crear subdominios o dominios adicionales dentro del mismo bosque. Esto puede deberse a razones geogr\u00e1ficas, organizativas o de seguridad.</p> <p>Para crear un nuevo dominio en un bosque existente:</p> <ul> <li>Se selecciona la opci\u00f3n Agregar un nuevo dominio en un bosque existente.</li> <li>Se indica el nombre del dominio ra\u00edz del bosque.</li> <li>Se configura el nuevo dominio como hijo del dominio principal o como dominio paralelo.</li> </ul> <p>Cada dominio debe tener al menos un controlador de dominio propio, que puede estar ubicado en la sede correspondiente.</p> <p>Aqu\u00ed tienes la explicaci\u00f3n completa y detallada del proceso de instalaci\u00f3n de un dominio en Windows Server desde PowerShell, utilizando el ejemplo del dominio ACME.LAN. He corregido y ampliado el script para que sea m\u00e1s claro y funcional, adem\u00e1s de explicar cada paso con precisi\u00f3n.</p>"},{"location":"02_6_dominio/#instalacion-de-un-dominio-desde-powershell","title":"Instalaci\u00f3n de un dominio desde PowerShell","text":"<p>En entornos donde se busca automatizar la configuraci\u00f3n del servidor o trabajar sin entorno gr\u00e1fico (Server Core), PowerShell permite instalar y configurar un dominio de forma r\u00e1pida y eficiente.</p> <p>Ejemplo: creaci\u00f3n del dominio ACME.LAN\"</p> <pre><code># Definimos las variables\n$dominioFQDN = \"ACME.LAN\"                      # Nombre completo del dominio (FQDN)\n$dominioNETBIOS = \"ACME\"                       # Nombre NetBIOS del dominio\n$adminPass = \"abc@1234.\"                       # Contrase\u00f1a para el modo seguro de recuperaci\u00f3n\n\n# Instalamos los roles necesarios: Active Directory y DNS\nInstall-WindowsFeature AD-Domain-Services, DNS -IncludeAllSubFeature\n\n# Importamos el m\u00f3dulo de despliegue de Active Directory\nImport-Module ADDSDeployment\n\n# Ejecutamos la instalaci\u00f3n del bosque y del dominio\nInstall-ADDSForest `\n    -DomainName $dominioFQDN `\n    -DomainNetBiosName $dominioNETBIOS `\n    -SafeModeAdministratorPassword (ConvertTo-SecureString -String $adminPass -AsPlainText -Force) `\n    -DomainMode WinThreshold `\n    -ForestMode WinThreshold `\n    -InstallDNS `\n    -Confirm:$false\n</code></pre> <p>Explicaci\u00f3n de cada par\u00e1metro</p> <ul> <li><code>-DomainName</code>: nombre completo del dominio (por ejemplo, <code>empresa.local</code> o <code>acme.lan</code>)</li> <li><code>-DomainNetBiosName</code>: nombre corto del dominio, usado en redes antiguas y para compatibilidad</li> <li><code>-SafeModeAdministratorPassword</code>: contrase\u00f1a para el modo de recuperaci\u00f3n de servicios de directorio (DSRM)</li> <li><code>-DomainMode</code> y <code>-ForestMode</code>: nivel funcional del dominio y del bosque. <code>WinThreshold</code> es el identificador para Windows Server 2025</li> <li><code>-InstallDNS</code>: instala y configura el servidor DNS si no existe uno en la red</li> <li><code>-Confirm:$false</code>: evita que se solicite confirmaci\u00f3n manual durante la ejecuci\u00f3n</li> </ul> <p>Nota</p> <p>El servidor se reiniciar\u00e1 autom\u00e1ticamente al finalizar la instalaci\u00f3n. Al volver a arrancar, ya ser\u00e1 un controlador de dominio (DC).</p>"},{"location":"02_6_dominio/#anadir-un-cliente-al-dominio-en-windows-server","title":"A\u00f1adir un cliente al dominio en Windows Server","text":"<p>Para que un equipo cliente pueda formar parte de un dominio gestionado por Active Directory, es necesario cumplir una serie de requisitos previos y seguir un proceso de uni\u00f3n al dominio. Este procedimiento permite que el cliente sea administrado centralizadamente, acceda a recursos compartidos y se autentique mediante las pol\u00edticas del dominio.</p>"},{"location":"02_6_dominio/#requisitos-previos","title":"Requisitos previos","text":"<p>Antes de iniciar el proceso de uni\u00f3n, debemos asegurarnos de que el cliente y el servidor est\u00e1n correctamente conectados y configurados:</p> <ol> <li> <p>Conectividad de red</p> <ul> <li>Direcciones IP compatibles: Ambos equipos deben tener direcciones IP dentro de la misma subred o en redes que puedan comunicarse entre s\u00ed mediante enrutamiento.</li> <li>Conexi\u00f3n f\u00edsica: Los cables de red deben estar conectados al mismo switch o a switches interconectados. En entornos virtuales, deben estar en la misma red virtual o puente.</li> </ul> </li> <li> <p>Configuraci\u00f3n del DNS</p> <ul> <li>El servidor DNS del cliente debe ser la IP del controlador de dominio, ya que es el \u00fanico capaz de resolver correctamente el nombre del dominio.</li> <li>Esta configuraci\u00f3n se realiza desde las propiedades de la tarjeta de red del cliente, en el apartado de IPv4.</li> </ul> </li> <li> <p>Verificaci\u00f3n de conectividad</p> <p>Desde la terminal del cliente, se puede comprobar la conexi\u00f3n con el servidor mediante:</p> <pre><code>ping nombre_del_servidor\nnslookup nombre_del_dominio\n</code></pre> <p>Si ambos comandos responden correctamente, el cliente est\u00e1 listo para unirse al dominio.</p> </li> </ol>"},{"location":"02_6_dominio/#proceso-de-union-al-dominio","title":"Proceso de uni\u00f3n al dominio","text":"<p>Una vez verificada la conectividad, seguimos estos pasos desde el equipo cliente (Windows 10, 11 o equivalente):</p> <ol> <li> <p>Abrir Configuraci\u00f3n del sistema    Ir a: <code>Panel de control \u2192 Sistema \u2192 Cambiar configuraci\u00f3n (nombre del equipo)</code></p> </li> <li> <p>Cambiar nombre del equipo y dominio    En la ventana de propiedades del sistema:  </p> </li> <li>Hacer clic en \u201cCambiar\u2026\u201d  </li> <li>Introducir el nombre del dominio (por ejemplo, <code>iesconsueloaranda.lan</code>)  </li> <li> <p>Confirmar</p> </li> <li> <p>Autenticaci\u00f3n    Se solicitar\u00e1n credenciales de un usuario con permisos para unir equipos al dominio (normalmente un administrador del dominio).</p> </li> <li> <p>Reinicio del equipo    Tras la uni\u00f3n, el sistema pedir\u00e1 reiniciar el equipo para aplicar los cambios.</p> </li> <li> <p>Inicio de sesi\u00f3n en el dominio    Al reiniciar, en la pantalla de inicio de sesi\u00f3n aparecer\u00e1 la opci\u00f3n de iniciar sesi\u00f3n con una cuenta del dominio. Se debe usar el formato: <code>DOMINIO\\nombre_usuario</code></p> </li> </ol> <p>Veamos el proceso en el siguiente video:</p>"},{"location":"02_6_dominio/#verificacion","title":"Verificaci\u00f3n","text":"<p>Una vez unido al dominio, se puede comprobar desde:</p> <ul> <li><code>Sistema \u2192 Informaci\u00f3n del equipo</code>: debe aparecer el nombre del dominio.</li> <li><code>Usuarios y grupos locales</code>: los usuarios del dominio ya pueden iniciar sesi\u00f3n.</li> <li><code>Active Directory</code>: el nuevo equipo aparecer\u00e1 como objeto en la unidad organizativa correspondiente.</li> </ul>"},{"location":"03_01_objetos_dominios/","title":"Objetos del Dominio en Active Directory","text":"<p>El Directorio Activo (Active Directory) es, en esencia, una base de datos jer\u00e1rquica que almacena objetos que representan las entidades administrables dentro de una red inform\u00e1tica. En el contexto de un dominio basado en Windows Server, esta base de datos centralizada permite la consulta por parte de todos los equipos miembros del dominio y puede ser modificada por los controladores de dominio.</p> <p>La administraci\u00f3n de un dominio implica la creaci\u00f3n, configuraci\u00f3n y mantenimiento de los objetos del directorio que representan los recursos de la red (usuarios, grupos, equipos, impresoras, etc.), as\u00ed como las relaciones entre ellos (por ejemplo, qu\u00e9 usuarios pertenecen a qu\u00e9 grupos, o qu\u00e9 grupos tienen acceso a determinados recursos compartidos).</p>"},{"location":"03_01_objetos_dominios/#elementos-estructurales-de-active-directory","title":"Elementos estructurales de Active Directory","text":"<p>La organizaci\u00f3n de los objetos en Active Directory se basa en una jerarqu\u00eda l\u00f3gica que facilita la administraci\u00f3n y el control de acceso. Los principales elementos son:</p> Elemento Descripci\u00f3n Dominio Unidad estructural b\u00e1sica que agrupa todos los objetos de la red. Se identifica mediante notaci\u00f3n DNS (por ejemplo, <code>empresa.local</code>). Unidad Organizativa (OU) Contenedor l\u00f3gico que permite agrupar objetos relacionados, como usuarios, equipos o impresoras de un mismo departamento. Equivale a una carpeta en un sistema de archivos. Grupo Conjunto de objetos del mismo tipo, generalmente usuarios. Se utilizan para asignar permisos de forma colectiva, simplificando la administraci\u00f3n. Objeto Representaci\u00f3n individual de un recurso de red: usuario, equipo, carpeta compartida, impresora, etc. Cada objeto tiene atributos espec\u00edficos seg\u00fan su tipo. <p>Nota t\u00e9cnica:</p> <p>Los dominios en Active Directory se identifican mediante la notaci\u00f3n DNS (Domain Name System), lo que permite una integraci\u00f3n m\u00e1s sencilla con servicios de red y resoluci\u00f3n de nombres.</p>"},{"location":"03_01_objetos_dominios/#identificacion-de-objetos-en-active-directory","title":"Identificaci\u00f3n de objetos en Active Directory","text":"<p>Cada objeto en Active Directory se identifica mediante un nombre, que puede expresarse de tres formas distintas:</p>"},{"location":"03_01_objetos_dominios/#ejemplo-usuario-sergio-en-el-dominio-microsoftcom","title":"Ejemplo: Usuario <code>sergio</code> en el dominio <code>microsoft.com</code>","text":"<ol> <li> <p>Nombre completo relativo LDAP </p><pre><code>CN=sergio\n</code></pre>    Donde <code>CN</code> significa Common Name (nombre com\u00fan).<p></p> </li> <li> <p>Nombre completo LDAP </p><pre><code>CN=sergio, DC=microsoft, DC=com\n</code></pre>    Incluye el dominio y todos los contenedores jer\u00e1rquicos.<p></p> </li> <li> <p>Nombre can\u00f3nico </p><pre><code>microsoft.com/sergio\n</code></pre><p></p> </li> </ol>"},{"location":"03_01_objetos_dominios/#ejemplo-avanzado-usuario-srey-en-una-estructura-jerarquica","title":"Ejemplo avanzado: Usuario <code>srey</code> en una estructura jer\u00e1rquica","text":"<p>Supongamos que el usuario <code>srey</code> se encuentra dentro de la unidad organizativa <code>sor</code>, que a su vez est\u00e1 dentro de <code>SMR</code>, todo ello en el dominio <code>aula224.lan</code>. Las formas de nombrarlo ser\u00edan:</p> <ul> <li> <p>Nombre completo LDAP </p><pre><code>CN=srey, OU=sor, OU=SMR, DC=aula224, DC=lan\n</code></pre><p></p> </li> <li> <p>Nombre can\u00f3nico </p><pre><code>aula224.lan/SMR/sor/srey\n</code></pre><p></p> </li> </ul> <p>Equivalencia t\u00e9cnica:</p> <p>Esta estructura es comparable a una ruta absoluta en un sistema de archivos, lo que facilita la localizaci\u00f3n precisa de cualquier objeto dentro del dominio.</p> <p>Ejemplo: Unidad Organizativa <code>MiUnidadOrganizativa</code> en <code>microsoft.com</code></p> Forma de nombre Ejemplo Relativo LDAP <code>OU=MiUnidadOrganizativa</code> Completo LDAP <code>OU=MiUnidadOrganizativa, DC=microsoft, DC=com</code> Can\u00f3nico <code>microsoft.com/MiUnidadOrganizativa</code>"},{"location":"03_01_objetos_dominios/#atributos-de-los-objetos","title":"Atributos de los objetos","text":"<p>Cada objeto en Active Directory posee una serie de atributos que lo describen. Estos atributos var\u00edan seg\u00fan el tipo de objeto:</p> <ul> <li>Usuario: nombre, apellidos, direcci\u00f3n de correo electr\u00f3nico, nombre de inicio de sesi\u00f3n, etc.</li> <li>Grupo: nombre del grupo, tipo de grupo (seguridad o distribuci\u00f3n), miembros asociados, etc.</li> <li>Equipo: nombre del equipo, sistema operativo, ubicaci\u00f3n, etc.</li> </ul> <p>Herramienta principal:</p> <p>La gesti\u00f3n de estos objetos y sus atributos se realiza principalmente mediante la consola Usuarios y Equipos de Active Directory, accesible desde los controladores de dominio.</p>"},{"location":"03_02_usuarios/","title":"Cuentas de Usuario en un Dominio Windows","text":"<p>En un entorno inform\u00e1tico, cada persona que utiliza un ordenador debe disponer de una cuenta de usuario, la cual cumple dos funciones esenciales:</p> <ul> <li>Identificaci\u00f3n y autenticaci\u00f3n del usuario para acceder al sistema.  </li> <li>Gesti\u00f3n de permisos y derechos sobre los recursos disponibles en el sistema.</li> </ul>"},{"location":"03_02_usuarios/#tipos-de-cuentas-de-usuarios","title":"Tipos de cuentas de usuarios","text":"<p>No debemos confundir entre cuentas locales de usuario y cuentas de dominio: </p>"},{"location":"03_02_usuarios/#cuentas-locales-de-usuario","title":"Cuentas locales de usuario","text":"<p>Cuando se crea un usuario en un sistema Windows que no act\u00faa como controlador de dominio (DC) \u2014por ejemplo, un equipo cliente\u2014 se genera una cuenta local de usuario. Esta cuenta permite al usuario iniciar sesi\u00f3n \u00fanicamente en el equipo donde fue creada.</p> <p>Ejemplo pr\u00e1ctico: si se crea una cuenta local en el equipo <code>PC-SMR01</code>, el usuario solo podr\u00e1 iniciar sesi\u00f3n en ese equipo, y no en otros equipos de la red.</p>"},{"location":"03_02_usuarios/#cuentas-de-usuario-en-dominio","title":"Cuentas de usuario en dominio","text":"<p>En redes corporativas o educativas, es habitual que los usuarios necesiten acceder a distintos equipos. Para ello, se podr\u00edan crear cuentas locales en cada equipo, pero esta soluci\u00f3n es ineficiente y dif\u00edcil de administrar.</p> <p>La alternativa \u00f3ptima es utilizar cuentas de usuario de dominio, que se crean dentro del Active Directory (AD). Estas cuentas permiten al usuario iniciar sesi\u00f3n desde cualquier equipo miembro del dominio, sin necesidad de replicar la cuenta en cada dispositivo.</p> <p>Concepto clave: la cuenta de dominio es \u00fanica y est\u00e1 centralizada en el Directorio Activo, lo que facilita la administraci\u00f3n y la seguridad.</p>"},{"location":"03_02_usuarios/#diferencias-entre-cuentas-locales-y-cuentas-de-dominio","title":"Diferencias entre cuentas locales y cuentas de dominio","text":"Caracter\u00edstica Cuenta Local Cuenta de Dominio Ubicaci\u00f3n Base de datos local del equipo Directorio Activo (centralizado) Acceso Solo en el equipo donde se cre\u00f3 En cualquier equipo del dominio Gesti\u00f3n de permisos Solo sobre recursos locales Sobre recursos de toda la red Visibilidad Solo en el equipo local Visible en todos los equipos del dominio Administraci\u00f3n Manual en cada equipo Centralizada desde el DC <p>Importante: - A una cuenta local no se le pueden asignar permisos sobre recursos del dominio. - A una cuenta de dominio se le pueden conceder permisos sobre cualquier recurso compartido en la red (archivos, carpetas, impresoras, etc.).</p>"},{"location":"03_02_usuarios/#creacion-y-validacion-de-cuentas-de-dominio","title":"Creaci\u00f3n y validaci\u00f3n de cuentas de dominio","text":"<p>En un dominio Windows, cualquier servidor que act\u00fae como Controlador de Dominio (DC) puede crear cuentas de usuario de dominio. Los datos de estas cuentas se almacenan en el Directorio Activo, lo que permite que todos los equipos del dominio las reconozcan.</p> <p>Cuando un usuario intenta iniciar sesi\u00f3n en un equipo del dominio utilizando su cuenta de dominio, el equipo realiza una consulta al Directorio Activo para validar sus credenciales.</p> <p>Proceso de autenticaci\u00f3n: 1. El usuario introduce sus credenciales. 2. El equipo consulta al DC. 3. El DC verifica la identidad y autoriza el acceso.</p>"},{"location":"03_02_usuarios/#herramienta-de-usuarios-y-equipos-de-active-directory","title":"Herramienta de Usuarios y Equipos de Active Directory","text":"<p>La herramienta Usuarios y Equipos de Active Directory es una consola administrativa fundamental para la gesti\u00f3n de objetos dentro de un dominio Windows. Permite crear, modificar, eliminar y organizar usuarios, grupos, equipos y unidades organizativas (OU) de forma centralizada.</p>  Herramienta de Usuarios y Equipos de Active Directory <p>Se puede acceder a esta herramienta desde dos ubicaciones principales:</p> <ul> <li>A trav\u00e9s del Administrador del servidor, desplegando el men\u00fa Herramientas situado en la parte superior derecha.</li> <li>Desde el bot\u00f3n Inicio, accediendo a Herramientas administrativas.</li> </ul> <p>Es necesario que el equipo tenga instalados los componentes de Active Directory Domain Services (AD DS) y que est\u00e9 unido a un dominio para que la consola est\u00e9 disponible.</p>"},{"location":"03_02_usuarios/#estructura-del-dominio-en-la-consola","title":"Estructura del dominio en la consola","text":"<p>Una vez abierta la herramienta, se muestra el \u00e1rbol jer\u00e1rquico del dominio, donde se pueden observar varias Unidades Organizativas (OU) que han sido creadas autom\u00e1ticamente durante la instalaci\u00f3n del dominio. Algunas de las m\u00e1s relevantes son:</p> <ul> <li>Built-in: contiene usuarios y grupos integrados que se crean autom\u00e1ticamente al establecer el dominio. Estos objetos tienen funciones espec\u00edficas relacionadas con la seguridad y la administraci\u00f3n. Se estudiar\u00e1n en detalle m\u00e1s adelante.</li> <li>Computers: almacena las cuentas de los equipos cliente que han sido a\u00f1adidos al dominio. Cada equipo aparece como un objeto dentro de esta OU.</li> <li>Domain Controllers: contiene las cuentas de los servidores que act\u00faan como Controladores de Dominio (DC). En una instalaci\u00f3n inicial, esta OU suele contener \u00fanicamente el servidor principal.</li> <li>Users: es el contenedor por defecto donde se crean los usuarios y grupos si no se especifica otra ubicaci\u00f3n. Aunque funcional, se recomienda crear OU personalizadas para organizar los objetos de forma l\u00f3gica y facilitar su administraci\u00f3n.</li> </ul> <p>Nota: Las OU permiten aplicar pol\u00edticas de grupo (GPO) de forma segmentada, lo que mejora la seguridad y la eficiencia en la gesti\u00f3n de recursos.</p>"},{"location":"03_02_usuarios/#funcionalidades-de-la-barra-de-herramientas","title":"Funcionalidades de la barra de herramientas","text":"<p>La barra de herramientas de la consola incluye accesos directos para realizar las siguientes acciones:</p> <ul> <li>Crear un nuevo usuario.</li> <li>Crear un nuevo grupo.</li> <li>Crear una nueva unidad organizativa (OU).</li> <li>Buscar objetos dentro del dominio.</li> <li>Aplicar filtros para visualizar subconjuntos espec\u00edficos de objetos.</li> </ul> <p>Estas funciones permiten una administraci\u00f3n \u00e1gil y estructurada del entorno de red, especialmente en organizaciones con m\u00faltiples departamentos o sedes.</p>"},{"location":"03_02_usuarios/#operaciones-con-cuentas-de-usuario-en-active-directory","title":"Operaciones con cuentas de usuario en Active Directory","text":"<p>La gesti\u00f3n de cuentas de usuario en un dominio Windows se realiza principalmente desde la herramienta Usuarios y Equipos de Active Directory, aunque tambi\u00e9n es posible utilizar comandos desde la l\u00ednea de comandos. A continuaci\u00f3n se detallan las operaciones m\u00e1s habituales.</p>"},{"location":"03_02_usuarios/#creacion-de-una-cuenta-de-usuario-de-dominio","title":"Creaci\u00f3n de una cuenta de usuario de dominio","text":"<p>La creaci\u00f3n de usuarios se realiza desde el contenedor deseado (por defecto, la OU <code>Users</code>, aunque se recomienda crear OU personalizadas). Desde el men\u00fa contextual del contenedor, se selecciona:</p> <pre><code>Nuevo \u2192 Usuario\n</code></pre>  Creaci\u00f3n de usuario <p>El asistente solicita los siguientes datos:</p> <ul> <li>Nombre, iniciales y apellidos del usuario.</li> <li>Nombre de inicio de sesi\u00f3n (login), sin espacios.</li> <li>Dominio en el que se crea la cuenta.</li> </ul> <p>En la siguiente pantalla se establece la contrase\u00f1a, que debe cumplir los requisitos de complejidad definidos por la pol\u00edtica de seguridad del sistema. Adem\u00e1s, se pueden configurar opciones adicionales:</p> <ul> <li>El usuario debe cambiar la contrase\u00f1a en el pr\u00f3ximo inicio de sesi\u00f3n.</li> <li>El usuario no puede cambiar la contrase\u00f1a.</li> <li>La contrase\u00f1a nunca caduca.</li> <li>La cuenta est\u00e1 deshabilitada.</li> </ul>  Creaci\u00f3n de usuario <p>Tras confirmar los datos, se pulsa Finalizar para crear la cuenta.</p>"},{"location":"03_02_usuarios/#modificar-una-cuenta-de-usuario","title":"Modificar una cuenta de usuario","text":"<p>Se accede mediante doble clic sobre la cuenta o desde su men\u00fa contextual \u2192 Propiedades. </p> <p>Las pesta\u00f1as m\u00e1s relevantes son:</p> <ul> <li>General: nombre, tel\u00e9fono, correo electr\u00f3nico.</li> <li>Direcci\u00f3n: domicilio del usuario.</li> <li>Cuenta:<ul> <li>Nombre de inicio de sesi\u00f3n.</li> <li>Nombre anterior a Windows 2000.</li> <li>Horas de inicio de sesi\u00f3n permitidas.</li> <li>Equipos desde los que puede iniciar sesi\u00f3n.</li> <li>Desbloqueo de cuenta tras intentos fallidos.</li> <li>Opciones de caducidad y deshabilitaci\u00f3n.</li> </ul> </li> <li>Perfil: se trata en otro apartado.</li> <li>Organizaci\u00f3n: informaci\u00f3n empresarial, cuentas administradas.</li> <li>Miembro de: grupos a los que pertenece.</li> </ul>"},{"location":"03_02_usuarios/#modificar-la-contrasena-de-un-usuario","title":"Modificar la contrase\u00f1a de un usuario","text":"<p>Desde el men\u00fa contextual \u2192 Restablecer contrase\u00f1a. Se puede marcar la opci\u00f3n para que el usuario la cambie en el pr\u00f3ximo inicio.</p>"},{"location":"03_02_usuarios/#copiar-una-cuenta-de-usuario","title":"Copiar una cuenta de usuario","text":"<p>Para crear un usuario similar a otro existente, se puede utilizar la opci\u00f3n Copiar desde el men\u00fa contextual. Es habitual crear plantillas de usuario con configuraciones predefinidas (grupos, horarios, pol\u00edticas de contrase\u00f1a, etc.). Estas cuentas deben estar deshabilitadas y se copian cuando se necesita un nuevo usuario del mismo perfil.</p>"},{"location":"03_02_usuarios/#mover-una-cuenta-de-usuario","title":"Mover una cuenta de usuario","text":"<p>Las cuentas pueden organizarse en distintas OU. Para mover una cuenta:</p> <pre><code>Men\u00fa contextual \u2192 Mover\n</code></pre> <p>Se selecciona el nuevo contenedor dentro del mismo dominio.</p>"},{"location":"03_02_usuarios/#eliminar-una-cuenta-de-usuario","title":"Eliminar una cuenta de usuario","text":"<p>Desde el men\u00fa contextual \u2192 Eliminar.</p> <p>Cada cuenta tiene un identificador \u00fanico (SID). Si se elimina y se vuelve a crear, el SID ser\u00e1 distinto y no se recuperar\u00e1n los permisos anteriores. Por ello, se recomienda deshabilitar la cuenta en lugar de eliminarla.</p>"},{"location":"03_02_usuarios/#operaciones-masivas-con-cuentas","title":"Operaciones masivas con cuentas","text":"<p>Para realizar acciones sobre varias cuentas:</p> <ol> <li>Seleccionarlas con Ctrl o May\u00fas.</li> <li>Men\u00fa contextual \u2192 Todas las tareas.</li> </ol> <p>Opciones disponibles:</p> <ul> <li>A\u00f1adir a un grupo.</li> <li>Deshabilitar o habilitar cuentas.</li> <li>Mover a otra OU.</li> <li>Abrir p\u00e1gina principal.</li> <li>Enviar correo electr\u00f3nico.</li> </ul>"},{"location":"03_03_grupos/","title":"Grupos en Active Directory","text":"<p>Al igual que existen cuentas de usuario del dominio, tambi\u00e9n se pueden crear grupos que se almacenan en el Active Directory (AD) y son visibles desde todos los equipos del dominio. Los grupos permiten simplificar la administraci\u00f3n del sistema, ya que facilitan la asignaci\u00f3n de permisos y derechos de forma colectiva.</p>"},{"location":"03_03_grupos/#tipos-de-grupos-en-active-directory","title":"Tipos de grupos en Active Directory","text":"<p>En el directorio pueden definirse dos tipos de grupos:</p> <ul> <li>Grupos de distribuci\u00f3n: utilizados para funciones de comunicaci\u00f3n, como listas de correo electr\u00f3nico. No se emplean para asignar permisos.</li> <li>Grupos de seguridad: utilizados para conceder permisos y derechos sobre recursos. Son los que se utilizan con fines administrativos.</li> </ul> <p>A partir de este punto, nos referiremos exclusivamente a los grupos de seguridad.</p>"},{"location":"03_03_grupos/#ambitos-de-los-grupos-de-seguridad","title":"\u00c1mbitos de los grupos de seguridad","text":"<p>En entornos Windows Server, los grupos de seguridad pueden tener tres \u00e1mbitos distintos:</p>"},{"location":"03_03_grupos/#grupos-locales-del-dominio","title":"Grupos locales del dominio","text":"<ul> <li>Se crean dentro de un dominio y son visibles \u00fanicamente en ese dominio.</li> <li>Se utilizan para asignar permisos sobre recursos del dominio.</li> <li>Pueden incluir:</li> <li>Usuarios del mismo o de otros dominios.</li> <li>Grupos globales de cualquier dominio del bosque.</li> <li>Grupos locales del mismo dominio.</li> <li>Son los grupos m\u00e1s utilizados en la administraci\u00f3n de recursos.</li> </ul>"},{"location":"03_03_grupos/#grupos-globales","title":"Grupos globales","text":"<ul> <li>Son visibles en cualquier dominio del bosque.</li> <li>Permiten asignar permisos sobre recursos de cualquier dominio.</li> <li>Sus miembros deben pertenecer al dominio en el que se crea el grupo.</li> <li>Se utilizan para clasificar usuarios seg\u00fan sus funciones (por ejemplo, <code>Inform\u00e1ticos</code>, <code>Contabilidad</code>, etc.).</li> </ul>"},{"location":"03_03_grupos/#grupos-universales","title":"Grupos universales","text":"<ul> <li>Son visibles en todo el bosque.</li> <li>Pueden incluir usuarios y grupos de cualquier dominio.</li> <li>Permiten asignar permisos sobre recursos de cualquier dominio.</li> <li>Se recomienda limitar su uso por razones de eficiencia, ya que su replicaci\u00f3n puede afectar al rendimiento.</li> </ul>"},{"location":"03_03_grupos/#grupos-locales-en-equipos-miembro","title":"Grupos locales en equipos miembro","text":"<p>En los equipos que forman parte de un dominio tambi\u00e9n pueden definirse grupos locales. Estos grupos pueden incluir:</p> <ul> <li>Cuentas de usuario locales.</li> <li>Usuarios y grupos globales de cualquier dominio del bosque.</li> <li>Grupos universales.</li> </ul> <p>Un grupo local no puede ser miembro de otro grupo local. Estos grupos se utilizan para conceder permisos sobre recursos locales del equipo en el que se crean.</p> Estructura de un Bosque de Active Directory"},{"location":"03_03_grupos/#integracion-automatica-de-grupos","title":"Integraci\u00f3n autom\u00e1tica de grupos","text":"<p>Cuando un equipo se une a un dominio:</p> <ul> <li>El grupo global Administradores del dominio se incluye autom\u00e1ticamente en el grupo local Administradores del equipo.</li> <li>El grupo global Usuarios del dominio se incluye en el grupo local Usuarios.</li> </ul> <p>Esto garantiza que los administradores y usuarios del dominio tengan los mismos derechos que los definidos localmente en cada equipo.</p>"},{"location":"03_03_grupos/#estrategia-recomendada-de-organizacion-agdlp","title":"Estrategia recomendada de organizaci\u00f3n: AGDLP","text":"<p>Microsoft recomienda la estrategia AGDLP, especialmente en entornos con un \u00fanico dominio. Esta sigla representa:</p> <ul> <li>Accounts (cuentas de usuario)</li> <li>Global groups (grupos globales)</li> <li>Domain Local groups (grupos locales de dominio)</li> <li>Permissions (permisos)</li> </ul> AGDLP"},{"location":"03_03_grupos/#pasos-para-aplicar-agdlp","title":"Pasos para aplicar AGDLP","text":"<ol> <li>Identificar los tipos de usuarios (por ejemplo, empleados del departamento de inform\u00e1tica).</li> <li>Crear un grupo global para agruparlos (por ejemplo, <code>Inform\u00e1ticos</code>).</li> <li>Determinar si se puede usar un grupo integrado o si es necesario crear un grupo local de dominio (por ejemplo, <code>Usuarios de impresora</code>).</li> <li>A\u00f1adir el grupo global <code>Inform\u00e1ticos</code> al grupo local de dominio <code>Usuarios de impresora</code>.</li> <li>Asignar permisos sobre el recurso (por ejemplo, una impresora) al grupo <code>Usuarios de impresora</code>.</li> </ol> AGDLP Ejemplo"},{"location":"03_03_grupos/#reglas-de-inclusion-entre-grupos","title":"Reglas de inclusi\u00f3n entre grupos","text":"<ul> <li>En un grupo global solo se pueden incluir grupos globales del mismo dominio. No se pueden incluir grupos locales.</li> <li>En un grupo local de dominio se pueden incluir:<ul> <li>Grupos globales de cualquier dominio.</li> <li>Grupos locales del mismo dominio.</li> </ul> </li> </ul> <p>El anidamiento de grupos mejora la administraci\u00f3n, pero si se utilizan muchos niveles, puede dificultar la comprensi\u00f3n de los permisos efectivos. Se recomienda mantener un \u00fanico nivel de anidamiento.</p>"},{"location":"03_03_grupos/#operaciones-con-grupos","title":"Operaciones con grupos","text":""},{"location":"03_03_grupos/#creacion-de-grupos","title":"Creaci\u00f3n de grupos","text":"<p>Los grupos pueden crearse en cualquier contenedor del dominio. Por defecto, se crean en la OU <code>Users</code>, aunque es recomendable utilizar OU espec\u00edficas.</p> <p>Desde la consola:</p> <pre><code>Men\u00fa contextual del contenedor \u2192 Nuevo \u2192 Grupo\n</code></pre> Creaci\u00f3n de nuevo grupo <p>Se debe especificar:</p> <ul> <li>Nombre del grupo.</li> <li>\u00c1mbito (local, global o universal).</li> <li>Tipo (seguridad o distribuci\u00f3n).</li> </ul>"},{"location":"03_03_grupos/#modificacion-de-grupos","title":"Modificaci\u00f3n de grupos","text":"<p>Desde el men\u00fa contextual del grupo \u2192 Propiedades, se pueden realizar las siguientes acciones:</p> <ul> <li>Cambiar el nombre o tipo del grupo.</li> <li>A\u00f1adir o quitar miembros (pesta\u00f1a Miembros).</li> <li>Incluir el grupo en otros grupos (pesta\u00f1a Miembro de).</li> <li>Asignar un administrador del grupo (pesta\u00f1a Administrado por).</li> </ul>"},{"location":"03_03_grupos/#anadir-miembros-a-un-grupo","title":"A\u00f1adir miembros a un grupo","text":"<p>Existen dos m\u00e9todos:</p> <ol> <li>Desde las propiedades del grupo, en la pesta\u00f1a Miembros.</li> <li>Desde el men\u00fa contextual del objeto (usuario, equipo, grupo) \u2192 A\u00f1adir a un grupo.</li> </ol>"},{"location":"03_03_grupos/#otras-operaciones","title":"Otras operaciones","text":"<p>Las operaciones habituales con grupos incluyen:</p> <ul> <li>Mover un grupo a otro contenedor.</li> <li>Eliminar un grupo.</li> <li>Copiar un grupo para replicar su configuraci\u00f3n.</li> </ul> <p>Estas acciones se realizan de forma similar a las operaciones con cuentas de usuario.</p>"},{"location":"03_03_grupos/#usuarios-y-grupos-predeterminados-en-active-directory","title":"Usuarios y grupos predeterminados en Active Directory","text":"<p>Al instalar Active Directory (AD) en un entorno Windows Server, se crean autom\u00e1ticamente una serie de usuarios y grupos predeterminados dentro del contenedor <code>Users</code>. Estos objetos tienen funciones espec\u00edficas dentro del dominio y est\u00e1n clasificados por tipo y \u00e1mbito: grupos universales, grupos globales y grupos locales del dominio.</p>"},{"location":"03_03_grupos/#usuarios-predeterminados","title":"Usuarios predeterminados","text":"<p>Entre los usuarios creados por defecto destacan:</p> <ul> <li> <p>Administrador:   Cuenta principal de administraci\u00f3n del dominio. Tiene control total sobre todos los objetos y configuraciones. Es miembro de los grupos <code>Administradores</code>, <code>Administradores del dominio</code>, entre otros. Esta cuenta no puede eliminarse, aunque puede renombrarse o deshabilitarse.</p> </li> <li> <p>Invitado:   Cuenta destinada a usuarios sin cuenta en el dominio. Equivale a la cuenta de invitado en sistemas operativos cliente de Microsoft. Est\u00e1 deshabilitada por defecto por razones de seguridad.</p> </li> </ul> Usuarios predeterminados en un dominio"},{"location":"03_03_grupos/#grupos-globales-y-universales","title":"Grupos globales y universales","text":"<ul> <li> <p>Usuarios del dominio (global):   Incluye todas las cuentas de usuario creadas en el dominio. Se utiliza para asignar permisos generales a todos los usuarios.</p> </li> <li> <p>Administradores del dominio (global):   Sus miembros tienen privilegios administrativos sobre el dominio, incluyendo la gesti\u00f3n de usuarios, grupos, pol\u00edticas y recursos.</p> </li> <li> <p>Administradores de empresa (universal):   Grupo con privilegios para administrar cualquier dominio dentro del bosque. Su uso debe restringirse a tareas de administraci\u00f3n global.</p> </li> </ul>"},{"location":"03_03_grupos/#grupos-integrados-carpeta-built-in","title":"Grupos integrados (carpeta Built-in)","text":"Usuarios predeterminados en un dominio <p>Adem\u00e1s de los grupos en <code>Users</code>, se crean grupos locales del dominio en la carpeta <code>Built-in</code>, conocidos como grupos integrados. Estos grupos est\u00e1n dise\u00f1ados para tareas administrativas espec\u00edficas:</p> <ul> <li> <p>Administradores:   Administran el controlador de dominio.</p> </li> <li> <p>Operadores de copias de seguridad:   Pueden realizar copias de seguridad y restaurar archivos, incluso si no tienen permisos expl\u00edcitos sobre los archivos.</p> </li> <li> <p>Operadores de cuenta:   Gestionan cuentas de usuario, grupos y equipos, pero no pueden modificar miembros de grupos administrativos.</p> </li> <li> <p>Operadores de impresi\u00f3n:   Configuran y administran impresoras en el dominio.</p> </li> <li> <p>Operadores de servidor:   Pueden crear carpetas compartidas y realizar tareas de mantenimiento en el servidor.</p> </li> <li> <p>Usuarios:   Grupo con permisos limitados para evitar cambios accidentales en el sistema. Permite ejecutar la mayor\u00eda de aplicaciones. Incluye al grupo global <code>Usuarios del dominio</code>.</p> </li> </ul>"},{"location":"03_03_grupos/#identidades-especiales-grupos-del-sistema","title":"Identidades especiales (grupos del sistema)","text":"<p>Adem\u00e1s de los usuarios y grupos, el sistema crea identidades especiales que pueden utilizarse para asignar permisos. Estas no son cuentas reales, pero representan conjuntos de usuarios en determinadas condiciones:</p> <ul> <li> <p>Todos:   Incluye todos los usuarios, incluso los no autenticados. Su uso debe evitarse por motivos de seguridad.</p> </li> <li> <p>Usuarios autenticados:   Incluye \u00fanicamente a los usuarios que han iniciado sesi\u00f3n con credenciales v\u00e1lidas. Es m\u00e1s seguro que el grupo <code>Todos</code>.</p> </li> <li> <p>Usuarios de Terminal Server:   Representa a los usuarios que han iniciado sesi\u00f3n mediante servicios de Terminal Server.</p> </li> <li> <p>Propietario (Creator Owner):   Usuario que cre\u00f3 o posee el objeto. Se utiliza para asignar permisos din\u00e1micos.</p> </li> <li> <p>Grupo creador (Creator Group):   Grupo que cre\u00f3 o posee el objeto. \u00datil en entornos donde los permisos se heredan por grupo.</p> </li> </ul>"},{"location":"03_03_grupos/#asignacion-de-permisos","title":"Asignaci\u00f3n de permisos","text":"<p>Al asignar permisos sobre un objeto (archivo, carpeta, impresora, etc.), se puede hacer:</p> <ul> <li>A usuarios espec\u00edficos.</li> <li>A grupos de seguridad.</li> <li>A identidades especiales del sistema.</li> </ul> <p>Esta flexibilidad permite una administraci\u00f3n granular y segura de los recursos del dominio.</p>"},{"location":"03_04_equipos/","title":"Equipos en Active Directory","text":"<p>Adem\u00e1s de almacenar informaci\u00f3n sobre usuarios y grupos, Active Directory (AD) tambi\u00e9n gestiona cuentas de equipo. Estas cuentas representan dispositivos f\u00edsicos o virtuales que forman parte del dominio y desde los cuales los usuarios pueden iniciar sesi\u00f3n.</p> <p>Cada objeto en AD \u2014usuarios, grupos y equipos\u2014 posee un identificador \u00fanico (SID) que se utiliza para asignar permisos y derechos sobre recursos.</p> Equipos dados de alta en un dominio"},{"location":"03_04_equipos/#cuentas-de-equipo-en-el-dominio","title":"Cuentas de equipo en el dominio","text":"<p>Las cuentas de equipo permiten:</p> <ul> <li>Autenticar el equipo dentro del dominio.</li> <li>Asignar permisos y derechos espec\u00edficos al equipo.</li> <li>Controlar el acceso a recursos compartidos.</li> </ul> <p>Por defecto, las cuentas de equipo se almacenan en dos contenedores:</p> <ul> <li>Domain Controllers: contiene las cuentas de los controladores de dominio (DC), tanto principales como secundarios.</li> <li>Computers: almacena las cuentas de los equipos cliente y servidores miembro del dominio.</li> </ul> <p>No obstante, estas cuentas pueden moverse a otras Unidades Organizativas (OU) para facilitar su administraci\u00f3n.</p>"},{"location":"03_04_equipos/#creacion-de-una-cuenta-de-equipo","title":"Creaci\u00f3n de una cuenta de equipo","text":"<p>Normalmente, las cuentas de equipo se crean autom\u00e1ticamente al unir un equipo al dominio. Sin embargo, tambi\u00e9n pueden crearse manualmente desde la consola Usuarios y Equipos de Active Directory:</p> <pre><code>Men\u00fa contextual del contenedor \u2192 Nuevo \u2192 Equipo\n</code></pre> Equipos dados de alta en un dominio"},{"location":"03_04_equipos/#modificacion-de-una-cuenta-de-equipo","title":"Modificaci\u00f3n de una cuenta de equipo","text":"<p>Desde el men\u00fa contextual del equipo \u2192 Propiedades, se puede acceder a diversas pesta\u00f1as con informaci\u00f3n editable:</p> <ul> <li>General: nombre del equipo, tipo (DC o no), ubicaci\u00f3n y descripci\u00f3n.</li> <li>Sistema operativo: versi\u00f3n, edici\u00f3n y \u00faltimo Service Pack instalado.</li> <li>Miembro de: grupos a los que pertenece el equipo (por defecto, <code>Equipos del dominio</code>).</li> <li>Delegaci\u00f3n: configuraci\u00f3n de servicios delegados.</li> <li>Ubicaci\u00f3n: ubicaci\u00f3n f\u00edsica o l\u00f3gica del equipo.</li> <li>Administrado por: usuario o grupo responsable de su gesti\u00f3n.</li> <li>Marcado: configuraci\u00f3n de acceso telef\u00f3nico si est\u00e1 habilitado.</li> </ul> <p>Si se activa la opci\u00f3n Caracter\u00edsticas avanzadas en el men\u00fa Ver, se muestran pesta\u00f1as adicionales con informaci\u00f3n t\u00e9cnica m\u00e1s detallada.</p>"},{"location":"03_04_equipos/#otras-operaciones-con-cuentas-de-equipo","title":"Otras operaciones con cuentas de equipo","text":""},{"location":"03_04_equipos/#mover-una-cuenta-de-equipo","title":"Mover una cuenta de equipo","text":"<p>Para reorganizar los equipos dentro del dominio, se puede mover una cuenta a otra OU:</p> <pre><code>Men\u00fa contextual del equipo \u2192 Mover\n</code></pre>"},{"location":"03_04_equipos/#deshabilitar-una-cuenta-de-equipo","title":"Deshabilitar una cuenta de equipo","text":"<p>Deshabilitar una cuenta impide que los usuarios puedan iniciar sesi\u00f3n en el dominio desde ese equipo. Se utiliza en casos de mantenimiento, infecci\u00f3n por malware o fallos cr\u00edticos.</p> <pre><code>Men\u00fa contextual del equipo \u2192 Deshabilitar equipo\n</code></pre> <p>Para volver a habilitarlo:</p> <pre><code>Men\u00fa contextual del equipo \u2192 Habilitar equipo\n</code></pre>"},{"location":"03_04_equipos/#restablecer-una-cuenta-de-equipo","title":"Restablecer una cuenta de equipo","text":"<p>Si un equipo pierde la sincronizaci\u00f3n de su contrase\u00f1a interna con el controlador de dominio, no podr\u00e1 iniciar sesi\u00f3n. Para solucionarlo:</p> <pre><code>Men\u00fa contextual del equipo \u2192 Restablecer cuenta\n</code></pre> <p>En el caso de servidores, se recomienda utilizar la l\u00ednea de comandos:</p> <pre><code>netdom resetpwd /s:NombreEquipo /ud:DOMINIO\\Usuario /p:Contrase\u00f1a\n</code></pre> <p>M\u00e1s informaci\u00f3n en este art\u00edculo t\u00e9cnico sobre restablecimiento de cuentas de equipo.</p>"},{"location":"03_04_equipos/#eliminar-una-cuenta-de-equipo","title":"Eliminar una cuenta de equipo","text":"<p>La eliminaci\u00f3n de una cuenta es irreversible y supone que el equipo deja de pertenecer al dominio:</p> <pre><code>Men\u00fa contextual del equipo \u2192 Eliminar\n</code></pre> <p>Sin embargo, lo m\u00e1s adecuado es reconfigurar el equipo para que se una a otro dominio o grupo de trabajo. En ese caso, su cuenta en el dominio se elimina autom\u00e1ticamente.</p>"},{"location":"03_04_equipos/#administracion-remota-de-equipos","title":"Administraci\u00f3n remota de equipos","text":"<p>Desde Active Directory es posible administrar equipos de forma remota. Para ello, el usuario debe pertenecer a uno de los siguientes grupos:</p> <ul> <li>Administradores del dominio</li> <li>Operadores de cuentas</li> <li>Administradores de empresa</li> </ul> <p>Adem\u00e1s, se debe habilitar la administraci\u00f3n remota en el Firewall de Windows del equipo a gestionar. En la pesta\u00f1a Excepciones, se debe activar la opci\u00f3n Administraci\u00f3n remota.</p>"},{"location":"03_05_unidades_organizativas/","title":"Unidades Organizativas en Active Directory","text":"<p>Una Unidad Organizativa (OU) \u2014tambi\u00e9n denominada departamento\u2014 es un objeto del Directorio Activo (Active Directory) que act\u00faa como contenedor l\u00f3gico. Puede albergar otros objetos del directorio, como:</p> <ul> <li>Cuentas de usuario  </li> <li>Grupos de seguridad  </li> <li>Equipos del dominio  </li> <li>Recursos compartidos  </li> <li>Impresoras compartidas  </li> <li>Otras unidades organizativas</li> </ul> <p>Este dise\u00f1o permite establecer una jerarqu\u00eda estructurada de objetos, similar a la organizaci\u00f3n de carpetas en un sistema de archivos. Los objetos contenidos en una OU pueden moverse posteriormente a otra sin p\u00e9rdida de funcionalidad.</p>"},{"location":"03_05_unidades_organizativas/#finalidad-de-las-unidades-organizativas","title":"Finalidad de las Unidades Organizativas","text":"<p>El objetivo principal de las OU es organizar los objetos del directorio de forma coherente, facilitando su administraci\u00f3n. Lo m\u00e1s habitual es reflejar la estructura organizativa de la entidad (departamentos, sedes, \u00e1reas funcionales, etc.).</p> Unidades Organizativas <p>Las OU permiten:</p> <ul> <li>Delegar la administraci\u00f3n: Cada OU puede gestionarse de forma independiente. Es posible asignar privilegios administrativos sobre una OU a usuarios o grupos espec\u00edficos.</li> <li>Aplicar pol\u00edticas de grupo (GPO): Las OU permiten vincular directivas que configuran el comportamiento de los usuarios y equipos que contienen. Por ejemplo, se puede impedir el acceso al Panel de control a los usuarios de la OU <code>Alumnos</code>.</li> </ul> <p>Nota</p> <p>Tambi\u00e9n es posible aplicar GPO directamente a grupos, sin necesidad de crear OU espec\u00edficas para cada caso.</p>"},{"location":"03_05_unidades_organizativas/#modelo-de-dominio-unico","title":"Modelo de dominio \u00fanico","text":"<p>En organizaciones peque\u00f1as o medianas, se suele implementar un modelo de dominio \u00fanico con m\u00faltiples OU. La creaci\u00f3n de varios dominios solo se justifica si:</p> <ul> <li>La organizaci\u00f3n est\u00e1 descentralizada y requiere administradores distintos para cada \u00e1rea.</li> <li>Existen segmentos de red con conexiones lentas, lo que dificulta la replicaci\u00f3n entre controladores de dominio.</li> </ul>"},{"location":"03_05_unidades_organizativas/#operaciones-con-unidades-organizativas","title":"Operaciones con Unidades Organizativas","text":""},{"location":"03_05_unidades_organizativas/#crear-una-unidad-organizativa","title":"Crear una Unidad Organizativa","text":"<p>Desde la consola Usuarios y Equipos de Active Directory:</p> Men\u00fa para crear Unidades Organizativas <ol> <li>Ubicarse en el contenedor deseado (dominio o OU existente).</li> <li>Men\u00fa contextual \u2192 Nuevo \u2192 Unidad Organizativa.</li> <li>Introducir el nombre de la OU.</li> <li>Opcional: marcar la casilla Proteger contenedor contra eliminaci\u00f3n accidental. Cuidado porque si esta opci\u00f3n se marca no se podr\u00e1 eliminar la Unidad Organizativa, a no ser que se acceda a un men\u00fa extendido y se habilite su eliminaci\u00f3n. Por otra parte, se debe tener cuidado ya que si se elimina una Unidad Organizativa se borrar\u00e1n todos los elementos que contenga.</li> </ol> Crear Unidades Organizativas"},{"location":"03_05_unidades_organizativas/#mover-una-unidad-organizativa","title":"Mover una Unidad Organizativa","text":"<p>Para trasladar una OU a otro contenedor dentro del mismo dominio:</p> <pre><code>Men\u00fa contextual de la OU \u2192 Mover\n</code></pre> <p>Seleccionar el nuevo contenedor (normalmente otra OU).</p>"},{"location":"03_05_unidades_organizativas/#eliminar-una-unidad-organizativa","title":"Eliminar una Unidad Organizativa","text":"<p>Por defecto, las OU se crean con protecci\u00f3n contra eliminaci\u00f3n accidental. Para eliminar una OU:</p> <ol> <li>Activar Caracter\u00edsticas avanzadas en el men\u00fa Ver.</li> <li>Men\u00fa contextual de la OU \u2192 Propiedades.</li> <li>Pesta\u00f1a Objeto \u2192 desmarcar la opci\u00f3n Proteger objeto contra eliminaci\u00f3n accidental.</li> <li>Men\u00fa contextual \u2192 Eliminar.</li> </ol> Eliminar Unidades Organizativas"},{"location":"03_05_unidades_organizativas/#delegar-la-administracion-de-una-ou","title":"Delegar la administraci\u00f3n de una OU","text":"<p>Active Directory permite delegar el control de una OU a usuarios o grupos no administradores del dominio:</p> <ol> <li>Men\u00fa contextual de la OU \u2192 Delegar control.</li> <li>Asistente de delegaci\u00f3n:</li> <li>Seleccionar usuarios o grupos (preferiblemente grupos por facilidad de mantenimiento).</li> <li>Elegir las tareas a delegar (crear usuarios, modificar contrase\u00f1as, administrar grupos, etc.).</li> <li>Confirmar el resumen y finalizar el asistente.</li> </ol> <p>M\u00e1s informaci\u00f3n en :  - Crear una OU en Windows Server 2019 \u2013 SomeBooks</p>"},{"location":"03_06_herramientas_administracion/","title":"Herramientas de administraci\u00f3n en Windows Server","text":"<p>En esta secci\u00f3n se describen brevemente las herramientas m\u00e1s utilizadas para la administraci\u00f3n de un dominio y sus servidores en entornos Windows Server. Estas herramientas permiten gestionar usuarios, equipos, roles, servicios y recursos del sistema de forma centralizada.</p>"},{"location":"03_06_herramientas_administracion/#administrador-del-servidor","title":"Administrador del servidor","text":"<p>El Administrador del servidor es la consola principal de administraci\u00f3n en Windows Server. Se abre autom\u00e1ticamente al iniciar sesi\u00f3n y proporciona acceso a la mayor\u00eda de herramientas del sistema.</p> Administrador del Servidor <p>Funciones destacadas;</p> <ul> <li> <p>Servidor local: vista general del estado del servidor, incluyendo:</p> <ul> <li>Configuraci\u00f3n b\u00e1sica (nombre, IP, dominio, etc.)</li> <li>Eventos recientes registrados</li> <li>Servicios en ejecuci\u00f3n</li> <li>Rendimiento del sistema</li> <li>Roles y caracter\u00edsticas instaladas</li> </ul> </li> <li> <p>Men\u00fa lateral: permite administrar:</p> <ul> <li>Otros servidores del dominio (si existen)</li> <li>Roles instalados (AD DS, DNS, IIS, etc.)</li> <li>Grupos de servidores</li> </ul> </li> </ul> <p>Administrador del servidor</p> <p>Esta herramienta es esencial para supervisar el estado del servidor y realizar tareas administrativas de forma centralizada.</p>"},{"location":"03_06_herramientas_administracion/#usuarios-y-equipos-de-active-directory","title":"Usuarios y equipos de Active Directory","text":"<p>Ya hemos visto anteriormente esta herramienta:</p> Usuarios y Equipos de Active Directory <p>La herramienta Usuarios y equipos de Active Directory (ADUC) es la m\u00e1s utilizada para administrar los objetos del dominio:</p> <ul> <li>Cuentas de usuario</li> <li>Grupos de seguridad</li> <li>Equipos del dominio</li> <li>Unidades organizativas (OU)</li> </ul> <p>Las funciones clave que podemos realizar son: </p> <ul> <li>Crear, modificar y eliminar objetos del dominio</li> <li>Delegar administraci\u00f3n sobre OU</li> <li>Establecer membres\u00edas de grupo</li> <li>Aplicar pol\u00edticas de grupo (GPO) por contenedor</li> </ul> <p>ADUC es fundamental para la gesti\u00f3n de identidades y la organizaci\u00f3n l\u00f3gica del dominio.</p>"},{"location":"03_06_herramientas_administracion/#administracion-de-equipos","title":"Administraci\u00f3n de equipos","text":"<p>Disponible en todas las versiones de Windows (cliente y servidor), la herramienta Administraci\u00f3n de equipos permite gestionar m\u00faltiples aspectos del sistema local.</p> Administraci\u00f3n de equipos <p>Las herramientas incluidas dentro de este administrador son:</p> <ul> <li>Programador de tareas: automatiza la ejecuci\u00f3n de tareas en horarios definidos.</li> <li>Visor de eventos: registra eventos del sistema, seguridad y aplicaciones.</li> <li>Carpetas compartidas: muestra recursos compartidos y usuarios conectados.</li> <li>Monitor de rendimiento: analiza el uso de CPU, RAM, disco y red.</li> <li>Administrador de dispositivos: gestiona el hardware instalado.</li> <li>Administrador de discos: permite crear, formatear y gestionar particiones.</li> <li>Herramientas de roles: acceso a consolas espec\u00edficas como IIS, Enrutamiento y acceso remoto, etc.</li> </ul> <p>Esta herramienta es \u00fatil tanto para la administraci\u00f3n local como para el diagn\u00f3stico y mantenimiento del sistema.</p> <p>Gracias, Sergio. Aqu\u00ed tienes el contenido revisado y estructurado en formato Markdown para documentaci\u00f3n t\u00e9cnica, ideal para tus clases de administraci\u00f3n de sistemas en 2\u00ba SMR. He mejorado la redacci\u00f3n, a\u00f1adido contexto t\u00e9cnico y mantenido la claridad pedag\u00f3gica.</p>"},{"location":"03_06_herramientas_administracion/#cambiar-el-nivel-de-acceso-de-un-usuario-en-un-equipo-local","title":"Cambiar el nivel de acceso de un usuario en un equipo local","text":"<p>Aunque esta herramienta o truco se refiere m\u00e1s bien a equipos cliente, en determinados casos, un usuario del dominio sin privilegios administrativos puede necesitar permisos elevados en un equipo concreto. Esto puede deberse a tareas como:</p> <ul> <li>Administraci\u00f3n del equipo local  </li> <li>Instalaci\u00f3n de software </li> <li>Acceso a configuraciones avanzadas del sistema  </li> <li>Modificaci\u00f3n del registro (regedit) por parte del usuario o alg\u00fan programa que utilice.</li> </ul>"},{"location":"03_06_herramientas_administracion/#procedimiento-para-otorgar-permisos-de-administrador-local","title":"Procedimiento para otorgar permisos de administrador local","text":"<p>El proceso es similar al de convertir un usuario local en administrador, con la diferencia de que se debe especificar que el usuario pertenece al dominio.</p>"},{"location":"03_06_herramientas_administracion/#pasos-desde-la-interfaz-grafica","title":"Pasos desde la interfaz gr\u00e1fica","text":"<p>Hay muchos tutoriales en internet que te permiten realiza esta acci\u00f3n, como puedes ver en Solvetic.</p> <p>No obstante aqu\u00ed tienes los pasos a realizar:</p> <ol> <li>Abrir el Panel de control \u2192 Cuentas de usuario \u2192 Administrar cuentas de usuario.</li> <li>Seleccionar el usuario que se desea modificar.</li> <li>Pulsar en Cambiar tipo de cuenta.</li> <li>Elegir Administrador como nuevo nivel de acceso.</li> <li>Confirmar los cambios.</li> </ol> Selecci\u00f3n de rol de Administrador para equipo locql <p>Lo \u00fanico que nos quedar\u00eda ser\u00eda revisar que se han aplicado los cambios:</p> Cuenta de dominio como Administrador para equipo locql <p>Usuarios de dominio en equipo local</p> <p>Para usuarios del dominio, se debe indicar el nombre completo de inicio de sesi\u00f3n en formato: </p><pre><code>DOMINIO\\nombre_usuario\n</code></pre><p></p>"},{"location":"03_06_herramientas_administracion/#alternativa-desde-la-consola","title":"Alternativa desde la consola","text":"<p>Tambi\u00e9n se puede a\u00f1adir el usuario al grupo de administradores locales mediante l\u00ednea de comandos:</p> <pre><code>net localgroup Administradores DOMINIO\\nombre_usuario /add\n</code></pre> <ul> <li><code>Administradores</code>: nombre del grupo local (puede variar seg\u00fan idioma del sistema).</li> <li><code>DOMINIO\\nombre_usuario</code>: nombre de usuario con prefijo de dominio.</li> </ul>"},{"location":"03_06_herramientas_administracion/#consideraciones-de-seguridad","title":"Consideraciones de seguridad","text":"<ul> <li>Este cambio no afecta al nivel de acceso en el dominio, solo en el equipo local.</li> <li>Se recomienda aplicar esta modificaci\u00f3n solo cuando sea estrictamente necesario.</li> <li> <p>Para entornos educativos o corporativos, conviene documentar cada cambio y justificarlo.</p> </li> <li> <p>Resultado esperado</p> </li> <li> <p>En <code>PerfMovil</code>:</p> <ul> <li><code>profe1</code> \u2192 carpeta con Control total para <code>profe1</code></li> <li><code>profe2</code> \u2192 carpeta con Control total para <code>profe2</code></li> </ul> </li> <li> <p>En <code>CarpPart</code>:</p> <ul> <li> <p>Cada usuario (<code>profe1</code>, <code>profe2</code>, <code>alum1</code>, <code>alum2</code>) tiene su carpeta con:</p> <ul> <li>Control total para el usuario propietario</li> <li>Control total para los administradores</li> </ul> </li> </ul> </li> </ul>"},{"location":"03_06_herramientas_administracion/#buscador-en-active-directory","title":"Buscador en Active Directory","text":"<p>No es una herramienta administrativa como tal, pero el buscador es un elemento esencial en cualquier sistema, sobre todo a medida que el n\u00famero de objetos en Active Directory (usuarios, equipos, grupos, etc.) crece, localizar elementos espec\u00edficos se vuelve m\u00e1s complejo. Para facilitar esta tarea, la consola de Usuarios y Equipos de Active Directory incluye una herramienta de b\u00fasqueda avanzada que permite filtrar y localizar objetos de forma eficiente.</p> <p>El buscador se puede abrir desde:</p> <ul> <li>El men\u00fa Acci\u00f3n de la consola.</li> <li>El men\u00fa contextual de cualquier contenedor (unidad organizativa o ra\u00edz del dominio).</li> </ul> Opciones de b\u00fasqueda <p>Al abrir el buscador, se presenta un desplegable llamado Buscar, donde se puede especificar el tipo de objeto que se desea localizar:</p> <ul> <li>Usuarios (incluye grupos y contactos)</li> <li>Equipos</li> <li>Impresoras</li> <li>Carpetas compartidas</li> <li>Departamentos</li> <li>B\u00fasqueda personalizada</li> <li>Consultas comunes</li> </ul> <p>Cada tipo de b\u00fasqueda activa criterios espec\u00edficos adaptados al tipo de objeto seleccionado.</p> <p>Por ejemploe en Consultas comunes tenemos:</p> Busquedas. Consultas comunes <p>Esta opci\u00f3n muestra una interfaz simplificada con los criterios m\u00e1s habituales para buscar:</p> <ul> <li>Usuarios por nombre, descripci\u00f3n o grupo</li> <li>Equipos por nombre o sistema operativo</li> <li>Grupos por tipo o membres\u00eda</li> </ul> <p>Es \u00fatil para b\u00fasquedas r\u00e1pidas y frecuentes.</p> <p>O las B\u00fasqueda personalizada que permiten realizar b\u00fasquedas m\u00e1s detalladas utilizando cualquier atributo del objeto. Por ejemplo:</p> <ul> <li>Buscar usuarios por direcci\u00f3n de correo electr\u00f3nico</li> <li>Filtrar equipos por versi\u00f3n de sistema operativo</li> <li>Localizar grupos por descripci\u00f3n o tipo de seguridad</li> </ul> Busquedas. Consultas personalizadas <p>Esta opci\u00f3n es especialmente \u00fatil en entornos grandes o cuando se necesita precisi\u00f3n.</p> <p>Todas estas opciones tienen su \u00c1mbito de b\u00fasqueda mediante el desplegable En, se puede definir el contenedor donde se realizar\u00e1 la b\u00fasqueda:</p> <ul> <li>Todo el dominio</li> <li>Una unidad organizativa espec\u00edfica</li> <li>Un contenedor concreto</li> </ul> <p>Limitar el \u00e1mbito de b\u00fasqueda puede mejorar el rendimiento y la relevancia de los resultados.</p>"},{"location":"03_07_perfiles_usuarios/","title":"Perfiles de usuario en Active Directory","text":"<p>En el entorno Windows, un perfil de usuario es el conjunto de configuraciones, archivos y preferencias que definen el entorno de trabajo personalizado de cada usuario cuando inicia sesi\u00f3n en el sistema. Este perfil incluye elementos como el fondo de escritorio, la configuraci\u00f3n de la barra de tareas, los accesos directos del men\u00fa Inicio, las opciones de accesibilidad, las preferencias de las aplicaciones y los documentos personales.</p>"},{"location":"03_07_perfiles_usuarios/#perfiles-de-usuario-en-entornos-de-dominio","title":"Perfiles de usuario en entornos de dominio","text":"<p>En un entorno de dominio, cada usuario tiene un perfil que define su entorno de trabajo: configuraci\u00f3n del escritorio, barra de tareas, men\u00fa Inicio, documentos personales, preferencias de aplicaciones, entre otros. Este perfil se crea y almacena en el equipo donde el usuario inicia sesi\u00f3n, pero puede gestionarse de forma m\u00e1s avanzada si se configura como perfil de red.</p>"},{"location":"03_07_perfiles_usuarios/#perfil-local","title":"Perfil local","text":"<p>El perfil local se genera autom\u00e1ticamente la primera vez que un usuario inicia sesi\u00f3n en un equipo. Se guarda en el disco local, concretamente en la ruta <code>C:\\Usuarios\\nombre_usuario</code>, y contiene todos los datos y configuraciones personales del usuario en ese equipo.</p> Perfiles de usuarios <p>Este tipo de perfil tiene las siguientes caracter\u00edsticas:</p> <ul> <li>Es exclusivo del equipo donde se ha creado.</li> <li>Los cambios realizados por el usuario (como fondo de escritorio o accesos directos) se conservan solo en ese equipo.</li> <li>Si el mismo usuario inicia sesi\u00f3n en otro equipo del dominio, se generar\u00e1 un nuevo perfil local independiente, sin sincronizaci\u00f3n entre ellos.</li> </ul> <p>Esto puede generar inconsistencias en el entorno de trabajo del usuario, especialmente si utiliza varios equipos.</p>"},{"location":"03_07_perfiles_usuarios/#perfil-de-red","title":"Perfil de red","text":"<p>Para solucionar este problema, se puede configurar un perfil de red. En este caso, el perfil del usuario se almacena en un servidor del dominio (normalmente el controlador de dominio) y se sincroniza autom\u00e1ticamente con cualquier equipo desde el que el usuario inicie sesi\u00f3n.</p> <p>Las ventajas del perfil de red son:</p> <ul> <li>El entorno de trabajo del usuario se mantiene coherente en todos los equipos del dominio.</li> <li>Los cambios realizados se guardan en el servidor y se aplican en futuras sesiones, independientemente del equipo utilizado.</li> <li>Se mejora la experiencia del usuario m\u00f3vil, que puede trabajar desde distintos equipos sin perder personalizaci\u00f3n ni documentos.</li> </ul> <p>Adem\u00e1s de los perfiles locales y de red, existe un tercer tipo: el perfil temporal. Este se crea cuando, por alguna raz\u00f3n, no se puede cargar el perfil de red. El perfil temporal se elimina al cerrar la sesi\u00f3n, por lo que cualquier cambio realizado durante esa sesi\u00f3n se pierde.</p> <p>En entornos Windows con Active Directory, los perfiles de red permiten que los usuarios mantengan su entorno personalizado al iniciar sesi\u00f3n desde cualquier equipo del dominio. Existen tres variantes principales:</p> Tipo de perfil Descripci\u00f3n M\u00f3vil El usuario puede modificar su perfil. Los cambios se guardan en el servidor. Obligatorio El usuario no puede guardar cambios. Siempre se carga el perfil original. Superobligatorio Igual que el obligatorio, pero si no se puede cargar el perfil, no se permite iniciar sesi\u00f3n. <p>Estas variantes permiten adaptar el comportamiento del perfil seg\u00fan el nivel de control que se desee aplicar sobre la experiencia del usuario.</p> <p>perfil m\u00f3vil</p> <p>Aunque se distinguen tres tipos, en la pr\u00e1ctica se suele usar el t\u00e9rmino \u201cperfil m\u00f3vil\u201d para referirse a cualquiera de ellos.</p> <p>El funcionamiento de los perfiles m\u00f3viles se puede desglosar en comportamiento dependiendo de estado del usuario: </p> <ol> <li> <p>Inicio de sesi\u00f3n:    Cuando el usuario inicia sesi\u00f3n en un equipo del dominio, el sistema copia su perfil desde el servidor (normalmente el controlador de dominio) al equipo local. Esto incluye configuraciones personales, documentos, accesos directos, fondo de escritorio, etc.</p> </li> <li> <p>Durante la sesi\u00f3n:    El usuario puede modificar libremente su entorno: cambiar el fondo, reorganizar iconos, guardar archivos en sus carpetas personales, etc. Todos estos cambios se realizan sobre la copia local del perfil.</p> </li> <li> <p>Cierre de sesi\u00f3n:    Al cerrar sesi\u00f3n, el sistema sincroniza los cambios realizados en el perfil local de vuelta al servidor. De este modo, el perfil actualizado queda almacenado centralmente.</p> </li> <li> <p>Sesiones futuras:    En el siguiente inicio de sesi\u00f3n, ya sea en el mismo equipo o en otro distinto del dominio, el perfil se descargar\u00e1 desde el servidor con todos los cambios aplicados previamente.</p> </li> </ol> <p>perfil temporal</p> <p>Si el perfil no puede cargarse, porque esta mal configurad, problemas de permisos o de red, se genera un perfil temporal, que se elimina al cerrar sesi\u00f3n.</p>"},{"location":"03_07_perfiles_usuarios/#creacion-de-perfiles-moviles-en-active-directory","title":"Creaci\u00f3n de perfiles m\u00f3viles en Active Directory","text":"<p>A continuaci\u00f3n se describe el procedimiento para configurar perfiles m\u00f3viles en un entorno Windows Server con Active Directory.</p> <p>Paso 1: Crear la carpeta de perfiles en el servidor</p> <p>Primero se debe crear una carpeta donde vamos a guardar los perfiles de forma que se pueda acceder desde cualquier equipo perteneciente al dominio, por lo que debe ser una carpeta compartida de forma que el servidor que actuar\u00e1 como contenedor de todos los perfiles m\u00f3viles. A esta carpeta le debemos aplicar unos permisos (que se explicar\u00e1n en la siguiente secci\u00f3n) que permita acceder a esta carpeta.</p> <ul> <li>Ruta sugerida: <code>C:\\AdminRed\\Perfiles</code> compartida como <code>\\\\SRVSERGIO\\Perfiles</code></li> <li>Permisos de compartici\u00f3n (SMB): acceso de modificaci\u00f3n para todos los usuarios que vayan a tener perfil m\u00f3vil.</li> <li>Permisos NTFS (seguridad): tambi\u00e9n deben permitir modificar para los mismos usuarios.</li> </ul> <p>Esta carpeta ser\u00e1 el destino donde se almacenar\u00e1n los datos de perfil de cada usuario.</p> Carpeta para compartir los perfiles <p>Paso 2: Configurar la ruta del perfil en la cuenta de usuario</p> <p>Desde la consola Usuarios y Equipos de Active Directory, se debe editar cada cuenta de usuario que vaya a tener perfil m\u00f3vil:</p> <ol> <li>Abrir las propiedades del usuario.</li> <li>Ir a la pesta\u00f1a Perfil.</li> <li>En el campo Ruta del perfil, indicar la ruta UNC de la carpeta de perfiles seguida del nombre del usuario.</li> </ol> <p>Ejemplo:</p> <pre><code>\\\\SRVSERGIO\\Perfiles\\alumno\n</code></pre> <p>O bien, usar la variable <code>%USERNAME%</code> para que se adapte autom\u00e1ticamente al nombre del usuario:</p> <pre><code>\\\\SRVSERGIO\\Perfiles\\%USERNAME%\n</code></pre> Asignando la ruta del perfil <p>Esta ruta ser\u00e1 utilizada por el sistema para copiar el perfil al iniciar y cerrar sesi\u00f3n. Esta opci\u00f3n es muy \u00fatil cuando asignamos a varios usuarios su ruta de perfil, de forma que seleccionamos varios usuarios, indicamos la ruta usando la variabla <code>%USERNAME%</code> y a cada usuario se asignar\u00e1 su propio perfil con su nombre de usuario.</p> <p>Paso 3: Creaci\u00f3n autom\u00e1tica de carpetas seg\u00fan el sistema operativo</p> <p>Cuando el usuario inicia sesi\u00f3n por primera vez en un equipo del dominio, el sistema crea una carpeta espec\u00edfica dentro de la carpeta de perfiles. </p> Carpetas con diferentes perfiles <p>El nombre de esta carpeta var\u00eda seg\u00fan el sistema operativo del equipo cliente:</p> Sistema operativo cliente Carpeta creada en el servidor Windows XP <code>\\\\SRVSERGIO\\Perfiles\\alumno</code> Windows Vista / 7 <code>\\\\SRVSERGIO\\Perfiles\\alumno.V2</code> Windows 8 / 10 / 11 <code>\\\\SRVSERGIO\\Perfiles\\alumno.V6</code> <p>Importante:</p> <p>En la configuraci\u00f3n del perfil en Active Directory nunca se debe incluir la extensi\u00f3n <code>.V2</code>, <code>.V6</code>, etc.. El sistema la a\u00f1ade autom\u00e1ticamente seg\u00fan el sistema operativo del cliente.</p> <p>Creaci\u00f3n de la carpeta del perfil en el servidor</p> <p>La carpeta del perfil en el servidor se crear\u00e1 la primera vez que el usuario entre en el sistema en cualquier equipo. Hasta ese momento no se crear\u00e1 su perfil.</p> <p>Consideraciones finales</p> <ul> <li>El perfil se copia del servidor al equipo al iniciar sesi\u00f3n, y se sincroniza de vuelta al servidor al cerrar sesi\u00f3n.</li> <li>Si el usuario utiliza equipos con diferentes versiones de Windows, se crear\u00e1n carpetas de perfil separadas para cada versi\u00f3n.</li> <li>Esta configuraci\u00f3n mejora la movilidad del usuario y facilita la administraci\u00f3n centralizada de entornos de trabajo.</li> </ul> <p>Ejemplo pr\u00e1ctico</p> <p>El usuario del dominio <code>srey</code> tiene configurado su perfil como:</p> <pre><code>\\\\SRVSERGIO\\Perfiles\\srey\n</code></pre> <p>Al iniciar sesi\u00f3n en equipos con Windows 7 y Windows 10/11, se crean:</p> <ul> <li><code>\\\\SRVSERGIO\\Perfiles\\srey.V2</code> \u2192 perfil para Windows 7</li> <li><code>\\\\SRVSERGIO\\Perfiles\\srey.V6</code> \u2192 perfil para Windows 10/11</li> </ul> <p>Cada carpeta contiene configuraciones espec\u00edficas del entorno seg\u00fan el sistema operativo.</p>"},{"location":"03_07_perfiles_usuarios/#creacion-de-perfiles-obligatorios-en-active-directory","title":"Creaci\u00f3n de perfiles obligatorios en Active Directory","text":"<p>Los perfiles obligatorios permiten controlar el entorno de trabajo de los usuarios impidiendo que se guarden cambios entre sesiones. Son \u00fatiles en entornos donde se requiere una configuraci\u00f3n fija, como aulas, laboratorios o puestos de atenci\u00f3n al p\u00fablico.</p> <p>Un perfil obligatorio es una variante del perfil m\u00f3vil en la que los cambios realizados por el usuario no se guardan al cerrar sesi\u00f3n. Cada vez que el usuario inicia sesi\u00f3n, se carga el perfil original desde el servidor, garantizando un entorno limpio y controlado.</p>"},{"location":"03_07_perfiles_usuarios/#perfil-obligatorio-para-un-solo-usuario","title":"Perfil obligatorio para un solo usuario","text":"<p>Configurar un perfil de red para un usuario del dominio de forma que su entorno no se modifique entre sesiones.</p> <p>Pasos a seguir</p> <ol> <li> <p>Iniciar sesi\u00f3n con el usuario    El perfil se crea autom\u00e1ticamente en el servidor si el usuario tiene configurada una ruta de perfil m\u00f3vil en su cuenta de Active Directory.</p> </li> <li> <p>Cerrar la sesi\u00f3n del usuario    Es imprescindible que el usuario no est\u00e9 conectado para modificar su perfil.</p> </li> <li> <p>Tomar control de la carpeta de perfil    Por defecto, solo el usuario tiene acceso a su carpeta de perfil. Para modificarla:</p> <p></p> Permisos de carpeta perfil <p></p> <ul> <li>Ir a la carpeta del perfil en el servidor.</li> <li>Men\u00fa contextual \u2192 Propiedades \u2192 Seguridad \u2192 Opciones avanzadas \u2192 Propietario \u2192 Editar.</li> <li>Establecer como propietario el grupo Administradores.</li> <li>Marcar la casilla Reemplazar propietario en subcontenedores y objetos. Permisos de carpeta perfil </li> </ul> </li> <li> <p>Cambiar el nombre del archivo NTUSER.DAT    Dentro de la carpeta del perfil, localizar el archivo oculto <code>NTUSER.DAT</code> y renombrarlo a <code>NTUSER.MAN</code>. Este cambio convierte el perfil en obligatorio. Los cambios del usuario ya no se guardar\u00e1n.</p> </li> </ol> <p>Ver archivos ocultos y protegidos</p> <p>Por defecto, WIndows oculta los archivos de sistema y los protegidos del sistema operativo, por lo que deberemos entrar en <code>Archivo -&gt; Cambiar en opciones de carpeta y b\u00fasqueda</code> y dejar de ocultar estas opciones. </p> <p></p> <p></p> <p>Tambi\u00e9n es interesante, mostrar las extensiones de los archivos.</p> <p>Asegurarse de que el usuario y el grupo Administradores tienen control total sobre la carpeta y el archivo <code>NTUSER.MAN</code>.</p> Permisos de carpeta perfil <p>Comprobaci\u00f3n en el cliente: Al iniciar sesi\u00f3n, el usuario debe cargar su perfil obligatorio. Podemos comprobar se se han aplicado viendo las cuentas de perfil loca</p> Permisos perfiles locales <p>Si hay errores, aparecer\u00e1 un mensaje indicando que el perfil no se ha podido cargar correctamente.</p> Error al aplicar perfil obligatorio"},{"location":"03_07_perfiles_usuarios/#perfil-obligatorio-compartido-para-varios-usuarios","title":"Perfil obligatorio compartido para varios usuarios","text":"<p>Configurar un \u00fanico perfil obligatorio que ser\u00e1 utilizado por varios usuarios del dominio, ideal para entornos homog\u00e9neos.</p> <p>Pasos a seguir:</p> <ol> <li> <p>Iniciar sesi\u00f3n con la cuenta Administrador en un cliente  para copiar el Perfil predeterminado en la carpeta del servidor donde queremos que est\u00e9 el perfil obligatorio. Se usar\u00e1 el perfil predeterminado como base.</p> </li> <li> <p>Copiar el perfil predeterminado al servidor</p> <ul> <li>Abrir la ventana de perfiles de usuario (<code>Sistema \u2192 Configuraci\u00f3n avanzada \u2192 Perfiles de usuario</code>).</li> <li>Seleccionar el perfil predeterminado.</li> <li>Pulsar Copiar a\u2026.</li> <li>Indicar la ruta de destino en el servidor, por ejemplo:</li> </ul> <pre><code>\\\\SRVSERGIO\\Perfiles\\perfObligatorio.V6\n</code></pre> <p>Recuerda qu\u00e9 son las extensiones <code>.v6</code></p> <p>La extensi\u00f3n <code>.V6</code> depende del sistema operativo del cliente:</p> <ul> <li>Sin extensi\u00f3n en XP</li> <li><code>.V2</code> en Windows Vista / 7</li> <li><code>.V6</code> en Windows 8 / 10 / 11</li> </ul> </li> <li> <p>En '<code>Est\u00e1 permitido usar</code>' tenemos que a\u00f1adir el grupo al que pertenecen los usuarios que tendr\u00e1n perfil obligatorio para que puedan acceder al perfil. S\u00f3lo se puede poner 1 grupo (si queremos que el perfil sea para m\u00e1s de un grupo crearemos un nuevo grupo que los englobe). Para a\u00f1adir el grupo en la ventana de 'Seleccionar usuario o grupo' pondremos su nombre pero antes tenemos que pulsar el bot\u00f3n de Avanzados y en la ventana que se abre vamos a \"Tipo de objetos\" y marcamos la casilla de Grupos que por defecto est\u00e1 desmarcada. Ahora ya encontrar\u00e1 el grupo que queremos y lo seleccionaremos para permitir a sus miembros acceder en la carpeta en que se copiar\u00e1 el perfil.</p> <p></p> Pasos de copia del perfil predeterminado <p></p> </li> <li> <p>Convertir el perfil en obligatorio </p> <ul> <li>Ir a la carpeta del perfil en el servidor.</li> <li>Cambiar el nombre del archivo <code>NTUSER.DAT</code> a <code>NTUSER.MAN</code>.</li> </ul> </li> <li> <p>Asignar el perfil a los usuarios </p> <ul> <li>En Active Directory, editar las cuentas de usuario.</li> <li>En la pesta\u00f1a Perfil, indicar la ruta del perfil compartido:</li> </ul> <pre><code>\\\\SRVSERGIO\\Perfiles\\perfObligatorio\n</code></pre> <p>Recuerda no incluir <code>.V2</code> o <code>.V6</code></p> <p>No incluir <code>.V2</code> o <code>.V6</code> en la ruta de perfil en AD. El sistema lo a\u00f1ade autom\u00e1ticamente seg\u00fan el cliente.</p> </li> </ol> <p>Compatibilidad con varios sistemas operativos</p> <p>Si queremos crear perfil obligatorio para m\u00e1s de un sistema operativo tendremos que repetir este proceso desde cada m\u00e1quina con sistema diferente (por ejemplo lo hacemos desde un Windows 7 para crear el perfil obligatorio V2 y luego desde un Windows 10 para crear el V6 y as\u00ed el usuario tendr\u00e1 su perfil obligatorio tanto en m\u00e1quinas Windows 7/Vista como en Windows 8/10/11.</p>"},{"location":"03_07_perfiles_usuarios/#script-de-inicio-de-sesion","title":"Script de inicio de sesi\u00f3n","text":"<p>En perfiles de red (m\u00f3viles, obligatorios o superobligatorios), se puede configurar un script que se ejecute autom\u00e1ticamente al iniciar sesi\u00f3n.</p> <ul> <li>Crear un archivo <code>.BAT</code> con las instrucciones deseadas.</li> <li>Guardarlo en la carpeta compartida NETLOGON:</li> </ul> <pre><code>C:\\Windows\\SYSVOL\\SYSVOL\\nombre_del_dominio\\scripts\n</code></pre> <ul> <li>El acceso debe ser desde el cliente, por lo que debe tener la forma <code>\\\\SRVSERGIO\\NETLOGON\\inicio</code></li> <li>En la ficha de perfil del usuario, indicar el nombre del script (sin extensi\u00f3n <code>.BAT</code>).</li> </ul> Script inicio de sesi\u00f3n"},{"location":"03_07_perfiles_usuarios/#configuracion-de-carpeta-personal-para-usuarios-moviles","title":"Configuraci\u00f3n de carpeta personal para usuarios m\u00f3viles","text":"<p>En entornos de dominio, los usuarios m\u00f3viles necesitan un espacio centralizado donde guardar sus archivos personales. Este espacio debe estar disponible desde cualquier equipo del dominio en el que inicien sesi\u00f3n, garantizando continuidad y accesibilidad.</p> <p>La soluci\u00f3n consiste en asignar a cada usuario una carpeta personal en el servidor, que se conecta autom\u00e1ticamente como una unidad de red al iniciar sesi\u00f3n. Esta carpeta aparece en el explorador de archivos como una unidad adicional, junto al disco duro y otras unidades locales.</p> <p>Este lugar ser\u00e1 una carpeta vac\u00eda en el servidor para que el usuario pueda guardar sus documentos. Adem\u00e1s se puede conectar autom\u00e1ticamente a una unidad y, por tanto, al usuario le aparecer\u00e1 como una unidad m\u00e1s en la ventana Equipo (junto al disco duro y el resto de unidades del equipo).</p> <p>Al igual que para los perfiles primeramente tendremos que crear y compartir una carpeta en el servidor dentro de la cual Windows crear\u00e1 autom\u00e1ticamente las carpetas personales de los usuarios.</p> <p>Esto se configura igual que los perfiles m\u00f3viles en la pesta\u00f1a Perfil de la cuenta del usuario, en la secci\u00f3n de Carpeta particular:</p> Permisos perfiles locales <p>Para la creaci\u00f3n de carpetas personales tenemos opciones:</p> <ul> <li>Conectar: \u200b\u200bes la opci\u00f3n que elegiremos normalmente. Elegimos la letra a la que se conectar\u00e1 autom\u00e1ticamente la unidad de red que contiene la carpeta personal del usuario y la ruta de esta carpeta (que como el caso de los perfiles acabar\u00e1 por %USERNAME% para que cada usuario tenga su propia carpeta).</li> <li>Ruta de acceso local: en vez de conectar la carpeta personal en una unidad de red se monta en una carpeta (como hace Linux).</li> </ul> <p>La diferencia respecto a la carpeta de los perfiles es:</p> <ul> <li>La carpeta personal de cada usuario se crea en el momento en que se configura (por lo tanto la est\u00e1 creando el Administrador del dominio) mientras que la carpeta del perfil se crea la primera vez que el usuario inicia sesi\u00f3n (por tanto la crea el propio usuario). Esto es importante a la hora de asignar los permisos necesarios a las carpetas donde se crear\u00e1n.</li> <li>Windows da a las 2 carpetas permiso de Control total al usuario propietario pero en la del perfil quita el resto de permisos mientras que en la carpeta personal hereda los permisos que haya establecidos en la carpeta</li> </ul> <p>Una buena opci\u00f3n es compartir la carpeta donde se crear\u00e1n las carpetas personales (y tambi\u00e9n la de los perfiles) de modo que est\u00e9 oculta en examinar la red, lo que se hace comparti\u00e9ndola con un nombre terminado en <code>$</code> (por ejemplo <code>Perfiles$</code>). Esto lo veremos m\u00e1s adelante.</p>"},{"location":"03_07_perfiles_usuarios/#permisos-en-carpetas-de-perfil-de-red-y-carpetas-particulares","title":"Permisos en carpetas de perfil de red y carpetas particulares","text":"<p>En entornos de dominio, es fundamental asignar correctamente los permisos NTFS y de compartici\u00f3n (SMB) a las carpetas que alojan perfiles y documentos de usuario. Los permisos var\u00edan seg\u00fan el tipo de carpeta y el comportamiento esperado.</p> <p>Aunque el tema siguiente de dedica a explicar y aplicar detalladamente los permisos dentro en los recursos de un domino, adelantamos informaci\u00f3n que despu\u00e9s deber\u00eda ser recuperada, comprendida y aplicada de forma correcta.</p> <p>Los tipos de carpetas y permisos recomendados son </p>"},{"location":"03_07_perfiles_usuarios/#carpeta-de-perfil-movil","title":"Carpeta de perfil m\u00f3vil","text":"<ul> <li>Funci\u00f3n: almacena el perfil de usuario que se sincroniza con el servidor al iniciar y cerrar sesi\u00f3n.</li> <li>Creaci\u00f3n: la carpeta se crea autom\u00e1ticamente la primera vez que el usuario inicia sesi\u00f3n.</li> <li>Permisos NTFS:</li> <li>Grupo de usuarios (ej. <code>gProfes</code>) \u2192 Modificar (para que puedan crear su carpeta).</li> <li>Usuario propietario \u2192 Control total sobre su propia carpeta.</li> <li>Administradores \u2192 sin acceso por defecto a las carpetas individuales.</li> </ul>"},{"location":"03_07_perfiles_usuarios/#carpeta-de-perfil-obligatorio","title":"Carpeta de perfil obligatorio","text":"<ul> <li>Funci\u00f3n: contiene un perfil fijo que se carga en cada sesi\u00f3n sin guardar cambios.</li> <li>Creaci\u00f3n: la carpeta se copia manualmente desde un cliente por el administrador.</li> <li>Permisos NTFS:</li> <li>Grupo de usuarios (ej. <code>gAlumnos</code>) \u2192 Lectura y ejecuci\u00f3n.</li> <li>No se requiere modificar ni crear contenido.</li> </ul>"},{"location":"03_07_perfiles_usuarios/#carpeta-particular","title":"Carpeta particular","text":"<ul> <li>Funci\u00f3n: almacena documentos personales del usuario, accesibles desde cualquier equipo.</li> <li>Creaci\u00f3n: la carpeta se crea al configurar la cuenta del usuario en Active Directory.</li> <li>Permisos NTFS:</li> <li>Grupo de usuarios \u2192 Lectura y ejecuci\u00f3n, pero solo sobre la carpeta ra\u00edz.</li> <li>Para evitar que los usuarios vean las carpetas de otros, se debe aplicar el permiso con el alcance: \"S\u00f3lo esta carpeta\" (no subcarpetas ni archivos).</li> <li>Cada carpeta individual \u2192 Control total para el usuario propietario y los administradores.</li> </ul> <p>Ejemplo pr\u00e1ctico</p> <p>Supongamos los siguientes usuarios y grupos:</p> <ul> <li><code>profe1</code>, <code>profe2</code> \u2192 grupo <code>gProfes</code> \u2192 perfil m\u00f3vil + carpeta particular</li> <li><code>alum1</code>, <code>alum2</code> \u2192 grupo <code>gAlumnos</code> \u2192 perfil obligatorio + carpeta particular</li> </ul> <p>Se crea una carpeta compartida en el servidor llamada <code>ManageMobileUsers</code>, con tres subcarpetas:</p> <pre><code>\\\\SRVSERGIO\\ManageMobileUsers\n\u251c\u2500\u2500 PerfMovil\n\u251c\u2500\u2500 PerfOblig\n\u2514\u2500\u2500 CarpPart\n</code></pre>"},{"location":"03_07_perfiles_usuarios/#permisos-recomendados","title":"Permisos recomendados:","text":"<ul> <li>Permisos NTFS</li> </ul> Carpeta Administradores gProfes gAlumnos ManageMobileUsers Control total Lectura y ejecuci\u00f3n Lectura y ejecuci\u00f3n PerfMovil Control total Modificar \u2014 PerfOblig Control total \u2014 Lectura y ejecuci\u00f3n CarpPart Control total Lectura y ejecuci\u00f3n (solo ra\u00edz) Lectura y ejecuci\u00f3n (solo ra\u00edz) <ul> <li> <p>Permisos SMB (compartici\u00f3n)</p> <ul> <li><code>ManageMobileUsers</code> \u2192  Administradores \u2192 Control total </li> <li><code>gProfes</code> y <code>gAlumnos</code> \u2192 Control total (o al menos Cambiar)</li> </ul> </li> </ul>"},{"location":"04_01_permisos_derechos/","title":"Permisos y derechos en sistemas Windows","text":"<p>Esta unidad de trabajo se centra en la administraci\u00f3n de usuarios y recursos dentro de un entorno de dominio Windows. Se aprender\u00e1 a centralizar la informaci\u00f3n personal de los usuarios mediante perfiles m\u00f3viles y carpetas particulares, garantizando que cada usuario disponga de un entorno coherente y accesible desde cualquier equipo del dominio. Para ello, se utilizar\u00e1n m\u00e1quinas virtuales que simulan una infraestructura corporativa, permitiendo configurar, probar y verificar el funcionamiento de los servicios implicados.</p> <p>Tambi\u00e9n se aprender\u00e1 a incorporar equipos al dominio, aplicar restricciones de acceso, y administrar recursos locales y compartidos como carpetas e impresoras. Se abordar\u00e1n los mecanismos de seguridad que permiten proteger la informaci\u00f3n y garantizar que cada usuario acceda \u00fanicamente a lo que le corresponde. Esta unidad combina la gesti\u00f3n t\u00e9cnica con la aplicaci\u00f3n de pol\u00edticas de seguridad, ofreciendo una visi\u00f3n completa del control de acceso en redes Windows.</p>"},{"location":"04_01_permisos_derechos/#permisos-y-derechos-en-sistemas-windows","title":"Permisos y derechos en sistemas Windows","text":"<p>Para controlar qu\u00e9 acciones puede realizar un usuario o grupo en un sistema Windows, se utilizan dos mecanismos complementarios: los derechos y los permisos. Aunque ambos regulan el acceso y las capacidades dentro del sistema, operan en niveles distintos y tienen implicaciones diferentes.</p> <p>Un derecho permite ejecutar acciones que afectan al sistema en su conjunto, como iniciar sesi\u00f3n, apagar el equipo o realizar copias de seguridad. Estos derechos est\u00e1n definidos por el sistema y no se aplican sobre objetos concretos, sino sobre funciones globales. Cada derecho tiene una lista de usuarios o grupos que lo poseen. Por ejemplo, los miembros del grupo Operadores de copia de seguridad pueden hacer copias de todos los archivos, incluso de aquellos sobre los que no tienen permisos, y el usuario Administrador puede tomar posesi\u00f3n de cualquier archivo del sistema.</p> <p>Un permiso, en cambio, se aplica sobre recursos espec\u00edficos como archivos, carpetas, impresoras o claves del registro. Determina qu\u00e9 tipo de acceso tiene cada usuario: lectura, escritura, modificaci\u00f3n, eliminaci\u00f3n, etc. Cada recurso mantiene su propia lista de control de acceso (ACL), donde se define qui\u00e9n puede hacer qu\u00e9.</p> <p>En caso de conflicto entre un permiso y un derecho, prevalece el derecho. Esto garantiza que ciertos roles del sistema puedan ejercer funciones cr\u00edticas incluso si los permisos locales lo impiden.</p>"},{"location":"04_01_permisos_derechos/#tipos-de-permisos-en-windows","title":"Tipos de permisos en Windows","text":"<p>En sistemas Windows, especialmente en entornos de red, se trabaja con dos tipos de permisos que se aplican en contextos distintos:</p> <ul> <li> <p>Permisos NTFS: se aplican sobre archivos y carpetas en vol\u00famenes formateados con el sistema de archivos NTFS. Se verifican siempre, tanto si el acceso es local como si se realiza a trav\u00e9s de la red. Permiten una configuraci\u00f3n detallada y precisa del acceso.</p> </li> <li> <p>Permisos SMB (tambi\u00e9n conocidos como CIFS): se aplican \u00fanicamente a carpetas compartidas en red. Solo se eval\u00faan cuando el acceso se realiza desde otro equipo, no localmente. Se configuran en la pesta\u00f1a de \u201cCompartir\u201d de las propiedades de una carpeta.</p> </li> </ul> <p>Los permisos SMB solo se aplican a carpetas compartidas, mientras que los NTFS pueden aplicarse tanto a carpetas como a archivos individuales.</p>"},{"location":"04_01_permisos_derechos/#evaluacion-combinada-de-permisos","title":"Evaluaci\u00f3n combinada de permisos","text":"<p>Cuando un recurso tiene definidos ambos tipos de permisos (SMB y NTFS), el sistema aplica el m\u00e1s restrictivo. Es decir, para que un usuario pueda acceder a un recurso compartido, debe tener permisos suficientes tanto en la configuraci\u00f3n de compartici\u00f3n como en la configuraci\u00f3n NTFS. Si uno de los dos lo bloquea, el acceso ser\u00e1 denegado.</p> <ul> <li>Acceso local: solo se eval\u00faan los permisos NTFS.</li> <li>Acceso remoto: se eval\u00faan tanto los permisos SMB como los NTFS, y se aplica la restricci\u00f3n m\u00e1s estricta.</li> </ul> Acceso local o remoto a un recurso. <p>Este comportamiento garantiza una protecci\u00f3n eficaz de los recursos, tanto en el plano local como en el plano de red, y permite a los administradores definir pol\u00edticas de acceso coherentes y seguras.</p>"},{"location":"04_01_permisos_derechos/#permisos-ntfs","title":"Permisos NTFS","text":"<p>El sistema de archivos NTFS permite definir con gran precisi\u00f3n qu\u00e9 puede hacer cada usuario o grupo sobre archivos y carpetas. Estos permisos se aplican tanto en acceso local como remoto, y son fundamentales para garantizar la seguridad y el control de los recursos.</p>"},{"location":"04_01_permisos_derechos/#permisos-sobre-archivos","title":"Permisos sobre archivos","text":"<p>Cada archivo puede tener asignados distintos niveles de acceso. Los principales son:</p> Permiso Habilita al usuario a\u2026 Control total Cambiar permisos, tomar la propiedad y realizar todas las acciones permitidas por los dem\u00e1s permisos. Modificar Modificar y borrar el archivo, adem\u00e1s de escribir y ejecutar. Lectura y ejecuci\u00f3n Ejecutar aplicaciones y leer el contenido del archivo. Escribir Sobrescribir el archivo, cambiar atributos y ver propietario y permisos. Leer Leer el archivo y consultar sus atributos, propietario y permisos. Permisos NTFS en Archivos."},{"location":"04_01_permisos_derechos/#permisos-sobre-carpetas","title":"Permisos sobre carpetas","text":"<p>Las carpetas permiten un conjunto similar de permisos, con algunas diferencias espec\u00edficas:</p> Permiso Habilita al usuario a\u2026 Control total Cambiar permisos, tomar la propiedad, borrar subcarpetas y archivos, y realizar todas las acciones permitidas por los dem\u00e1s permisos. Modificar Borrar la carpeta y realizar acciones de escritura y lectura. Lectura y ejecuci\u00f3n Navegar entre carpetas, leer contenido y listar elementos. Escribir Crear nuevos archivos y subcarpetas, cambiar atributos y ver propietario y permisos. Leer Ver archivos y subcarpetas, atributos, propietario y permisos. Listar contenido carpeta Ver los nombres de los archivos y subcarpetas. Permisos NTFS en Carpetas."},{"location":"04_01_permisos_derechos/#permisos-estandar-mas-utilizados","title":"Permisos est\u00e1ndar m\u00e1s utilizados","text":"<p>Aunque NTFS permite una gran granularidad, en la mayor\u00eda de situaciones se utilizan tres niveles est\u00e1ndar:</p> <ul> <li>Control total: acceso completo, incluyendo la gesti\u00f3n de permisos y propiedad.</li> <li>Modificar: permite cambiar contenido y eliminar el recurso, pero no modificar permisos ni tomar posesi\u00f3n.</li> <li>Leer y ejecutar: acceso de solo lectura, con posibilidad de ejecutar si se trata de un archivo ejecutable.</li> </ul> <p>Adem\u00e1s, existen otros permisos m\u00e1s espec\u00edficos como:</p> <ul> <li>Mostrar contenido de la carpeta: solo permite ver los nombres de los elementos.</li> <li>Lectura: acceso a contenido y atributos.</li> <li>Escritura: permite crear o modificar contenido, pero no necesariamente visualizarlo si no se tiene permiso de lectura.</li> </ul> Edici\u00f3n de permisos NTFS en archivos."},{"location":"04_01_permisos_derechos/#tabla-resumen-ntfs","title":"Tabla resumen NTFS","text":"<p>La siguiente tabla muestra c\u00f3mo se componen los distintos niveles de permisos est\u00e1ndar en Windows a partir de los permisos especiales. Esta estructura permite entender qu\u00e9 acciones est\u00e1n incluidas en cada tipo de permiso (Control total, Modificar, Leer y ejecutar, etc.).</p> Permiso especial Control total Modificar Leer y ejecutar Mostrar contenido de carpeta (solo carpetas) Lectura Escritura Recorrer carpeta / Ejecutar archivo x x x Listar carpeta / Leer datos x x x x x Atributos de lectura x x x x x Atributos extendidos de lectura x x x x x Crear archivos / Escribir datos x x x Crear carpetas / Anexar datos x x x Atributos de escritura x x x Atributos extendidos de escritura x x x Eliminar subcarpetas y archivos x Eliminar x x Permisos de lectura x x x x x Cambiar permisos x Tomar posesi\u00f3n x Sincronizar x x x x x x <p>Notas:</p> <ul> <li>Los permisos Control total incluyen todos los permisos especiales.</li> <li>El permiso Modificar permite cambiar contenido pero no cambiar permisos ni tomar posesi\u00f3n.</li> <li>El permiso Leer y ejecutar incluye lectura b\u00e1sica y ejecuci\u00f3n de archivos.</li> <li>El permiso Mostrar contenido de carpeta solo aplica a carpetas, no a archivos.</li> <li>Los permisos Lectura y Escritura agrupan subconjuntos espec\u00edficos de permisos especiales.</li> </ul> <p>Esta tabla es \u00fatil para comprender c\u00f3mo se estructuran los permisos NTFS en Windows y c\u00f3mo se pueden personalizar para controlar el acceso a archivos y carpetas de forma granular.</p>"},{"location":"04_01_permisos_derechos/#establecer-permisos-ntfs","title":"Establecer permisos NTFS","text":""},{"location":"04_01_permisos_derechos/#desde-el-entorno-grafico","title":"Desde el entorno gr\u00e1fico","text":"<ol> <li>Clic derecho sobre el archivo o carpeta \u2192 Propiedades \u2192 pesta\u00f1a Seguridad.</li> <li>Pulsar Editar para modificar los permisos est\u00e1ndar.</li> <li>Acceder a Opciones avanzadas para:</li> <li>Deshabilitar la herencia.</li> <li>Ver permisos heredados y expl\u00edcitos.</li> <li>Cambiar el propietario del recurso.</li> </ol> Edici\u00f3n de permisos NTFS en entorno gr\u00e1fico. Opciones avanzadas de seguridad NTFS."},{"location":"04_01_permisos_derechos/#desde-la-terminal","title":"Desde la terminal","text":"<p>Windows incluye el comando <code>icacls</code> para gestionar permisos NTFS desde l\u00ednea de comandos. Algunos ejemplos:</p> <pre><code>icacls D:\\Pruebas /grant INFO2\\Ventas:(F)\nicacls D:\\Pruebas /inheritance:d\nicacls D:\\Pruebas /remove:gUsuarios\n</code></pre> <p>Los permisos se indican con letras: - <code>F</code> para Control total - <code>W</code> para Escritura - <code>R</code> para Lectura - <code>(R,W)</code> para Modificar</p>"},{"location":"04_01_permisos_derechos/#propiedad-de-archivos-y-carpetas","title":"Propiedad de archivos y carpetas","text":"<p>El propietario de un archivo o carpeta es el usuario que lo crea. Tanto el propietario como el administrador pueden transferir la propiedad a otro usuario o grupo:</p> <ol> <li>Propiedades \u2192 pesta\u00f1a Seguridad \u2192 Opciones avanzadas.</li> <li>En la parte superior, aparece el propietario actual.</li> <li>Pulsar Cambiar para asignar otro propietario.</li> </ol> Cambio de propietario en configuraci\u00f3n avanzada."},{"location":"04_01_permisos_derechos/#herencia-de-permisos","title":"Herencia de permisos","text":"<p>Cuando se asigna un permiso a una carpeta, por defecto se hereda a todos los archivos y subcarpetas que contiene. Esta herencia puede modificarse desde las opciones avanzadas, eligiendo entre:</p> <ul> <li>Aplicar a \u201cEsta carpeta, subcarpetas y archivos\u201d (opci\u00f3n predeterminada).</li> <li>Aplicar solo a \u201cEsta carpeta\u201d.</li> <li>Aplicar solo a \u201cSubcarpetas y archivos\u201d.</li> </ul> <p>Esto permite controlar con precisi\u00f3n c\u00f3mo se propagan los permisos dentro de una estructura de directorios.</p>"},{"location":"04_01_permisos_derechos/#permisos-heredados-y-explicitos","title":"Permisos heredados y expl\u00edcitos","text":"<p>Al crear un archivo o carpeta, hereda los permisos del contenedor en el que se encuentra. Estos permisos heredados se propagan autom\u00e1ticamente, lo que facilita la administraci\u00f3n.</p> <p>Desde las opciones avanzadas se puede ver si un permiso es heredado o expl\u00edcito. Los heredados aparecen deshabilitados en la pesta\u00f1a Seguridad y no pueden modificarse directamente, a menos que se deshabilite la herencia.</p> Visualizaci\u00f3n de permisos heredados y expl\u00edcitos. Permisos heredados deshabilitados en la pesta\u00f1a Seguridad."},{"location":"04_01_permisos_derechos/#deshabilitar-la-herencia","title":"Deshabilitar la herencia","text":"<p>Si queremos modificar los permisos heredados de una carpeta debemos deshabilitar la herencia desde la ventana de Opciones avanzadas:</p> <ol> <li>Ir a Opciones avanzadas \u2192 pulsar Deshabilitar herencia.</li> <li>Elegir entre:</li> <li>Convertir en permisos expl\u00edcitos: conserva los permisos actuales pero permite editarlos.</li> <li>Quitar todos los permisos heredados: elimina los permisos heredados por completo.</li> </ol> Deshabilitar la herencia en una carpeta. <p>Tambi\u00e9n cuando asignamos un nuevo permiso a una carpeta podemos hacer que no se herede a las carpetas y archivos que contiene si lo hacemos desde opciones avanzadas. Adem\u00e1s de la opci\u00f3n predeterminada que es que el permiso se aplique a \u201cEsta carpeta, subcarpetas y archivos\u201d, podemos elegir otras opciones como que solo se aplique a \u201cEsta carpeta\u201d y as\u00ed evitar que lo hereden las subcarpetas y archivos que contiene.</p>"},{"location":"04_01_permisos_derechos/#comportamiento-al-copiar-o-mover-archivos","title":"Comportamiento al copiar o mover archivos","text":"<p>El comportamiento de los permisos al copiar o mover archivos depende del destino y del volumen:</p> <ul> <li>Copiar: el archivo o carpeta pierde sus permisos originales y hereda los del destino.</li> <li>Mover dentro del mismo volumen: conserva los permisos originales.</li> <li>Mover a otro volumen: se comporta como una copia, heredando los permisos del nuevo destino.</li> </ul>"},{"location":"04_01_permisos_derechos/#reglas-de-aplicacion-de-permisos","title":"Reglas de aplicaci\u00f3n de permisos","text":"<p>Por \u00faltimo, revisemos algunas reglas que se producen al aplicar permisos sobre archivos y carpetas:</p> <ul> <li>Los permisos son acumulativos: se suman los permisos individuales y los de los grupos a los que pertenece el usuario.</li> <li>No tener un permiso equivale a tenerlo denegado.</li> <li>En caso de conflicto:</li> <li>Los permisos expl\u00edcitos tienen prioridad sobre los heredados.</li> <li>Los permisos de denegaci\u00f3n prevalecen sobre los de concesi\u00f3n.</li> </ul> <p>Por ejemplo, si un usuario tiene permiso de lectura por pertenecer a un grupo, pero se le deniega expl\u00edcitamente ese permiso, no podr\u00e1 acceder. La denegaci\u00f3n siempre tiene prioridad.</p>"},{"location":"04_01_permisos_derechos/#permisos-smb","title":"Permisos SMB","text":"<p>Cuando se comparte un recurso en red dentro de un entorno Windows, es necesario definir qu\u00e9 usuarios o grupos pueden acceder a \u00e9l y qu\u00e9 tipo de acciones pueden realizar. Estos permisos dependen del protocolo utilizado para la compartici\u00f3n. En el caso de Windows, el protocolo predeterminado es CIFS/SMB, y es sobre este donde se aplican los permisos de compartici\u00f3n que veremos a continuaci\u00f3n.</p> <p>Antes de configurar cualquier permiso, es imprescindible asegurarse de que est\u00e1 activado el servicio de Uso compartido de archivos e impresoras en el equipo. Sin este servicio, los recursos no estar\u00e1n disponibles en la red, independientemente de los permisos asignados.</p>"},{"location":"04_01_permisos_derechos/#configuracion-de-permisos-de-comparticion","title":"Configuraci\u00f3n de permisos de compartici\u00f3n","text":"<p>Para establecer los permisos SMB sobre una carpeta, se accede a sus propiedades y se utiliza la pesta\u00f1a Compartir. Desde ah\u00ed, el bot\u00f3n Uso compartido avanzado permite configurar el recurso de forma m\u00e1s precisa, definiendo qu\u00e9 grupos o usuarios pueden acceder y con qu\u00e9 nivel de control.</p> Compartir una carpeta. Siempre con Uso Compartido Avanzado. <p>Los niveles de permiso disponibles son:</p> <ul> <li>Leer (o Lector, si se usa el asistente): permite abrir la carpeta, ver su contenido y leer los archivos.</li> <li>Cambiar (o Colaborador): permite modificar archivos, crear nuevos y eliminar contenido.</li> <li>Control total (o Copropietario): incluye todos los permisos anteriores y adem\u00e1s permite cambiar los permisos de la carpeta compartida.</li> </ul> <p>Cada nivel incluye al anterior, por lo que Control total implica tambi\u00e9n Cambiar y Leer. Estos permisos son equivalentes a los permisos NTFS de Control total, Modificar y Lectura y ejecuci\u00f3n, respectivamente.</p> Compartir una carpeta. Siempre con Uso Compartido Avanzado. <p>Al configurar los permisos, se puede elegir entre Permitir o Denegar. La opci\u00f3n de denegaci\u00f3n debe utilizarse con precauci\u00f3n, ya que tiene prioridad sobre cualquier permiso concedido.</p>"},{"location":"04_01_permisos_derechos/#gestion-de-permisos-smb","title":"Gesti\u00f3n de permisos SMB","text":"<p>Los permisos de compartici\u00f3n pueden modificarse desde distintas ubicaciones:</p> <ul> <li>Desde la Administraci\u00f3n de almacenamiento y recursos compartidos, seleccionando la carpeta y accediendo a sus propiedades.</li> <li>Desde el men\u00fa contextual de la carpeta, eligiendo Compartir (aunque el asistente no es recomendable si ya se han configurado permisos NTFS).</li> <li>Desde Propiedades \u2192 Compartir \u2192 Uso compartido avanzado, que es la opci\u00f3n m\u00e1s adecuada para una configuraci\u00f3n precisa.</li> </ul> <p>Es importante recordar que los permisos SMB solo se aplican cuando el acceso se realiza desde otro equipo a trav\u00e9s de la red. Si el usuario accede localmente, estos permisos no se eval\u00faan; en ese caso, se aplican \u00fanicamente los permisos NTFS.</p>"},{"location":"04_01_permisos_derechos/#compartir-simple-vs-uso-compartido-avanzado","title":"Compartir simple vs uso compartido avanzado","text":"<p>Windows ofrece dos formas de compartir una carpeta: el uso compartido simple y el uso compartido avanzado. Aunque ambos permiten publicar la carpeta en la red, su comportamiento es distinto:</p> <ul> <li>El uso compartido avanzado permite configurar exclusivamente los permisos SMB, sin alterar los permisos NTFS ya definidos. Es la opci\u00f3n recomendada cuando se quiere mantener un control preciso sobre el acceso local y remoto.</li> <li>El uso compartido simple, en cambio, modifica tanto los permisos SMB como los NTFS. Esto puede ser \u00fatil en configuraciones iniciales o para usuarios principiantes, pero no debe utilizarse una vez que se han establecido permisos NTFS manualmente, ya que puede sobrescribirlos y provocar p\u00e9rdida de configuraciones espec\u00edficas.</li> </ul>"},{"location":"04_01_permisos_derechos/#consideraciones-importantes-al-asignar-permisos","title":"Consideraciones importantes al asignar permisos","text":"<p>La asignaci\u00f3n de permisos debe hacerse con criterio para evitar errores de seguridad o dificultades de administraci\u00f3n. Algunas recomendaciones clave:</p> <ul> <li>Siempre que sea posible, asignar permisos a grupos en lugar de a usuarios individuales. Esto facilita la gesti\u00f3n y permite aplicar cambios de forma m\u00e1s eficiente.</li> <li>Evitar conceder permisos al grupo Todos, ya que incluye a todos los usuarios del sistema, incluso la cuenta de Invitado.</li> <li>Una estrategia com\u00fan consiste en conceder Control total en los permisos de compartici\u00f3n y gestionar los permisos NTFS de forma m\u00e1s detallada. Esto simplifica la configuraci\u00f3n sin perder precisi\u00f3n.</li> <li>Usar la opci\u00f3n Denegar con precauci\u00f3n. Si se deniega un permiso a un grupo gen\u00e9rico como Usuarios, puede afectar a cuentas que tambi\u00e9n pertenecen a ese grupo, como el Administrador. En caso de conflicto, la denegaci\u00f3n tiene prioridad sobre la concesi\u00f3n.</li> <li>Si no se marca ninguna opci\u00f3n (ni permitir ni denegar), el usuario o grupo no tendr\u00e1 ning\u00fan permiso efectivo. En ese caso, es preferible eliminar el grupo o usuario de la lista para evitar confusiones.</li> </ul>"},{"location":"04_02_servidor_archivos/","title":"El servidor de archivos","text":""},{"location":"04_02_servidor_archivos/#el-servidor-de-archivos","title":"El servidor de archivos","text":"<p>Un servidor de archivos proporciona espacio donde los usuarios pueden almacenar sus archivos de manera que sea m\u00e1s f\u00e1cil su gesti\u00f3n, as\u00ed como compartirlos con otros usuarios. Es una pieza clave en cualquier infraestructura corporativa, ya que permite centralizar la informaci\u00f3n y aplicar pol\u00edticas de acceso y seguridad de forma eficiente.</p> <p>Podemos compartir carpetas directamente como se hace en las versiones cliente de Windows (desde el men\u00fa contextual de la carpeta, accediendo a la pesta\u00f1a Compartir) o hacerlo desde el servicio Servicios de archivo y almacenamiento, que se instala por defecto en Windows Server y se gestiona desde el Administrador del servidor.</p> <p>Este servicio ofrece varias opciones organizadas por categor\u00edas:</p>"},{"location":"04_02_servidor_archivos/#volumenes","title":"Vol\u00famenes","text":"<p>Aqu\u00ed aparecen todos los vol\u00famenes que hay creados en el servidor. Podemos filtrarlos por Discos o por Grupos de almacenamiento. Para el volumen seleccionado se muestra informaci\u00f3n detallada sobre su disco, los recursos compartidos y los discos virtuales iSCSI creados en \u00e9l.</p> Administrador del servidor: gesti\u00f3n de vol\u00famenes y unidades disponibles."},{"location":"04_02_servidor_archivos/#recursos-compartidos","title":"Recursos compartidos","text":"<p>Desde esta secci\u00f3n se pueden visualizar todos los recursos compartidos en cualquier volumen, junto con informaci\u00f3n detallada sobre cada uno. En cualquier servidor de dominio encontraremos al menos dos recursos compartidos esenciales:</p> <ul> <li>NETLOGON: se crea autom\u00e1ticamente en los controladores de dominio (DC) y se utiliza durante el inicio de sesi\u00f3n de los usuarios. Aqu\u00ed se almacenan los scripts de inicio de sesi\u00f3n.</li> <li>SYSVOL: contiene las secuencias de comandos de inicio de sesi\u00f3n y otros elementos de directivas de grupo.</li> </ul> Vista de recursos compartidos en el servidor, con NETLOGON seleccionado."},{"location":"04_02_servidor_archivos/#iscsi","title":"iSCSI","text":"<p>Esta secci\u00f3n muestra los discos virtuales iSCSI configurados en el servidor. Son \u00fatiles para entornos donde se requiere almacenamiento en red de alto rendimiento o para escenarios de virtualizaci\u00f3n avanzada.</p>"},{"location":"04_02_servidor_archivos/#carpetas-de-trabajo","title":"Carpetas de trabajo","text":"<p>Las carpetas de trabajo permiten que los usuarios mantengan sincronizados sus datos entre el servidor y dispositivos que no siempre est\u00e1n conectados a la red corporativa. Es una soluci\u00f3n ideal para usuarios m\u00f3viles o con acceso intermitente.</p>"},{"location":"04_02_servidor_archivos/#crear-carpetas-compartidas","title":"Crear carpetas compartidas","text":"<p>En Windows Server, podemos crear carpetas compartidas de varias formas, dependiendo de si queremos hacerlo desde el entorno gr\u00e1fico, desde el servidor de archivos o mediante l\u00ednea de comandos. Cada m\u00e9todo ofrece distintos niveles de control sobre los permisos y la visibilidad del recurso.</p> <p>Podemos crear una nueva carpeta compartida desde el Servidor de archivos y almacenamiento, como vimos anteriormente, o directamente desde el men\u00fa contextual de la carpeta (como se hace en versiones cliente de Windows).</p> <p>Veamos c\u00f3mo hacerlo en cada caso.</p>"},{"location":"04_02_servidor_archivos/#desde-el-servidor-de-archivos-y-almacenamiento","title":"Desde el servidor de archivos y almacenamiento","text":"<p>Ya hemos visto c\u00f3mo crear una carpeta compartida con el asistente r\u00e1pido. Vamos ahora a utilizar la opci\u00f3n Avanzado, que permite configurar m\u00e1s detalles, como cuotas de almacenamiento para los usuarios.</p> <p>La principal diferencia es que este asistente avanzado nos permite establecer cuotas sobre la carpeta compartida, que luego pueden visualizarse y modificarse desde el Administrador de recursos del servidor de archivos.</p> <p>Por defecto, los permisos asignados son:</p> <ul> <li>NTFS: Lectura y ejecuci\u00f3n para todos los usuarios.</li> <li>SMB: Control total para todos los usuarios.</li> </ul> <p>Estos permisos deben ajustarse manualmente para adaptarlos a las necesidades reales del entorno.</p> <p>Nota:</p> <p>Si el nombre del recurso compartido termina en <code>$</code>, la carpeta estar\u00e1 oculta para los clientes. No aparecer\u00e1 en el explorador de red, aunque los usuarios podr\u00e1n acceder escribiendo su ruta UNC directamente: <code>\\\\Nombre_del_servidor\\Nombre_de_la_carpeta$</code></p> Creaci\u00f3n de carpeta compartida desde el asistente avanzado del servidor de archivos."},{"location":"04_02_servidor_archivos/#desde-las-propiedades-de-la-carpeta","title":"Desde las propiedades de la carpeta","text":"<p>Otra opci\u00f3n es compartir la carpeta directamente desde su men\u00fa contextual. Al abrir las propiedades, accedemos a la pesta\u00f1a Compartir, donde encontramos dos botones:</p> <ul> <li>Compartir: usa el asistente simple, que modifica tanto permisos SMB como NTFS.</li> <li>Compartir avanzado: permite configurar exclusivamente los permisos SMB sin alterar los NTFS.</li> </ul> <p>Esta opci\u00f3n es m\u00e1s adecuada cuando queremos mantener el control sobre los permisos NTFS y evitar que el asistente los sobrescriba.</p> Compartir carpeta desde sus propiedades, con acceso al uso compartido avanzado."},{"location":"04_02_servidor_archivos/#desde-la-terminal","title":"Desde la terminal","text":"<p>Tambi\u00e9n podemos compartir carpetas desde la l\u00ednea de comandos utilizando el comando <code>net share</code>. Este m\u00e9todo es \u00fatil para automatizar tareas o incluirlas en scripts de configuraci\u00f3n.</p> <p>Ejemplo:</p> <pre><code>net share InformesServidor=C:\\Datos\\Informes /grant:ACME\\Ventas,change\n</code></pre> <p>Este comando comparte la carpeta <code>C:\\Datos\\Informes</code> con el nombre <code>InformesServidor</code> y otorga al grupo <code>Ventas</code> del dominio <code>ACME</code> el permiso SMB de Cambiar.</p> <p>Los permisos disponibles son:</p> <ul> <li><code>read</code> \u2192 Leer</li> <li><code>change</code> \u2192 Cambiar</li> <li><code>full</code> \u2192 Control total</li> </ul> <p>Para dejar de compartir la carpeta:</p> <pre><code>net share InformesServidor /delete\n</code></pre>"},{"location":"04_02_servidor_archivos/#publicar-una-carpeta-compartida-en-active-directory","title":"Publicar una carpeta compartida en Active Directory","text":"<p>Adem\u00e1s de compartir la carpeta, podemos publicarla en Active Directory para que los usuarios la encuentren f\u00e1cilmente mediante la herramienta de b\u00fasqueda.</p> <p>Este proceso no crea la carpeta ni la comparte: simplemente la registra en el directorio para facilitar su localizaci\u00f3n.</p> <p>Pasos:</p> <ol> <li>Abrir Usuarios y equipos de Active Directory.</li> <li>Ir a la OU donde queremos publicar la carpeta.</li> <li>Clic derecho \u2192 Nuevo \u2192 Carpeta compartida.</li> <li>Indicar el nombre del recurso compartido y su ruta UNC.</li> <li>(Opcional) A\u00f1adir palabras clave para facilitar la b\u00fasqueda.</li> </ol> Publicaci\u00f3n de carpeta compartida en Active Directory para facilitar su b\u00fasqueda."},{"location":"04_02_servidor_archivos/#carpetas-compartidas-ocultas","title":"Carpetas compartidas ocultas","text":"<p>En Windows Server, es posible compartir una carpeta sin que aparezca listada en el explorador de red de los clientes. Esto se consigue a\u00f1adiendo el s\u00edmbolo $ al final del nombre del recurso compartido. Aunque la carpeta no ser\u00e1 visible, los usuarios podr\u00e1n acceder si conocen su ruta UNC completa.</p>"},{"location":"04_02_servidor_archivos/#configuracion-desde-el-uso-compartido-avanzado","title":"Configuraci\u00f3n desde el uso compartido avanzado","text":"<p>Desde las propiedades de la carpeta, en la pesta\u00f1a Compartir, accedemos al bot\u00f3n Uso compartido avanzado. All\u00ed podemos definir el nombre del recurso compartido incluyendo el s\u00edmbolo <code>$</code> al final.</p> Configuraci\u00f3n del recurso compartido oculto \u201cConfidencial$\u201d desde el uso compartido avanzado."},{"location":"04_02_servidor_archivos/#acceso-al-recurso-oculto","title":"Acceso al recurso oculto","text":"<p>Aunque la carpeta no se muestra en el explorador de red, los usuarios pueden acceder escribiendo directamente su ruta UNC, incluyendo el s\u00edmbolo <code>$</code>.</p> Acceso al recurso oculto mediante la ruta UNC: \\\\SRVSERGIO\\Confidencial$. <p>Tambi\u00e9n es posible acceder desde el explorador de archivos, escribiendo la ruta completa en la barra de direcciones:</p> Acceso directo desde el explorador de archivos a \\\\SRVSERGIO\\Confidencial$. <p>Truco: acceso a unidades compartidas ocultas</p> <p>Por defecto, las unidades de disco est\u00e1n compartidas para los administradores del sistema utilizando nombres ocultos como <code>C$</code>, <code>D$</code>, etc. Esto permite acceder remotamente a cualquier equipo del dominio (o incluso fuera de \u00e9l si se conoce el usuario local) especificando el nombre del equipo y la unidad deseada:</p> <p><code>\\\\NombreDelEquipo\\C$</code> o <code>\\\\192.168.0.5\\C$</code></p>"},{"location":"04_02_servidor_archivos/#espacios-de-almacenamiento-en-windows-server","title":"Espacios de almacenamiento en Windows Server","text":"<p>Los Espacios de almacenamiento (Storage Spaces) son una tecnolog\u00eda de Windows Server que permite agrupar discos f\u00edsicos en una estructura l\u00f3gica llamada grupo de almacenamiento. A partir de ese grupo, se pueden crear discos virtuales que se comportan como si fueran discos f\u00edsicos, pero con ventajas adicionales: resiliencia ante fallos, aprovisionamiento flexible y gesti\u00f3n centralizada.</p> <p>Esta funcionalidad est\u00e1 disponible en servidores independientes (sin necesidad de cl\u00fasteres) y es compatible con Windows Server 2016, 2019, 2022 y 2025.</p> Flujo de trabajo de los Espacios de almacenamiento."},{"location":"04_02_servidor_archivos/#usos-principales","title":"Usos principales","text":"<ul> <li>Agrupaci\u00f3n de discos: permite combinar varios discos f\u00edsicos (SATA, SAS, iSCSI, etc.) en un \u00fanico grupo l\u00f3gico.</li> <li>Creaci\u00f3n de discos virtuales: sobre el grupo se crean discos con opciones de tolerancia a fallos (Simple, Mirror, Parity).</li> <li>Gesti\u00f3n din\u00e1mica: se pueden a\u00f1adir o quitar discos en caliente, redimensionar vol\u00famenes y crear discos por capas (SSD + HDD).</li> <li>Optimizaci\u00f3n del espacio: mediante aprovisionamiento fino (Thin), el sistema asigna espacio seg\u00fan el uso real.</li> <li>Automatizaci\u00f3n: se puede administrar todo el proceso desde PowerShell, con cmdlets espec\u00edficos para cada paso.</li> </ul>"},{"location":"04_02_servidor_archivos/#tipos-de-resiliencia","title":"Tipos de resiliencia","text":"<ul> <li>Simple: sin redundancia, m\u00e1ximo rendimiento y capacidad.</li> <li>Mirror: duplicaci\u00f3n de datos, mayor fiabilidad.</li> <li>Parity: distribuci\u00f3n de datos y paridad, ideal para copias de seguridad y archivos.</li> </ul>"},{"location":"04_02_servidor_archivos/#flujo-de-trabajo-basico","title":"Flujo de trabajo b\u00e1sico","text":"<ol> <li>Crear grupo de almacenamiento: se seleccionan discos f\u00edsicos y se agrupan.</li> <li>Crear disco virtual: se define tipo de resiliencia, aprovisionamiento y tama\u00f1o.</li> <li>Crear volumen: se formatea el disco virtual y se asigna letra de unidad o carpeta.</li> </ol> <p>Importante</p> <p>Los espacios de almacenamiento no se pueden usar para alojar el sistema operativo.</p> <p>Para ver los pasos detallados, capturas de pantalla y ejemplos con PowerShell, puedes consultar directamente la documentaci\u00f3n oficial en este enlace: \ud83d\udd17 learn.microsoft.com/es-es/windows-server/storage/storage-spaces/deploy-standalone-storage-spaces</p>"},{"location":"04_02_servidor_archivos/#almacenamiento-iscsi-en-windows-server","title":"Almacenamiento iSCSI en Windows Server","text":"<p>El protocolo iSCSI (Internet Small Computer System Interface) permite transportar comandos SCSI a trav\u00e9s de redes TCP/IP. Esta tecnolog\u00eda, definida en las especificaciones SCSI-3, ha ganado popularidad en entornos corporativos gracias al crecimiento de las redes Gigabit Ethernet, que ofrecen una alternativa m\u00e1s econ\u00f3mica y flexible frente a las soluciones SAN basadas en canal de fibra.</p> <p>Windows Server incorpora soporte completo para iSCSI, tanto para consumir almacenamiento remoto como para ofrecerlo a otros equipos de la red. Esto permite que un servidor act\u00fae como cliente de una cabina SAN o incluso como proveedor de discos virtuales accesibles por otros sistemas.</p>"},{"location":"04_02_servidor_archivos/#uso-de-discos-iscsi-como-almacenamiento","title":"Uso de discos iSCSI como almacenamiento","text":"<p>Cuando se dispone de un dispositivo que proporciona discos iSCSI \u2014ya sea una cabina de discos o un equipo con software espec\u00edfico\u2014 es posible conectarse a \u00e9l desde cualquier equipo con Windows Server. Para ello, el primer paso consiste en activar el servicio Iniciador iSCSI, que puede configurarse desde PowerShell con el siguiente comando:</p> <pre><code>Set-Service -Name MSiSCSI -StartupType Automatic\n</code></pre> <p>Una vez iniciado el servicio, se ejecuta el programa gr\u00e1fico del iniciador iSCSI (<code>iscsicpl.exe</code>). En la pesta\u00f1a Descubrir, se introduce la direcci\u00f3n del servidor de almacenamiento disponible en la red. Tras localizar el destino, se establece la conexi\u00f3n y se configura la interfaz de red que se utilizar\u00e1 para el tr\u00e1fico iSCSI.</p> <p>Al completar este proceso, el disco remoto aparecer\u00e1 como un nuevo dispositivo de almacenamiento en el sistema local. Desde el Administrador de discos, se puede inicializar, particionar y formatear como cualquier otro disco f\u00edsico. Es importante tener en cuenta que, para garantizar un buen rendimiento, la red utilizada para iSCSI debe estar separada de la LAN principal de la empresa, evitando interferencias y saturaci\u00f3n.</p>"},{"location":"04_02_servidor_archivos/#provision-de-discos-iscsi-desde-windows-server","title":"Provisi\u00f3n de discos iSCSI desde Windows Server","text":"<p>Adem\u00e1s de consumir almacenamiento iSCSI, Windows Server puede actuar como servidor de destino, ofreciendo discos virtuales a otros equipos de la red. Para ello, se instala el rol de Servidor de destino iSCSI, disponible dentro de los Servicios de almacenamiento.</p> <p>Una vez instalado el rol, se accede al panel de administraci\u00f3n desde el Administrador del servidor, en la secci\u00f3n Servicios de archivo y almacenamiento \u2192 iSCSI. Desde all\u00ed se pueden crear uno o varios discos virtuales, que ser\u00e1n expuestos como destinos iSCSI. Tambi\u00e9n se configuran los iniciadores autorizados, es decir, los equipos que podr\u00e1n conectarse a esos discos.</p> <p>Esta funcionalidad convierte a Windows Server en una soluci\u00f3n vers\u00e1til para entornos de laboratorio, virtualizaci\u00f3n o almacenamiento distribuido, sin necesidad de invertir en hardware especializado.</p> <p>Para ampliar informaci\u00f3n o consultar el proceso paso a paso, se recomienda revisar documentaci\u00f3n t\u00e9cnica y tutoriales como los siguientes:</p> <p>\ud83d\udd17 Microsoft: C\u00f3mo configurar y conectar un disco iSCSI en Windows Server \ud83d\udd17 Inform\u00e1tica Madrid Mayor: \u00bfC\u00f3mo configurar y conectar un disco iSCSI en Windows Server?</p>"},{"location":"04_02_servidor_archivos/#carpetas-de-trabajo_1","title":"Carpetas de trabajo","text":"<p>Permiten tener sincronizados los archivos de un usuario entre sus distintos dispositivos. Ser\u00eda una especie de OneDrive pero gestionado por nosotros.</p> <p>Podemos encontrar informaci\u00f3n de c\u00f3mo implementarlas en la web de Microsoft.</p>"},{"location":"04_02_servidor_archivos/#administrador-de-recursos-del-servidor-de-archivos-fsrm","title":"Administrador de recursos del servidor de archivos (FSRM)","text":"<p>El Administrador de recursos del servidor de archivos (FSRM) es un rol de Windows Server que permite aplicar pol\u00edticas avanzadas sobre el almacenamiento, como cuotas de disco, filtrado de archivos y generaci\u00f3n de informes. Este rol se encuentra dentro de Servicios de archivo y almacenamiento \u2192 Servicios de iSCSI y archivo, y puede instalarse desde el Administrador del servidor.</p> Rol de Administrador de recursos del servidor de archivos. <p>Una vez instalado, se accede a la herramienta desde el men\u00fa Herramientas del Administrador del servidor.</p>"},{"location":"04_02_servidor_archivos/#funcionalidades-principales","title":"Funcionalidades principales","text":"<p>Desde FSRM se pueden gestionar los siguientes aspectos:</p> <ul> <li>Cuotas de disco</li> <li>Filtrado de archivos</li> <li>Informes de almacenamiento</li> <li>Clasificaciones</li> <li>Tareas de administraci\u00f3n de archivos</li> </ul>"},{"location":"04_02_servidor_archivos/#cuotas-de-carpeta","title":"Cuotas de carpeta","text":"<p>Las cuotas permiten limitar el espacio que un usuario puede utilizar en una carpeta compartida. El espacio disponible que ver\u00e1 el usuario no ser\u00e1 el real, sino el que se le haya asignado seg\u00fan su cuota.</p> <p>FSRM incluye varias plantillas de cuota que pueden utilizarse directamente o servir como base para crear nuevas. Para crear una plantilla personalizada, se accede a Plantillas de cuota y se selecciona Acci\u00f3n \u2192 Crear plantilla de cuota.</p> Administrador de recursos del servidor de archivos. Plantillas <p>En la plantilla se define:</p> <ul> <li>El espacio m\u00e1ximo disponible</li> <li>Si la cuota es estricta (no se puede superar) o de advertencia (se puede superar pero se notifica)</li> <li>Umbrales que activan acciones cuando se alcanza cierto porcentaje de uso</li> </ul> <p>Cada umbral puede activar:</p> <ul> <li>Env\u00edo de correo a administradores</li> <li>Env\u00edo de correo al usuario</li> <li>Registro de eventos</li> <li>Ejecuci\u00f3n de comandos o scripts</li> <li>Generaci\u00f3n de informes</li> </ul> <p>Es recomendable copiar las propiedades de una plantilla existente para ahorrar tiempo, aunque tambi\u00e9n se puede partir de una plantilla en blanco.</p> <p>Para aplicar una cuota a una carpeta, se accede a Cuotas y se selecciona Acci\u00f3n \u2192 Crear cuota. En el asistente se indica:</p> <ul> <li>La ruta de la carpeta o volumen</li> <li>Si se aplica solo a la carpeta o tambi\u00e9n a sus subcarpetas</li> <li>Si se deriva de una plantilla o se definen propiedades manualmente</li> <li>Un resumen de las propiedades de la cuota</li> </ul> Administrador de recursos del servidor de archivos. Crear Cuota"},{"location":"04_02_servidor_archivos/#cuotas-de-volumen","title":"Cuotas de volumen","text":"<p>Adem\u00e1s de cuotas por carpeta, Windows Server permite establecer cuotas sobre vol\u00famenes completos. Esta funcionalidad no requiere FSRM y se configura desde el men\u00fa contextual del volumen, en la pesta\u00f1a Cuota.</p> Crear Cuotade un volumen <p>Al activar la opci\u00f3n Habilitar la administraci\u00f3n de cuotas, se pueden definir:</p> <ul> <li>Denegar espacio en disco a usuarios que excedan el l\u00edmite</li> <li>No limitar el uso de disco (modo pasivo)</li> <li>Limitar espacio en disco por usuario, con advertencias configurables</li> <li>Registrar eventos cuando se superan los l\u00edmites</li> </ul> <p>Para establecer cuotas espec\u00edficas por usuario, se accede al bot\u00f3n Valores de cuota, se selecciona Cuota \u2192 Nueva entrada de cuota..., y se asigna la cuota deseada al usuario correspondiente.</p>"},{"location":"04_02_servidor_archivos/#filtrado-de-archivos","title":"Filtrado de archivos","text":"<p>FSRM permite bloquear el almacenamiento de ciertos tipos de archivos en carpetas compartidas. Al igual que con las cuotas, existen plantillas predefinidas que pueden usarse o modificarse.</p> <p>En cada plantilla se configura:</p> <ul> <li>Tipos de archivo a filtrar (por extensi\u00f3n o patr\u00f3n)</li> <li>Modo de filtrado: activo (bloquea) o pasivo (permite pero registra)</li> <li>Env\u00edo de correos a administradores y usuarios</li> <li>Registro de eventos</li> <li>Ejecuci\u00f3n de comandos o scripts</li> <li>Generaci\u00f3n de informes</li> </ul>"},{"location":"04_02_servidor_archivos/#administracion-con-powershell","title":"Administraci\u00f3n con PowerShell","text":"<p>Una vez instalado FSRM, se habilitan varios cmdlets en PowerShell con el prefijo <code>fsrm</code>. Algunos de los m\u00e1s \u00fatiles son:</p> <ul> <li>Get-fsrmSetting \u2192 muestra la configuraci\u00f3n actual del servidor</li> <li>New-fsrmQuotaTemplate \u2192 crea una nueva plantilla de cuota</li> <li>New-fsrmAction \u2192 define una acci\u00f3n ante un umbral superado</li> <li>New-fsrmQuotaThreshold \u2192 establece el porcentaje que activa una acci\u00f3n</li> <li>New-FsrmFileGroup \u2192 define un grupo de archivos para filtrar</li> <li>New-FsrmFileScreenTemplate \u2192 crea una plantilla de filtrado</li> </ul> <p>Es habitual definir variables para reutilizarlas en los distintos comandos.</p>"},{"location":"04_02_servidor_archivos/#ejemplo-creacion-de-cuota-con-evento-de-advertencia","title":"Ejemplo: creaci\u00f3n de cuota con evento de advertencia","text":"<p>Queremos aplicar una cuota al recurso compartido <code>E:\\Shares\\Diseny</code> que registre un evento cuando se supere el 85\u202f% del espacio asignado.</p> <ol> <li>Definimos la acci\u00f3n:</li> </ol> <pre><code>$Action = New-FsrmAction -Type Event -EventType Warning -Body \"El usuario [Source Io Owner] ha superado el 85% de la cuota de 10MB\"\n</code></pre> <ol> <li>Definimos el umbral:</li> </ol> <pre><code>$Limite = New-FsrmQuotaThreshold -Percentage 85 -Action $Action\n</code></pre> <ol> <li>Creamos la plantilla:</li> </ol> <pre><code>New-FsrmQuotaTemplate -Name \"Limite para Diseny\" -Size 50GB -Threshold $Limite\n</code></pre> <ol> <li>Asignamos la plantilla:</li> </ol> <pre><code>New-FsrmQuota -Path E:\\Shares\\Diseny -Template \"Limite para Diseny\"\n</code></pre>"},{"location":"04_02_servidor_archivos/#ejemplo-creacion-de-filtro-de-archivos","title":"Ejemplo: creaci\u00f3n de filtro de archivos","text":"<p>Queremos bloquear archivos ejecutables y tambi\u00e9n archivos PDF en una carpeta compartida.</p> <ol> <li>Creamos el grupo de archivos:</li> </ol> <pre><code>New-FsrmFileGroup -Name \"Grupo de archivos pdf\" -IncludePattern \"*.pdf\"\n</code></pre> <ol> <li>Creamos la plantilla de filtrado:</li> </ol> <pre><code>New-FsrmFileScreenTemplate -Name \"Bloquear ejecutables y PDF\" -IncludeGroup @(\"Grupo de archivos pdf\", \"Bloquear archivos ejecutables\")\n</code></pre> <ol> <li>Asignamos la plantilla al recurso compartido deseado.</li> </ol> <p>Para m\u00e1s informaci\u00f3n sobre los cmdlets disponibles, se puede consultar la documentaci\u00f3n oficial de Microsoft sobre FSRM.</p>"},{"location":"04_03_compartir_impresoras/","title":"Compartir impresoras en red","text":""},{"location":"04_03_compartir_impresoras/#compartir-impresoras-en-red","title":"Compartir impresoras en red","text":"<p>En los sistemas de impresi\u00f3n en red intervienen tres elementos esenciales que permiten organizar y gestionar los trabajos de impresi\u00f3n de forma eficiente:</p> <ul> <li>Impresora: es el dispositivo f\u00edsico donde se ejecutan los trabajos. Puede estar conectada localmente a un equipo o directamente a la red. Una misma impresora puede atender a una o varias colas de impresi\u00f3n.</li> <li>Cola de impresi\u00f3n: es la estructura l\u00f3gica que almacena los trabajos enviados por los usuarios, a la espera de ser procesados por la impresora. En Windows, esta cola aparece como una impresora instalada, aunque no est\u00e9 f\u00edsicamente conectada al equipo.</li> <li>Servidor de impresi\u00f3n: es el equipo que gestiona la cola de impresi\u00f3n y se encarga de enviar los trabajos a la impresora f\u00edsica. Un servidor puede administrar m\u00faltiples impresoras y colas, centralizando la gesti\u00f3n.</li> </ul>"},{"location":"04_03_compartir_impresoras/#impresion-directa-sin-servidor","title":"Impresi\u00f3n directa sin servidor","text":"<p>Es posible utilizar una impresora conectada directamente a la red sin pasar por un servidor de impresi\u00f3n. En este caso, cada cliente la a\u00f1ade manualmente desde su carpeta de impresoras. Aunque esta configuraci\u00f3n puede parecer sencilla, presenta varios inconvenientes:</p> <ul> <li>Cada equipo mantiene su propia cola de impresi\u00f3n, por lo que los trabajos no se gestionan de forma centralizada.</li> <li>Los usuarios solo ven el estado de sus propios trabajos, sin saber c\u00f3mo est\u00e1n los trabajos del resto.</li> <li>Los errores de impresi\u00f3n solo se muestran en el equipo que ha enviado el trabajo.</li> <li>Todo el procesamiento se realiza localmente, lo que puede afectar al rendimiento del equipo.</li> <li>No hay visibilidad sobre el orden de impresi\u00f3n ni sobre la carga de trabajo de la impresora.</li> </ul>"},{"location":"04_03_compartir_impresoras/#ventajas-de-utilizar-un-servidor-de-impresion","title":"Ventajas de utilizar un servidor de impresi\u00f3n","text":"<p>Centralizar la gesti\u00f3n mediante un servidor de impresi\u00f3n aporta m\u00faltiples beneficios:</p> <ul> <li>El servidor administra la configuraci\u00f3n del controlador de la impresora, garantizando uniformidad en todos los equipos cliente.</li> <li>Todos los usuarios comparten una \u00fanica cola de impresi\u00f3n, lo que permite conocer el estado de sus trabajos y el orden de impresi\u00f3n.</li> <li>Los errores y el estado de la impresora se notifican a todos los equipos conectados.</li> <li>Parte del procesamiento de los trabajos se realiza en el servidor, reduciendo la carga en los equipos cliente.</li> </ul> <p>Cuando el volumen de impresi\u00f3n es elevado, se recomienda dedicar un servidor exclusivamente a esta tarea. Este servidor debe contar con suficiente memoria RAM y espacio en disco para almacenar y procesar los trabajos de todos los usuarios.</p>"},{"location":"04_03_compartir_impresoras/#recomendaciones-para-la-cola-de-impresion","title":"Recomendaciones para la cola de impresi\u00f3n","text":"<p>Independientemente del volumen de trabajo, es aconsejable que la cola de impresi\u00f3n se almacene en un volumen de disco distinto al del sistema operativo. Esto se debe a que la gesti\u00f3n de la cola implica la creaci\u00f3n y eliminaci\u00f3n constante de archivos temporales, lo que puede provocar fragmentaci\u00f3n si se encuentra en la misma partici\u00f3n que el sistema.</p> <p>Por tanto, se recomienda:</p> <ul> <li>Dedicar un volumen espec\u00edfico para la cola de impresi\u00f3n.</li> <li>Evitar que est\u00e9 en la partici\u00f3n del sistema.</li> <li>Supervisar el espacio libre en ese volumen, especialmente si se procesan trabajos grandes o simult\u00e1neos.</li> </ul>"},{"location":"04_03_compartir_impresoras/#configuracion-tipica-en-windows-server","title":"Configuraci\u00f3n t\u00edpica en Windows Server","text":"<p>En entornos Windows Server, el rol de Servidor de impresi\u00f3n se instala desde el Administrador del servidor. Una vez instalado, se pueden compartir impresoras locales o de red, definir colas de impresi\u00f3n, establecer permisos y configurar opciones avanzadas como:</p> <ul> <li>Prioridad de impresi\u00f3n por usuario o grupo.</li> <li>Horarios de disponibilidad de la impresora.</li> <li>Registro de eventos relacionados con la impresi\u00f3n.</li> <li>Redirecci\u00f3n de trabajos a otra impresora si la principal est\u00e1 fuera de servicio.</li> </ul> <p>Esta arquitectura permite una gesti\u00f3n m\u00e1s robusta, escalable y controlada del entorno de impresi\u00f3n, especialmente en redes corporativas o educativas donde el volumen de trabajos es considerable.</p>"},{"location":"04_03_compartir_impresoras/#instalar-y-configurar-una-impresora-en-windows-server","title":"Instalar y configurar una impresora en Windows Server","text":""},{"location":"04_03_compartir_impresoras/#instalacion-de-una-impresora","title":"Instalaci\u00f3n de una impresora","text":"<p>Podemos instalar una nueva impresora en el servidor de la misma forma que se har\u00eda en un cliente. Para ello, desde el Panel de control, accedemos a la secci\u00f3n Impresoras y pulsamos en A\u00f1adir impresora.</p> A\u00f1adir impresora desde el Panel de control. <p>Lo habitual es que el sistema detecte autom\u00e1ticamente la impresora en la primera pantalla. Sin embargo, si estamos instalando una impresora que no existe a\u00fan en el sistema, no la detectar\u00e1, ni siquiera cuando le indiquemos su direcci\u00f3n IP.</p> <p>En este caso, la impresora est\u00e1 conectada al switch y tiene su propia IP, aunque tambi\u00e9n podr\u00eda estar conectada directamente al servidor.</p> <p>Si el sistema no detecta la impresora, lo m\u00e1s recomendable es seleccionar la opci\u00f3n La impresora que quiero no est\u00e1 en la lista.</p> Selecci\u00f3n de impresora no detectada. <p>A continuaci\u00f3n, seleccionamos la opci\u00f3n Agregar una impresora local o de red con configuraci\u00f3n manual.</p> Selecci\u00f3n de impresora local. <p>Creamos un nuevo puerto de tipo TCP/IP.</p> Crear puerto TCP/IP. <p>Asignamos la direcci\u00f3n IP de la impresora al puerto.</p> Asignar IP al puerto. <p>Por \u00faltimo, seleccionamos el controlador de la impresora desde la lista disponible o lo buscamos manualmente desde una ubicaci\u00f3n espec\u00edfica.</p> Selecci\u00f3n de controlador. <p>Una vez completado este proceso, la impresora quedar\u00e1 instalada en el servidor y lista para su configuraci\u00f3n.</p>"},{"location":"04_03_compartir_impresoras/#configuracion-de-la-impresora","title":"Configuraci\u00f3n de la impresora","text":"<p>Desde el men\u00fa contextual de la impresora instalada, seleccionamos Propiedades de impresora. En esta ventana encontramos varias pesta\u00f1as que permiten ajustar su comportamiento:</p> Propiedades de la impresora. <ul> <li>General: permite cambiar el nombre de la impresora y definir preferencias como orientaci\u00f3n del papel, impresi\u00f3n en color o blanco y negro, n\u00famero de p\u00e1ginas por hoja, etc.</li> <li>Compartir: si queremos compartir la impresora, podemos indicar si los trabajos se procesan en el cliente o en el servidor. Tambi\u00e9n podemos publicar la impresora en Active Directory para facilitar su b\u00fasqueda. El bot\u00f3n Controladores adicionales permite instalar los drivers necesarios para distintos sistemas cliente.</li> <li>Puertos: muestra y permite configurar los puertos asignados a la impresora.</li> <li>Opciones avanzadas: incluye el tipo de controlador, la gesti\u00f3n de la cola de impresi\u00f3n y opciones como el horario de disponibilidad. Es importante no marcar la opci\u00f3n Imprimir directamente en la impresora, ya que esto puede bloquear la aplicaci\u00f3n que env\u00eda el trabajo hasta que finalice la impresi\u00f3n.</li> <li>Administraci\u00f3n del color: permite ajustar la gesti\u00f3n del color.</li> <li>Configuraci\u00f3n del dispositivo: ofrece opciones adicionales seg\u00fan el modelo de impresora.</li> <li>Seguridad: se configura desde esta pesta\u00f1a y se detalla en el siguiente apartado.</li> </ul>"},{"location":"04_03_compartir_impresoras/#permisos-de-las-impresoras","title":"Permisos de las impresoras","text":"<p>Los permisos sobre impresoras se gestionan desde la pesta\u00f1a Seguridad en las propiedades de la impresora. Los permisos est\u00e1ndar que se pueden asignar son:</p> <ul> <li>Imprimir: permite conectarse a la impresora y enviar documentos. Tambi\u00e9n permite pausar, reanudar o cancelar los propios trabajos.</li> <li>Administrar documentos: permite gestionar la cola completa, incluyendo trabajos de otros usuarios.</li> <li>Administrar impresoras: otorga control total sobre la impresora, incluyendo configuraci\u00f3n, permisos y controladores.</li> </ul> Permisos Impresora. <p>Por defecto, al instalar una impresora:</p> <ul> <li>El grupo Todos tiene permiso para Imprimir.</li> <li>El grupo Creator/Owner tiene permiso para Administrar documentos.</li> <li>Los grupos Operadores de impresi\u00f3n, Usuarios avanzados, Administradores y Operadores del servidor tienen permiso para Administrar impresoras.</li> </ul> <p>Esta configuraci\u00f3n puede ajustarse seg\u00fan las necesidades del entorno, permitiendo un control granular sobre qui\u00e9n puede imprimir, gestionar trabajos o modificar la configuraci\u00f3n de la impresora.</p>"},{"location":"04_03_compartir_impresoras/#grupos-de-impresion-y-gestion-avanzada-de-colas","title":"Grupos de impresi\u00f3n y gesti\u00f3n avanzada de colas","text":"<p>Un grupo de impresi\u00f3n, tambi\u00e9n llamado reserva de impresoras, consiste en una impresora l\u00f3gica (una cola de impresi\u00f3n) que est\u00e1 conectada a varias impresoras f\u00edsicas iguales o similares. Todas las impresoras del grupo deben utilizar el mismo controlador y pueden estar conectadas localmente o por red.</p>"},{"location":"04_03_compartir_impresoras/#creacion-de-un-grupo-o-reserva-de-impresoras","title":"Creaci\u00f3n de un grupo o reserva de impresoras","text":"Grupos de impresi\u00f3n. <p>El procedimiento para crear un grupo es el siguiente:</p> <ol> <li>Se instala la primera impresora como se ha explicado anteriormente.</li> <li>Se accede a las Propiedades de la impresora y se abre la pesta\u00f1a Puertos.</li> <li>Se marcan todos los puertos a los que est\u00e9n conectadas las impresoras f\u00edsicas que forman parte de la reserva.</li> <li>Para poder seleccionar varios puertos, es necesario marcar la casilla Habilitar la cola de la impresora o utilizar el bot\u00f3n derecho del rat\u00f3n sobre la lista de puertos.</li> <li>Si se trata de impresoras de red, se puede utilizar el bot\u00f3n Agregar puerto para a\u00f1adir m\u00e1s direcciones IP.</li> </ol> <p>De este modo, la cola de impresi\u00f3n enviar\u00e1 los trabajos a cualquiera de las impresoras disponibles, lo que permite repartir la carga y mejorar el rendimiento en entornos con alta demanda.</p>"},{"location":"04_03_compartir_impresoras/#prioridad-de-impresion","title":"Prioridad de impresi\u00f3n","text":"<p>Windows permite asignar prioridad a los trabajos de impresi\u00f3n para que algunos se procesen antes que otros. Esto puede hacerse de dos formas:</p> <p>1. Modificar la prioridad de un trabajo concreto</p> <p>Una vez enviado el trabajo, se abre la impresora correspondiente y se visualiza la cola de trabajos pendientes. Desde el men\u00fa contextual del trabajo, se selecciona Propiedades, y en la pesta\u00f1a General se puede ajustar la prioridad del trabajo. Tambi\u00e9n es posible programar un intervalo horario en el que debe imprimirse.</p> <p>2. Crear impresoras l\u00f3gicas con distinta prioridad</p> <p>Una opci\u00f3n m\u00e1s c\u00f3moda y estructurada consiste en crear varias impresoras l\u00f3gicas que apunten a la misma impresora f\u00edsica, pero con distinta prioridad por defecto. El procedimiento es:</p> <ul> <li>Instalar una nueva impresora en el mismo puerto que la impresora ya instalada.</li> <li>Acceder a sus Propiedades \u2192 Opciones avanzadas y establecer una prioridad diferente.</li> <li>Configurar los permisos de impresi\u00f3n para cada impresora l\u00f3gica seg\u00fan los grupos de usuarios. Por ejemplo:</li> <li>Un grupo de usuarios puede tener acceso solo a la impresora de baja prioridad.</li> <li>Otro grupo puede acceder a la de alta prioridad.</li> <li>Tambi\u00e9n se puede permitir que todos los usuarios tengan acceso a ambas y decidan a cu\u00e1l enviar sus trabajos seg\u00fan la urgencia.</li> </ul> <p>Esta configuraci\u00f3n permite gestionar la cola de impresi\u00f3n de forma m\u00e1s eficiente, especialmente en entornos donde conviven trabajos urgentes y trabajos rutinarios.</p>"},{"location":"04_03_compartir_impresoras/#gestion-de-trabajos-muy-largos","title":"Gesti\u00f3n de trabajos muy largos","text":"<p>En ocasiones, se env\u00edan trabajos de impresi\u00f3n muy largos que no son urgentes pero que pueden bloquear la impresora durante un tiempo considerable. Aunque se les asigne una prioridad baja, una vez que comienzan a imprimirse no pueden interrumpirse si llega otro trabajo m\u00e1s urgente.</p> <p>La soluci\u00f3n consiste en crear una impresora l\u00f3gica adicional que est\u00e9 disponible solo en determinados horarios, por ejemplo durante la noche. As\u00ed, se configura:</p> <ul> <li>Una impresora l\u00f3gica activa las 24 horas para trabajos normales.</li> <li>Otra impresora l\u00f3gica activa solo en horario nocturno, destinada a trabajos largos y poco urgentes.</li> </ul> <p>Los usuarios pueden enviar sus trabajos seg\u00fan el tipo y la urgencia, y el sistema se encargar\u00e1 de procesarlos en el momento adecuado sin interferir con el resto de la actividad.</p> <p>Esta t\u00e9cnica permite optimizar el uso de recursos y evitar cuellos de botella en la cola de impresi\u00f3n, especialmente en entornos con alta carga de trabajo.</p>"},{"location":"05_01_introduccion_directivas/","title":"Introducci\u00f3n a las directivas de grupo","text":""},{"location":"05_01_introduccion_directivas/#directivas-de-grupo-en-sistemas-operativos-en-red","title":"Directivas de Grupo en Sistemas Operativos en Red","text":""},{"location":"05_01_introduccion_directivas/#introduccion","title":"Introducci\u00f3n","text":""},{"location":"05_01_introduccion_directivas/#objetivos-de-la-unidad","title":"Objetivos de la unidad","text":"<p>Los objetivos a alcanzar en esta unidad de trabajo son los siguientes:</p> <ul> <li>Utilizar m\u00e1quinas virtuales para administrar dominios y verificar su funcionamiento.</li> <li>Bloquear accesos no autorizados al dominio.</li> <li>Hacer cumplir los requerimientos de seguridad.</li> <li>Implementar, verificar y asignar directivas de grupo.</li> </ul>"},{"location":"05_01_introduccion_directivas/#conceptos-clave","title":"Conceptos clave","text":"<p>Los conceptos m\u00e1s importantes de esta unidad son:</p> <ul> <li>Directivas de grupo (GPO): Conjunto de reglas y configuraciones que permiten controlar el entorno de trabajo de usuarios y equipos en un dominio de Active Directory.</li> <li>\u00c1mbito de aplicaci\u00f3n: Determinaci\u00f3n de a qu\u00e9 usuarios, grupos u ordenadores afecta una directiva.</li> <li>Herencia y precedencia: Orden en que se aplican las directivas cuando existen m\u00faltiples pol\u00edticas.</li> <li>Seguridad y auditor\u00eda: Implementaci\u00f3n de medidas de protecci\u00f3n mediante directivas.</li> </ul>"},{"location":"05_01_introduccion_directivas/#conocimiento-previo","title":"Conocimiento previo","text":"<p>Antes de comenzar esta unidad de trabajo, el alumno deber\u00eda saber:</p> <ul> <li>C\u00f3mo utilizar software de virtualizaci\u00f3n para crear m\u00e1quinas virtuales.</li> <li>C\u00f3mo gestionar los usuarios, grupos y recursos del dominio.</li> <li>C\u00f3mo utilizar la terminal para realizar tareas b\u00e1sicas en una m\u00e1quina.</li> <li>Conceptos b\u00e1sicos de Active Directory y controladores de dominio.</li> </ul>"},{"location":"05_01_introduccion_directivas/#directivas-de-grupo","title":"Directivas de Grupo","text":"<p>Las Directivas de Grupo (Group Policy Objects o GPO) son una caracter\u00edstica fundamental de Active Directory que permite a los administradores gestionar y configurar de forma centralizada los sistemas operativos, aplicaciones y configuraciones de usuario en un entorno de red Windows.</p>"},{"location":"05_01_introduccion_directivas/#caracteristicas-principales","title":"Caracter\u00edsticas principales","text":"<ul> <li>Centralizaci\u00f3n: Permite aplicar configuraciones desde un \u00fanico punto a m\u00faltiples equipos y usuarios.</li> <li>Automatizaci\u00f3n: Las pol\u00edticas se aplican autom\u00e1ticamente sin intervenci\u00f3n manual.</li> <li>Seguridad: Facilita la implementaci\u00f3n de pol\u00edticas de seguridad homog\u00e9neas en toda la organizaci\u00f3n.</li> <li>Eficiencia: Reduce el tiempo de administraci\u00f3n y minimiza errores de configuraci\u00f3n.</li> </ul>"},{"location":"05_01_introduccion_directivas/#tipos-de-configuraciones","title":"Tipos de configuraciones","text":"<p>Las directivas de grupo se dividen en dos categor\u00edas principales:</p> <ol> <li> <p>Configuraci\u00f3n del equipo: Afecta a los ordenadores independientemente del usuario que inicie sesi\u00f3n. Se aplica durante el arranque del sistema.</p> </li> <li> <p>Configuraci\u00f3n de usuario: Afecta a usuarios espec\u00edficos independientemente del equipo donde inicien sesi\u00f3n. Se aplica durante el inicio de sesi\u00f3n.</p> </li> </ol>"},{"location":"05_01_introduccion_directivas/#estructura-y-jerarquia-de-las-gpo","title":"Estructura y jerarqu\u00eda de las GPO","text":""},{"location":"05_01_introduccion_directivas/#niveles-de-aplicacion-de-las-directivas","title":"Niveles de aplicaci\u00f3n de las directivas","text":"<p>Las directivas de grupo se aplican siguiendo una jerarqu\u00eda espec\u00edfica conocida como LSDOU (Local, Site, Domain, Organizational Unit). Este orden determina la secuencia en que se procesan las pol\u00edticas:</p> <ol> <li>Local (L): Directivas locales del equipo. Se aplican primero y son las menos prioritarias.</li> <li>Site (S): Directivas asociadas al sitio de Active Directory.</li> <li>Domain (D): Directivas aplicadas a nivel de dominio.</li> <li>Organizational Unit (OU): Directivas vinculadas a Unidades Organizativas. Son las m\u00e1s prioritarias.</li> </ol> <p>Orden de prioridad</p> <p>Las directivas aplicadas m\u00e1s tarde en la jerarqu\u00eda tienen prioridad sobre las anteriores. Una GPO vinculada a una OU sobrescribir\u00e1 configuraciones conflictivas de las GPO de dominio o sitio.</p> Esquema jerarqu\u00eda LSDOU indicada el orden de aplicaci\u00f3n y prioridad. <p>Ejemplo pr\u00e1ctico</p> <p>Si existe una directiva de dominio que establece el fondo de escritorio en azul, pero una directiva de OU lo establece en rojo, el usuario de esa OU ver\u00e1 el fondo rojo.</p>"},{"location":"05_01_introduccion_directivas/#componentes-de-una-gpo","title":"Componentes de una GPO","text":"<p>Cada directiva de grupo est\u00e1 compuesta por varios elementos:</p>"},{"location":"05_01_introduccion_directivas/#contenedor-de-gpo","title":"Contenedor de GPO","text":"<p>Almacenado en Active Directory, contiene:</p> <ul> <li>Nombre y propiedades de la directiva</li> <li>GUID (Identificador \u00fanico global)</li> <li>Informaci\u00f3n de versi\u00f3n</li> <li>Enlaces a ubicaciones del dominio</li> </ul>"},{"location":"05_01_introduccion_directivas/#plantilla-de-gpo-gpc-y-gpt","title":"Plantilla de GPO (GPC y GPT)","text":"<ul> <li>GPC (Group Policy Container): Informaci\u00f3n almacenada en Active Directory con propiedades y configuraci\u00f3n de la GPO.</li> <li>GPT (Group Policy Template): Archivos almacenados en <code>SYSVOL</code> que contienen la configuraci\u00f3n detallada de las pol\u00edticas.</li> </ul> <p>Ubicaci\u00f3n en SYSVOL</p> <p>Los archivos GPT se encuentran en: <code>\\\\dominio\\SYSVOL\\dominio\\Policies\\{GUID}</code></p> <p></p> Explorador de Windows mostrando la carpeta SYSVOL y la estructura de carpetas de las GPO. <p></p>"},{"location":"05_02_creacion_directivas/","title":"Creaci\u00f3n y \u00e1mbito de aplicaci\u00f3n de GPO","text":""},{"location":"05_02_creacion_directivas/#herramientas-de-administracion","title":"Herramientas de administraci\u00f3n","text":""},{"location":"05_02_creacion_directivas/#group-policy-management-console-gpmc","title":"Group Policy Management Console (GPMC)","text":"<p>La Consola de administraci\u00f3n de directivas de grupo (GPMC) es la herramienta principal para gestionar GPO en entornos Windows Server. Proporciona una interfaz gr\u00e1fica centralizada para:</p> <ul> <li>Crear y editar directivas de grupo</li> <li>Vincular GPO a contenedores de Active Directory</li> <li>Analizar la aplicaci\u00f3n de directivas</li> <li>Generar informes y realizar copias de seguridad</li> </ul> <p>Acceso a GPMC:</p> <ul> <li>Desde el men\u00fa Inicio: <code>Herramientas administrativas \u2192 Administraci\u00f3n de directivas de grupo</code></li> <li>Ejecutar: <code>gpmc.msc</code></li> <li>Desde el Administrador del servidor: <code>Herramientas \u2192 Administraci\u00f3n de directivas de grupo</code></li> </ul> Ventana principal de GPMC mostrando el \u00e1rbol de navegaci\u00f3n con el dominio, las OU y las GPO existentes."},{"location":"05_02_creacion_directivas/#group-policy-editor","title":"Group Policy Editor","text":"<p>El Editor de directivas de grupo permite configurar los par\u00e1metros espec\u00edficos dentro de una GPO. Se accede desde GPMC al hacer clic derecho sobre una GPO y seleccionar \"Editar\".</p> <p>Estructura del Editor:</p> <ul> <li>Configuraci\u00f3n del equipo: Pol\u00edticas que afectan a los ordenadores</li> <li>Configuraci\u00f3n de usuario: Pol\u00edticas que afectan a los usuarios</li> </ul> <p>Cada secci\u00f3n contiene:</p> <ul> <li>Directivas: Configuraciones administrativas permanentes</li> <li>Preferencias: Configuraciones que el usuario puede modificar</li> </ul> Editor de directivas de grupo."},{"location":"05_02_creacion_directivas/#creacion-de-una-nueva-gpo","title":"Creaci\u00f3n de una nueva GPO","text":""},{"location":"05_02_creacion_directivas/#metodo-1-crear-gpo-desde-gpmc","title":"M\u00e9todo 1: Crear GPO desde GPMC","text":"<p>Pasos para crear una GPO:</p> <ol> <li>Abrir la Consola de administraci\u00f3n de directivas de grupo (GPMC)</li> <li>Navegar hasta el dominio o la OU donde se desea crear la GPO</li> <li>Hacer clic derecho sobre \"Group Policy Objects\" en el panel izquierdo</li> <li>Seleccionar \"New\" (Nuevo)</li> <li>Introducir un nombre descriptivo para la GPO</li> <li>(Opcional) Seleccionar una GPO de origen como plantilla</li> <li>Hacer clic en \"OK\"</li> </ol> <p>Convenciones de nomenclatura</p> <p>Utiliza nombres que describan claramente el prop\u00f3sito de la GPO:</p> <ul> <li><code>SEC-Restricciones-Usuarios-Invitados</code></li> <li><code>SOFT-Instalacion-Office-Contabilidad</code></li> <li><code>CONFIG-Escritorio-Departamento-IT</code></li> </ul> <p>Puedes usar prefijos como SEC (seguridad), SOFT (software), CONFIG (configuraci\u00f3n), etc.</p> Nueva directiva de grupo."},{"location":"05_02_creacion_directivas/#metodo-2-crear-y-vincular-directamente","title":"M\u00e9todo 2: Crear y vincular directamente","text":"<p>Tambi\u00e9n es posible crear una GPO y vincularla simult\u00e1neamente a una ubicaci\u00f3n:</p> <ol> <li>Hacer clic derecho sobre el dominio o OU deseada</li> <li>Seleccionar \"Create a GPO in this domain, and Link it here...\"</li> <li>Introducir el nombre de la GPO</li> <li>La GPO se crea y vincula autom\u00e1ticamente a esa ubicaci\u00f3n</li> </ol> Nueva directiva de grupo en Unidad Organizativa y vincularla. <p>Diferencia importante</p> <p>Con el primer m\u00e9todo, la GPO se crea pero no se vincula autom\u00e1ticamente. Con el segundo m\u00e9todo, se crea y vincula al mismo tiempo.</p>"},{"location":"05_02_creacion_directivas/#vinculacion-de-gpo","title":"Vinculaci\u00f3n de GPO","text":"<p>Una vez creada una GPO, debe vincularse a un contenedor (sitio, dominio u OU) para que tenga efecto. Una misma GPO puede estar vinculada a m\u00faltiples ubicaciones.</p>"},{"location":"05_02_creacion_directivas/#vincular-una-gpo-existente","title":"Vincular una GPO existente","text":"<p>Pasos:</p> <ol> <li>En GPMC, navegar hasta la ubicaci\u00f3n deseada (dominio o OU)</li> <li>Hacer clic derecho sobre ella</li> <li>Seleccionar \"Link an Existing GPO...\"</li> <li>Elegir la GPO de la lista</li> <li>Hacer clic en \"OK\"</li> </ol> Vincular directiva exitente a UO."},{"location":"05_02_creacion_directivas/#desvincular-una-gpo","title":"Desvincular una GPO","text":"<p>Para eliminar el v\u00ednculo sin borrar la GPO:</p> <ol> <li>Navegar hasta la ubicaci\u00f3n vinculada</li> <li>Hacer clic derecho sobre el v\u00ednculo de la GPO</li> <li>Seleccionar \"Delete\" \u2192 \"Remove link\"</li> </ol> <p>Atenci\u00f3n: Eliminar vs Desvincular</p> <ul> <li>Remove link: Solo elimina el v\u00ednculo, la GPO sigue existiendo</li> <li>Delete GPO: Elimina completamente la GPO de Active Directory</li> </ul>"},{"location":"05_02_creacion_directivas/#habilitar-y-deshabilitar-vinculos-de-gpo","title":"Habilitar y deshabilitar v\u00ednculos de GPO","text":"<p>Los v\u00ednculos de GPO pueden habilitarse o deshabilitarse temporalmente sin eliminarlos:</p> <p>Deshabilitar un v\u00ednculo:</p> <ol> <li>Navegar hasta la ubicaci\u00f3n donde est\u00e1 vinculada la GPO</li> <li>Hacer clic derecho sobre el v\u00ednculo</li> <li>Seleccionar \"Link Enabled\" (quitar marca)</li> </ol> <p>El v\u00ednculo aparecer\u00e1 en gris indicando que est\u00e1 deshabilitado.</p> <p>Uso pr\u00e1ctico</p> <p>Esto es \u00fatil para probar el impacto de una GPO o deshabilitarla temporalmente sin perder la configuraci\u00f3n.</p> Vinculo Habilitado o Deshabilitado."},{"location":"05_02_creacion_directivas/#editar-y-configurar-una-gpo","title":"Editar y configurar una GPO","text":"<p>Una vez creada la GPO, es necesario editarla para a\u00f1adir las configuraciones deseadas.</p> <p>Las directivas de grupo son, en esencia, un conjunto de opciones y caracter\u00edsticas del sistema operativo que se pueden activar, desactivar o configurar de forma centralizada. Cada directiva representa una configuraci\u00f3n espec\u00edfica (como \"longitud m\u00ednima de contrase\u00f1a\", \"ocultar panel de control\" o \"instalar software autom\u00e1ticamente\") que normalmente se configurar\u00eda manualmente en cada equipo. Mediante GPO, el administrador simplemente habilita, deshabilita o ajusta estos par\u00e1metros en el servidor, y se aplican autom\u00e1ticamente a todos los equipos y usuarios del dominio seg\u00fan corresponda.</p> <p>El trabajo del administrador consiste en navegar por el \u00e1rbol de directivas disponibles, localizar las configuraciones relevantes para su organizaci\u00f3n, y establecer su estado y valores. Windows proporciona miles de directivas predefinidas organizadas en categor\u00edas l\u00f3gicas, listas para ser configuradas seg\u00fan las necesidades de seguridad, productividad y estandarizaci\u00f3n del entorno.</p>"},{"location":"05_02_creacion_directivas/#acceder-al-editor-de-directivas","title":"Acceder al Editor de directivas","text":"<ol> <li>En GPMC, hacer clic derecho sobre la GPO en \"Objetos de directiva de grupo\"</li> <li>Seleccionar \"Editar\"</li> <li>Se abre el Editor de administraci\u00f3n de directivas de grupo</li> </ol> <p>[...contin\u00faa el resto como estaba...]</p> <p>Una vez creada la GPO, es necesario editarla para a\u00f1adir las configuraciones deseadas.</p>"},{"location":"05_02_creacion_directivas/#acceder-al-editor-de-directivas_1","title":"Acceder al Editor de directivas","text":"<ol> <li>En GPMC, hacer clic derecho sobre la GPO en \"Objetos de directiva de grupo\"</li> <li>Seleccionar \"Editar\"</li> <li>Se abre el Editor de administraci\u00f3n de directivas de grupo</li> </ol> Men\u00fa contextual de una GPO mostrando las opciones, con \"Editar\" resaltada.."},{"location":"05_02_creacion_directivas/#configurar-una-directiva","title":"Configurar una directiva","text":"<p>Ejemplo: Bloquear la barra de tareas</p> <ol> <li> <p>Navegar por el \u00e1rbol hasta la directiva deseada:    </p><pre><code>Configuraci\u00f3n de usuario\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Plantillas administrativas\n        \u2514\u2500\u2500 Men\u00fa Inicio y barra de tareas\n</code></pre><p></p> </li> <li> <p>En el panel derecho, parecen las posibles opciones que podemos modificar sobre estos elementos y debemos hacer doble clic sobre la configuraci\u00f3n que deseemos habilitar (o deshabilitar en caso de tenerla previamente habilitada)</p> <p></p> Ventana de propiedades de una directiva. <p></p> </li> <li> <p>Seleccionar el estado deseado:</p> <ul> <li>No configurada: La GPO no modifica esta configuraci\u00f3n (por defecto)</li> <li>Habilitada: Activa la directiva</li> <li>Deshabilitada: Desactiva expl\u00edcitamente la directiva</li> </ul> <p></p> Ventana de propiedades de una directiva. <p></p> </li> <li> <p>(Opcional) Configurar opciones adicionales si las hay</p> </li> <li> <p>(Opcional) A\u00f1adir un comentario para documentar el prop\u00f3sito</p> </li> <li> <p>Hacer clic en \"Aceptar\"</p> </li> </ol> <p>Estados de una directiva</p> <ul> <li>No configurada: La GPO no toca esa configuraci\u00f3n</li> <li>Habilitada: Activa la funci\u00f3n o restricci\u00f3n</li> <li>Deshabilitada: Desactiva expl\u00edcitamente (diferente a \"no configurada\")</li> </ul>"},{"location":"05_02_creacion_directivas/#ver-la-configuracion-de-una-gpo","title":"Ver la configuraci\u00f3n de una GPO","text":"<p>Para consultar qu\u00e9 configuraciones tiene una GPO sin editarla:</p> <ol> <li>En GPMC, seleccionar la GPO (un solo clic)</li> <li>En el panel derecho, ir a la pesta\u00f1a \"Configuraci\u00f3n\"</li> <li>Se muestra un informe jer\u00e1rquico de todas las configuraciones aplicadas</li> </ol> <p>Qu\u00e9 muestra: * Lista de directivas habilitadas y deshabilitadas * Valores configurados * Organizaci\u00f3n por categor\u00edas (Seguridad, Software, Plantillas administrativas, etc.)</p> <p>Navegaci\u00f3n: * \"Mostrar todo\": Expande todas las secciones * \"Ocultar todo\": Contrae todas las secciones * Solo aparecen directivas que est\u00e1n configuradas (no las que est\u00e1n en \"No configurada\")</p> Ventana de propiedades de una directiva."},{"location":"05_02_creacion_directivas/#ambito-de-aplicacion","title":"\u00c1mbito de aplicaci\u00f3n","text":"<p>El \u00e1mbito de una GPO determina a qui\u00e9n afecta y puede configurarse mediante varios mecanismos:</p>"},{"location":"05_02_creacion_directivas/#ubicacion-del-vinculo","title":"Ubicaci\u00f3n del v\u00ednculo","text":"<p>La ubicaci\u00f3n donde se vincula la GPO determina el \u00e1mbito b\u00e1sico:</p> Ubicaci\u00f3n Afecta a Sitio Todos los usuarios y equipos del sitio AD Dominio Todos los usuarios y equipos del dominio OU Solo usuarios y equipos de esa OU (y sub-OU si hereda) \u00c1mbito de aplicaci\u00f3n de una directiva."},{"location":"05_02_creacion_directivas/#filtrado-de-seguridad-security-filtering","title":"Filtrado de seguridad (Security Filtering)","text":"<p>Permite restringir la aplicaci\u00f3n de la GPO a usuarios, grupos o equipos espec\u00edficos dentro del \u00e1mbito de vinculaci\u00f3n.</p> <p>Configurar filtrado de seguridad:</p> <ol> <li>Seleccionar la GPO en GPMC</li> <li>En el panel derecho, ir a la pesta\u00f1a \"Scope\"</li> <li>En la secci\u00f3n \"Security Filtering\":</li> <li>A\u00f1adir entidades: clic en \"Add\"</li> <li>Eliminar entidades: seleccionar y clic en \"Remove\"</li> </ol> <p>Permisos necesarios</p> <p>Para que una GPO se aplique, la entidad debe tener los permisos:</p> <ul> <li>Lectura (Read)</li> <li>Aplicar directiva de grupo (Apply Group Policy)</li> </ul> <p>Ejemplo pr\u00e1ctico:</p> <p>Crear una GPO vinculada al dominio pero que solo afecte al grupo \"Ventas\":</p> <ol> <li>Crear GPO <code>Config Ventas</code></li> <li>Vincular al dominio</li> <li>En Security Filtering, eliminar \"Authenticated Users\"</li> <li>A\u00f1adir el grupo \"gComercial\"</li> </ol> <p></p> Filtrado de seguridad. <p></p> <p>Filtrado vs ubicaci\u00f3n</p> <p>Es siempre aconsejable ubicar correctamente las directivas en las Unidades Organizativas adecuadas que ubicarlas en el dominio directamente y filtrar por grupos. Es mejor dejar en este filtrado \"Usuarios autentificados\" o \"Equipos del dominio\"</p>"},{"location":"05_02_creacion_directivas/#filtros-wmi-windows-management-instrumentation","title":"Filtros WMI (Windows Management Instrumentation)","text":"<p>Los filtros WMI permiten aplicar GPO bas\u00e1ndose en caracter\u00edsticas del sistema, como:</p> <ul> <li>Versi\u00f3n del sistema operativo</li> <li>Espacio libre en disco</li> <li>Tipo de hardware</li> <li>Configuraci\u00f3n de red</li> </ul> <p>Crear un filtro WMI:</p> <ol> <li>En GPMC, expandir el dominio</li> <li>Hacer clic derecho en \"Filtros WMI\"</li> <li>Seleccionar \"Nuevo\"</li> <li>Introducir nombre y descripci\u00f3n</li> <li>A\u00f1adir consultas WMI</li> <li>Guardar el filtro</li> </ol> <p>Aplicar filtro WMI a una GPO:</p> <ol> <li>Seleccionar la GPO en GPMC</li> <li>En la pesta\u00f1a \"Scope\", secci\u00f3n \"WMI Filtering\"</li> <li>Seleccionar el filtro del desplegable</li> </ol> <p>Ejemplo de consulta WMI:</p> <pre><code>-- Aplicar solo a Windows 10/11\nSELECT * FROM Win32_OperatingSystem WHERE Version LIKE \"10.%\"\n\n-- Aplicar solo a equipos con m\u00e1s de 100GB libres\nSELECT * FROM Win32_LogicalDisk WHERE FreeSpace &gt; 107374182400 AND DriveType = 3\n</code></pre> Creaci\u00f3n de filtros WMI. <p>Rendimiento</p> <p>Los filtros WMI requieren procesamiento adicional y pueden ralentizar la aplicaci\u00f3n de GPO. \u00dasalos solo cuando el filtrado de seguridad no sea suficiente.</p>"},{"location":"05_02_creacion_directivas/#deshabilitar-secciones-de-una-gpo","title":"Deshabilitar secciones de una GPO","text":"<p>Si una GPO solo necesita configurar equipos o usuarios (no ambos), se puede deshabilitar la secci\u00f3n no utilizada para mejorar el rendimiento:</p> <ol> <li>Hacer clic derecho sobre la GPO</li> <li>Seleccionar \"GPO Status\"</li> <li>Elegir una opci\u00f3n:</li> <li>User configuration settings disabled: Solo se aplica configuraci\u00f3n de equipo</li> <li>Computer configuration settings disabled: Solo se aplica configuraci\u00f3n de usuario</li> <li>All settings disabled: La GPO est\u00e1 deshabilitada completamente</li> </ol> Opciones de estado de una directiva."},{"location":"05_02_creacion_directivas/#copiar-y-guardar-copias-de-seguridad-de-gpo","title":"Copiar y guardar copias de seguridad de GPO","text":""},{"location":"05_02_creacion_directivas/#realizar-copia-de-seguridad","title":"Realizar copia de seguridad","text":"<p>Es fundamental realizar copias de seguridad de las GPO antes de modificaciones importantes:</p> <ol> <li>Hacer clic derecho sobre la GPO en GPMC</li> <li>Seleccionar \"Back Up...\"</li> <li>Elegir ubicaci\u00f3n de destino</li> <li>Introducir descripci\u00f3n (opcional)</li> <li>Hacer clic en \"Back Up\"</li> </ol>"},{"location":"05_02_creacion_directivas/#restaurar-desde-copia-de-seguridad","title":"Restaurar desde copia de seguridad","text":"<ol> <li>Hacer clic derecho sobre la GPO</li> <li>Seleccionar \"Restore from Backup...\"</li> <li>Elegir la ubicaci\u00f3n de las copias</li> <li>Seleccionar la copia a restaurar</li> <li>Confirmar la restauraci\u00f3n</li> </ol> Men\u00fa guardar copia de seguridad de GPO y restaurar."},{"location":"05_02_creacion_directivas/#copiar-una-gpo","title":"Copiar una GPO","text":"<p>Para duplicar una GPO existente:</p> <ol> <li>Hacer clic derecho sobre la GPO de origen</li> <li>Seleccionar \"Copy\"</li> <li>Hacer clic derecho sobre \"Group Policy Objects\"</li> <li>Seleccionar \"Paste\"</li> <li>Elegir permisos a copiar:</li> <li>Preserve existing permissions: Mantiene los permisos actuales</li> <li>Use default permissions: Aplica permisos por defecto</li> <li>Copy from source: Copia los permisos de la GPO original</li> </ol> <p>Uso de copias</p> <p>Las copias son \u00fatiles para crear variantes de GPO similares o para probar cambios sin afectar la GPO original.</p> <p>Perfecto, aqu\u00ed tienes una versi\u00f3n equilibrada:</p>"},{"location":"05_02_creacion_directivas/#delegacion-de-permisos-en-gpo","title":"Delegaci\u00f3n de permisos en GPO","text":"<p>La delegaci\u00f3n es el proceso de otorgar permisos espec\u00edficos a usuarios o grupos para que puedan realizar tareas administrativas sobre las GPO sin necesidad de ser administradores del dominio.</p> <p>Siguiendo el principio de m\u00ednimo privilegio, la delegaci\u00f3n permite:</p> <ul> <li>Reducir riesgos de seguridad: Menos cuentas con privilegios totales</li> <li>Distribuir responsabilidades: Cada departamento gestiona sus propias directivas</li> <li>Mejorar eficiencia: No todo depende del equipo de IT central</li> </ul> <p>Ejemplo pr\u00e1ctico</p> <p>El responsable IT del departamento de Marketing puede editar la GPO \"CONFIG-Marketing\" y vincularla a su OU, pero no puede modificar GPO de otros departamentos ni configuraciones cr\u00edticas del dominio.</p>"},{"location":"05_02_creacion_directivas/#tipos-de-permisos-en-gpo","title":"Tipos de permisos en GPO","text":"<p>Los permisos m\u00e1s comunes que se pueden delegar son:</p> Permiso Qu\u00e9 permite hacer Lectura Ver la configuraci\u00f3n de la GPO y generar informes Editar configuraci\u00f3n Modificar los par\u00e1metros de la GPO Editar configuraci\u00f3n, eliminar, modificar seguridad Control total: editar, eliminar y cambiar permisos Vincular GPO Vincular/desvincular GPO a una OU espec\u00edfica Crear objetos GPO Crear nuevas GPO en el dominio <p>Permisos para aplicaci\u00f3n de GPO</p> <p>Para que una GPO se aplique a un usuario/equipo, debe tener:</p> <ul> <li>\u2705 Lectura (Read)</li> <li>\u2705 Aplicar directiva de grupo (Apply Group Policy)</li> </ul>"},{"location":"05_02_creacion_directivas/#ver-permisos-actuales-de-una-gpo","title":"Ver permisos actuales de una GPO","text":"<ol> <li>En GPMC, seleccionar la GPO en \"Objetos de directiva de grupo\"</li> <li>En el panel derecho, ir a la pesta\u00f1a \"Delegaci\u00f3n\"</li> <li>Ver la lista de usuarios/grupos con permisos</li> </ol> <p>Permisos por defecto al crear una GPO:</p> <ul> <li>Administradores del dominio: Control total</li> <li>Administradores de organizaci\u00f3n: Control total</li> <li>SISTEMA y Usuarios autenticados: Lectura y aplicar</li> </ul> Pesta\u00f1a \"Delegaci\u00f3n\" mostrando la tabla con nombres de usuarios/grupos y sus permisos."},{"location":"05_02_creacion_directivas/#delegar-permisos-sobre-una-gpo","title":"Delegar permisos sobre una GPO","text":"<p>Pasos:</p> <ol> <li>Seleccionar la GPO en \"Objetos de directiva de grupo\"</li> <li>Ir a la pesta\u00f1a \"Delegaci\u00f3n\"</li> <li>Hacer clic en \"Agregar...\"</li> <li>Escribir el nombre del usuario o grupo \u2192 \"Comprobar nombres\" \u2192 \"Aceptar\"</li> <li>Seleccionar el nivel de permiso:</li> <li>Lectura</li> <li>Editar configuraci\u00f3n</li> <li>Editar configuraci\u00f3n, eliminar, modificar seguridad</li> <li>Hacer clic en \"Aceptar\"</li> </ol> <p>Para permisos m\u00e1s espec\u00edficos:</p> <ol> <li>Hacer clic derecho sobre la GPO \u2192 \"Propiedades\"</li> <li>Pesta\u00f1a \"Seguridad\"</li> <li>Agregar usuarios/grupos y configurar permisos detallados</li> <li>Aplicar cambios</li> </ol>"},{"location":"05_02_creacion_directivas/#delegar-la-creacion-de-gpo","title":"Delegar la creaci\u00f3n de GPO","text":"<p>Para permitir que un usuario pueda crear nuevas GPO:</p> <ol> <li>En GPMC, hacer clic derecho sobre \"Objetos de directiva de grupo\"</li> <li>Seleccionar \"Delegar control...\"</li> <li>\"Agregar...\" \u2192 Seleccionar usuario/grupo \u2192 \"Siguiente\"</li> <li>Marcar \"Crear objetos de directiva de grupo\"</li> <li>\"Siguiente\" \u2192 \"Finalizar\"</li> </ol>"},{"location":"05_02_creacion_directivas/#delegar-la-vinculacion-de-gpo-a-una-ou","title":"Delegar la vinculaci\u00f3n de GPO a una OU","text":"<p>Para permitir vincular GPO a una OU espec\u00edfica:</p> <ol> <li>Hacer clic derecho sobre la OU</li> <li>Seleccionar \"Delegar control...\"</li> <li>\"Agregar...\" \u2192 Seleccionar usuario/grupo \u2192 \"Siguiente\"</li> <li>Marcar \"Vincular GPO\"</li> <li>\"Siguiente\" \u2192 \"Finalizar\"</li> </ol> <p>Qu\u00e9 puede hacer el usuario:</p> <ul> <li>\u2705 Vincular/desvincular GPO de esa OU</li> <li>\u2705 Cambiar orden de v\u00ednculos y marcar como Forzado</li> <li>\u274c NO puede editar el contenido de las GPO</li> </ul>"},{"location":"05_02_creacion_directivas/#quitar-permisos-delegados","title":"Quitar permisos delegados","text":"<ol> <li>Seleccionar la GPO \u2192 Pesta\u00f1a \"Delegaci\u00f3n\"</li> <li>Seleccionar el usuario/grupo</li> <li>Hacer clic en \"Quitar\"</li> <li>Confirmar</li> </ol> <p>Buenas pr\u00e1cticas</p> <ul> <li>Delega a grupos, no a usuarios individuales: M\u00e1s f\u00e1cil de gestionar</li> <li>M\u00ednimo privilegio: Solo los permisos necesarios para la tarea</li> <li>Documenta: Registra qui\u00e9n tiene permisos y por qu\u00e9</li> <li>Revisa peri\u00f3dicamente: Audita y revoca permisos innecesarios</li> <li>Separa responsabilidades: Quien crea \u2260 quien vincula \u2260 quien aprueba</li> </ul> <p>Seguridad</p> <p>Ten especial cuidado al delegar permisos sobre GPO de seguridad cr\u00edticas. Una mala configuraci\u00f3n puede comprometer todo el dominio.</p>"},{"location":"05_03_herencia_directivas/","title":"Herencia de directivas","text":"<p>Las directivas de grupo siguen un modelo de herencia jer\u00e1rquica, donde las configuraciones se propagan desde los niveles superiores hacia los inferiores.</p>"},{"location":"05_03_herencia_directivas/#funcionamiento-de-la-herencia","title":"Funcionamiento de la herencia","text":"<ul> <li>Las OU hijas heredan las GPO de las OU padres</li> <li>Un usuario u ordenador puede recibir configuraciones de m\u00faltiples GPO</li> <li>Las configuraciones no conflictivas se acumulan</li> <li>Las configuraciones conflictivas se resuelven seg\u00fan la prioridad</li> </ul> Herencia de directivas. Ejemplo."},{"location":"05_03_herencia_directivas/#modificadores-de-herencia","title":"Modificadores de herencia","text":"<p>Existen mecanismos para alterar el comportamiento por defecto:</p>"},{"location":"05_03_herencia_directivas/#1-exiigido-enforced-esta-gpo-no-se-puede-sobrescribir","title":"1. Exiigido (Enforced) - \"Esta GPO no se puede sobrescribir\"","text":"<p>Cuando se marca una GPO como \"Exigido\", sus configuraciones no pueden ser sobrescritas por GPO de niveles inferiores, independientemente de la jerarqu\u00eda.</p> <p>Uso de Exigido</p> <ul> <li>La GPO marcada como <code>Exiigido</code> se aplica con prioridad absoluta</li> <li>Se reaplica al final del procesamiento, sobrescribiendo cualquier configuraci\u00f3n conflictiva</li> <li>Ignora el Bloquear Herencia de OUs inferiores</li> </ul> <p>Ejemplo pr\u00e1ctico:</p> <pre><code>Dominio: empresa.local\n\u251c\u2500\u2500 GPO-Dominio: \"Fondo corporativo azul\" \u26a0\ufe0f EXIGIDO\n\u2502\n\u2514\u2500\u2500 OU: Marketing\n    \u2514\u2500\u2500 GPO-Marketing: \"Fondo corporativo rojo\"\n</code></pre> <p>Resultado para usuarios en OU Marketing:</p> <ul> <li>Aunque GPO-Marketing est\u00e1 m\u00e1s abajo en la jerarqu\u00eda, el fondo ser\u00e1 AZUL porque GPO-Dominio tiene Exigido</li> <li>Las configuraciones de GPO-Dominio con Exigido siempre prevalecen</li> </ul> <p>\u00bfCu\u00e1ndo usar Enforced/Exigido?</p> <ul> <li>Pol\u00edticas de seguridad corporativas obligatorias para toda la organizaci\u00f3n</li> <li>Requisitos legales o normativos que no pueden ser modificados</li> <li>Configuraciones cr\u00edticas que deben aplicarse sin excepciones</li> </ul> <p>Casos de uso reales</p> <ul> <li>Pol\u00edtica de contrase\u00f1as m\u00ednima de 12 caracteres</li> <li>Instalaci\u00f3n obligatoria de software antivirus</li> <li>Restricciones de instalaci\u00f3n de software no autorizado</li> <li>Configuraciones de auditor\u00eda de seguridad</li> </ul> <p>C\u00f3mo activar <code>Exiigido</code>:</p> <ol> <li>En GPMC, navegar hasta la ubicaci\u00f3n donde est\u00e1 vinculada la GPO</li> <li>Hacer clic derecho sobre el v\u00ednculo de la GPO (no sobre la GPO en Group Policy Objects)</li> <li>Seleccionar \"Exigido\" (aparecer\u00e1 una marca \u2713)</li> <li>El v\u00ednculo mostrar\u00e1 un icono de candado \ud83d\udd12</li> </ol> Men\u00fa contextual de un v\u00ednculo de GPO mostrando la opci\u00f3n \"Exigido\" marcada, y el \u00e1rbol de GPMC con el icono de candado junto al nombre de la GPO vinculada."},{"location":"05_03_herencia_directivas/#2-bloqueo-de-herencia-block-inheritance","title":"2. Bloqueo de herencia (Block Inheritance)","text":"<p>Se puede aplicar Bloquear Herencia a una OU para impedir que reciba GPO vinculadas a niveles superiores (dominio, sitio, OUs padres), es como dedir \"No quiero heredar GPO superiores\". Sin embargo, las GPO marcadas como \"Enforced\" ignoran este bloqueo.</p> <p>\u00bfQu\u00e9 hace Bloquear Herencia?</p> <ul> <li>Bloquea todas las GPO vinculadas a niveles superiores</li> <li>Solo se aplican las GPO vinculadas directamente a esa OU (y a sus sub-OU)</li> <li>Las GPO con Exigido ignoran este bloqueo y se aplican igualmente</li> </ul> <p>Ejemplo pr\u00e1ctico:</p> <pre><code>Dominio: empresa.local\n\u251c\u2500\u2500 GPO-Dominio-A: \"Configuraci\u00f3n general\"\n\u251c\u2500\u2500 GPO-Dominio-B: \"Restricciones b\u00e1sicas\"\n\u2502\n\u2514\u2500\u2500 OU: Desarrollo \ud83d\udee1\ufe0f BLOCK INHERITANCE\n    \u2514\u2500\u2500 GPO-Dev: \"Herramientas desarrollo\"\n</code></pre> <p>Resultado para usuarios en OU Desarrollo:</p> <ul> <li>GPO-Dominio-A: \u274c Bloqueada</li> <li>GPO-Dominio-B: \u274c Bloqueada</li> <li>GPO-Dev: \u2705 Se aplica (est\u00e1 vinculada directamente a la OU)</li> </ul> <p>\u00bfCu\u00e1ndo usar Bloquear Herencia?</p> <ul> <li>Departamentos con total autonom\u00eda administrativa</li> <li>Entornos de desarrollo o pruebas que requieren configuraciones espec\u00edficas</li> <li>OUs con requisitos completamente diferentes al resto de la organizaci\u00f3n</li> </ul> <p>Usar con precauci\u00f3n</p> <p>Bloquear Herencia puede provocar que pol\u00edticas de seguridad importantes no se apliquen. Solo debe usarse cuando sea estrictamente necesario y con plena comprensi\u00f3n de las consecuencias. Documenta siempre por qu\u00e9 se activ\u00f3 el bloqueo.</p> <p>C\u00f3mo activar Bloquear Herencia:</p> <ol> <li>En GPMC, hacer clic derecho sobre la OU</li> <li>Seleccionar \"Bloquear Herencia\" (aparecer\u00e1 una marca \u2713)</li> <li>La OU mostrar\u00e1 un icono de escudo azul \ud83d\udee1\ufe0f</li> </ol> Men\u00fa contextual de una OU mostrando la opci\u00f3n \"Bloquear Herencia\" y el \u00e1rbol de GPMC con el icono de escudo azul junto al nombre de la OU."},{"location":"05_03_herencia_directivas/#exigido-vs-bloquear-herencia","title":"<code>Exigido</code> vs <code>Bloquear Herencia</code>","text":"<p>Debemos tener claro qu\u00e9 es lo que pasa cuando existe conflicto entre estas dos opciones y saber cual de las dos tiene m\u00e1s prioridad a la hora de aplicarse. </p> <p>La soluci\u00f3n es sencilla: <code>EXIGIDO</code> SIEMPRE GANA. Una GPO con <code>Exigido</code> se aplica incluso si hay <code>Bloquear Herencia</code> en el camino.</p> <p>Ejemplo del conflicto:</p> <pre><code>Dominio: empresa.local\n\u251c\u2500\u2500 GPO-Seguridad: \"Antivirus corporativo\" \u26a0\ufe0f EXIGIDO\n\u2502\n\u2514\u2500\u2500 OU: Laboratorio \ud83d\udee1\ufe0f BLOCK INHERITANCE\n    \u2514\u2500\u2500 GPO-Lab: \"Configuraci\u00f3n laboratorio\"\n</code></pre> <p>Resultado para usuarios en OU Laboratorio:</p> <ul> <li>GPO-Seguridad: \u2705 Se aplica (Exigido ignora Bloquear Herencia)</li> <li>GPO-Lab: \u2705 Se aplica</li> </ul> <p>Regla de oro:</p> <pre><code>EXIGIDO &gt; Bloquear Herencia\n</code></pre> <p>Jerarqu\u00eda de prioridad completa</p> <ol> <li>GPO con Exigido (m\u00e1xima prioridad, aplicaci\u00f3n obligatoria)</li> <li>GPO de OU m\u00e1s espec\u00edfica (m\u00e1s cercana al objeto)</li> <li>GPO de OU padre</li> <li>GPO de dominio</li> <li>GPO de sitio</li> <li>GPO local (menor prioridad)</li> </ol> <p>El Bloquear Herencia bloquea del punto 2 al 6, pero NO bloquea GPO con Exigido.</p>"},{"location":"05_03_herencia_directivas/#visualizacion-de-la-herencia-group-policy-inheritance","title":"Visualizaci\u00f3n de la herencia: Group Policy Inheritance","text":"<p>Para verificar exactamente qu\u00e9 GPO se aplican a una OU y en qu\u00e9 orden:</p> <ol> <li>En GPMC, seleccionar la OU deseada</li> <li>En el panel derecho, ir a la pesta\u00f1a \"Group Policy Inheritance\"</li> <li>Ver la lista ordenada que muestra:</li> <li>Precedence: N\u00famero de prioridad (1 = m\u00e1xima prioridad)</li> <li>GPO: Nombre de la directiva</li> <li>Location: D\u00f3nde est\u00e1 vinculada (dominio, OU padre, OU actual)</li> <li>Exigido: Si la GPO tiene EXIGIDO activado</li> <li>Link Enabled: Si el v\u00ednculo est\u00e1 activo</li> <li>Path: Ruta completa donde est\u00e1 vinculada</li> </ol> <p>Interpretaci\u00f3n:</p> <ul> <li>Precedence 1 = se aplica al final, tiene m\u00e1xima prioridad</li> <li>Las GPO con \"Yes\" en Exigido aparecen primero en la lista</li> <li>Si hay Bloquear Herencia, solo aparecen GPO Exigido y locales de la OU</li> </ul> Pesta\u00f1a \"Group Policy Inheritance\" completa mostrando una tabla con varias GPO, sus n\u00fameros de precedencia (1, 2, 3...), ubicaciones, y columnas indicando Exigido y Link Enabled."},{"location":"05_03_herencia_directivas/#ejemplos-completos-de-herencia","title":"Ejemplos completos de herencia","text":"<p>A continuaci\u00f3n tenemos dos ejemplos de aplicaci\u00f3n de directivas con herencias:</p> <p>Escenario 1 de ejemplo:</p> <pre><code>Dominio: empresa.local\n\u2502\n\u251c\u2500\u2500 GPO-A: \"Pol\u00edtica antivirus\" \u26a0\ufe0f EXIGIDO\n\u251c\u2500\u2500 GPO-B: \"Configuraci\u00f3n escritorio corporativo\"\n\u2502\n\u251c\u2500\u2500 OU: Ventas\n\u2502   \u251c\u2500\u2500 GPO-C: \"Aplicaciones ventas\"\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 OU: Ventas-Internacional \ud83d\udee1\ufe0f BLOCK INHERITANCE\n\u2502       \u2514\u2500\u2500 GPO-D: \"Config internacional\" \u26a0\ufe0f EXIGIDO en este nivel\n\u2502\n\u2514\u2500\u2500 OU: IT\n    \u2514\u2500\u2500 GPO-E: \"Herramientas IT\"\n</code></pre> <p>Usuario en \"Ventas-Internacional\" recibe:</p> <ol> <li>\u2705 GPO-A (Exigido desde dominio) \u2192 Ignora Bloquear Herencia</li> <li>\u274c GPO-B \u2192 Bloqueada por Bloquear Herencia</li> <li>\u274c GPO-C (de OU padre \"Ventas\") \u2192 Bloqueada por Bloquear Herencia</li> <li>\u2705 GPO-D (de su propia OU)</li> </ol> <p>Orden de aplicaci\u00f3n (prioridad):</p> Precedence GPO Motivo 1 GPO-A EXIGIDO desde dominio (m\u00e1xima prioridad) 2 GPO-D Vinculada a su OU (siguiente prioridad) <p></p> Ventana de GPMC mostrando el resultado de \"Group Policy Inheritance\" para esta OU espec\u00edfica, con las dos GPO listadas y sus respectivas precedencias. <p></p> <p>Escenario 2 de ejemplo</p> <pre><code>Dominio: empresa.local\n\u2502\n\u251c\u2500\u2500 GPO-A: \"Pol\u00edtica antivirus\" \u26a0\ufe0f EXIGIDO\n\u251c\u2500\u2500 GPO-B: \"Fondo corporativo\"\n\u2502\n\u251c\u2500\u2500 OU: Administraci\u00f3n\n\u2502   \u2514\u2500\u2500 GPO-C: \"Restricciones admin\"\n\u2502\n\u2514\u2500\u2500 OU: Desarrollo \ud83d\udee1\ufe0f BLOCK INHERITANCE\n    \u251c\u2500\u2500 GPO-D: \"Herramientas dev\"\n    \u2502\n    \u2514\u2500\u2500 OU: Desarrollo-Junior \u26a0\ufe0f GPO-E vinculada con EXIGIDO\n        \u2514\u2500\u2500 GPO-F: \"Restricciones junior\"\n</code></pre> <p>Usuario en OU \"Desarrollo-Junior\" recibe:</p> <ol> <li>\u2705 GPO-A (Exigido desde dominio) - Pasa el Bloquear Herencia</li> <li>\u274c GPO-B - Bloqueada por Bloquear Herencia de \"Desarrollo\"</li> <li>\u274c GPO-C - No le afecta (est\u00e1 en otra rama)</li> <li>\u2705 GPO-D (OU padre \"Desarrollo\")</li> <li>\u2705 GPO-E (Exigido en su OU)</li> <li>\u2705 GPO-F (Su propia OU)</li> </ol> <p>Orden de prioridad final:</p> <pre><code>GPO-A (Exigido dominio)  \u2190 M\u00e1xima prioridad\nGPO-E (Exigido en OU)    \u2190 Alta prioridad\nGPO-F                     \u2190 Prioridad media\nGPO-D                     \u2190 Menor prioridad\n</code></pre>"},{"location":"05_03_herencia_directivas/#directivas-en-conflicto","title":"Directivas en conflicto","text":"<p>Cuando dos o m\u00e1s directivas configuran el mismo par\u00e1metro con valores diferentes:</p> Situaci\u00f3n Resultado Configuraci\u00f3n de equipo vs Configuraci\u00f3n de usuario Equipo prevalece (por defecto) GPO de dominio vs GPO de OU OU prevalece GPO con Exigido vs GPO normal Exigido prevalece Varias GPO en misma OU Link Order menor prevalece <p>Buena pr\u00e1ctica</p> <p>Documenta siempre las directivas aplicadas y su prop\u00f3sito. Utiliza nombres descriptivos para las GPO que indiquen claramente su funci\u00f3n.</p>"},{"location":"05_03_herencia_directivas/#herramienta-de-visualizacion-group-policy-inheritance","title":"Herramienta de visualizaci\u00f3n: Group Policy Inheritance","text":"<p>Para ver exactamente qu\u00e9 GPO se aplican a una OU espec\u00edfica:</p> <ol> <li>En GPMC, seleccionar la OU</li> <li>Ir a la pesta\u00f1a \"Group Policy Inheritance\" en el panel derecho</li> <li>Ver lista ordenada de GPO que se aplican, indicando:</li> <li>Precedence (orden de prioridad, 1 = m\u00e1xima)</li> <li>GPO Name (nombre de la GPO)</li> <li>Location (d\u00f3nde est\u00e1 vinculada)</li> <li>Si tiene Exigido o est\u00e1 bloqueada</li> </ol> Administrador directivas de grupo. Vista prioridades aplicaci\u00f3n."},{"location":"05_04_configuacion_directivas_comunes/","title":"Configuraci\u00f3n de directivas comunes","text":"<p>En esta secci\u00f3n veremos las configuraciones m\u00e1s habituales que se aplican mediante GPO en entornos empresariales. Cada configuraci\u00f3n incluir\u00e1 la ruta dentro del Editor de directivas y ejemplos pr\u00e1cticos.</p>"},{"location":"05_04_configuacion_directivas_comunes/#estructura-del-editor-de-directivas-de-grupo","title":"Estructura del Editor de directivas de grupo","text":"<p>Antes de comenzar, es importante conocer las dos secciones principales:</p>"},{"location":"05_04_configuacion_directivas_comunes/#configuracion-del-equipo-computer-configuration","title":"Configuraci\u00f3n del equipo (Computer Configuration)","text":"<ul> <li>Se aplica a los ordenadores, independientemente del usuario que inicie sesi\u00f3n</li> <li>Se procesa durante el arranque del sistema</li> <li>Afecta a todos los usuarios que utilicen ese equipo</li> </ul> <p>Subsecciones principales:</p> <ul> <li>Directivas \u2192 Configuraci\u00f3n de software: Instalaci\u00f3n de aplicaciones</li> <li>Directivas \u2192 Configuraci\u00f3n de Windows: Seguridad, scripts, redirecci\u00f3n</li> <li>Directivas \u2192 Plantillas administrativas: Configuraciones del sistema operativo</li> <li>Preferencias: Configuraciones que el usuario puede modificar</li> </ul>"},{"location":"05_04_configuacion_directivas_comunes/#configuracion-de-usuario-user-configuration","title":"Configuraci\u00f3n de usuario (User Configuration)","text":"<ul> <li>Se aplica a los usuarios, independientemente del equipo donde inicien sesi\u00f3n</li> <li>Se procesa durante el inicio de sesi\u00f3n</li> <li>Las configuraciones \"siguen\" al usuario</li> </ul> <p>Subsecciones principales:</p> <ul> <li>Directivas \u2192 Configuraci\u00f3n de software: Instalaci\u00f3n de aplicaciones para el usuario</li> <li>Directivas \u2192 Configuraci\u00f3n de Windows: Scripts, redirecci\u00f3n de carpetas</li> <li>Directivas \u2192 Plantillas administrativas: Configuraciones de escritorio y aplicaciones</li> <li>Preferencias: Configuraciones personalizables por el usuario</li> </ul> Editor de directivas de grupo. <p>\u00bfEquipo o Usuario?</p> <ul> <li>Si la configuraci\u00f3n debe aplicarse independientemente de qui\u00e9n inicie sesi\u00f3n \u2192 Configuraci\u00f3n del equipo</li> <li>Si la configuraci\u00f3n debe seguir al usuario en cualquier equipo \u2192 Configuraci\u00f3n de usuario</li> </ul>"},{"location":"05_04_configuacion_directivas_comunes/#configuracion-de-directivas-comunes","title":"Configuraci\u00f3n de directivas comunes","text":""},{"location":"05_04_configuacion_directivas_comunes/#directivas-predeterminadas-del-dominio","title":"Directivas predeterminadas del dominio","text":"<p>Al crear un dominio de Active Directory, se generan autom\u00e1ticamente dos GPO predeterminadas con configuraciones de seguridad esenciales. Es importante conocerlas antes de crear nuevas directivas.</p>"},{"location":"05_04_configuacion_directivas_comunes/#default-domain-policy","title":"Default Domain Policy","text":"<p>La Default Domain Policy es una GPO vinculada autom\u00e1ticamente a la ra\u00edz del dominio y se aplica a todos los usuarios y equipos del dominio (excepto los controladores de dominio).</p> <p>Prop\u00f3sito: Contiene las configuraciones de seguridad b\u00e1sicas a nivel de dominio, principalmente:</p> <ul> <li>Directivas de contrase\u00f1as: Longitud m\u00ednima, complejidad, vigencia</li> <li>Directivas de bloqueo de cuentas: Umbral de bloqueos, duraci\u00f3n</li> <li>Directivas Kerberos: Configuraci\u00f3n de autenticaci\u00f3n del dominio</li> </ul> <p>\u00bfQu\u00e9 configuraciones incluye por defecto?</p> Directiva Valor predeterminado Longitud m\u00ednima de contrase\u00f1a 7 caracteres Vigencia m\u00e1xima de contrase\u00f1a 42 d\u00edas Vigencia m\u00ednima de contrase\u00f1a 1 d\u00eda Requisitos de complejidad Habilitada Historial de contrase\u00f1as 24 contrase\u00f1as Umbral de bloqueo de cuenta No definido (deshabilitado) <p>Buenas pr\u00e1cticas:</p> <ul> <li>\u2705 Editar esta GPO para ajustar pol\u00edticas de contrase\u00f1a seg\u00fan requisitos de la organizaci\u00f3n</li> <li>\u2705 No eliminarla nunca: Es cr\u00edtica para el funcionamiento del dominio</li> <li>\u26a0\ufe0f No a\u00f1adir configuraciones no relacionadas con seguridad de cuentas: Crea GPO espec\u00edficas para otras configuraciones</li> <li>\u2705 Realizar copias de seguridad antes de modificarla</li> </ul> Editor de directivas de grupo. <p>Modificar con cuidado</p> <p>Esta GPO afecta a todos los usuarios del dominio. Cambios incorrectos en pol\u00edticas de contrase\u00f1a o Kerberos pueden bloquear el acceso a todo el dominio.</p>"},{"location":"05_04_configuacion_directivas_comunes/#default-domain-controllers-policy","title":"Default Domain Controllers Policy","text":"<p>La Default Domain Controllers Policy es una GPO vinculada autom\u00e1ticamente a la OU \"Domain Controllers\" y se aplica \u00fanicamente a los controladores de dominio.</p> <p>Prop\u00f3sito: Contiene configuraciones de seguridad espec\u00edficas para proteger los controladores de dominio, incluyendo:</p> <ul> <li>Asignaci\u00f3n de derechos de usuario: Qui\u00e9n puede iniciar sesi\u00f3n localmente, hacer copias de seguridad, etc.</li> <li>Directivas de auditor\u00eda: Registro de eventos de seguridad en los DC</li> <li>Opciones de seguridad: Configuraciones especiales para servicios de dominio</li> </ul> <p>\u00bfQu\u00e9 configuraciones incluye?</p> <ul> <li>Permisos para iniciar sesi\u00f3n en los controladores de dominio</li> <li>Derechos de copia de seguridad de archivos y directorios</li> <li>Configuraci\u00f3n de auditor\u00eda de acceso a objetos de AD</li> <li>Restricciones de seguridad del protocolo LDAP</li> </ul> <p>\u00bfD\u00f3nde se aplica?</p> <pre><code>Dominio: empresa.local\n\u2514\u2500\u2500 Domain Controllers (OU)\n    \u251c\u2500\u2500 DC01 (Controlador de dominio)\n    \u2514\u2500\u2500 DC02 (Controlador de dominio)\n\n    \u2191 Default Domain Controllers Policy se aplica aqu\u00ed\n</code></pre> <p>Buenas pr\u00e1cticas:</p> <ul> <li>\u2705 No eliminarla nunca: Esencial para la seguridad de los DC</li> <li>\u2705 Editar solo para reforzar seguridad: A\u00f1adir m\u00e1s auditor\u00eda, restricciones de acceso</li> <li>\u26a0\ufe0f No a\u00f1adir configuraciones de usuario: Los DC no deben usarse como estaciones de trabajo</li> <li>\u2705 Mantener respaldos actualizados</li> </ul> Editor de directivas de grupo. <p>Cr\u00edtico</p> <p>Los controladores de dominio son el n\u00facleo de Active Directory. Modificaciones incorrectas en esta GPO pueden comprometer la seguridad de todo el dominio o impedir que los DC funcionen correctamente.</p>"},{"location":"05_04_configuacion_directivas_comunes/#comparacion-entre-ambas-directivas","title":"Comparaci\u00f3n entre ambas directivas","text":"Caracter\u00edstica Default Domain Policy Default Domain Controllers Policy \u00c1mbito Todo el dominio Solo controladores de dominio Ubicaci\u00f3n Vinculada a la ra\u00edz del dominio Vinculada a OU \"Domain Controllers\" Contenido principal Pol\u00edticas de contrase\u00f1as y cuentas Derechos de usuario y auditor\u00eda Se puede eliminar \u274c NO (cr\u00edtica) \u274c NO (cr\u00edtica) Se puede modificar \u2705 S\u00ed (con cuidado) \u2705 S\u00ed (con cuidado) Afecta a usuarios \u2705 S\u00ed \u274c No (solo equipos DC)"},{"location":"05_04_configuacion_directivas_comunes/#crear-gpo-nuevas-o-modificar-las-predeterminadas","title":"\u00bfCrear GPO nuevas o modificar las predeterminadas?","text":"<p>Recomendaci\u00f3n general:</p> <p>Para la mayor\u00eda de las configuraciones, es mejor crear GPO nuevas espec\u00edficas en lugar de modificar las predeterminadas.</p> <p>Cu\u00e1ndo modificar las predeterminadas:</p> <ul> <li>\u2705 Default Domain Policy: Para cambiar pol\u00edticas de contrase\u00f1as y bloqueo de cuentas</li> <li>\u2705 Default Domain Controllers Policy: Para reforzar auditor\u00eda y seguridad de los DC</li> </ul> <p>Cu\u00e1ndo crear GPO nuevas:</p> <ul> <li>\u2705 Configuraciones de escritorio y entorno de usuario</li> <li>\u2705 Instalaci\u00f3n de software</li> <li>\u2705 Redirecci\u00f3n de carpetas</li> <li>\u2705 Restricciones de aplicaciones</li> <li>\u2705 Scripts de inicio/cierre</li> <li>\u2705 Configuraciones espec\u00edficas de departamentos</li> </ul> <p>Organizaci\u00f3n recomendada</p> <p>Estructura sugerida de GPO:</p> <ul> <li>Default Domain Policy: Solo pol\u00edticas de contrase\u00f1as/cuentas</li> <li>SEC-Seguridad-Base: Auditor\u00eda, firewall, antivirus</li> <li>CONFIG-Escritorio-Corporativo: Fondo, restricciones UI</li> <li>SOFT-Aplicaciones-Departamento: Instalaci\u00f3n de software espec\u00edfico</li> <li>REDIR-Carpetas-Usuarios: Redirecci\u00f3n de perfiles</li> </ul>"},{"location":"05_04_configuacion_directivas_comunes/#restaurar-directivas-predeterminadas","title":"Restaurar directivas predeterminadas","text":"<p>Si accidentalmente se modifican o eliminan las directivas predeterminadas, se pueden restaurar:</p> <p>Usando dcgpofix (desde el DC):</p> <ol> <li>Abrir CMD o PowerShell como administrador en el controlador de dominio</li> <li>Ejecutar:</li> </ol> <pre><code>dcgpofix /ignoreschema /target:domain\n</code></pre> <p>Esto restaura la Default Domain Policy</p> <pre><code>dcgpofix /ignoreschema /target:dc\n</code></pre> <p>Esto restaura la Default Domain Controllers Policy</p> <pre><code>dcgpofix /ignoreschema /target:both\n</code></pre> <p>Esto restaura ambas directivas</p> <p>Precauci\u00f3n con dcgpofix</p> <p><code>dcgpofix</code> sobrescribe completamente las GPO predeterminadas con sus valores de f\u00e1brica. Perder\u00e1s todas las modificaciones que hayas hecho. \u00dasalo solo como \u00faltimo recurso.</p> <p>Alternativa: Restaurar desde copia de seguridad</p> <p>Si realizaste copias de seguridad previas (recomendado):</p> <ol> <li>GPMC \u2192 Clic derecho sobre la GPO</li> <li>\"Restaurar desde copia de seguridad...\"</li> <li>Seleccionar la copia adecuada</li> </ol>"},{"location":"05_04_configuacion_directivas_comunes/#directivas-de-seguridad-personalizadas","title":"Directivas de seguridad personalizadas","text":"<p>Una vez comprendidas las directivas predeterminadas, procedemos a configurar directivas personalizadas seg\u00fan las necesidades de la organizaci\u00f3n.</p> <p>Las directivas de seguridad son fundamentales para proteger el entorno de red.</p>"},{"location":"05_04_configuacion_directivas_comunes/#1-directivas-de-contrasenas","title":"1. Directivas de contrase\u00f1as","text":"<p>Controlan los requisitos de las contrase\u00f1as de los usuarios del dominio.</p> <p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n del equipo\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Configuraci\u00f3n de Windows\n        \u2514\u2500\u2500 Configuraci\u00f3n de seguridad\n            \u2514\u2500\u2500 Directivas de cuenta\n                \u2514\u2500\u2500 Directiva de contrase\u00f1as\n</code></pre><p></p> <p>Configuraciones principales:</p> Directiva Descripci\u00f3n Valor recomendado Exigir el historial de contrase\u00f1as N\u00famero de contrase\u00f1as anteriores que no se pueden reutilizar 24 contrase\u00f1as Vigencia m\u00e1xima de la contrase\u00f1a D\u00edas antes de que expire 60-90 d\u00edas Vigencia m\u00ednima de la contrase\u00f1a D\u00edas antes de poder cambiarla 1 d\u00eda Longitud m\u00ednima de la contrase\u00f1a Caracteres m\u00ednimos 12-14 caracteres Debe cumplir los requisitos de complejidad May\u00fasculas, min\u00fasculas, n\u00fameros, s\u00edmbolos Habilitada Almacenar contrase\u00f1as con cifrado reversible Almacenamiento inseguro Deshabilitada <p>Ejemplo pr\u00e1ctico: Pol\u00edtica de contrase\u00f1as robusta</p> <ol> <li>Editar una GPO vinculada al dominio (afecta a todos los usuarios)</li> <li>Navegar a la ruta de directivas de contrase\u00f1as</li> <li>Configurar:<ul> <li>Longitud m\u00ednima: 12 caracteres</li> <li>Vigencia m\u00e1xima: 90 d\u00edas</li> <li>Requisitos de complejidad: Habilitada</li> <li>Historial: 24 contrase\u00f1as</li> </ul> </li> </ol> Panel del Editor mostrando las directivas de contrase\u00f1as con los valores configurados en la columna \"Configuraci\u00f3n de directiva\" <p>Solo una GPO de contrase\u00f1as</p> <p>Las directivas de contrase\u00f1as deben configurarse en una \u00fanica GPO vinculada al dominio. Si hay m\u00faltiples GPO con configuraciones diferentes, solo se aplicar\u00e1 una (la de mayor prioridad), lo que puede causar confusi\u00f3n.</p>"},{"location":"05_04_configuacion_directivas_comunes/#2-directivas-de-bloqueo-de-cuentas","title":"2. Directivas de bloqueo de cuentas","text":"<p>Protegen contra ataques de fuerza bruta bloqueando cuentas tras intentos fallidos.</p> <p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n del equipo\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Configuraci\u00f3n de Windows\n        \u2514\u2500\u2500 Configuraci\u00f3n de seguridad\n            \u2514\u2500\u2500 Directivas de cuenta\n                \u2514\u2500\u2500 Directiva de bloqueo de cuentas\n</code></pre><p></p> <p>Configuraciones principales:</p> Directiva Descripci\u00f3n Valor recomendado Duraci\u00f3n del bloqueo de cuenta Minutos que permanece bloqueada 30 minutos (o hasta que un administrador la desbloquee = 0) Umbral de bloqueo de cuenta Intentos fallidos antes del bloqueo 5-10 intentos Restablecer el contador de bloqueo despu\u00e9s de Minutos para resetear el contador de intentos 30 minutos <p>Ejemplo pr\u00e1ctico:</p> <ol> <li>Configurar umbral: 5 intentos fallidos</li> <li>Duraci\u00f3n: 30 minutos</li> <li>Restablecer contador: 30 minutos</li> </ol> <p>Resultado: Tras 5 intentos fallidos, la cuenta se bloquea 30 minutos autom\u00e1ticamente.</p>"},{"location":"05_04_configuacion_directivas_comunes/#3-directivas-de-auditoria","title":"3. Directivas de auditor\u00eda","text":"<p>Registran eventos de seguridad en el Visor de eventos para detectar actividades sospechosas.</p> <p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n del equipo\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Configuraci\u00f3n de Windows\n        \u2514\u2500\u2500 Configuraci\u00f3n de seguridad\n            \u2514\u2500\u2500 Directivas locales\n                \u2514\u2500\u2500 Directiva de auditor\u00eda\n</code></pre><p></p> <p>Categor\u00edas principales:</p> Evento Qu\u00e9 audita Cu\u00e1ndo habilitar Auditar eventos de inicio de sesi\u00f3n de cuenta Intentos de autenticaci\u00f3n en el dominio Siempre (Correcto y Error) Auditar la administraci\u00f3n de cuentas Creaci\u00f3n, modificaci\u00f3n, eliminaci\u00f3n de cuentas Siempre (Correcto y Error) Auditar el acceso al servicio de directorio Cambios en Active Directory Entornos de alta seguridad Auditar eventos de inicio de sesi\u00f3n Inicios de sesi\u00f3n locales en equipos Siempre (Correcto y Error) Auditar el acceso a objetos Acceso a archivos y carpetas Carpetas sensibles Auditar cambios de directivas Modificaciones en GPO Siempre (Correcto) <p>Configuraci\u00f3n recomendada b\u00e1sica:</p> <ol> <li>Eventos de inicio de sesi\u00f3n de cuenta: Correcto y Error</li> <li>Administraci\u00f3n de cuentas: Correcto y Error</li> <li>Cambios de directivas: Correcto</li> <li>Inicio de sesi\u00f3n: Error (para detectar intentos fallidos)</li> </ol> <p>Ver eventos auditados</p> <p>Los eventos se registran en:</p> <ul> <li>Visor de eventos \u2192 Registros de Windows \u2192 Seguridad</li> <li>Buscar Event ID espec\u00edficos (ej: 4624 = inicio de sesi\u00f3n correcto, 4625 = inicio de sesi\u00f3n fallido)</li> </ul>"},{"location":"05_04_configuacion_directivas_comunes/#directivas-de-escritorio-y-entorno-de-usuario","title":"Directivas de escritorio y entorno de usuario","text":"<p>Estas directivas permiten personalizar y restringir el entorno de trabajo de los usuarios.</p>"},{"location":"05_04_configuacion_directivas_comunes/#1-configuracion-del-escritorio","title":"1. Configuraci\u00f3n del escritorio","text":"<p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n de usuario\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Plantillas administrativas\n        \u2514\u2500\u2500 Escritorio\n</code></pre><p></p> <p>Configuraciones comunes:</p> Directiva Qu\u00e9 hace Ruta espec\u00edfica Ocultar y deshabilitar todos los elementos del escritorio Escritorio vac\u00edo sin iconos Escritorio Quitar el icono Papelera de reciclaje del escritorio Oculta la papelera Escritorio Impedir cambios en el fondo de escritorio Bloquea cambio de wallpaper Escritorio\\Active Desktop Fondo de escritorio Establece una imagen corporativa Escritorio\\Active Desktop <p>Ejemplo: Establecer fondo corporativo</p> <ol> <li>Navegar a: <code>Configuraci\u00f3n de usuario \u2192 Plantillas administrativas \u2192 Escritorio \u2192 Active Desktop</code></li> <li>Editar \"Fondo de escritorio\"</li> <li>Habilitar la directiva</li> <li>Introducir ruta UNC: <code>\\\\servidor\\compartido\\fondocorporativo.jpg</code></li> <li>Seleccionar estilo: Rellenar, Ajustar, Expandir, Mosaico, Centrar</li> <li>Aplicar</li> </ol> <p>Compartir im\u00e1genes corporativas</p> <p>Guarda las im\u00e1genes en una carpeta compartida en SYSVOL o en un servidor de archivos accesible para todos:</p> <pre><code>\\\\dominio.local\\SYSVOL\\dominio.local\\Recursos\\Fondos\\\n</code></pre>"},{"location":"05_04_configuacion_directivas_comunes/#2-menu-inicio-y-barra-de-tareas","title":"2. Men\u00fa Inicio y barra de tareas","text":"<p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n de usuario\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Plantillas administrativas\n        \u2514\u2500\u2500 Men\u00fa Inicio y barra de tareas\n</code></pre><p></p> <p>Restricciones comunes:</p> Directiva Efecto Quitar el men\u00fa Ejecutar del men\u00fa Inicio El usuario no puede usar Win+R Quitar Configuraci\u00f3n del men\u00fa Inicio Oculta acceso a Configuraci\u00f3n de Windows Quitar el icono Panel de control del men\u00fa Inicio No puede acceder al Panel de control Impedir cambios en la configuraci\u00f3n de la barra de tareas y del men\u00fa Inicio Bloquea personalizaci\u00f3n Quitar la opci\u00f3n Apagar Impide apagar el equipo (\u00fatil en terminales compartidos) <p>Ejemplo: Bloquear Panel de control</p> <ol> <li>Navegar a la ruta de Men\u00fa Inicio</li> <li>Buscar \"Prohibir el acceso al Panel de control y a Configuraci\u00f3n de PC\"</li> <li>Habilitar la directiva</li> <li>Aplicar</li> </ol> <p>El usuario no podr\u00e1 acceder al Panel de control por ning\u00fan medio.</p>"},{"location":"05_04_configuacion_directivas_comunes/#3-restricciones-del-explorador-de-windows","title":"3. Restricciones del Explorador de Windows","text":"<p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n de usuario\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Plantillas administrativas\n        \u2514\u2500\u2500 Componentes de Windows\n            \u2514\u2500\u2500 Explorador de archivos\n</code></pre><p></p> <p>Configuraciones \u00fatiles:</p> Directiva Descripci\u00f3n Ocultar estas unidades especificadas en Mi PC Oculta unidades (A:, C:, D:, etc.) Impedir el acceso a las unidades desde Mi PC Bloquea acceso real a las unidades Quitar la ficha Seguridad Los usuarios no ven permisos de archivos Quitar el men\u00fa Herramientas (y acceso a Opciones de carpeta) Impide cambiar configuraci\u00f3n del explorador <p>Ejemplo: Ocultar unidad C:</p> <ol> <li>Buscar \"Ocultar estas unidades especificadas en Mi PC\"</li> <li>Habilitar</li> <li>Seleccionar: \"Restringir solo las unidades C\"</li> <li>Aplicar</li> </ol> <p>Diferencia importante</p> <ul> <li>Ocultar unidades: No se ve en el explorador pero se puede acceder escribiendo la ruta</li> <li>Impedir acceso: Bloquea acceso real incluso escribiendo la ruta</li> </ul>"},{"location":"05_04_configuacion_directivas_comunes/#directivas-de-instalacion-y-restriccion-de-software","title":"Directivas de instalaci\u00f3n y restricci\u00f3n de software","text":""},{"location":"05_04_configuacion_directivas_comunes/#1-restricciones-de-software-applocker-software-restriction-policies","title":"1. Restricciones de software (AppLocker / Software Restriction Policies)","text":"<p>Controlan qu\u00e9 aplicaciones pueden ejecutarse en los equipos.</p> <p>Ubicaci\u00f3n (AppLocker - Windows 7 y superior): </p><pre><code>Configuraci\u00f3n del equipo\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Configuraci\u00f3n de Windows\n        \u2514\u2500\u2500 Configuraci\u00f3n de seguridad\n            \u2514\u2500\u2500 Directivas de control de aplicaciones\n                \u2514\u2500\u2500 AppLocker\n</code></pre><p></p> <p>Tipos de reglas:</p> <ul> <li>Reglas ejecutables: .exe, .com</li> <li>Reglas de Windows Installer: .msi, .msp</li> <li>Reglas de scripts: .ps1, .bat, .cmd, .vbs</li> <li>Reglas de aplicaciones empaquetadas: Apps de Microsoft Store</li> <li>Reglas de DLL: Librer\u00edas (alto impacto en rendimiento)</li> </ul> <p>Ejemplo: Bloquear ejecuci\u00f3n desde carpeta Descargas</p> <ol> <li>En AppLocker, clic derecho en \"Reglas ejecutables\" \u2192 \"Crear nueva regla...\"</li> <li>Siguiente \u2192 Seleccionar \"Denegar\"</li> <li>Seleccionar usuarios/grupos afectados</li> <li>Siguiente \u2192 Condici\u00f3n: \"Ruta de acceso\"</li> <li>Ruta: <code>%USERPROFILE%\\Downloads\\*</code></li> <li>Siguiente \u2192 Dar nombre \u2192 Crear</li> </ol> <p>Los usuarios no podr\u00e1n ejecutar archivos .exe desde su carpeta de Descargas.</p> <p>Activar servicio AppLocker</p> <p>Para que AppLocker funcione, el servicio \"Identidad de aplicaci\u00f3n\" debe estar iniciado. Se puede configurar mediante GPO:</p> <pre><code>Configuraci\u00f3n del equipo \u2192 Preferencias \u2192 Configuraci\u00f3n del Panel de control \u2192 Servicios\n</code></pre>"},{"location":"05_04_configuacion_directivas_comunes/#2-instalacion-de-software","title":"2. Instalaci\u00f3n de software","text":"<p>Permite desplegar aplicaciones autom\u00e1ticamente a usuarios o equipos.</p> <p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n del equipo (o usuario)\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Configuraci\u00f3n de software\n        \u2514\u2500\u2500 Instalaci\u00f3n de software\n</code></pre><p></p> <p>M\u00e9todos de implementaci\u00f3n:</p> M\u00e9todo Cu\u00e1ndo se instala Descripci\u00f3n Asignado (equipo) Al arrancar el equipo Instalaci\u00f3n autom\u00e1tica y obligatoria Asignado (usuario) Al iniciar sesi\u00f3n Aparece en Programas, se instala al usar Publicado (solo usuario) Nunca autom\u00e1ticamente Disponible en \"Agregar o quitar programas\" <p>Ejemplo: Desplegar 7-Zip en todos los equipos</p> <p>Requisitos previos:</p> <ol> <li>Tener el archivo .msi de 7-Zip</li> <li>Compartir en ubicaci\u00f3n accesible: <code>\\\\servidor\\software\\7zip.msi</code></li> <li>Dar permisos de lectura a \"Equipos del dominio\"</li> </ol> <p>Pasos:</p> <ol> <li>Editar GPO vinculada a la OU con los equipos</li> <li>Ir a: <code>Configuraci\u00f3n del equipo \u2192 Instalaci\u00f3n de software</code></li> <li>Clic derecho \u2192 \"Nuevo\" \u2192 \"Paquete...\"</li> <li>Navegar usando ruta UNC (no letra de unidad) hasta el .msi</li> <li>Seleccionar el archivo</li> <li>Elegir \"Asignado\"</li> <li>Aceptar</li> </ol> <p>Al reiniciar, los equipos instalar\u00e1n 7-Zip autom\u00e1ticamente.</p> <p>Solo archivos .msi</p> <p>La instalaci\u00f3n de software mediante GPO solo admite archivos Windows Installer (.msi). Para ejecutables (.exe), usa scripts de inicio.</p>"},{"location":"05_04_configuacion_directivas_comunes/#redireccion-de-carpetas","title":"Redirecci\u00f3n de carpetas","text":"<p>Redirige carpetas del perfil de usuario a ubicaciones de red centralizadas.</p> <p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n de usuario\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Configuraci\u00f3n de Windows\n        \u2514\u2500\u2500 Redirecci\u00f3n de carpetas\n</code></pre><p></p> <p>Carpetas que se pueden redirigir:</p> <ul> <li>Documentos</li> <li>Escritorio</li> <li>Men\u00fa Inicio</li> <li>M\u00fasica, Im\u00e1genes, V\u00eddeos</li> <li>Descargas</li> <li>Favoritos</li> </ul> <p>Ventajas:</p> <ul> <li>\u2705 Copias de seguridad centralizadas: Los datos est\u00e1n en el servidor</li> <li>\u2705 Movilidad: El usuario accede a sus archivos desde cualquier equipo</li> <li>\u2705 Libera espacio: No se almacena localmente en el equipo</li> </ul> <p>Ejemplo: Redirigir carpeta Documentos</p> <p>Preparaci\u00f3n:</p> <ol> <li>Crear carpeta compartida en servidor: <code>\\\\servidor\\perfiles$\\</code></li> <li>Compartir con permisos:</li> <li>Usuarios autenticados: Control total</li> <li>Permisos NTFS:</li> <li>SYSTEM: Control total</li> <li>Usuarios del dominio: Modificar</li> </ol> <p>Configuraci\u00f3n:</p> <ol> <li>En GPO, navegar a Redirecci\u00f3n de carpetas</li> <li>Clic derecho en \"Documentos\" \u2192 \"Propiedades\"</li> <li>Configuraci\u00f3n: \"B\u00e1sica: redirigir las carpetas de todos a la misma ubicaci\u00f3n\"</li> <li>Ubicaci\u00f3n de carpeta de destino: \"Crear una carpeta para cada usuario en la ruta de acceso ra\u00edz\"</li> <li>Ruta de acceso ra\u00edz: <code>\\\\servidor\\perfiles$\\%USERNAME%\\Documentos</code></li> <li>Pesta\u00f1a \"Configuraci\u00f3n\":</li> <li>\u2705 Conceder al usuario derechos exclusivos</li> <li>\u2705 Mover el contenido a la nueva ubicaci\u00f3n</li> <li>Aceptar</li> </ol> <p>Variable %USERNAME%</p> <p>La variable <code>%USERNAME%</code> se sustituye autom\u00e1ticamente por el nombre de cada usuario, creando carpetas individuales.</p>"},{"location":"05_04_configuacion_directivas_comunes/#scripts-de-inicio-y-cierre-de-sesion","title":"Scripts de inicio y cierre de sesi\u00f3n","text":"<p>Permiten ejecutar scripts autom\u00e1ticamente en momentos espec\u00edficos.</p> <p>Ubicaci\u00f3n (Scripts de inicio/cierre de equipo): </p><pre><code>Configuraci\u00f3n del equipo\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Configuraci\u00f3n de Windows\n        \u2514\u2500\u2500 Scripts (Inicio o apagado)\n</code></pre><p></p> <p>Ubicaci\u00f3n (Scripts de inicio/cierre de sesi\u00f3n de usuario): </p><pre><code>Configuraci\u00f3n de usuario\n\u2514\u2500\u2500 Directivas\n    \u2514\u2500\u2500 Configuraci\u00f3n de Windows\n        \u2514\u2500\u2500 Scripts (Inicio o cierre de sesi\u00f3n)\n</code></pre><p></p> <p>Tipos de scripts:</p> <ul> <li>.bat / .cmd: Scripts de MS-DOS/Windows</li> <li>.ps1: Scripts de PowerShell</li> <li>.vbs: Visual Basic Script</li> </ul> <p>Ejemplo: Mapear unidad de red al iniciar sesi\u00f3n</p> <p>Crear el script:</p> <ol> <li> <p>Crear archivo <code>mapear_unidad.bat</code>: </p><pre><code>@echo off\nnet use Z: \\\\servidor\\compartido /persistent:yes\n</code></pre><p></p> </li> <li> <p>Guardar en: <code>\\\\dominio.local\\SYSVOL\\dominio.local\\scripts\\</code></p> </li> </ol> <p>Configurar GPO:</p> <ol> <li>Editar GPO</li> <li>Ir a: <code>Configuraci\u00f3n de usuario \u2192 Scripts \u2192 Inicio de sesi\u00f3n</code></li> <li>Hacer clic en \"Agregar...\"</li> <li>Examinar y seleccionar <code>mapear_unidad.bat</code></li> <li>Aceptar</li> </ol> <p>Al iniciar sesi\u00f3n, se mapear\u00e1 autom\u00e1ticamente la unidad Z:.</p> <p>Scripts PowerShell</p> <p>Para ejecutar scripts .ps1, primero debes habilitar la ejecuci\u00f3n de PowerShell:</p> <pre><code>Configuraci\u00f3n del equipo \u2192 Plantillas administrativas \u2192 Componentes de Windows \n\u2192 Windows PowerShell \u2192 Activar la ejecuci\u00f3n de scripts\n</code></pre>"},{"location":"05_04_configuacion_directivas_comunes/#plantillas-administrativas-adicionales","title":"Plantillas administrativas adicionales","text":""},{"location":"05_04_configuacion_directivas_comunes/#1-microsoft-edge-internet-explorer","title":"1. Microsoft Edge / Internet Explorer","text":"<p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n de usuario (o equipo)\n\u2514\u2500\u2500 Plantillas administrativas\n    \u2514\u2500\u2500 Componentes de Windows\n        \u2514\u2500\u2500 Microsoft Edge (o Internet Explorer)\n</code></pre><p></p> <p>Configuraciones \u00fatiles:</p> <ul> <li>Establecer p\u00e1gina principal predeterminada</li> <li>Deshabilitar modo InPrivate</li> <li>Configurar sitios de confianza</li> <li>Bloquear extensiones no autorizadas</li> <li>Configurar proxy</li> </ul>"},{"location":"05_04_configuacion_directivas_comunes/#2-windows-update","title":"2. Windows Update","text":"<p>Ubicaci\u00f3n: </p><pre><code>Configuraci\u00f3n del equipo\n\u2514\u2500\u2500 Plantillas administrativas\n    \u2514\u2500\u2500 Componentes de Windows\n        \u2514\u2500\u2500 Windows Update\n</code></pre><p></p> <p>Configuraciones importantes:</p> <ul> <li>Configurar actualizaciones autom\u00e1ticas</li> <li>Especificar servidor WSUS interno</li> <li>Programar d\u00eda y hora de instalaci\u00f3n</li> <li>Habilitar actualizaciones de calidad/caracter\u00edsticas</li> </ul>"},{"location":"05_05_verificacion_problemas/","title":"Verificaci\u00f3n y resoluci\u00f3n de problemas","text":""},{"location":"05_05_verificacion_problemas/#herramientas-de-diagnostico-y-resolucion-de-problemas","title":"Herramientas de diagn\u00f3stico y resoluci\u00f3n de problemas","text":"<p>Una vez configuradas las directivas de grupo, es fundamental saber c\u00f3mo verificar su aplicaci\u00f3n y solucionar problemas cuando no funcionan como se espera.</p>"},{"location":"05_05_verificacion_problemas/#comandos-esenciales-de-gpo","title":"Comandos esenciales de GPO","text":""},{"location":"05_05_verificacion_problemas/#gpupdate-forzar-actualizacion-de-directivas","title":"<code>gpupdate</code> - Forzar actualizaci\u00f3n de directivas","text":"<p>Por defecto, las directivas se actualizan autom\u00e1ticamente cada 90 minutos (con variaci\u00f3n aleatoria de \u00b130 minutos) en equipos cliente, y cada 5 minutos en controladores de dominio. Para aplicar cambios inmediatamente:</p> <p>Sintaxis b\u00e1sica:</p> <pre><code>gpupdate [/target:{computer|user}] [/force] [/wait:segundos] [/logoff] [/boot]\n</code></pre> <p>Par\u00e1metros m\u00e1s utilizados:</p> Par\u00e1metro Descripci\u00f3n <code>/target:computer</code> Solo actualiza directivas de equipo <code>/target:user</code> Solo actualiza directivas de usuario <code>/force</code> Vuelve a aplicar todas las directivas (incluso las no modificadas) <code>/wait:valor</code> Tiempo de espera en segundos (-1 = esperar indefinidamente, 0 = no esperar) <code>/logoff</code> Cierra sesi\u00f3n si las directivas de usuario requieren procesamiento en primer plano <code>/boot</code> Reinicia si las directivas de equipo requieren procesamiento en primer plano <p>Ejemplos de uso:</p> <pre><code># Actualizar todas las directivas (usuario y equipo)\ngpupdate /force\n\n# Actualizar solo directivas de usuario\ngpupdate /target:user /force\n\n# Actualizar y cerrar sesi\u00f3n si es necesario\ngpupdate /force /logoff\n\n# Actualizar y reiniciar si es necesario\ngpupdate /force /boot\n</code></pre> Ventana de CMD mostrando la ejecuci\u00f3n de <code>gpupdate /force</code> con los mensajes de progreso y finalizaci\u00f3n exitosa. <p>Cu\u00e1ndo usar /force</p> <p>El par\u00e1metro <code>/force</code> es \u00fatil para:</p> <ul> <li>Verificar que una GPO modificada se aplica correctamente</li> <li>Solucionar problemas cuando parece que las directivas no se aplican</li> <li>Despu\u00e9s de mover un equipo/usuario a otra OU</li> </ul>"},{"location":"05_05_verificacion_problemas/#gpresult-ver-directivas-aplicadas","title":"<code>gpresult</code> - Ver directivas aplicadas","text":"<p>Muestra informaci\u00f3n detallada sobre qu\u00e9 GPO se han aplicado a un usuario o equipo.</p> <p>Sintaxis b\u00e1sica:</p> <pre><code>gpresult [/scope:{user|computer}] [/user:nombre] [/v] [/z] [/h:archivo.html] [/r]\n</code></pre> <p>Par\u00e1metros m\u00e1s utilizados:</p> Par\u00e1metro Descripci\u00f3n <code>/r</code> Muestra resumen de datos RSoP (Conjunto resultante de directivas) <code>/v</code> Muestra informaci\u00f3n detallada (verbose) <code>/z</code> Muestra informaci\u00f3n super detallada (incluye todos los par\u00e1metros) <code>/scope:user</code> Solo muestra directivas de usuario <code>/scope:computer</code> Solo muestra directivas de equipo <code>/h:archivo.html</code> Genera informe HTML <code>/user:dominio\\usuario</code> Consulta directivas de otro usuario (requiere permisos) <p>Ejemplos de uso:</p> <pre><code># Resumen b\u00e1sico de directivas aplicadas\ngpresult /r\n\n# Informaci\u00f3n detallada de directivas de usuario\ngpresult /scope:user /v\n\n# Informaci\u00f3n super detallada en pantalla\ngpresult /z\n\n# Generar informe HTML completo\ngpresult /h C:\\informeGPO.html\n\n# Ver directivas de otro usuario (como administrador)\ngpresult /user:empresa\\jperez /r\n</code></pre> <p>Interpretaci\u00f3n del resultado:</p> <p>El comando <code>gpresult /r</code> muestra:</p> <pre><code>INFORMACI\u00d3N DEL EQUIPO\n----------------------\n    Nombre de equipo:                CLIENTE01\n    Sitio de AD:                     Default-First-Site-Name\n\nCONFIGURACI\u00d3N DEL EQUIPO\n------------------------\n    Controlador de dominio:          DC01.empresa.local\n    Directivas de grupo aplicadas:  \n        Default Domain Policy\n        SEC-Seguridad-Base\n        CONFIG-Escritorio-Corporativo\n\n    Las siguientes GPO no se aplicaron porque se filtraron:\n        SOFT-Aplicaciones-Ventas\n            Filtrado: No aplicado (vac\u00edo)\n\nCONFIGURACI\u00d3N DEL USUARIO\n-------------------------\n    Usuario:                         EMPRESA\\jperez\n    Directivas de grupo aplicadas:\n        Default Domain Policy\n        CONFIG-Usuarios-Marketing\n</code></pre> <p>IMPORTANTE. C\u00f3mo ver directivas de usuario o de equipo seg\u00fan la forma de ejecutar <code>gpresult /r</code></p> <ul> <li>Si el comando se ejecuta desde un usuario cualquiera entonces el resultado de <code>gpresult</code> muestra las directivas aplicadas a dicho usuario. Observar que en la siguiente imagen que se ha ejecutado el comando en un terminal y muestra las directivas del usuario</li> </ul> <p></p> Ventana de CMD mostrando la ejecuci\u00f3n de <code>gpupdate /force</code> con los mensajes de progreso y finalizaci\u00f3n exitosa. <p></p> <ul> <li>Si el comando se ejecuta con permisos de administrador, entonces el resultado que obtenemos son las directivas de equipo aplicadas. Observar que en la siguiente imagen el comando se ha ejecutado en un terminal como Administrador y por lo tanto muestra directivas de equipo</li> </ul> <p></p> Ventana de CMD mostrando la ejecuci\u00f3n de <code>gpupdate /force</code> con los mensajes de progreso y finalizaci\u00f3n exitosa. <p></p> <p>Interpretar GPO no aplicadas</p> <p>Si una GPO aparece en \"no se aplicaron\", verifica:</p> <ul> <li>Filtrado de seguridad: El usuario/equipo no tiene permisos</li> <li>Filtro WMI: No cumple las condiciones WMI</li> <li>V\u00ednculo deshabilitado: El v\u00ednculo de la GPO est\u00e1 desactivado</li> <li>GPO vac\u00eda: No tiene configuraciones definidas</li> </ul>"},{"location":"05_05_verificacion_problemas/#generar-informes-html-detallados","title":"Generar informes HTML detallados","text":"<p>Los informes HTML son ideales para documentaci\u00f3n y an\u00e1lisis exhaustivo:</p> <pre><code># Informe completo del usuario actual\ngpresult /h C:\\Informes\\miGPO.html\n\n# Informe de otro usuario (requiere privilegios de administrador)\ngpresult /h C:\\Informes\\usuario_jperez.html /user:empresa\\jperez\n</code></pre> <p>El informe HTML incluye:</p> <ul> <li>Resumen de configuraci\u00f3n</li> <li>Lista detallada de todas las GPO aplicadas</li> <li>Configuraciones espec\u00edficas de cada directiva</li> <li>GPO filtradas y razones</li> <li>Configuraci\u00f3n de seguridad aplicada</li> <li>Scripts ejecutados</li> <li>Redirecci\u00f3n de carpetas</li> <li>Gr\u00e1ficos visuales de la herencia de directivas</li> </ul>"},{"location":"05_05_verificacion_problemas/#rsop-conjunto-resultante-de-directivas","title":"RSOP - Conjunto resultante de directivas","text":"<p>RSOP (Resultant Set of Policy) es una herramienta gr\u00e1fica que muestra exactamente qu\u00e9 directivas se aplican y su configuraci\u00f3n efectiva.</p> <p>Para obtener las directivas que se aplican a un usuario o equipo seguir lo siguientes pasos</p> <ol> <li>Abrir la consola de directivas. GPMC</li> <li>Clic derecho en \"Modelado de directiva de grupo\"</li> <li>Seleccionar \"Asistente para el modelado de directiva de grupo...\"</li> <li>Seguir el asistente:</li> <li>Seleccionar controlador de dominio</li> <li>Elegir usuario y equipo a simular</li> <li>(Opcional) Configurar escenarios: v\u00ednculo lento, sitio espec\u00edfico</li> <li>Ver resultados</li> </ol> <p>Este m\u00e9todo permite simular qu\u00e9 directivas se aplicar\u00edan en diferentes escenarios sin aplicarlas realmente.</p> Modelado de directiva de grupos."},{"location":"05_05_verificacion_problemas/#solucion-de-problemas-comunes","title":"Soluci\u00f3n de problemas comunes","text":""},{"location":"05_05_verificacion_problemas/#problema-1-las-gpo-no-se-aplican","title":"Problema 1: Las GPO no se aplican","text":"<p>S\u00edntomas: * Configuraciones esperadas no aparecen * Scripts no se ejecutan * Software no se instala</p> <p>Posibles causas y soluciones:</p> Causa Verificaci\u00f3n Soluci\u00f3n GPO no vinculada Verificar v\u00ednculos en GPMC Vincular la GPO a la OU correcta V\u00ednculo deshabilitado Verificar marca \"Link Enabled\" Habilitar el v\u00ednculo Filtrado de seguridad Ver \"Security Filtering\" en GPMC A\u00f1adir el usuario/grupo con permisos Read y Apply Filtro WMI no cumplido Verificar consulta WMI Corregir la consulta WMI o eliminarla Block Inheritance Verificar OU con escudo Usar Enforced o mover la GPO Orden de prioridad Ver \"Group Policy Inheritance\" Ajustar Link Order Secci\u00f3n deshabilitada Ver \"GPO Status\" Habilitar configuraci\u00f3n de usuario/equipo No actualizada Ejecutar gpupdate <code>gpupdate /force</code> en el cliente <p>Diagn\u00f3stico paso a paso:</p> <ol> <li> <p>Verificar con gpresult:     </p><pre><code>gpresult /r\n</code></pre>    \u00bfAparece la GPO en las aplicadas? Si no, revisar filtrado y v\u00ednculos.<p></p> </li> <li> <p>Verificar prioridad:    </p><pre><code>gpresult /h informe.html\n</code></pre>    Ver orden de aplicaci\u00f3n y directiva ganadora.<p></p> </li> <li> <p>Comprobar eventos:    </p><pre><code>Visor de eventos \u2192 Aplicaciones y servicios \u2192 Microsoft \u2192 Windows \u2192 GroupPolicy\n</code></pre>    Buscar errores durante la aplicaci\u00f3n de directivas.<p></p> </li> </ol>"},{"location":"05_05_verificacion_problemas/#problema-2-conflicto-entre-gpo","title":"Problema 2: Conflicto entre GPO","text":"<p>S\u00edntomas: * Una configuraci\u00f3n no tiene el valor esperado * Comportamiento inconsistente</p> <p>Soluci\u00f3n:</p> <ol> <li>Usar RSoP o gpresult /z para ver la \"directiva ganadora\"</li> <li>Revisar el orden de aplicaci\u00f3n (LSDOU)</li> <li>Verificar Enforced y Block Inheritance</li> <li>Ajustar Link Order si es necesario</li> <li>Considerar consolidar GPO para evitar conflictos</li> </ol> <p>Herramienta de precedencia:</p> <p>En GPMC, al seleccionar una OU, la pesta\u00f1a \"Group Policy Inheritance\" muestra:</p> <ul> <li>Todas las GPO que afectan a esa OU</li> <li>Orden de precedencia (1 = m\u00e1xima prioridad)</li> <li>Si est\u00e1n Enforced o bloqueadas</li> </ul> Directivas aplicadas a una Unidad Organizativa."},{"location":"05_05_verificacion_problemas/#problema-3-procesamiento-lento-de-gpo","title":"Problema 3: Procesamiento lento de GPO","text":"<p>S\u00edntomas: * Inicio de sesi\u00f3n muy lento * El equipo tarda mucho en arrancar</p> <p>Causas comunes:</p> <ul> <li>Demasiadas GPO aplicadas</li> <li>Filtros WMI complejos</li> <li>Scripts de inicio/sesi\u00f3n lentos</li> <li>Problemas de red/conectividad con el DC</li> </ul> <p>Soluciones:</p> <ol> <li>Consolidar GPO: Combinar varias GPO similares en una</li> <li>Deshabilitar secciones no usadas: Si una GPO solo configura equipo, deshabilitar configuraci\u00f3n de usuario</li> <li>Optimizar filtros WMI: Simplificar consultas o eliminar si no son necesarias</li> <li>Revisar scripts: Optimizar c\u00f3digo, evitar esperas innecesarias</li> <li>Habilitar procesamiento as\u00edncrono:    <pre><code>Configuraci\u00f3n del equipo \u2192 Plantillas administrativas \u2192 Sistema \u2192 Inicio de sesi\u00f3n\n\u2192 \"Ejecutar de forma as\u00edncrona al inicio los scripts de inicio de sesi\u00f3n\"\n</code></pre></li> </ol> <p>Registro de rendimiento:</p> <p>Habilitar registro detallado de tiempo de procesamiento:</p> <pre><code>Configuraci\u00f3n del equipo \u2192 Plantillas administrativas \u2192 Sistema \u2192 Directiva de grupo\n\u2192 \"Configurar el nivel de registro de eventos de directiva de grupo\" = Detallado\n</code></pre> <p>Los tiempos se registran en: </p><pre><code>Visor de eventos \u2192 Aplicaciones y servicios \u2192 Microsoft \u2192 Windows \u2192 GroupPolicy \u2192 Operational\n</code></pre><p></p> <p>Buscar Event ID 5314 (inicio de procesamiento) y 5315 (fin de procesamiento).</p>"},{"location":"05_05_verificacion_problemas/#problema-4-gpo-no-se-actualiza-en-el-cliente","title":"Problema 4: GPO no se actualiza en el cliente","text":"<p>S\u00edntomas: * Cambios en la GPO no se reflejan * <code>gpupdate /force</code> no soluciona el problema</p> <p>Soluciones:</p> <ol> <li> <p>Verificar replicaci\u00f3n entre DC:    </p><pre><code>repadmin /showrepl\n</code></pre>    Asegurar que la GPO se replic\u00f3 correctamente entre controladores de dominio.<p></p> </li> <li> <p>Verificar SYSVOL:    </p><pre><code># Verificar que la carpeta de la GPO existe\ndir \\\\dominio.local\\SYSVOL\\dominio.local\\Policies\\{GUID}\n</code></pre><p></p> </li> <li> <p>Forzar registro de GPO:    En algunos casos, el registro local puede estar corrupto:    </p><pre><code># Ejecutar como administrador\ngpupdate /force /sync\n</code></pre><p></p> </li> <li> <p>Eliminar cach\u00e9 local de GPO (\u00faltimo recurso):    </p><pre><code># Detener servicio\nnet stop gpsvc\n\n# Eliminar cach\u00e9 (como administrador)\nrd /s /q \"%windir%\\System32\\GroupPolicy\"\nrd /s /q \"%windir%\\System32\\GroupPolicyUsers\"\n\n# Reiniciar servicio\nnet start gpsvc\n\n# Actualizar\ngpupdate /force\n</code></pre><p></p> </li> </ol> <p>Precauci\u00f3n</p> <p>Eliminar la cach\u00e9 de GPO fuerza una recarga completa. Solo \u00fasalo cuando otras soluciones fallen.</p>"},{"location":"05_05_verificacion_problemas/#problema-5-error-no-se-pudo-acceder-al-recurso-de-red","title":"Problema 5: Error \"No se pudo acceder al recurso de red\"","text":"<p>S\u00edntomas: * GPO que instala software falla * Redirecci\u00f3n de carpetas no funciona * Scripts no se ejecutan</p> <p>Causas: * Ruta UNC incorrecta * Permisos insuficientes en el recurso compartido * Problemas de resoluci\u00f3n DNS * Firewall bloqueando acceso</p> <p>Soluciones:</p> <ol> <li> <p>Verificar accesibilidad del recurso:    </p><pre><code># Desde el equipo afectado\ndir \\\\servidor\\compartido\n</code></pre><p></p> </li> <li> <p>Verificar permisos:</p> </li> <li>Compartido: \"Usuarios autenticados\" o \"Equipos del dominio\" con al menos Lectura</li> <li> <p>NTFS: Permisos adecuados seg\u00fan el recurso</p> </li> <li> <p>Verificar DNS:    </p><pre><code>nslookup servidor.dominio.local\nping servidor.dominio.local\n</code></pre><p></p> </li> <li> <p>Revisar firewall: Asegurar que los puertos SMB (445) est\u00e9n abiertos</p> </li> </ol>"},{"location":"06_01_configuraciones_adicionales/","title":"Configuraci\u00f3n avanzada de Windows Server","text":"<p>En este tema nos centraremos en las herramientas y servicios avanzados de Windows Server, esenciales para la administraci\u00f3n de redes en entornos empresariales. Cubre desde la gesti\u00f3n del espacio en disco y el control de acceso, hasta la implementaci\u00f3n de servicios clave de infraestructura y las estrategias de continuidad del negocio.</p> Tema Enfoque Principal Carpetas Compartidas Ocultas Gesti\u00f3n de la visibilidad y uso de los recursos compartidos de administraci\u00f3n. Cuotas de Disco Aplicaci\u00f3n de l\u00edmites de almacenamiento a los usuarios en vol\u00famenes NTFS para optimizar el espacio. Servidor DHCP Configuraci\u00f3n del servicio de asignaci\u00f3n din\u00e1mica de direcciones IP y gesti\u00f3n de \u00e1mbitos. Escritorio Remoto Habilitaci\u00f3n y securizaci\u00f3n del acceso gr\u00e1fico remoto al servidor para tareas administrativas. Red VPN (Acceso Remoto) Implementaci\u00f3n de una Red Privada Virtual para asegurar las conexiones de usuarios externos a la red local. Configuraci\u00f3n Remota RSAT Instalaci\u00f3n y uso de las Herramientas de Administraci\u00f3n Remota del Servidor desde un equipo cliente Windows. Copia de Seguridad (Backup) Planificaci\u00f3n e implementaci\u00f3n de la protecci\u00f3n de datos y del estado del sistema. Controlador de Dominio Secundario Instalaci\u00f3n de un DC adicional para garantizar la redundancia y disponibilidad del servicio de directorio. Monitorizaci\u00f3n Windows Server Uso del Visor de Eventos y el Monitor de Rendimiento para supervisar el estado y detectar anomal\u00edas. Servicios en Windows Server Administraci\u00f3n del ciclo de vida y los tipos de inicio de los servicios cr\u00edticos del sistema. Auditor\u00edas Windows Server Configuraci\u00f3n de directivas de auditor\u00eda para rastrear eventos de seguridad, como intentos de acceso o cambios en archivos. Windows Update Services (WSUS) Despliegue centralizado de parches y actualizaciones de seguridad de Microsoft en la red. Windows Deployment Services (WDS) Instalaci\u00f3n de sistemas operativos de forma remota a trav\u00e9s de la red mediante PXE. Integraci\u00f3n de equipos Linux en AD Permite que equipos Linux como por ejemplo Ubuntu puedan trabajar dentro del dominio."},{"location":"06_02_carpetas_compartidas_ocultas/","title":"Recursos Compartidos Ocultos","text":""},{"location":"06_02_carpetas_compartidas_ocultas/#carpetas-compartidas-ocultas-y-administrativas","title":"Carpetas Compartidas Ocultas y Administrativas","text":"<p>Los recursos compartidos son una funci\u00f3n esencial de Windows Server para el acceso a datos en red. Sin embargo, en entornos administrados, a menudo es necesario ocultar la existencia de ciertos recursos a la vista de los usuarios comunes para fines de limpieza o para mantener accesos cr\u00edticos fuera del alcance no intencionado. Este apartado detalla el mecanismo para configurar recursos compartidos ocultos y explica la naturaleza de los recursos administrativos que Windows Server crea autom\u00e1ticamente.</p>"},{"location":"06_02_carpetas_compartidas_ocultas/#recursos-compartidos-ocultos-hidden-shares","title":"Recursos Compartidos Ocultos (Hidden Shares)","text":"<p>La funcionalidad de recursos compartidos ocultos permite a los administradores controlar la visibilidad de un share sin necesidad de cambiar los permisos de acceso. Es crucial entender que esta configuraci\u00f3n no es una medida de seguridad que reemplace a los permisos NTFS, sino una t\u00e9cnica de ofuscaci\u00f3n.</p> <ul> <li>Mecanismo de Ocultaci\u00f3n: El recurso se hace invisible al navegar por el servidor a\u00f1adiendo el s\u00edmbolo de d\u00f3lar ($) al final de su nombre. Por ejemplo, una carpeta llamada <code>Almacen</code> se comparte como <code>Almacen$</code>.</li> <li>Procedimiento de Configuraci\u00f3n: La ocultaci\u00f3n se configura en las propiedades de la carpeta, a trav\u00e9s de la opci\u00f3n de Uso Compartido Avanzado, al incluir el <code>$</code> en el campo Nombre del recurso compartido.</li> <li>Acceso Remoto: Un cliente solo puede acceder al recurso si conoce y especifica la ruta UNC (Universal Naming Convention) completa, incluyendo el s\u00edmbolo de d\u00f3lar. Ejemplo: <code>\\\\NombreServidor\\Almacen$</code>.</li> </ul> Carpeta compartida oculta."},{"location":"06_02_carpetas_compartidas_ocultas/#recursos-compartidos-administrativos","title":"Recursos Compartidos Administrativos","text":"<p>Windows Server crea de forma predeterminada ciertos recursos compartidos ocultos que son fundamentales para la administraci\u00f3n remota. Estos recursos siguen la misma convenci\u00f3n de nomenclatura (terminan en <code>$</code>) y est\u00e1n reservados exclusivamente para los usuarios que pertenecen al grupo local de Administradores.</p> <ul> <li>Definici\u00f3n: Son shares que mapean las unidades de disco y directorios clave del sistema operativo, permitiendo la gesti\u00f3n remota de archivos y configuraciones.</li> <li>Ejemplos Relevantes:<ul> <li><code>C$</code>, <code>D$</code>, etc.: Mapean las unidades de disco ra\u00edz del servidor.</li> <li><code>ADMIN$</code>: Mapea el directorio ra\u00edz del sistema operativo (<code>C:\\Windows</code>).</li> <li><code>IPC$</code>: Recurso especial para la comunicaci\u00f3n entre procesos (Interprocess Communication).</li> </ul> </li> <li>Acceso: El acceso se realiza mediante la ruta UNC que incluye el nombre del recurso administrativo, usando el nombre del servidor o su direcci\u00f3n IP. Ejemplo: <code>\\\\NombreServidor\\ADMIN$</code>.</li> </ul>"},{"location":"06_03_cuotas_discos/","title":"Cuotas de discos","text":""},{"location":"06_03_cuotas_discos/#cuotas-de-disco-disk-quotas","title":"Cuotas de Disco (Disk Quotas)","text":"<p>Las cuotas de disco son una caracter\u00edstica crucial de la gesti\u00f3n de almacenamiento que permite a los administradores de Windows Server regular la cantidad de espacio en disco que cada usuario puede consumir en un volumen espec\u00edfico. Esta funcionalidad se aplica exclusivamente a vol\u00famenes formateados con el sistema de archivos NTFS y es esencial para prevenir que un usuario individual acapare todo el espacio de almacenamiento disponible, garantizando as\u00ed la estabilidad, el rendimiento y la disponibilidad del servidor de archivos para todos los usuarios.</p>"},{"location":"06_03_cuotas_discos/#funcionamiento-y-aplicacion","title":"Funcionamiento y Aplicaci\u00f3n","text":"<p>La cuota se aplica por volumen y por usuario, no por carpeta. Una vez que la cuota est\u00e1 activa en un volumen, el sistema rastrea la cantidad de espacio que cada usuario consume en ese volumen, independientemente de la ubicaci\u00f3n de los archivos.</p>"},{"location":"06_03_cuotas_discos/#componentes-clave","title":"Componentes Clave","text":"<ul> <li>L\u00edmite de Disco (Disk Limit): Es la cantidad m\u00e1xima de espacio permitida para el usuario.</li> <li>Nivel de Advertencia (Warning Level): Es un umbral de uso (generalmente un porcentaje o cantidad inferior al l\u00edmite) en el que el sistema registra una notificaci\u00f3n o evento de advertencia, alertando al usuario y al administrador antes de que se alcance el l\u00edmite absoluto.</li> </ul>"},{"location":"06_03_cuotas_discos/#tipos-de-cuotas","title":"Tipos de Cuotas","text":"<p>Existen dos enfoques principales para aplicar l\u00edmites, definidos por la acci\u00f3n que se toma al alcanzar el umbral m\u00e1ximo:</p> Tipo de Cuota Acci\u00f3n al Alcanzar el L\u00edmite Prop\u00f3sito Cuota R\u00edgida (Hard Quota) Deniega la escritura de nuevos datos. Impide de forma absoluta que el usuario almacene m\u00e1s datos una vez superado el l\u00edmite. Cuota Blanda (Soft Quota) Solo registra una entrada en el Visor de Eventos. Permite al usuario exceder el l\u00edmite, pero genera un registro para fines de monitorizaci\u00f3n y auditor\u00eda."},{"location":"06_03_cuotas_discos/#procedimiento-de-configuracion-en-windows-server","title":"Procedimiento de Configuraci\u00f3n en Windows Server","text":"Cuotas de disco. <p>La configuraci\u00f3n b\u00e1sica de las cuotas de disco se realiza directamente en las propiedades del volumen (unidad de disco) en el Explorador de Archivos del servidor:</p> <ol> <li>Acceso: Abrir el Explorador de Archivos, hacer clic derecho sobre el volumen (p. ej., D:) y seleccionar Propiedades.</li> <li>Pesta\u00f1a de Cuotas: Navegar a la pesta\u00f1a Cuotas y hacer clic en Mostrar configuraci\u00f3n de cuota.</li> <li>Habilitaci\u00f3n: Marcar la casilla Habilitar la administraci\u00f3n de cuotas (<code>Enable Quota Management</code>).</li> <li>Acci\u00f3n Predeterminada: Definir la acci\u00f3n que se tomar\u00e1 al exceder el l\u00edmite:<ul> <li>Marcar Denegar espacio en disco al usuario que supera el l\u00edmite de cuota para configurar una Cuota R\u00edgida.</li> <li>Dejarla desmarcada para una Cuota Blanda.</li> </ul> </li> <li>Valores por Defecto:<ul> <li>Seleccionar Limitar el espacio en disco a...</li> <li>Establecer el L\u00edmite de espacio en disco (por ejemplo, 5 GB).</li> <li>Establecer el Nivel de advertencia (por ejemplo, 4 GB).</li> </ul> </li> <li>Configuraci\u00f3n por Usuario: Para aplicar l\u00edmites distintos a usuarios espec\u00edficos, hacer clic en Valores de cuota. En esta nueva ventana, se pueden crear reglas espec\u00edficas para usuarios o grupos, que tienen prioridad sobre la configuraci\u00f3n por defecto del volumen.</li> </ol> <p>Excelente. Es crucial incluir las Cuotas de Carpeta gestionadas por FSRM, ya que ofrecen una granularidad de administraci\u00f3n superior a las cuotas b\u00e1sicas de volumen. A continuaci\u00f3n, integramos esta informaci\u00f3n en el punto 2, manteniendo el estilo did\u00e1ctico y contextualizado.</p>"},{"location":"06_03_cuotas_discos/#2-cuotas-de-carpetas","title":"2. Cuotas de carpetas","text":""},{"location":"06_03_cuotas_discos/#cuotas-de-carpeta-con-el-administrador-de-recursos-del-servidor-de-archivos-fsrm","title":"Cuotas de Carpeta con el Administrador de Recursos del Servidor de Archivos (FSRM)","text":"<p>A diferencia de las cuotas b\u00e1sicas que aplican l\u00edmites por usuario a todo el volumen NTFS, la administraci\u00f3n moderna del almacenamiento a menudo requiere establecer l\u00edmites m\u00e1s precisos a nivel de carpeta compartida o para proyectos espec\u00edficos. Para lograr esta gesti\u00f3n granular y centralizada, se utiliza el Administrador de recursos del servidor de archivos (FSRM).</p> <p>Para acceder al Administrador de recursos del servidor de archivos (FSRM) debemos tener instalado el rol correspondiente</p> Cuotas de disco. <p>Una vez dentro del administrador, para cada recurso, accedemos a sus cuotas:</p> Acceso al Administrador de recursos del servidor compartidos. FSRM. <p>La consola FSRM no solo permite definir cuotas detalladas, sino tambi\u00e9n administrar el filtrado de archivos (impidiendo que ciertos tipos de archivos se almacenen) y generar informes de almacenamiento.</p> Consola FSRM."},{"location":"06_03_cuotas_discos/#gestion-de-plantillas-de-cuota","title":"Gesti\u00f3n de Plantillas de Cuota","text":"<ul> <li>Eficiencia: El enfoque recomendado para definir cuotas es mediante el uso de plantillas de cuota. Esto permite crear r\u00e1pidamente cuotas similares con l\u00edmites y umbrales consistentes.</li> <li>Administraci\u00f3n Centralizada: Una ventaja clave es que cualquier modificaci\u00f3n realizada en una plantilla se aplica autom\u00e1ticamente a todas las cuotas que se derivaron de ella, simplificando la administraci\u00f3n a largo plazo.</li> </ul>"},{"location":"06_03_cuotas_discos/#creacion-de-una-nueva-cuota","title":"Creaci\u00f3n de una Nueva Cuota","text":"<p>Para crear una nueva cuota a aplicar en una carpeta, se debe acceder a la herramienta FSRM, seleccionar Cuotas y, en el men\u00fa Acci\u00f3n, elegir Crear cuota. Los par\u00e1metros clave para su definici\u00f3n son:</p> <ul> <li>Ruta de Cuota: Define la carpeta espec\u00edfica o el volumen donde se aplicar\u00e1 la restricci\u00f3n.</li> <li>\u00c1mbito de Aplicaci\u00f3n: Se indica si la cuota aplica solo a la carpeta ra\u00edz seleccionada o si se debe aplicar tambi\u00e9n a todas las subcarpetas dentro de esa ruta.</li> <li>Fuente de Propiedades: Se elige si la cuota se Deriva de una plantilla de cuota existente (lo habitual) o si se Definen propiedades de cuota personalizadas para una \u00fanica aplicaci\u00f3n.</li> </ul> Creaci\u00f3n de cuota personalizada."},{"location":"06_03_cuotas_discos/#creacion-y-configuracion-de-plantillas","title":"Creaci\u00f3n y Configuraci\u00f3n de Plantillas","text":"<p>Las plantillas son el esqueleto de la cuota, definiendo los l\u00edmites y las notificaciones. Se accede a su gesti\u00f3n desde la secci\u00f3n Plantillas de Cuota en FSRM.</p> <ul> <li>Definici\u00f3n de L\u00edmite: Se establece el Nombre de la plantilla y el L\u00edmite de espacio.</li> <li>Tipo de Cuota: Se define la acci\u00f3n del l\u00edmite:<ul> <li>Cuota M\u00e1xima (R\u00edgida): Impide la escritura una vez alcanzado el l\u00edmite.</li> <li>Cuota de Advertencia (Blanda): Permite exceder el l\u00edmite, pero genera notificaciones.</li> </ul> </li> <li>Umbrales de Notificaci\u00f3n: Permiten configurar m\u00faltiples niveles de advertencia (por ejemplo, 85%, 95%, 100%) para activar acciones autom\u00e1ticas:<ul> <li>Notificaci\u00f3n por Correo: Env\u00edo de un e-mail al usuario y/o a los administradores.</li> <li>Evento de Registro: Anotaci\u00f3n de una entrada en el Visor de Eventos.</li> <li>Ejecuci\u00f3n de Comando: Posibilidad de ejecutar un script o un comando.</li> <li>Generaci\u00f3n de Informe: Creaci\u00f3n de un informe de almacenamiento detallado.</li> </ul> </li> </ul>"},{"location":"06_04_servidor_dhcp/","title":"Servidor DHCP","text":"<p>El Servidor DHCP (Dynamic Host Configuration Protocol) es un servicio de infraestructura crucial en cualquier red moderna. Su funci\u00f3n principal es asignar din\u00e1micamente direcciones IP y otros par\u00e1metros de configuraci\u00f3n de red a los clientes (hosts) de forma autom\u00e1tica. Esto elimina la necesidad de configurar manualmente cada dispositivo y reduce dr\u00e1sticamente los errores y los conflictos de direcciones IP, simplificando la administraci\u00f3n de la red.</p> <p>Como en otros servicios, debemos instalar el rol correspondiente para poder usarlo en nuestro servidor.</p> Instalaci\u00f3n de rol DHCP."},{"location":"06_04_servidor_dhcp/#parametros-de-configuracion-esenciales","title":"Par\u00e1metros de Configuraci\u00f3n Esenciales","text":"<p>Para que un cliente pueda comunicarse eficientemente, necesita una serie de par\u00e1metros que le permitan interactuar tanto con la red local (LAN) como con redes externas (Internet).</p> Par\u00e1metro Prop\u00f3sito Esencial para Comunicaci\u00f3n Externa Direcci\u00f3n IP Identificador \u00fanico del host en la red. S\u00ed M\u00e1scara de Subred Define qu\u00e9 parte de la direcci\u00f3n IP es la red y qu\u00e9 parte es el host. S\u00ed Puerta de Enlace Predeterminada Es la direcci\u00f3n IP del router o dispositivo que permite la salida de los paquetes de datos hacia redes externas (Internet). S\u00ed Servidores DNS Direcciones IP de los servidores que resuelven nombres de dominio (URLs) a direcciones IP. S\u00ed <p>Los tres par\u00e1metros esenciales para que un cliente se comunique fuera de su red local son la Direcci\u00f3n IP, la Puerta de Enlace Predeterminada y los Servidores DNS.</p>"},{"location":"06_04_servidor_dhcp/#proceso-de-asignacion-dora","title":"Proceso de Asignaci\u00f3n DORA","text":"<p>La comunicaci\u00f3n entre el cliente y el servidor DHCP sigue un protocolo de cuatro pasos conocido por sus siglas: DORA (Discovery, Offer, Request, Acknowledge). Este proceso asegura que la asignaci\u00f3n sea coordinada.</p> <ul> <li>Discovery (Descubrimiento): El cliente env\u00eda un mensaje de difusi\u00f3n (broadcast) a la red para localizar servidores DHCP.</li> <li>Offer (Oferta): Los servidores DHCP disponibles responden ofreciendo una direcci\u00f3n IP libre al cliente.</li> <li>Request (Solicitud): El cliente selecciona una de las ofertas y solicita formalmente esa direcci\u00f3n IP espec\u00edfica.</li> <li>Acknowledge (Reconocimiento): El servidor asigna la direcci\u00f3n de forma definitiva y env\u00eda el paquete de configuraci\u00f3n completo.</li> </ul>"},{"location":"06_04_servidor_dhcp/#componentes-de-gestion","title":"Componentes de Gesti\u00f3n","text":"<p>La administraci\u00f3n del servicio DHCP se realiza mediante la configuraci\u00f3n de los siguientes elementos dentro de la consola de Windows Server:</p> <ul> <li>\u00c1mbito (Scope): Es el rango completo de direcciones IP v\u00e1lidas y disponibles que el servidor puede asignar a un segmento de red. Se debe configurar al menos un \u00e1mbito para que el servidor funcione.</li> <li>Concesi\u00f3n (Lease): Es el per\u00edodo de tiempo (tiempo de vida) durante el cual un cliente puede utilizar la direcci\u00f3n IP asignada. Al expirar, el cliente debe renovar la concesi\u00f3n o solicitar una nueva.</li> <li>Reserva (Reservation): Es una asignaci\u00f3n permanente de una direcci\u00f3n IP espec\u00edfica a un cliente concreto, identificado por su direcci\u00f3n MAC. Se utiliza para dispositivos que necesitan una IP est\u00e1tica garantizada (como servidores o impresoras).</li> <li>Exclusi\u00f3n (Exclusion): Son rangos de direcciones IP dentro del \u00e1mbito que el servidor tiene prohibido asignar. Se utilizan para direcciones que ya est\u00e1n asignadas de forma est\u00e1tica a equipos de infraestructura (routers, otros servidores, etc.).</li> </ul>"},{"location":"06_05_escritorio_remoto/","title":"Escritorio Remoto","text":""},{"location":"06_05_escritorio_remoto/#escritorio-remoto-remote-desktop","title":"Escritorio Remoto (Remote Desktop)","text":"<p>El Escritorio Remoto es un servicio esencial que permite a los administradores acceder a la interfaz gr\u00e1fica completa del servidor desde una ubicaci\u00f3n remota. Es la herramienta principal para la gesti\u00f3n y mantenimiento de Windows Server, ya que permite ejecutar cualquier aplicaci\u00f3n y realizar configuraciones como si se estuviera f\u00edsicamente frente a la m\u00e1quina.</p>"},{"location":"06_05_escritorio_remoto/#protocolo-y-conectividad","title":"Protocolo y Conectividad","text":"<p>La funcionalidad de Escritorio Remoto se basa en un protocolo de capa de aplicaci\u00f3n espec\u00edfico desarrollado por Microsoft. Es fundamental que los administradores conozcan el puerto asociado para asegurar la conectividad a trav\u00e9s de la red local y gestionar correctamente las pol\u00edticas de firewall.</p> <ul> <li>Protocolo: Utiliza el Protocolo de Escritorio Remoto (RDP), dise\u00f1ado para proporcionar una interfaz gr\u00e1fica eficiente y de bajo ancho de banda.</li> <li>Puerto Predeterminado: RDP utiliza por defecto el puerto TCP 3389. Si se requiere acceso externo (Internet), a menudo se recomienda cambiar este puerto predeterminado para reducir la exposici\u00f3n a escaneos automatizados.</li> <li>Firewall: Es obligatorio que el puerto TCP 3389 est\u00e9 abierto en el firewall de Windows Server para permitir las conexiones entrantes. La configuraci\u00f3n debe ser lo m\u00e1s restrictiva posible, limitando el tr\u00e1fico solo a las direcciones IP o subredes de origen autorizadas.</li> </ul>"},{"location":"06_05_escritorio_remoto/#configuracion-de-seguridad","title":"Configuraci\u00f3n de Seguridad","text":"<p>Para garantizar la integridad del servidor durante una conexi\u00f3n remota, es necesario habilitar y aplicar medidas de seguridad avanzadas en la configuraci\u00f3n de RDP:</p> <ul> <li>Autenticaci\u00f3n a Nivel de Red (NLA - Network Level Authentication): Esta caracter\u00edstica es una medida de seguridad cr\u00edtica. Requiere que el cliente se autentique antes de que se establezca la sesi\u00f3n completa de RDP. Esto consume menos recursos del servidor y previene ciertos ataques de denegaci\u00f3n de servicio, ya que el servidor no carga la sesi\u00f3n gr\u00e1fica hasta que las credenciales son validadas.</li> <li>Grupos de Usuarios: Por defecto, solo los miembros del grupo local Administradores y del grupo Usuarios de Escritorio Remoto pueden iniciar una sesi\u00f3n RDP. Es una buena pr\u00e1ctica agregar solo las cuentas de usuario necesarias a este \u00faltimo grupo.</li> </ul>"},{"location":"06_05_escritorio_remoto/#habilitacion-del-servicio","title":"Habilitaci\u00f3n del Servicio","text":"<p>La habilitaci\u00f3n del servicio de Escritorio Remoto se realiza de la siguiente manera:</p> <ol> <li>Acceder a la Configuraci\u00f3n Remota del sistema (disponible en las propiedades avanzadas del sistema).</li> <li>Seleccionar la opci\u00f3n Permitir las conexiones remotas a este equipo.</li> <li>Marcar la casilla Permitir solo las conexiones de equipos que ejecuten Escritorio remoto con Autenticaci\u00f3n a nivel de red (m\u00e1s seguro) para forzar el uso de NLA.</li> </ol> <p>El siguiente tema es Red VPN. Para configurar una Red VPN (Virtual Private Network) en Windows Server, \u00bfqu\u00e9 rol o servicio espec\u00edfico de servidor necesitamos instalar, y cu\u00e1l es el protocolo de t\u00fanel m\u00e1s seguro y moderno que se recomienda usar hoy en d\u00eda para las conexiones remotas?</p>"},{"location":"06_06_redes_virtuales_VPN/","title":"Red VPN","text":"<p>Una Red Privada Virtual (VPN) establece una conexi\u00f3n segura y cifrada, denominada t\u00fanel, a trav\u00e9s de una red p\u00fablica, generalmente Internet. Su objetivo principal es permitir que los usuarios remotos accedan a los recursos de la red corporativa como si estuvieran conectados localmente, manteniendo la privacidad e integridad de los datos transmitidos mediante el cifrado.</p>"},{"location":"06_06_redes_virtuales_VPN/#implementacion-en-windows-server","title":"Implementaci\u00f3n en Windows Server","text":"<p>Para habilitar la funcionalidad de VPN en Windows Server, se requiere la instalaci\u00f3n de un rol espec\u00edfico encargado de gestionar y administrar estas conexiones de acceso remoto.</p> <ul> <li>Rol de Servidor: Se debe instalar el rol Acceso Remoto (Remote Access). Dentro de este rol, el servicio clave que gestiona las conexiones VPN y las pol\u00edticas de acceso es Enrutamiento y Acceso Remoto (RRAS - Routing and Remote Access Service).</li> <li>Funci\u00f3n: RRAS se encarga de crear y gestionar los puertos virtuales que aceptan las conexiones entrantes, as\u00ed como de aplicar las pol\u00edticas de autenticaci\u00f3n y red para los usuarios remotos.</li> </ul>"},{"location":"06_06_redes_virtuales_VPN/#protocolos-de-tunel","title":"Protocolos de T\u00fanel","text":"<p>Los protocolos de t\u00fanel son esenciales, ya que definen el m\u00e9todo de encapsulaci\u00f3n y cifrado de los datos. La elecci\u00f3n del protocolo es crucial para garantizar la seguridad y la compatibilidad con diferentes firewalls.</p> <ul> <li>SSTP (Secure Socket Tunneling Protocol): Es un protocolo moderno muy recomendado. Utiliza SSL/TLS y opera sobre el puerto TCP 443 (el mismo que HTTPS), lo que le permite atravesar con \u00e9xito la mayor\u00eda de los firewalls que a menudo restringen otros puertos.</li> <li>IKEv2/IPsec: Es considerado uno de los protocolos m\u00e1s seguros y robustos actualmente. Es altamente estable y soporta la caracter\u00edstica de VPN Reconnect, siendo ideal para usuarios con movilidad o dispositivos que experimentan ca\u00eddas temporales de red.</li> <li>L2TP/IPsec: Un protocolo seguro que depende de la suite IPsec para el cifrado y la autenticaci\u00f3n. Es ampliamente compatible, pero requiere que los puertos UDP 500 y 4500 est\u00e9n abiertos.</li> <li>PPTP (Point-to-Point Tunneling Protocol): Es un protocolo heredado, cuyo uso est\u00e1 desaconsejado en entornos de producci\u00f3n debido a sus debilidades de seguridad conocidas.</li> </ul>"},{"location":"06_06_redes_virtuales_VPN/#seguridad-y-control-de-acceso","title":"Seguridad y Control de Acceso","text":"<p>La seguridad de la VPN no depende solo del cifrado del t\u00fanel, sino tambi\u00e9n de una autenticaci\u00f3n estricta:</p> <ul> <li>Integraci\u00f3n con Active Directory: El servidor VPN valida las credenciales del usuario directamente contra la base de datos de Active Directory.</li> <li>Servidor de Pol\u00edticas de Red (NPS - Network Policy Server): A menudo se utiliza conjuntamente con RRAS para establecer reglas y pol\u00edticas detalladas que controlan el acceso: qu\u00e9 usuarios pueden conectarse, cu\u00e1nto tiempo y qu\u00e9 recursos de la red interna tienen permitido alcanzar.</li> </ul>"},{"location":"06_06_redes_virtuales_VPN/#pasos-para-la-implementacion-de-una-vpn-en-window-server","title":"Pasos para la implementaci\u00f3n de una VPN en Window Server","text":"<p>Los pasos para activar el servicio de VPN en Windows server son los siguientes.</p> <p>En primer lugar debe estar instalado el rol de Acceso Remoto, por lo menos las opciones de VPN (y enrutamiento si queremos compartir internet)</p> <p>Una vez instalado, debemos acceder a la consola de Enrutamiento y acceso remoto y desde ah\u00ed en el servidor, iniciar el Asistente para la instalaci\u00f3n del servidor de enrutamiento y acceso remoto</p> Enrutamiento y acceso remoto. <p>En las opciones de configuraci\u00f3n, seleccionamos la Configuraci\u00f3n personalizada que nos permitir\u00e1 elegir las opciones que deseamos</p> Enrutamiento y acceso remoto. Opciones <p>Entre las opciones seleccinamos:</p> <ul> <li>NAT y Enrutamiento LAN: que nos permitir\u00e1n realizar el enrutamiento del tr\u00e1fico de internet, o sea, compartir internet.</li> <li>Acceso a VPN: obviamente, permite a\u00f1adir el servicio de VPN en el Servidor</li> </ul> Enrutamiento y acceso remoto. Opciones <p>Llegados a este punto, el servidor esta preparado para permitir el acceso mediente VPN, sin embargo es aconsejable dentro de el apartado de Puertos verificar que los puertos que permiten la conexi\u00f3n de VPN est\u00e1n abiertos y se escuchan, para ello pulsamos propiedades al hacer click con el bot\u00f3n derecho del rat\u00f3n.</p> Enrutamiento y acceso remoto. Puerto <p>En este puntos nos debemos asegurar que los puerto L2PT y PPTP est\u00e1n abiertos a recibir conexiones</p> Enrutamiento y acceso remoto. Puertos <p>y la parte del servidor esta configurada, salvo que debemos habilitar los usuarios que se pueden autentificar mediante la VPN, para ello, entramos en el perfil del usuario que deseamos habilitar y en la opci\u00f3n para permitir la conexi\u00f3n por acceso remoto.</p> Perfil de usuario. Habilitado marcado acceso remoto <p>Ahora ya tenemos completamente configurado el servidor y s\u00f3lo que da ir al equipo cliente y agregar una nueva conexi\u00f3n VPN indicando pricipalmente la IP del servidor. En un entorno de prueba, indicamos la red del servidor, pero un entorno real debemos conocer la IP p\u00fablica de nuestro router y redirigir el tr\u00e1fico del puerto correspondiente al servidor.</p> Creaci\u00f3n de conexi\u00f3n VPN. <p>Ahora ya podemos conectar con el servidor, introduciendo usuario y contrase\u00f1a si no se hab\u00eda incluido en la configuraci\u00f3n de la conexi\u00f3n. </p> <p>Una vez conectados, lo podemos verificar en la propia conexi\u00f3n.</p> Conexi\u00f3n de VPN funcionando. Verificaci\u00f3n en el cliente <p>y en el servidor, tambi\u00e9n podemos ver en Clientes de acceso remoto que el cliente se ha conectado mediante VPN.</p> Conexi\u00f3n de VPN funcionando. Verificaci\u00f3n en el servidor <p>En la capturas anterior se puede leer que el Estado es Incompatible con NAP debido a que no se han realiado todas las seguridades de autentificaci\u00f3n que quedan fuera del alcance de esta pr\u00e1ctica</p> <p>Por \u00faltimo, si al configurar el acceso a VPN se desconfigura el uso compartido de internet, debemos ir a IPv4 --&gt; NAT y crear una nueva interfaz escogiendo la tarjeta de red Externa para indicar cual es la conexi\u00f3n que proporciona el acceso a internet.</p> Reconfiguraci\u00f3n de enrutamiento - NAT."},{"location":"06_07_rsat/","title":"Herramientas de Administraci\u00f3n Remota del Servidor (RSAT)","text":"<p>Las Herramientas de Administraci\u00f3n Remota del Servidor (RSAT) son un conjunto de snap-ins y consolas administrativas que se instalan en un sistema operativo cliente (como Windows 10 o Windows 11), y no en el servidor mismo. Su funci\u00f3n principal es permitir a los administradores gestionar roles y caracter\u00edsticas de Windows Server (como Active Directory, DNS o DHCP) desde su estaci\u00f3n de trabajo, lo que constituye la forma m\u00e1s eficiente y recomendada de realizar tareas administrativas.</p>"},{"location":"06_07_rsat/#funcion-principal-y-ventajas","title":"Funci\u00f3n Principal y Ventajas","text":"<p>RSAT facilita la gesti\u00f3n de la infraestructura de Windows Server sin necesidad de iniciar una sesi\u00f3n de Escritorio Remoto (RDP) para cada tarea. La administraci\u00f3n remota a trav\u00e9s de estas herramientas es superior a la conexi\u00f3n directa por RDP por las siguientes razones:</p> <ul> <li>Eficiencia Centralizada: Permite que un administrador gestione m\u00faltiples servidores, roles y servicios simult\u00e1neamente desde una \u00fanica consola ubicada en su equipo cliente, ahorrando tiempo.</li> <li>Seguridad Mejorada: Reduce dr\u00e1sticamente la frecuencia con la que se necesita iniciar sesi\u00f3n gr\u00e1fica directamente en los Controladores de Dominio o servidores cr\u00edticos. Esto minimiza el riesgo de dejar sesiones administrativas abiertas o de exponer la interfaz del servidor a posibles ataques.</li> <li>Optimizaci\u00f3n de Recursos: La herramienta cliente solo env\u00eda comandos de gesti\u00f3n a trav\u00e9s de la red, evitando la sobrecarga de recursos que implica la transmisi\u00f3n constante de gr\u00e1ficos de una sesi\u00f3n RDP completa.</li> </ul>"},{"location":"06_07_rsat/#componentes-de-rsat","title":"Componentes de RSAT","text":"<p>RSAT agrupa las consolas de gesti\u00f3n en funci\u00f3n de los roles de servidor que administran. Para un administrador de dominio, los componentes m\u00e1s esenciales incluyen:</p> <ul> <li>Usuarios y Equipos de Active Directory (ADUC): Herramienta principal para gestionar usuarios, grupos y Unidades Organizativas (UO).</li> <li>Administraci\u00f3n de Directiva de Grupo (GPMC): Consola fundamental para configurar, aplicar y auditar las Directivas de Grupo en el dominio.</li> <li>Consolas Espec\u00edficas: Herramientas para la gesti\u00f3n de roles de infraestructura como DNS, DHCP, y Servidor de Archivos.</li> <li>Administrador del Servidor: Permite supervisar el estado general, los roles y los eventos de m\u00faltiples servidores desde una interfaz \u00fanica.</li> </ul>"},{"location":"06_07_rsat/#instalacion-de-rsat","title":"Instalaci\u00f3n de RSAT","text":"<p>RSAT se instala en el sistema operativo cliente (Windows 10, Windows 11, etc.), no en el servidor. En las versiones modernas de Windows, RSAT se gestiona como una Caracter\u00edstica opcional del sistema operativo.</p> <p>Este es el m\u00e9todo m\u00e1s com\u00fan y visual, recomendado para usuarios que necesitan seleccionar herramientas espec\u00edficas de forma individual.</p> <ol> <li>Accede a Configuraci\u00f3n</li> <li>Navega hasta la secci\u00f3n Sistema en el men\u00fa lateral izquierdo.</li> <li>Haz clic en Caracter\u00edsticas opcionales.      Configuraci\u00f3n -&gt; Sistema -&gt; Caracter\u00edsticas Avanzadas. </li> <li>Junto a \"Agregar una caracter\u00edstica opcional\", pulsa el bot\u00f3n Ver caracter\u00edsticas.      Configuraci\u00f3n -&gt; Sistema -&gt; Caracter\u00edsticas Avanzadas. </li> <li>En el cuadro de b\u00fasqueda, escribe RSAT. Aparecer\u00e1 una lista con todas las utilidades disponibles (AD DS, DHCP, DNS, Group Policy, etc.). Debes tener **Ver caracter\u00edsticas disponibles\" seleccionadas.       Configuraci\u00f3n -&gt; Sistema -&gt; Caracter\u00edsticas Avanzadas. </li> <li> <p>Marca las herramientas que necesites, haz clic en Siguiente y luego en Instalar. Una m\u00ednima prueba debe tener como m\u00ednimo:</p> <ol> <li>RSAT. Administrador del servidor: Que instala la consola del administrador del servidor tal y como tenemos en el Servidor</li> <li>RSAT. Herramietna de Active Directory Domain Service y Lightweight Directory Services: que instala la herramienta de usuarios y equipos de active directory</li> </ol> <p></p> Opciones instaladas  7. Configuraci\u00f3n. Abrimos la consola de Administrador del Servidor y pulsamos sobre Agregar otros servidores para administrar y seleccinamos el equipo donde tenemos instalado el Administrador del Dominio.<p></p> <p></p> Configuraci\u00f3n del Administrador del servidor <p></p> </li> </ol> <p>Ahora ya tenemos la herramienta preparada para trabajar como si estuvi\u00e9ramos en el propio servidor</p>"},{"location":"06_08_backups/","title":"Copias de seguridad","text":""},{"location":"06_08_backups/#7-copia-de-seguridad-de-datos-con-windows-server-backup","title":"7. Copia de Seguridad de Datos con Windows Server Backup \ud83d\udcbe","text":"<p>La copia de seguridad es el pilar de la continuidad del negocio y la recuperaci\u00f3n ante desastres. La planificaci\u00f3n de estas tareas se rige por el Objetivo de Punto de Recuperaci\u00f3n (RPO), que define la p\u00e9rdida m\u00e1xima de datos aceptable, y el Objetivo de Tiempo de Recuperaci\u00f3n (RTO), que establece el tiempo m\u00e1ximo para restaurar el servicio. En Windows Server, la herramienta integrada Windows Server Backup (WSB) permite a los administradores crear copias de seguridad completas y parciales del sistema y de los datos.</p> <p>Windows Server Backup es una caracter\u00edstica que debe instalarse en el servidor a trav\u00e9s del Administrador del Servidor. A diferencia de las herramientas de terceros, WSB est\u00e1 dise\u00f1ada para realizar copias de seguridad basadas en im\u00e1genes a nivel de bloque, lo que facilita una restauraci\u00f3n r\u00e1pida y completa del sistema operativo o del hardware (Bare Metal Recovery).</p>"},{"location":"06_08_backups/#instalacion-y-ejecucion-de-wsb","title":"Instalaci\u00f3n y Ejecuci\u00f3n de WSB","text":"<p>Windows Server Backup es una herramienta integrada en el sistema operativo, pero no se instala de forma predeterminada. Su acceso y utilizaci\u00f3n es posible tanto a trav\u00e9s de una consola gr\u00e1fica como mediante la l\u00ednea de comandos.</p> <ul> <li>Instalaci\u00f3n: WSB es una Caracter\u00edstica (Feature), no un Rol de servidor. Debe a\u00f1adirse al sistema operativo utilizando el Asistente para agregar roles y caracter\u00edsticas (Add Roles and Features Wizard) en el Administrador del Servidor antes de que pueda ser utilizada.</li> </ul> Agregar caracter\u00edsticas de copias de seguridad <ul> <li>Ejecuci\u00f3n Gr\u00e1fica (GUI): Una vez instalada, la consola de WSB se puede iniciar de dos maneras principales:<ol> <li>Desde el Administrador del Servidor, navegando al men\u00fa Herramientas (Tools) y seleccionando Windows Server Backup.</li> <li>Buscando directamente Windows Server Backup en el men\u00fa de inicio del servidor.</li> </ol> </li> <li>Ejecuci\u00f3n por L\u00ednea de Comandos (CLI): Para tareas de automatizaci\u00f3n y la ejecuci\u00f3n precisa de copias de seguridad desde scripts o el terminal, se utiliza el comando <code>wbadmin</code>. Esta utilidad permite configurar copias de seguridad programadas, realizar copias manuales y gestionar procesos de restauraci\u00f3n de forma eficiente.</li> </ul>"},{"location":"06_08_backups/#tipos-de-copias-de-seguridad","title":"Tipos de Copias de Seguridad","text":"<p>WSB soporta diferentes tipos de copias de seguridad seg\u00fan el objetivo de recuperaci\u00f3n:</p> <ul> <li>Servidor Completo (Full Server): \ud83d\udcbb<ul> <li>Crea una imagen de todo el servidor, incluyendo todos los datos, aplicaciones, y el estado del sistema operativo. Es la opci\u00f3n ideal para la recuperaci\u00f3n completa ante fallos de hardware.</li> </ul> </li> <li>Elementos Personalizados (Custom):<ul> <li>Permite seleccionar vol\u00famenes espec\u00edficos, carpetas o archivos.</li> <li>Incluye la opci\u00f3n de Copia de Seguridad del Estado del Sistema (System State), que es fundamental para los Controladores de Dominio.</li> </ul> </li> <li>Copia de Seguridad del Estado del Sistema (System State):<ul> <li>Contiene la informaci\u00f3n cr\u00edtica para la identidad del servidor: la base de datos de Active Directory, el registro del sistema, los archivos de inicio y la configuraci\u00f3n de los servicios. Es esencial para restaurar el dominio en caso de fallos l\u00f3gicos.</li> </ul> </li> </ul>"},{"location":"06_08_backups/#planificacion-y-destino-de-las-copias","title":"Planificaci\u00f3n y Destino de las Copias","text":"<p>La configuraci\u00f3n de WSB se centra en la automatizaci\u00f3n de las copias para cumplir con el RPO.</p> <ul> <li>Programaci\u00f3n (Scheduled Backup):<ul> <li>Permite configurar copias de seguridad que se ejecutan autom\u00e1ticamente a diario o varias veces al d\u00eda. WSB gestiona el almacenamiento y el ciclo de vida de estas copias.</li> </ul> </li> <li>Copia de Seguridad \u00danica (One-time Backup):<ul> <li>Utilizada para tareas espec\u00edficas o antes de realizar cambios importantes en la configuraci\u00f3n del sistema.</li> </ul> </li> </ul>"},{"location":"06_08_backups/#destino-recomendado","title":"Destino Recomendado","text":"<p>WSB est\u00e1 optimizado para almacenar copias de seguridad en:</p> <ul> <li>Discos Duros Locales Dedicados: El destino m\u00e1s r\u00e1pido y recomendado.</li> <li>Carpetas Compartidas en Red: Es una opci\u00f3n viable, pero puede tener limitaciones de rendimiento y debe ser monitoreada.</li> </ul>"},{"location":"06_09_controlador_secundario/","title":"Controlador de Dominio Secundario","text":""},{"location":"06_09_controlador_secundario/#controlador-de-dominio-secundario-additional-domain-controller-adc","title":"Controlador de Dominio Secundario (Additional Domain Controller - ADC)","text":"<p>Una infraestructura de red que depende de Active Directory para la autenticaci\u00f3n y la gesti\u00f3n de usuarios requiere alta disponibilidad. Un Controlador de Dominio Secundario (ADC), tambi\u00e9n conocido como Controlador de Dominio Adicional, es un servidor instalado en el mismo dominio l\u00f3gico que el Controlador de Dominio primario. Su prop\u00f3sito es garantizar la continuidad del servicio de directorio y distribuir la carga de las solicitudes de autenticaci\u00f3n en la red.</p>"},{"location":"06_09_controlador_secundario/#objetivo-principal-redundancia-y-disponibilidad","title":"Objetivo Principal: Redundancia y Disponibilidad","text":"<p>El objetivo principal de instalar un ADC es eliminar los puntos \u00fanicos de fallo (SPOF) en la autenticaci\u00f3n. Si el Controlador de Dominio principal falla, el ADC asume autom\u00e1ticamente las peticiones de inicio de sesi\u00f3n y gesti\u00f3n, evitando la interrupci\u00f3n del servicio para los usuarios.</p> <ul> <li>Tolerancia a Fallos: Si el DC principal deja de funcionar, el ADC sigue autenticando usuarios y procesando cambios en el directorio sin intervenci\u00f3n manual.</li> <li>Balanceo de Carga: El ADC ayuda a distribuir las solicitudes de autenticaci\u00f3n (inicios de sesi\u00f3n) y las consultas DNS entre varios servidores, mejorando el rendimiento general, especialmente en redes grandes.</li> <li>Autenticaci\u00f3n Local: En entornos con m\u00faltiples ubicaciones geogr\u00e1ficas, un ADC instalado en cada sede garantiza que los usuarios se autentiquen r\u00e1pidamente contra un servidor local.</li> </ul>"},{"location":"06_09_controlador_secundario/#instalacion-y-replicacion","title":"Instalaci\u00f3n y Replicaci\u00f3n","text":"<p>La instalaci\u00f3n de un ADC se realiza mediante el asistente de promoci\u00f3n del servidor, que gestiona autom\u00e1ticamente el proceso de copia de la base de datos de Active Directory.</p> <ul> <li>Proceso: El servidor se une primero al dominio como un servidor miembro normal. Posteriormente, se promueve al rol de Controlador de Dominio Adicional utilizando el asistente de Servicios de Dominio de Active Directory (AD DS).</li> <li>Replicaci\u00f3n: El paso clave es la Replicaci\u00f3n de Active Directory. La base de datos del directorio (<code>NTDS.DIT</code>) y las Directivas de Grupo se copian y mantienen sincronizadas entre el DC principal y el ADC. Esta replicaci\u00f3n se realiza autom\u00e1ticamente y de forma peri\u00f3dica, asegurando la coherencia de los datos en toda la infraestructura.</li> </ul>"},{"location":"06_09_controlador_secundario/#roles-fsmo-flexible-single-master-operations","title":"Roles FSMO (Flexible Single Master Operations)","text":"<p>Aunque todos los Controladores de Dominio contienen una copia de la base de datos, ciertos roles cr\u00edticos (FSMO) son \u00fanicos y solo pueden ser pose\u00eddos por un DC a la vez.</p> <ul> <li>Redundancia de Roles: Para mejorar la redundancia, los roles FSMO se pueden distribuir entre el DC principal y el ADC. En caso de fallo prolongado del DC principal, el administrador puede realizar una toma de control (seizure) de los roles FSMO para transferirlos al ADC.</li> </ul>"},{"location":"06_10_supervision_monitorizacion/","title":"Monitorizaci\u00f3n Windows Server","text":""},{"location":"06_10_supervision_monitorizacion/#monitorizacion-windows-server","title":"Monitorizaci\u00f3n Windows Server","text":"<p>La monitorizaci\u00f3n es un proceso proactivo y fundamental en la administraci\u00f3n de servidores, cuyo objetivo es evaluar la salud, el rendimiento y la seguridad del sistema en tiempo real y a lo largo del tiempo. Permite a los administradores identificar cuellos de botella (bottlenecks), prever fallos de hardware o software, y diagnosticar problemas de rendimiento antes de que afecten a los usuarios. Windows Server integra varias herramientas esenciales para la monitorizaci\u00f3n detallada.</p>"},{"location":"06_10_supervision_monitorizacion/#visor-de-eventos-event-viewer","title":"Visor de Eventos (Event Viewer)","text":"<p>El Visor de Eventos es la herramienta central para analizar la estabilidad del sistema, los fallos de hardware y software, y las actividades de seguridad. Centraliza todos los mensajes generados por el sistema operativo, las aplicaciones y los servicios.</p> <ul> <li>Estructura de Registros: Los eventos se organizan en registros (logs) principales que facilitan la localizaci\u00f3n de la informaci\u00f3n:<ul> <li>Sistema: Registra eventos de los componentes centrales de Windows, como drivers y hardware.</li> <li>Aplicaci\u00f3n: Almacena eventos generados por aplicaciones instaladas (por ejemplo, fallos de un servicio).</li> <li>Seguridad: Contiene registros de eventos de auditor\u00eda (inicios de sesi\u00f3n exitosos o fallidos, cambios en pol\u00edticas de seguridad, accesos a archivos).</li> <li>Servicios Espec\u00edficos: Existen registros dedicados a Active Directory, DNS, y otros roles instalados.</li> </ul> </li> <li>Niveles de Evento: Cada evento se clasifica seg\u00fan su severidad, lo que ayuda al administrador a priorizar la atenci\u00f3n:<ul> <li>Error: Indica un problema que ha causado la p\u00e9rdida de funcionalidad o un fallo.</li> <li>Advertencia (Warning): Sugiere un problema potencial que no es cr\u00edtico, pero que podr\u00eda causar un fallo en el futuro.</li> <li>Informaci\u00f3n: Registra la operaci\u00f3n exitosa de un programa o servicio (por ejemplo, el inicio de un servicio).</li> <li>Auditor\u00eda (Correcta/Incorrecta): Se aplica a los eventos de seguridad para rastrear accesos y operaciones.</li> </ul> </li> <li>Uso Avanzado: Los administradores utilizan Filtros y Vistas Personalizadas para buscar patrones de eventos espec\u00edficos, diagnosticar fallos repetitivos, o identificar intentos de acceso no autorizados.</li> </ul>"},{"location":"06_10_supervision_monitorizacion/#monitor-de-rendimiento-performance-monitor","title":"Monitor de Rendimiento (Performance Monitor)","text":"<p>El Monitor de Rendimiento es una herramienta de diagn\u00f3stico en tiempo real y a largo plazo. Su funci\u00f3n es recolectar y presentar datos sobre el uso de recursos del sistema, lo cual es fundamental para el ajuste (tuning) del servidor.</p> <ul> <li>Contadores de Rendimiento: La herramienta opera a trav\u00e9s de contadores, que son m\u00e9tricas espec\u00edficas asociadas a objetos del sistema (como la CPU, la memoria o el disco).</li> <li>Contadores Cr\u00edticos para Diagn\u00f3stico: Para identificar cuellos de botella de hardware, se monitorizan contadores clave:<ul> <li>Procesador: <code>% Processor Time</code> (Uso de CPU). Un valor consistentemente alto indica un cuello de botella en la CPU.</li> <li>Memoria: <code>Available Mbytes</code> (Memoria disponible). Un valor bajo sugiere la necesidad de m\u00e1s RAM o de identificar fugas de memoria.</li> <li>Disco F\u00edsico: <code>% Disk Time</code> (Tiempo de disco en uso). Un valor alto indica que el disco es un cuello de botella.</li> <li>Interfaz de Red: <code>Bytes Total/sec</code> (Tr\u00e1fico total). Se usa para verificar la capacidad de la red.</li> </ul> </li> <li>Registros de Datos (Data Collector Sets - DCS): Para la monitorizaci\u00f3n hist\u00f3rica, el Monitor de Rendimiento permite configurar conjuntos de recolectores de datos que graban las m\u00e9tricas de rendimiento durante periodos largos, facilitando el an\u00e1lisis de tendencias y la identificaci\u00f3n de problemas intermitentes.</li> </ul>"},{"location":"06_10_supervision_monitorizacion/#monitor-de-recursos-resource-monitor","title":"Monitor de Recursos (Resource Monitor)","text":"<p>El Monitor de Recursos es una utilidad de diagn\u00f3stico avanzada que complementa al Administrador de Tareas y al Monitor de Rendimiento. Su funci\u00f3n principal es proporcionar una visi\u00f3n inmediata y granular del uso de los recursos del sistema, vinculando directamente el consumo de CPU, memoria, disco y red al proceso o servicio responsable. Esto lo convierte en una herramienta esencial para el diagn\u00f3stico r\u00e1pido de problemas de rendimiento en tiempo real.</p> <ul> <li>Ejecuci\u00f3n: El Monitor de Recursos se lanza f\u00e1cilmente desde el Administrador de Tareas (pesta\u00f1a Rendimiento) o busc\u00e1ndolo directamente en el men\u00fa de inicio de Windows Server.</li> <li>Prop\u00f3sito: Permite a los administradores identificar de manera eficiente qu\u00e9 procesos espec\u00edficos est\u00e1n causando cuellos de botella (por ejemplo, qu\u00e9 archivo est\u00e1 bloqueando la actividad del disco o qu\u00e9 servicio est\u00e1 saturando la CPU).</li> </ul>"},{"location":"06_10_supervision_monitorizacion/#vistas-y-metricas-clave","title":"Vistas y M\u00e9tricas Clave","text":"<p>El Monitor de Recursos organiza la informaci\u00f3n de rendimiento en cinco pesta\u00f1as principales, cada una ofreciendo un an\u00e1lisis detallado del recurso correspondiente:</p> Pesta\u00f1a Informaci\u00f3n Principal que Proporciona Importancia para el Diagn\u00f3stico CPU Muestra el uso individual del procesador por cada proceso y servicio activo. Permite suspender procesos que consumen excesivos ciclos de CPU. Identificar fugas de c\u00f3digo o procesos descontrolados que afectan el rendimiento. Memoria Muestra c\u00f3mo se utiliza la memoria f\u00edsica (bytes en uso, en espera, y libres). Detalla qu\u00e9 procesos est\u00e1n asignando la mayor cantidad de memoria de trabajo (Working Set). Diagnosticar la necesidad de m\u00e1s RAM o identificar aplicaciones con gesti\u00f3n ineficiente de memoria. Disco Muestra la actividad de lectura y escritura (bytes/segundo) de cada volumen. Lo m\u00e1s valioso: Indica qu\u00e9 procesos est\u00e1n accediendo a qu\u00e9 archivos espec\u00edficos en tiempo real. Determinar qu\u00e9 aplicaci\u00f3n est\u00e1 causando latencia o congesti\u00f3n en el subsistema de disco. Red Muestra la actividad de red (env\u00edo y recepci\u00f3n) de cada proceso. Detalla qu\u00e9 puertos y direcciones IP est\u00e1n utilizando las conexiones activas. Identificar procesos que consumen excesivo ancho de banda o detectar actividad de red no deseada. <p>La principal ventaja del Monitor de Recursos reside en su capacidad para filtrar y ordenar los datos en vivo, permitiendo al administrador aislar y analizar el impacto de un proceso individual en los cuatro recursos fundamentales del servidor de forma simult\u00e1nea.</p>"},{"location":"06_10_supervision_monitorizacion/#auditorias-windows-server","title":"Auditor\u00edas Windows Server","text":"<p>La auditor\u00eda de seguridad es un proceso fundamental en la administraci\u00f3n de Windows Server, cuyo objetivo es rastrear y registrar las acciones de los usuarios y del sistema operativo. Esto permite la rendici\u00f3n de cuentas, la detecci\u00f3n de intrusiones y el an\u00e1lisis forense tras un incidente de seguridad, garantizando el cumplimiento de las pol\u00edticas internas y normativas externas.</p>"},{"location":"06_10_supervision_monitorizacion/#configuracion-de-la-directiva-de-auditoria","title":"Configuraci\u00f3n de la Directiva de Auditor\u00eda","text":"<p>La configuraci\u00f3n de las auditor\u00edas se establece principalmente a trav\u00e9s de la Directiva de Grupo (Group Policy), lo que permite aplicarla de manera centralizada a Controladores de Dominio y servidores miembros espec\u00edficos.</p> <ul> <li>Implementaci\u00f3n: Se utiliza la consola de Administraci\u00f3n de Directiva de Grupo (GPMC) para editar la directiva de seguridad que aplica a la Unidad Organizativa (OU) que contiene los servidores.</li> <li>Auditor\u00eda Avanzada: Se recomienda utilizar la Configuraci\u00f3n de Directiva de Auditor\u00eda Avanzada, que ofrece un control m\u00e1s granular sobre los eventos a registrar que las categor\u00edas de auditor\u00eda b\u00e1sicas.</li> </ul>"},{"location":"06_10_supervision_monitorizacion/#categorias-de-eventos-clave","title":"Categor\u00edas de Eventos Clave","text":"<p>Para un entorno de dominio seguro, hay categor\u00edas de auditor\u00eda que son prioritarias para el rastreo, ya que revelan la actividad de los administradores y los usuarios:</p> <ul> <li>Gesti\u00f3n de Cuentas (Account Management):<ul> <li>Prop\u00f3sito: Rastrea cuando se crean, modifican, eliminan o se realizan cambios de estado (deshabilitar/habilitar) en cuentas de usuario y grupos de seguridad.</li> <li>Importancia: Es esencial para monitorizar la actividad de los administradores y detectar la creaci\u00f3n de cuentas no autorizadas.</li> </ul> </li> <li>Inicio/Cierre de Sesi\u00f3n (Account Logon/Logoff):<ul> <li>Prop\u00f3sito: Registra los intentos de inicio de sesi\u00f3n en el dominio o en un servidor local.</li> <li>Importancia: Ayuda a identificar patrones de actividad inusuales y a detectar ataques de fuerza bruta (registrando los fallos de inicio de sesi\u00f3n).</li> </ul> </li> <li>Acceso a Objetos (Object Access):<ul> <li>Prop\u00f3sito: Rastrea los intentos de acceder, leer, escribir o modificar recursos espec\u00edficos del sistema (archivos, carpetas, claves de registro).</li> <li>Configuraci\u00f3n: Requiere la configuraci\u00f3n de Listas de Control de Acceso del Sistema (SACL) en los objetos individuales que se desean auditar.</li> </ul> </li> </ul>"},{"location":"06_10_supervision_monitorizacion/#tipos-de-auditoria-y-revision","title":"Tipos de Auditor\u00eda y Revisi\u00f3n","text":"<p>Al configurar una directiva, se especifica si se debe auditar el \u00e9xito, el fallo, o ambos resultados de una acci\u00f3n.</p> <ul> <li>Auditor\u00eda Correcta (Success): Registra una entrada cuando la acci\u00f3n del usuario o sistema es permitida. \u00datil para rastrear qui\u00e9n accedi\u00f3 a recursos cr\u00edticos.</li> <li>Auditor\u00eda Incorrecta (Failure): Registra una entrada cuando la acci\u00f3n es denegada. Vital para detectar intentos de acceso no autorizados.</li> <li>Localizaci\u00f3n de Eventos: Los resultados de las auditor\u00edas se encuentran en el Visor de Eventos, espec\u00edficamente en el Registro de Seguridad. El an\u00e1lisis de este registro es la tarea diaria que cierra el ciclo de auditor\u00eda.</li> </ul>"},{"location":"06_11_servicios/","title":"Servicios en Windows Server","text":""},{"location":"06_11_servicios/#servicios-en-windows-server","title":"Servicios en Windows Server","text":"<p>Los servicios son aplicaciones que se ejecutan continuamente en segundo plano, sin interfaz de usuario directa, y que proporcionan las funciones centrales del sistema operativo (como la red, el registro de eventos o la gesti\u00f3n de archivos). La gesti\u00f3n adecuada de los tipos de inicio de los servicios es fundamental para optimizar el rendimiento del servidor, ya que permite controlar la carga de trabajo durante la fase cr\u00edtica de arranque.</p>"},{"location":"06_11_servicios/#tipos-de-inicio-y-optimizacion-del-rendimiento","title":"Tipos de Inicio y Optimizaci\u00f3n del Rendimiento","text":"<p>El tipo de inicio define cu\u00e1ndo y c\u00f3mo se carga un servicio. La elecci\u00f3n correcta es vital para que el servidor quede plenamente operativo r\u00e1pidamente.</p> <ul> <li>Autom\u00e1tico:<ul> <li>Funci\u00f3n: El servicio se inicia inmediatamente durante la fase de carga del sistema operativo.</li> <li>Uso: Esta configuraci\u00f3n est\u00e1 reservada para servicios cr\u00edticos de infraestructura, como los Servicios de Dominio de Active Directory (AD DS) o el DNS, que deben estar disponibles antes del inicio de sesi\u00f3n de los usuarios.</li> </ul> </li> <li>Autom\u00e1tico (Inicio Retrasado):<ul> <li>Funci\u00f3n: El servicio se inicia autom\u00e1ticamente, pero solo despu\u00e9s de que el sistema operativo ha finalizado su arranque inicial y ha transcurrido un breve per\u00edodo (aproximadamente dos minutos).</li> <li>Diferencia Crucial: Al retrasar los servicios no esenciales, se distribuye la carga de inicio a lo largo del tiempo. Esto reduce la presi\u00f3n sobre la CPU y los subsistemas de disco durante el arranque, lo que resulta en una experiencia de inicio de sesi\u00f3n m\u00e1s r\u00e1pida y un servidor m\u00e1s \u00e1gil desde el principio.</li> </ul> </li> <li>Manual: El servicio solo se inicia cuando es llamado o solicitado por otro programa o por el administrador.</li> <li>Deshabilitado: El servicio no puede iniciarse bajo ninguna circunstancia. Es la configuraci\u00f3n recomendada para servicios que no son necesarios, mejorando la seguridad y liberando recursos del sistema.</li> </ul>"},{"location":"06_11_servicios/#herramienta-de-gestion","title":"Herramienta de Gesti\u00f3n","text":"<p>La administraci\u00f3n de los servicios se realiza t\u00edpicamente a trav\u00e9s de la consola Servicios (<code>services.msc</code>), donde se pueden detener, iniciar o reiniciar servicios, as\u00ed como modificar su tipo de inicio y la cuenta de usuario bajo la que se ejecutan. Tambi\u00e9n se pueden utilizar cmdlets de PowerShell como <code>Get-Service</code> y <code>Set-Service</code> para la administraci\u00f3n avanzada y automatizada.</p>"},{"location":"06_12_actualizacion_despliegue/","title":"WSUS & WDS","text":""},{"location":"06_12_actualizacion_despliegue/#12-windows-update-services-wsus","title":"12. Windows Update Services (WSUS)","text":"<p>Windows Server Update Services (WSUS) es un rol de servidor que permite a los administradores gestionar de forma centralizada la distribuci\u00f3n de las actualizaciones y parches de Microsoft a los equipos cliente y servidores de la red local. Su implementaci\u00f3n es esencial para mantener los sistemas operativos parcheados de manera uniforme y eficiente, reduciendo los riesgos de seguridad derivados de software obsoleto.</p>"},{"location":"06_12_actualizacion_despliegue/#beneficio-operativo-principal","title":"Beneficio Operativo Principal","text":"<p>El principal beneficio de utilizar WSUS radica en el control de las actualizaciones y la optimizaci\u00f3n del tr\u00e1fico de red.</p> <ul> <li>Ahorro de Ancho de Banda: El servidor WSUS descarga las actualizaciones de Microsoft Update una sola vez. Los equipos cliente y servidores de la red local las descargan directamente del servidor WSUS. Esto evita que cada m\u00e1quina individual consuma ancho de banda externo, optimizando significativamente la conexi\u00f3n a Internet.</li> <li>Control y Aprobaci\u00f3n: Los administradores tienen la capacidad de aprobar o denegar las actualizaciones y parches. Esto permite probar las actualizaciones en un peque\u00f1o grupo de equipos antes de desplegarlas al entorno de producci\u00f3n completo, previniendo fallos cr\u00edticos.</li> <li>Segmentaci\u00f3n: Las actualizaciones pueden dirigirse a grupos de equipos espec\u00edficos (Computer Groups), permitiendo un despliegue gradual y controlado.</li> </ul>"},{"location":"06_12_actualizacion_despliegue/#funcionamiento-y-despliegue-en-clientes","title":"Funcionamiento y Despliegue en Clientes","text":"<p>El funcionamiento de WSUS se basa en la sincronizaci\u00f3n y la definici\u00f3n de pol\u00edticas de destino.</p> <ul> <li>Sincronizaci\u00f3n: El servidor WSUS se conecta peri\u00f3dicamente a Microsoft Update para obtener las listas de nuevas actualizaciones.</li> <li>Despliegue con Directiva de Grupo (GPO): La configuraci\u00f3n de los equipos clientes para que utilicen el servidor WSUS, en lugar de Microsoft Update, se realiza mediante una Directiva de Grupo (GPO) aplicada a la Unidad Organizativa (OU) que contiene los equipos. Esta GPO define la URL del servidor WSUS y la frecuencia de la b\u00fasqueda de actualizaciones.</li> </ul>"},{"location":"06_12_actualizacion_despliegue/#instalacion-y-configuracion","title":"Instalaci\u00f3n y configuraci\u00f3n","text":"<p>Para la instalaci\u00f3n debemos a\u00f1adir el nuevo rol Windows Server Update Services</p> Nuevo Rol: Windows Server Update Services <p>Dentro de la instalaci\u00f3n, seleccionamos las opciones siguientes:</p> Nuevo Rol: Windows Server Update Services <p>Y lo m\u00e1s importantes seleccionamos la carpeta compartida donde vamos a dejar las actualizaciones para que accedan el resto de equipos del dominio. </p> <p>Debemos crear una carpeta nueva y compartirla con permisos para todos los equipos y usuarios del dominio, e indicar al ruta de la carpeta compartida:</p> Ruta de la carpeta donde se dejan las actualizaciones. <p>Posteriormente, debemos esperar a que se configure el rol una vez instalado, y as\u00ed poder configurarlo con las actualizaciones que deseemos.</p> Nuevo Rol: Windows Server Update Services. Instalado y preparado para ser usado. <p>A partir de aqui se trata de configurar y seleccionar los elementos a actualizar.</p>"},{"location":"06_12_actualizacion_despliegue/#13-windows-deployment-services-wds","title":"13. Windows Deployment Services (WDS)","text":"<p>Windows Deployment Services (WDS) es un rol de servidor que permite a los administradores desplegar sistemas operativos Windows de forma remota a trav\u00e9s de la red. Esto elimina la necesidad de utilizar medios f\u00edsicos (DVD o USB) para cada instalaci\u00f3n, permitiendo la instalaci\u00f3n centralizada y simult\u00e1nea de sistemas operativos en m\u00faltiples equipos.</p>"},{"location":"06_12_actualizacion_despliegue/#prerrequisitos-de-infraestructura","title":"Prerrequisitos de Infraestructura","text":"<p>Para que WDS funcione correctamente, se requiere la existencia y correcta configuraci\u00f3n de otros servicios de infraestructura de red:</p> <ul> <li>Servicios de Dominio de Active Directory (AD DS): WDS debe ser un miembro o un Controlador de Dominio para acceder a la configuraci\u00f3n de la red.</li> <li>Servidor DNS y DHCP: El servicio DHCP es esencial para asignar direcciones IP a los nuevos clientes que se conectan a la red, y el servicio DNS debe estar operativo para la resoluci\u00f3n de nombres.</li> <li>Volumen NTFS: Se requiere un volumen con el sistema de archivos NTFS para almacenar las im\u00e1genes de instalaci\u00f3n y arranque.</li> </ul>"},{"location":"06_12_actualizacion_despliegue/#instalaccion","title":"Instalacci\u00f3n:","text":"<p>Se debe instalar el rol de Servicios de implementaci\u00f3n de Windows</p> Nuevo Rol: Windows Server Update Services. Instalado y preparado para ser usado."},{"location":"06_12_actualizacion_despliegue/#componentes-de-despliegue","title":"Componentes de Despliegue","text":"<p>WDS utiliza dos tipos principales de archivos de imagen, ambos en formato .WIM (Windows Imaging Format):</p> <ul> <li>Im\u00e1genes de Arranque (Boot Images): \ud83d\udcbb<ul> <li>Son archivos peque\u00f1os que el cliente descarga a trav\u00e9s de la red (mediante PXE) para iniciar un entorno de preinstalaci\u00f3n b\u00e1sico. Su \u00fanica funci\u00f3n es preparar el equipo para recibir la imagen de instalaci\u00f3n real.</li> </ul> </li> <li>Im\u00e1genes de Instalaci\u00f3n (Install Images): \ud83d\udcbe<ul> <li>Son los archivos que contienen el sistema operativo completo (Windows 10, Windows 11 o Windows Server) que se instalar\u00e1 en el disco duro del cliente.</li> </ul> </li> </ul>"},{"location":"06_12_actualizacion_despliegue/#proceso-de-instalacion-pxe","title":"Proceso de Instalaci\u00f3n PXE","text":"<p>El despliegue de WDS se basa en el est\u00e1ndar PXE (Preboot Execution Environment):</p> <ol> <li>Arranque de Red: El equipo cliente se configura para arrancar desde la red.</li> <li>Solicitud PXE: El cliente realiza una solicitud al servidor DHCP. El servidor DHCP o el servidor WDS (dependiendo de la configuraci\u00f3n) dirige al cliente al servidor WDS.</li> <li>Descarga de Imagen de Arranque: El cliente descarga el archivo de imagen de arranque (Boot Image) y carga el entorno de preinstalaci\u00f3n, donde el usuario puede seleccionar la imagen de sistema operativo deseada para su instalaci\u00f3n.</li> </ol>"},{"location":"07_01_introduccion/","title":"Introducci\u00f3n. Redes heterog\u00e9neas","text":""},{"location":"07_01_introduccion/#introduccion-a-las-redes-heterogeneas","title":"Introducci\u00f3n a las redes heterog\u00e9neas","text":"<p>Hasta ahora hemos trabajado exclusivamente con Windows Server. Hemos montado un dominio, compartido recursos y aplicado directivas en un entorno completamente Microsoft. Sin embargo, cuando visit\u00e9is empresas medianas o grandes, os dar\u00e9is cuenta de que lo habitual es encontrar Windows y Linux trabajando juntos. A esto se le llama una red heterog\u00e9nea.</p> Esquema de redes heterog\u00e9neas"},{"location":"07_01_introduccion/#por-que-mezclar-windows-y-linux","title":"Por qu\u00e9 mezclar Windows y Linux","text":"<p>Las empresas no mezclan sistemas operativos por capricho. Existen razones muy concretas que justifican esta decisi\u00f3n:</p> <p>Ahorro de costes: Windows Server requiere licencias que cuestan cientos de euros por servidor y por cliente. Linux, en cambio, es gratuito. Una empresa con 10 servidores puede ahorrarse miles de euros anuales usando Linux donde sea t\u00e9cnicamente viable.</p> <p>Cada sistema tiene sus fortalezas: </p> <p>Windows destaca en gesti\u00f3n centralizada mediante Active Directory, integraci\u00f3n perfecta con Office y Exchange, y soporte nativo para aplicaciones empresariales que solo existen en este ecosistema (por ejemplo, muchas aplicaciones de gesti\u00f3n empresarial, contabilidad o ERP).</p> <p>Linux destaca en servidores web (la mayor\u00eda de sitios web del mundo corren en Linux), estabilidad excepcional (servidores que funcionan meses sin reiniciar), mayor seguridad por dise\u00f1o y rendimiento \u00f3ptimo incluso con recursos limitados.</p> <p>Aplicaciones modernas: Muchas tecnolog\u00edas actuales como Docker, Kubernetes y la mayor\u00eda de frameworks de desarrollo web est\u00e1n optimizadas para Linux. Si una empresa quiere usar estas tecnolog\u00edas, necesita servidores Linux en su infraestructura.</p>"},{"location":"07_01_introduccion/#el-reto-que-todo-funcione-junto","title":"El reto: que todo funcione junto","text":"<p>El desaf\u00edo no es t\u00e9cnico en s\u00ed mismo, sino de integraci\u00f3n. Los usuarios finales no deben notar que existen sistemas diferentes trabajando detr\u00e1s. Cuando un empleado accede a una carpeta compartida, no deber\u00eda importarle si est\u00e1 f\u00edsicamente en Windows o en Linux. Debe poder usar las mismas credenciales para todo y el sistema debe comportarse de manera uniforme.</p> <p>Para conseguir esta transparencia usamos protocolos est\u00e1ndar que ambos sistemas entienden:</p> <ul> <li> <p>SMB/CIFS: protocolo para compartir archivos. Windows lo usa nativamente y en Linux lo implementamos mediante Samba.</p> </li> <li> <p>LDAP: protocolo de directorios de usuarios que permite consultar y gestionar informaci\u00f3n de autenticaci\u00f3n de forma centralizada.</p> </li> <li> <p>Kerberos: sistema de autenticaci\u00f3n segura que usa tokens cifrados para verificar identidades.</p> </li> <li> <p>DNS: sistema de resoluci\u00f3n de nombres que permite usar nombres de equipo en lugar de direcciones IP.</p> </li> </ul>"},{"location":"07_01_introduccion/#linux-conceptos-basicos","title":"Linux: conceptos b\u00e1sicos","text":""},{"location":"07_01_introduccion/#que-es-linux","title":"Qu\u00e9 es Linux","text":"<p>Linux no es un sistema operativo completo, es un kernel (n\u00facleo del sistema). Las distribuciones toman ese kernel y le a\u00f1aden todo lo necesario: herramientas del sistema, gestores de paquetes, servicios, interfaces gr\u00e1ficas, etc.</p> <p>Nosotros usaremos Ubuntu 24.04 LTS en sus dos variantes: Desktop para estaciones de trabajo y Server para servicios de red. Ambas comparten la misma base, lo que facilita la transici\u00f3n entre una y otra.</p> <p>Ubuntu es completamente gratuita y tiene soporte oficial hasta 2029. Cuenta con una comunidad enorme, lo que facilita encontrar ayuda y documentaci\u00f3n. Es la distribuci\u00f3n m\u00e1s usada tanto en escritorios Linux como en entornos cloud (AWS, Azure, Google Cloud), por lo que lo que aprend\u00e1is aqu\u00ed os servir\u00e1 en entornos profesionales reales. Adem\u00e1s, es especialmente adecuada para aprender por su facilidad de uso y abundante documentaci\u00f3n.</p>"},{"location":"07_01_introduccion/#diferencias-clave-con-windows","title":"Diferencias clave con Windows","text":"<p>Interfaz de administraci\u00f3n: Windows tiene ventanas, men\u00fas y herramientas gr\u00e1ficas para todo. Linux Desktop tambi\u00e9n tiene interfaz gr\u00e1fica muy completa, pero Linux Server se administra principalmente por terminal (l\u00ednea de comandos). Aunque pueda parecer m\u00e1s dif\u00edcil al principio, consume much\u00edsimos menos recursos y facilita enormemente la automatizaci\u00f3n de tareas mediante scripts.</p> <p>Sistema de archivos: </p> <p>En Windows tenemos letras de unidad separadas (C:, D:, E:) para cada disco o partici\u00f3n. En Linux existe un \u00fanico \u00e1rbol jer\u00e1rquico que empieza en <code>/</code> (ra\u00edz). Los discos adicionales se \"montan\" como carpetas dentro de este \u00e1rbol.</p> <p>Por ejemplo, en Windows tendr\u00edamos <code>D:\\datos</code>. En Linux ser\u00eda <code>/datos</code> y el disco f\u00edsico se monta en esa ubicaci\u00f3n.</p> <p>Instalaci\u00f3n de programas:</p> <p>En Windows descargamos ejecutables .exe y hacemos doble clic. En Linux usamos gestores de paquetes como <code>apt</code> o <code>snap</code>, que funcionan como una tienda de aplicaciones pero mucho m\u00e1s potente.</p> <pre><code>sudo apt install nombre_programa\n</code></pre> <p>Este comando descarga el programa, lo instala, configura dependencias y lo deja listo para usar, todo autom\u00e1ticamente.</p> <p>Usuarios y permisos: </p> <p>Linux es multiusuario desde su dise\u00f1o original. Existe un superusuario llamado root (equivalente a Administrador en Windows), pero por seguridad nunca trabajamos directamente como root. Usamos el comando <code>sudo</code> para ejecutar comandos espec\u00edficos con privilegios elevados.</p> <p>Configuraci\u00f3n del sistema: </p> <p>En Windows la configuraci\u00f3n est\u00e1 en el Registro, una base de datos binaria compleja. En Linux, toda la configuraci\u00f3n son archivos de texto plano ubicados principalmente en <code>/etc/</code>. Esto tiene enormes ventajas: puedes editarlos con cualquier editor, copiarlos f\u00e1cilmente, hacer backups simples y compartirlos entre sistemas.</p>"},{"location":"07_01_introduccion/#que-vamos-a-hacer-en-este-tema","title":"Qu\u00e9 vamos a hacer en este tema","text":"<p>Vamos a trabajar con Linux de forma progresiva y pr\u00e1ctica, integr\u00e1ndolo completamente en nuestra red ISCASOX. No ser\u00e1n sistemas aislados, sino parte integral de nuestra infraestructura empresarial.</p> <p>El tema se estructura en cinco bloques principales que siguen un orden l\u00f3gico de complejidad creciente:</p>"},{"location":"07_01_introduccion/#bloque-1-ubuntu-desktop-primeros-pasos-con-linux","title":"Bloque 1: Ubuntu Desktop - Primeros pasos con Linux","text":"<p>Comenzaremos con Ubuntu Desktop porque es m\u00e1s familiar para quienes ven\u00eds de Windows. Este primer contacto incluye:</p> <p>Instalaci\u00f3n y configuraci\u00f3n inicial: Crearemos una m\u00e1quina virtual con Ubuntu Desktop y realizaremos la configuraci\u00f3n post-instalaci\u00f3n b\u00e1sica. Instalaremos Guest Additions de VirtualBox para mejorar la experiencia de uso.</p> <p>Gesti\u00f3n de software: Aprenderemos a instalar aplicaciones usando <code>apt</code>, <code>snap</code> y la tienda gr\u00e1fica de Ubuntu. Entenderemos las diferencias entre estos sistemas y cu\u00e1ndo usar cada uno.</p> <p>Configuraci\u00f3n de red: Veremos c\u00f3mo funciona NetworkManager y Netplan, configurando la red tanto desde interfaz gr\u00e1fica como mediante archivos de configuraci\u00f3n.</p> <p>Integraci\u00f3n con Active Directory: Uniremos el equipo Ubuntu Desktop al dominio Windows, permitiendo que los usuarios corporativos inicien sesi\u00f3n con sus credenciales del dominio.</p> <p>Este bloque servir\u00e1 como introducci\u00f3n y repaso a sistemas Linux y tiene como objetivo dar una base s\u00f3lida de Linux desde el punto de vista del usuario final, teniendo en cuenta que la finalidad es usar este sistema dentro de dominios Windows y antes de pasar a la administraci\u00f3n de servidores.</p>"},{"location":"07_01_introduccion/#bloque-2-ubuntu-server-instalacion-y-configuracion-basica","title":"Bloque 2: Ubuntu Server - Instalaci\u00f3n y configuraci\u00f3n b\u00e1sica","text":"<p>Una vez familiarizados con Linux Desktop, pasaremos a Ubuntu Server. Este bloque incluye:</p> <p>Instalaci\u00f3n de Ubuntu Server: Crearemos un servidor sin interfaz gr\u00e1fica, gestionable \u00fanicamente por terminal.</p> <p>Configuraci\u00f3n de red con Netplan: Aprenderemos a configurar IPs est\u00e1ticas y par\u00e1metros de red mediante archivos YAML.</p> <p>SSH para administraci\u00f3n remota: Configuraremos el acceso remoto seguro al servidor, permiti\u00e9ndonos administrarlo desde nuestro equipo Windows sin necesidad de acceder f\u00edsicamente a la consola.</p> <p>LVM (Logical Volume Manager): Dominaremos la gesti\u00f3n avanzada de almacenamiento, creando y ampliando vol\u00famenes l\u00f3gicos de forma flexible sin interrumpir servicios.</p>"},{"location":"07_01_introduccion/#bloque-3-servicios-de-comparticion-samba-y-active-directory","title":"Bloque 3: Servicios de compartici\u00f3n - Samba y Active Directory","text":"<p>Este es el bloque de integraci\u00f3n entre Windows y Linux:</p> <p>Samba b\u00e1sico: Instalaremos y configuraremos Samba para compartir archivos con clientes Windows, creando recursos compartidos b\u00e1sicos.</p> <p>Integraci\u00f3n con Active Directory usando Winbind: Uniremos el servidor Linux al dominio Windows, configurando Samba para que respete permisos y grupos del Active Directory. Los usuarios del dominio podr\u00e1n autenticarse en Linux y acceder a recursos compartidos con sus credenciales corporativas.</p> <p>Gesti\u00f3n de permisos: Aprenderemos a gestionar ACLs de Windows en carpetas Linux, permitiendo configurar permisos desde la interfaz gr\u00e1fica de Windows que se respetar\u00e1n en el servidor Linux.</p>"},{"location":"07_01_introduccion/#bloque-4-administracion-avanzada-automatizacion-y-copias-de-seguridad","title":"Bloque 4: Administraci\u00f3n avanzada - Automatizaci\u00f3n y copias de seguridad","text":"<p>Con la infraestructura funcionando, aprenderemos a mantenerla y automatizar tareas:</p> <p>Planificaci\u00f3n de tareas con cron: Automatizaremos tareas peri\u00f3dicas como copias de seguridad, limpieza de logs, actualizaciones programadas, etc. Entenderemos la sintaxis de cron y crearemos nuestros propios trabajos programados.</p> <p>Copias de seguridad con rsync y tar: Implementaremos estrategias de backup utilizando <code>rsync</code> para sincronizaci\u00f3n incremental de archivos y <code>tar</code> para archivos comprimidos. Crearemos scripts automatizados de backup.</p> <p>Systemd timers: Como alternativa moderna a cron, aprenderemos a usar systemd timers para tareas programadas con mejor integraci\u00f3n en el sistema.</p> <p>Este bloque os dar\u00e1 las herramientas necesarias para que vuestros servidores funcionen de forma aut\u00f3noma y fiable.</p>"},{"location":"07_01_introduccion/#bloque-5-mantenimiento-y-control-monitorizacion-y-logs","title":"Bloque 5: Mantenimiento y control - Monitorizaci\u00f3n y logs","text":"<p>Finalizaremos con las herramientas de diagn\u00f3stico y resoluci\u00f3n de problemas:</p> <p>Gesti\u00f3n de logs con journald: Aprenderemos a usar <code>journalctl</code> para consultar y analizar los registros del sistema, diagnosticando problemas y monitorizando la actividad.</p> <p>Monitorizaci\u00f3n del sistema: Utilizaremos herramientas como <code>htop</code>, <code>iotop</code>, <code>netstat</code> y comandos de an\u00e1lisis de rendimiento para vigilar el estado del servidor.</p> <p>An\u00e1lisis de espacio en disco: Herramientas como <code>df</code>, <code>du</code> y <code>ncdu</code> para controlar el uso del almacenamiento.</p> <p>Resoluci\u00f3n de incidencias: Metodolog\u00eda para diagnosticar y resolver problemas comunes en servidores Linux.</p> <p>Este bloque cierra el ciclo de administraci\u00f3n de sistemas, dot\u00e1ndoos de herramientas para mantener servidores en producci\u00f3n y resolver problemas cuando surjan.</p>"},{"location":"07_01_introduccion/#estructura-del-aprendizaje","title":"Estructura del aprendizaje","text":"<p>Esta organizaci\u00f3n no es casual, sino que sigue una progresi\u00f3n pedag\u00f3gica pensada:</p> <p>De lo familiar a lo desconocido: Empezamos con Desktop porque su interfaz gr\u00e1fica es m\u00e1s parecida a Windows, reduciendo la barrera de entrada.</p> <p>De cliente a servidor: Primero usamos Linux como cliente (Desktop en el dominio), despu\u00e9s como servidor (Server ofreciendo servicios). Esto replica c\u00f3mo funcionan las redes reales.</p> <p>De lo b\u00e1sico a lo avanzado: Primero instalamos y configuramos, despu\u00e9s compartimos recursos, y finalmente automatizamos y monitorizamos.</p> <p>De la teor\u00eda a la pr\u00e1ctica: Cada concepto se aplica inmediatamente en nuestro proyecto ISCASOX, d\u00e1ndole sentido pr\u00e1ctico.</p> <p>Cada unos de los bloques indicados se deben realizar en tiempo y forma adecuado, de forma que se plantear\u00e1n una o dos actividades entregables en cada uno de los bloques.</p> <p>C\u00f3mo trabajar en este tema</p> <p>En clase explicaremos los conceptos fundamentales y haremos demostraciones en vivo de los procesos m\u00e1s complejos.</p> <p>En los apuntes encontrar\u00e9is gu\u00edas paso a paso muy detalladas que podr\u00e9is seguir a vuestro ritmo.</p> <p>Aspectos importantes a tener en cuenta:</p> <p>Haced snapshots (instant\u00e1neas) de las m\u00e1quinas virtuales antes de realizar cambios importantes. Si algo falla, simplemente restaur\u00e1is la instant\u00e1nea y volv\u00e9is a intentarlo sin perder todo el trabajo anterior.</p> <p>No teng\u00e1is miedo a \"romper\" el sistema. Est\u00e1is trabajando en m\u00e1quinas virtuales, as\u00ed que experimentad tranquilamente. Los errores son parte del aprendizaje y en un entorno virtualizado no hay riesgo real.</p> <p>No copi\u00e9is comandos sin leer qu\u00e9 hacen. Es fundamental que entend\u00e1is cada comando antes de ejecutarlo. Los errores en Linux suelen ser muy informativos si os tom\u00e1is el tiempo de leerlos con atenci\u00f3n.</p> <p>Cuando algo no funcione, seguid estos pasos:</p> <p>Primero, leed el mensaje de error completo, palabra por palabra. Los mensajes de error en Linux suelen ser muy descriptivos y a menudo indican exactamente qu\u00e9 est\u00e1 mal.</p> <p>Segundo, buscad el error exacto en Google (copiad el mensaje tal cual). La comunidad Linux es enorme y es muy probable que alguien haya tenido el mismo problema.</p> <p>Tercero, consultad al profesor si segu\u00eds atascados despu\u00e9s de intentar solucionarlo por vuestra cuenta. Traed anotado qu\u00e9 hab\u00e9is probado para que podamos diagnosticar m\u00e1s eficientemente.</p> <p>Herramientas de ayuda integradas: Linux tiene sistemas de ayuda muy potentes:</p> <pre><code>man nombre_comando    # Manual completo y detallado del comando\ncomando --help        # Ayuda r\u00e1pida con las opciones principales\n</code></pre> <p>Los manuales (<code>man pages</code>) son extremadamente completos. Aprender a leerlos es una habilidad fundamental en Linux.</p> <p>Documentaci\u00f3n online: Ubuntu tiene documentaci\u00f3n oficial excelente en help.ubuntu.com y ubuntu.com/server/docs. Son recursos oficiales y fiables.</p> <p>Entorno de trabajo recomendado:</p> <ul> <li>Tened una terminal abierta en el servidor Linux</li> <li>Tened estos apuntes abiertos en vuestro navegador</li> <li>Tened un editor de texto (Bloc de notas, Notepad++, VSCode) para anotar comandos y configuraciones</li> <li>Usad SSH desde Windows para administrar el servidor c\u00f3modamente (lo configuraremos en el tema)</li> </ul> <p>Existen tambi\u00e9n herramientas gr\u00e1ficas opcionales como Webmin o Cockpit que proporcionan paneles web de administraci\u00f3n. No son obligatorias ni las usaremos en el curso, pero pueden ayudar cuando est\u00e9is empezando a familiarizaros con el sistema si quer\u00e9is explorarlas por vuestra cuenta.</p>"},{"location":"07_02_ubuntudesktop/","title":"Ubuntu Desktop. Primeros pasos","text":""},{"location":"07_02_ubuntudesktop/#introduccion-ubuntu-desktop","title":"Introducci\u00f3n: Ubuntu Desktop","text":"<p>Hasta ahora hemos trabajado exclusivamente con Windows en nuestra infraestructura ISCASOX. Hemos montado dominios, compartido recursos y aplicado directivas en un entorno completamente Microsoft. Sin embargo, cuando visit\u00e9is empresas medianas o grandes, os dar\u00e9is cuenta de que es habitual encontrar usuarios trabajando con sistemas Linux en sus equipos de escritorio, especialmente en departamentos t\u00e9cnicos, de desarrollo o de dise\u00f1o.</p> <p>Ubuntu Desktop es la distribuci\u00f3n Linux m\u00e1s popular para equipos de usuario final. Su \u00e9xito se debe a varios factores que la hacen ideal tanto para empresas como para entornos educativos:</p> <p>Interfaz intuitiva y moderna: Ubuntu utiliza el entorno de escritorio GNOME, que ofrece una experiencia visual atractiva y f\u00e1cil de usar. Los usuarios que vienen de Windows pueden adaptarse r\u00e1pidamente sin sentirse perdidos.</p> <p>Estabilidad y seguridad: Al estar basado en Debian, hereda d\u00e9cadas de desarrollo centrado en la estabilidad. Adem\u00e1s, el modelo de seguridad de Linux hace que sea mucho menos vulnerable a virus y malware que Windows.</p> <p>Gratuito y legal: No hay costes de licencias. Una empresa puede instalar Ubuntu en cientos de equipos sin pagar un euro, lo cual supone un ahorro considerable comparado con licencias de Windows.</p> <p>Soporte a largo plazo: Las versiones LTS (Long Term Support) reciben actualizaciones de seguridad durante 5 a\u00f1os, lo que las hace adecuadas para entornos empresariales donde la estabilidad es prioritaria.</p> <p>Hardware modesto: Ubuntu funciona perfectamente en equipos que para Windows ser\u00edan demasiado lentos. Esto permite alargar la vida \u00fatil del hardware existente.</p>"},{"location":"07_02_ubuntudesktop/#ubuntu-desktop-en-una-empresa","title":"Ubuntu Desktop en una empresa","text":"<p>No se trata de sustituir Windows por Linux en todos los equipos. Cada sistema tiene sus fortalezas y sus casos de uso ideales:</p> <p>Departamentos de desarrollo: Los programadores suelen preferir Linux porque muchas herramientas de desarrollo (Docker, Kubernetes, compiladores, etc.) funcionan mejor o est\u00e1n dise\u00f1adas espec\u00edficamente para este sistema.</p> <p>Servidores convertidos en estaciones de trabajo: Equipos que gestionan servicios web, bases de datos o aplicaciones espec\u00edficas que solo existen para Linux.</p> <p>Equipos de bajo coste: Cuando el presupuesto es limitado, Ubuntu permite aprovechar hardware antiguo que con Windows 11 ser\u00eda pr\u00e1cticamente inservible.</p> <p>Entornos educativos: Muchas instituciones educativas optan por Ubuntu para ense\u00f1ar inform\u00e1tica sin depender de licencias comerciales.</p> <p>Seguridad y privacidad: Organizaciones con requisitos estrictos de seguridad aprecian el control total que ofrece Linux sobre el sistema.</p>"},{"location":"07_02_ubuntudesktop/#lo-que-vamos-a-aprender","title":"Lo que vamos a aprender","text":"<p>En este apartado vamos a preparar un equipo Ubuntu Desktop completamente funcional e integrado en nuestra red ISCASOX. El objetivo es que al terminar teng\u00e1is:</p> <p>Un equipo Ubuntu Desktop correctamente instalado y configurado que funcione como estaci\u00f3n de trabajo para cualquier empleado de la empresa.</p> <p>Conocimientos sobre las diferencias fundamentales entre trabajar con Windows y con Ubuntu desde el punto de vista del usuario final.</p> <p>Capacidad para instalar y gestionar software en Ubuntu, tanto desde interfaz gr\u00e1fica como desde terminal.</p> <p>Un equipo Ubuntu completamente integrado con el dominio Active Directory de Windows Server, permitiendo que los usuarios del dominio inicien sesi\u00f3n con sus credenciales corporativas.</p>"},{"location":"07_02_ubuntudesktop/#como-trabajar-este-apartado","title":"C\u00f3mo trabajar este apartado","text":"<p>Este apartado est\u00e1 dise\u00f1ado para que pod\u00e1is seguirlo de forma aut\u00f3noma, pero prestad atenci\u00f3n a estos puntos:</p> <p>Haced snapshots frecuentes: Antes de realizar cambios importantes en la m\u00e1quina virtual, cread una instant\u00e1nea. Si algo sale mal, podr\u00e9is volver atr\u00e1s sin perder el trabajo anterior.</p> <p>No os salt\u00e9is pasos: Aunque Ubuntu Desktop es m\u00e1s intuitivo que Server, seguir el orden propuesto es importante para que todo funcione correctamente.</p> <p>Probad todo lo que instal\u00e9is: No os limit\u00e9is a ejecutar comandos. Entended qu\u00e9 hace cada herramienta y probadla realmente.</p> <p>Comparad con Windows: Cuando aprend\u00e1is algo nuevo, preguntaos \"\u00bfc\u00f3mo har\u00eda esto en Windows?\". Las analog\u00edas os ayudar\u00e1n a entender mejor.</p> <p>Comenzaremos instalando Ubuntu Desktop siguiendo una gu\u00eda externa muy completa. Despu\u00e9s configuraremos el sistema, instalaremos herramientas esenciales y finalmente lo integraremos con nuestro dominio Windows Server. Al final de este apartado, tendr\u00e9is una comprensi\u00f3n s\u00f3lida de c\u00f3mo funciona Linux desde el punto de vista del usuario final.</p>"},{"location":"07_02_ubuntudesktop/#instalacion-de-ubuntu-desktop-2204-lts","title":"Instalaci\u00f3n de Ubuntu Desktop 22.04 LTS","text":"<p>Ubuntu Desktop 22.04</p> <p>Vamos a usar la versi\u00f3n 22.04 para trabajar en clase con Oracle VirtualBox, puesto que la versi\u00f3n 24.04 en ocasiones tiene problemas de estabilidad al ser virtualizado.</p> <p>Para la instalaci\u00f3n de Ubuntu Desktop vamos a utilizar una gu\u00eda externa muy completa que explica paso a paso todo el proceso. No tiene sentido duplicar ese contenido aqu\u00ed cuando ya existe documentaci\u00f3n excelente.</p> <p>Gu\u00eda de instalaci\u00f3n: Instalar Ubuntu 24.04 LTS (Noble Numbat) desde cero</p>"},{"location":"07_02_ubuntudesktop/#aspectos-importantes-a-tener-en-cuenta-durante-la-instalacion","title":"Aspectos importantes a tener en cuenta durante la instalaci\u00f3n","text":"<p>Antes de comenzar la instalaci\u00f3n, tened en cuenta estos puntos espec\u00edficos para nuestro entorno ISCASOX:</p> <p>Configuraci\u00f3n de la m\u00e1quina virtual en VirtualBox:</p> <ul> <li>Nombre: <code>PCXXX_Ubuntu</code> (donde XXX es vuestro nombre)</li> <li>Memoria RAM: 4096 MB (4 GB) - Desktop necesita m\u00e1s memoria que Server</li> <li>Procesadores: 1 CPUs</li> <li>Disco duro: 25 GB (reservado din\u00e1micamente)</li> <li>Memoria Video: 128MB + aceleraci\u00f3n 3D</li> <li>Tarjeta de red: Red interna <code>red_departamentos</code> (la misma que usan los PCs de empresa)</li> </ul> <p>Memoria a asignar</p> <p>La recomencacion inicial es usar 4 GB para Ubuntu Desktop, aunque funciona pefectamente con 2 GB. Una </p> <p>Una buena t\u00e1ctica ser\u00eda asignar 4 GB durante la instalaci\u00f3n para que sea m\u00e1s r\u00e1pida y despu\u00e9s bajar a 2 GB puesto que no vamos a realizar cargas pesadas sobre el equipo, tal solo configuraciones desde el terminal.</p> <p>Durante la instalaci\u00f3n:</p> <p>Cuando os pregunte por el tipo de instalaci\u00f3n, elegid Instalaci\u00f3n normal (incluye navegador web, reproductores multimedia y aplicaciones de oficina b\u00e1sicas).</p> <p>Marcad la opci\u00f3n Descargar actualizaciones mientras se instala Ubuntu para tener el sistema actualizado desde el principio.</p> <p>Para el nombre del equipo, usad <code>pcXXX-ubuntu</code> (en min\u00fasculas, con vuestro nombre).</p> <p>Para el nombre de usuario, usad vuestro nombre en min\u00fasculas (por ejemplo, <code>sergio</code>). Este ser\u00e1 vuestro usuario administrador local.</p> <p>Elegid una contrase\u00f1a sencilla de recordar (estamos en un entorno de laboratorio).</p> <p>Configuraci\u00f3n de red inicial:</p> <p>Durante la instalaci\u00f3n, la configuraci\u00f3n de red ser\u00e1 autom\u00e1tica (DHCP). Esto est\u00e1 bien para empezar. M\u00e1s adelante configuraremos una IP est\u00e1tica cuando integremos el equipo con Active Directory.</p> <p>Tiempo estimado: La instalaci\u00f3n completa suele tardar entre 15 y 30 minutos, dependiendo de la velocidad del disco duro y de la conexi\u00f3n a Internet.</p>"},{"location":"07_02_ubuntudesktop/#despues-de-la-instalacion","title":"Despu\u00e9s de la instalaci\u00f3n","text":"<p>Una vez finalizada la instalaci\u00f3n, el sistema se reiniciar\u00e1. Iniciad sesi\u00f3n con vuestro usuario y contrase\u00f1a.</p> <p>Aparecer\u00e1 un asistente de bienvenida que os guiar\u00e1 por las primeras configuraciones. Pod\u00e9is:</p> <ul> <li>Conectar cuentas online (Google, Microsoft, etc.) - no lo hag\u00e1is en este entorno de laboratorio</li> <li>Activar o desactivar la telemetr\u00eda - elegid lo que prefir\u00e1is</li> <li>Configurar aplicaciones - aceptad las sugerencias por defecto</li> </ul> <p>Al llegar al escritorio, familiarizaos con la interfaz:</p> <p>Panel superior: Muestra la hora, acceso a la configuraci\u00f3n del sistema, estado de red, volumen, etc. Es similar a la barra de tareas de Windows pero m\u00e1s minimalista.</p> <p>Dock lateral izquierdo: Contiene accesos directos a aplicaciones frecuentes. Es el equivalente al men\u00fa Inicio/barra de tareas de Windows.</p> <p>Actividades (esquina superior izquierda): Muestra todas las ventanas abiertas y permite buscar aplicaciones. Es muy potente y r\u00e1pido una vez te acostumbras.</p> <p>Aplicaciones: Click en el icono de cuadr\u00edcula del Dock para ver todas las aplicaciones instaladas.</p>"},{"location":"07_02_ubuntudesktop/#verificacion-basica-del-sistema","title":"Verificaci\u00f3n b\u00e1sica del sistema","text":"<p>Antes de continuar, verificad que todo funciona correctamente:</p> <p>Abrid el navegador Firefox (viene preinstalado) y comprobad que ten\u00e9is conexi\u00f3n a Internet.</p> <p>Abrid Configuraci\u00f3n (icono de engranaje en el panel superior o en el Dock) y explorad brevemente las opciones disponibles. Es similar al Panel de Control de Windows.</p> <p>Abrid una Terminal (pod\u00e9is buscarla escribiendo \"terminal\" en Actividades o pulsar <code>Ctrl+Alt+T</code>). Ejecutad:</p> <pre><code>uname -a\n</code></pre> <p>Deber\u00eda mostrar informaci\u00f3n del sistema confirmando que est\u00e1is usando Ubuntu 24.04.</p> <p>Si todo esto funciona, est\u00e1is listos para continuar con la configuraci\u00f3n post-instalaci\u00f3n.</p>"},{"location":"07_02_ubuntudesktop/#configuracion-post-instalacion","title":"Configuraci\u00f3n post-instalaci\u00f3n","text":"<p>Una vez instalado Ubuntu Desktop, hay varias configuraciones y ajustes que debemos realizar para tener un sistema completamente funcional y optimizado para trabajar en VirtualBox dentro de nuestra red ISCASOX.</p>"},{"location":"07_02_ubuntudesktop/#actualizacion-completa-del-sistema","title":"Actualizaci\u00f3n completa del sistema","text":"<p>Lo primero que debemos hacer despu\u00e9s de instalar cualquier sistema operativo es actualizarlo completamente. Esto asegura que tenemos todas las correcciones de seguridad y las \u00faltimas versiones del software.</p> <p>Abrimos una terminal (<code>Ctrl+Alt+T</code>) y ejecutamos:</p> <pre><code>sudo apt update\n</code></pre> <p>Este comando actualiza la lista de paquetes disponibles desde los repositorios de Ubuntu. Es como refrescar el cat\u00e1logo de software disponible.</p> <pre><code>sudo apt upgrade -y\n</code></pre> <p>Este comando instala todas las actualizaciones disponibles. El par\u00e1metro <code>-y</code> responde autom\u00e1ticamente \"s\u00ed\" a las confirmaciones. La primera vez puede tardar varios minutos y descargar cientos de megabytes de actualizaciones.</p> <p>Cuando termine, es recomendable reiniciar el sistema para que todos los cambios tengan efecto:</p> <pre><code>sudo reboot\n</code></pre>"},{"location":"07_02_ubuntudesktop/#instalacion-de-virtualbox-guest-additions","title":"Instalaci\u00f3n de VirtualBox Guest Additions","text":"<p>Las Guest Additions son un conjunto de controladores y aplicaciones que mejoran enormemente la experiencia de uso de una m\u00e1quina virtual en VirtualBox. Sin ellas, la integraci\u00f3n entre el sistema host y el invitado es muy limitada.</p> <p>\u00bfQu\u00e9 mejoras aportan las Guest Additions?</p> <p>Resoluci\u00f3n de pantalla adaptativa: La ventana de la m\u00e1quina virtual se redimensiona autom\u00e1ticamente al cambiar el tama\u00f1o de la ventana. Sin Guest Additions, la resoluci\u00f3n se queda fija y ver\u00edais barras de desplazamiento.</p> <p>Portapapeles compartido: Pod\u00e9is copiar y pegar texto entre vuestro sistema host (Windows) y la m\u00e1quina virtual Ubuntu. Extremadamente \u00fatil para copiar comandos de estos apuntes.</p> <p>Carpetas compartidas: Permite acceder a carpetas del sistema host desde Ubuntu, facilitando el intercambio de archivos.</p> <p>Integraci\u00f3n del rat\u00f3n: El rat\u00f3n entra y sale de la ventana de la m\u00e1quina virtual sin necesidad de pulsar ninguna tecla especial.</p> <p>Mejor rendimiento gr\u00e1fico: Aceleraci\u00f3n 3D y mejor rendimiento general de la interfaz gr\u00e1fica.</p>"},{"location":"07_02_ubuntudesktop/#proceso-de-instalacion","title":"Proceso de instalaci\u00f3n","text":"<p>Primero instalamos los paquetes previos necesarios para compilar las Guest Additions:</p> <pre><code>sudo apt install -y build-essential dkms linux-headers-$(uname -r)\n</code></pre> <p>Estos paquetes incluyen:</p> <ul> <li><code>build-essential</code>: herramientas de compilaci\u00f3n (gcc, make, etc.)</li> <li><code>dkms</code>: permite que los m\u00f3dulos del kernel se recompilen autom\u00e1ticamente tras actualizaciones</li> <li><code>linux-headers</code>: archivos de cabecera del kernel actual</li> </ul> <p>Ahora, desde el men\u00fa de VirtualBox (la ventana donde se ejecuta la m\u00e1quina virtual), vamos a Dispositivos \u2192 Insertar imagen de CD de las Guest Additions.</p> <p>Esto \"inserta\" un CD virtual en la m\u00e1quina virtual con los archivos de instalaci\u00f3n. Ubuntu detectar\u00e1 autom\u00e1ticamente el CD y si pulsamos el simbolo del disco en el dock lateral, abrir\u00e1 en el administrador de archivos el contenido del discos y podemos instalar los guest additions simplemente haciendo clic en (2) Ejecutar programa.</p> Inserci\u00f3n de de imagen CD Guest Additions <p>Tambi\u00e9n es posible ejecutar desde el terminal (3), en este caso haciendo click derecho en cualquier espacio donde est\u00e1n los archivos, tendremos un men\u00fa contextual con la opci\u00f3n de (3) Abrir en una terminal. Esto nos abre una terminal desde donde podemos instalar mediante el comando:</p> <pre><code>sudo ./VBoxLinuxAdditions.run \n</code></pre> Comando instalaci\u00f3n Guest Additions <p>La instalaci\u00f3n mostrar\u00e1 varias l\u00edneas indicando qu\u00e9 componentes se est\u00e1n compilando e instalando. Al final deber\u00eda mostrar un mensaje confirmando que todo se instal\u00f3 correctamente.</p> <p>Una vez terminada la instalaci\u00f3n, reiniciamos el sistema:</p> <pre><code>sudo reboot\n</code></pre> <p>Verificaci\u00f3n: Despu\u00e9s del reinicio, probad a redimensionar la ventana de VirtualBox. La resoluci\u00f3n de Ubuntu deber\u00eda ajustarse autom\u00e1ticamente. Tambi\u00e9n probad a copiar texto desde estos apuntes y pegarlo en la terminal de Ubuntu (<code>Ctrl+Shift+V</code> en terminal).</p> <p>Si el portapapeles compartido no funciona, id a Dispositivos \u2192 Portapapeles compartido \u2192 Bidireccional en el men\u00fa de VirtualBox.</p>"},{"location":"07_02_ubuntudesktop/#herramientas-graficas-basicas","title":"Herramientas gr\u00e1ficas b\u00e1sicas","text":"<p>Ubuntu Desktop viene con un conjunto de aplicaciones preinstaladas, pero es \u00fatil conocer d\u00f3nde encontrar herramientas del sistema que equivalen a las que conoc\u00e9is de Windows.</p>"},{"location":"07_02_ubuntudesktop/#explorador-de-archivos-nautilus","title":"Explorador de archivos (Nautilus)","text":"<p>El gestor de archivos de Ubuntu se llama Nautilus (aunque simplemente se muestra como \"Archivos\"). Es el equivalente al Explorador de Windows.</p> <p>Para abrirlo, hacemos clic en el icono de carpeta del Dock o buscamos \"Archivos\" en Actividades.</p> <p>Navegaci\u00f3n b\u00e1sica:</p> <p>El panel izquierdo muestra ubicaciones r\u00e1pidas: Escritorio, Documentos, Descargas, Im\u00e1genes, V\u00eddeos, M\u00fasica y ubicaciones de red.</p> <p>La carpeta personal del usuario (<code>/home/sergio</code> en nuestro caso) es el equivalente a <code>C:\\Users\\sergio</code> en Windows. Aqu\u00ed se guardan todos nuestros documentos y configuraciones personales.</p> <p>Podemos crear marcadores de carpetas frecuentes arrastr\u00e1ndolas al panel izquierdo o usando <code>Ctrl+D</code>.</p> <p>Funciones \u00fatiles:</p> <ul> <li><code>Ctrl+H</code>: muestra archivos y carpetas ocultos (los que empiezan por punto <code>.</code>)</li> <li><code>Ctrl+L</code>: muestra la barra de ubicaci\u00f3n como texto editable (para copiar o pegar rutas)</li> <li>Clic derecho en cualquier carpeta \u2192 Abrir en la terminal: abre una terminal en esa ubicaci\u00f3n</li> </ul>"},{"location":"07_02_ubuntudesktop/#monitor-del-sistema","title":"Monitor del sistema","text":"<p>Ubuntu incluye un monitor del sistema similar al Administrador de tareas de Windows. Para abrirlo:</p> <p>Buscamos \"Monitor del sistema\" en Actividades, o ejecutamos en terminal:</p> <pre><code>gnome-system-monitor &amp;\n</code></pre> <p>El s\u00edmbolo <code>&amp;</code> al final hace que el programa se ejecute en segundo plano y nos devuelva el control de la terminal.</p> <p>El Monitor del sistema muestra:</p> <p>Pesta\u00f1a Procesos: todos los procesos en ejecuci\u00f3n, su uso de CPU, memoria, etc. Similar a la pesta\u00f1a \"Procesos\" del Administrador de tareas de Windows.</p> <p>Pesta\u00f1a Recursos: gr\u00e1ficos en tiempo real de uso de CPU, memoria, red y disco. Similar a la pesta\u00f1a \"Rendimiento\" de Windows.</p> <p>Pesta\u00f1a Sistemas de archivos: muestra las particiones montadas y su espacio disponible.</p> <p>Podemos finalizar procesos que no respondan haciendo clic derecho \u2192 Matar proceso (equivalente a \"Finalizar tarea\" en Windows).</p>"},{"location":"07_02_ubuntudesktop/#editor-de-texto","title":"Editor de texto","text":"<p>Ubuntu incluye gedit, un editor de texto simple pero potente. Es similar al Bloc de notas de Windows pero con m\u00e1s funciones (resaltado de sintaxis, numeraci\u00f3n de l\u00edneas, etc.).</p> <p>Para abrirlo buscamos \"Editor de texto\" o ejecutamos:</p> <pre><code>gedit &amp;\n</code></pre> <p>Tambi\u00e9n existe nano que ya conocemos de Ubuntu Server, disponible desde terminal. Es m\u00e1s b\u00e1sico pero \u00fatil cuando trabajamos sin interfaz gr\u00e1fica.</p>"},{"location":"07_02_ubuntudesktop/#configuracion-del-sistema","title":"Configuraci\u00f3n del sistema","text":"<p>La aplicaci\u00f3n Configuraci\u00f3n (Settings) es el equivalente al Panel de Control de Windows. Aqu\u00ed podemos ajustar pr\u00e1cticamente todo el sistema:</p> <ul> <li>Wi-Fi / Red: configuraci\u00f3n de red (aunque nosotros usaremos Netplan para configuraci\u00f3n avanzada)</li> <li>Apariencia: tema claro/oscuro, color de acento, fondo de pantalla</li> <li>Notificaciones: controlar qu\u00e9 aplicaciones pueden mostrar notificaciones</li> <li>Aplicaciones: gestionar aplicaciones predeterminadas y permisos</li> <li>Privacidad: control de servicios de localizaci\u00f3n, compartici\u00f3n de uso, etc.</li> <li>Usuarios: gestionar cuentas de usuario del sistema (equivalente a Cuentas de usuario de Windows)</li> </ul> <p>Explorad brevemente estas opciones para familiarizaros con d\u00f3nde se configuran los aspectos m\u00e1s comunes del sistema.</p>"},{"location":"07_02_ubuntudesktop/#captura-de-pantalla","title":"Captura de pantalla","text":"<p>Para tomar capturas de pantalla (muy \u00fatil para documentar vuestro trabajo):</p> <ul> <li><code>Impr Pant</code> (Print Screen): captura toda la pantalla</li> <li><code>Alt+Impr Pant</code>: captura solo la ventana activa</li> <li><code>Shift+Impr Pant</code>: permite seleccionar un \u00e1rea manualmente</li> </ul> <p>Las capturas se guardan autom\u00e1ticamente en la carpeta <code>Im\u00e1genes</code>.</p> <p>Tambi\u00e9n podemos buscar la aplicaci\u00f3n Capturas (Screenshot) para m\u00e1s opciones.</p>"},{"location":"07_02_ubuntudesktop/#gestion-de-paquetes-apt-snap-y-software","title":"Gesti\u00f3n de paquetes: apt, snap y Software","text":"<p>Una de las diferencias m\u00e1s importantes entre Windows y Linux es la forma de instalar software. En Windows estamos acostumbrados a descargar archivos <code>.exe</code> o <code>.msi</code> de p\u00e1ginas web y ejecutarlos. En Linux, el software se gestiona principalmente a trav\u00e9s de gestores de paquetes, que funcionan como una tienda de aplicaciones centralizada, segura y automatizada.</p>"},{"location":"07_02_ubuntudesktop/#que-es-un-gestor-de-paquetes","title":"\u00bfQu\u00e9 es un gestor de paquetes?","text":"<p>Un gestor de paquetes es un sistema que:</p> <p>Descarga software de repositorios oficiales verificados (no de p\u00e1ginas web aleatorias).</p> <p>Instala autom\u00e1ticamente todas las dependencias necesarias. Si un programa necesita librer\u00edas o componentes adicionales, el gestor los instala autom\u00e1ticamente.</p> <p>Mantiene el software actualizado de forma centralizada. Un solo comando actualiza todo el sistema y todas las aplicaciones.</p> <p>Permite desinstalar limpiamente sin dejar archivos residuales por todo el sistema.</p> <p>Verifica la integridad y autenticidad del software mediante firmas digitales.</p> <p>Es como si Windows Update gestionara no solo el sistema operativo, sino tambi\u00e9n todas las aplicaciones instaladas (navegador, editores, reproductores, etc.) desde un \u00fanico punto.</p>"},{"location":"07_02_ubuntudesktop/#apt-el-gestor-tradicional-de-debianubuntu","title":"APT: el gestor tradicional de Debian/Ubuntu","text":"<p>APT (Advanced Package Tool) es el gestor de paquetes por excelencia en Ubuntu y Debian. Gestiona paquetes en formato <code>.deb</code>.</p>"},{"location":"07_02_ubuntudesktop/#comandos-fundamentales-de-apt","title":"Comandos fundamentales de apt","text":"<p>Actualizar la lista de paquetes disponibles:</p> <pre><code>sudo apt update\n</code></pre> <p>Esto no instala nada, solo descarga la informaci\u00f3n actualizada sobre qu\u00e9 paquetes existen y qu\u00e9 versiones est\u00e1n disponibles. Es como \"refrescar el cat\u00e1logo\". Debemos ejecutarlo antes de instalar o actualizar paquetes.</p> <p>Actualizar todos los paquetes instalados:</p> <pre><code>sudo apt upgrade\n</code></pre> <p>Instala las versiones m\u00e1s recientes de todos los paquetes ya instalados. Es equivalente a ejecutar Windows Update.</p> <p>Buscar un paquete:</p> <pre><code>apt search nombre_programa\n</code></pre> <p>Busca en los repositorios paquetes que contengan ese nombre o descripci\u00f3n. No necesita <code>sudo</code> porque solo consulta informaci\u00f3n.</p> <p>Ver informaci\u00f3n detallada de un paquete:</p> <pre><code>apt show nombre_paquete\n</code></pre> <p>Muestra descripci\u00f3n completa, versi\u00f3n, tama\u00f1o, dependencias, etc.</p> <p>Instalar un paquete:</p> <pre><code>sudo apt install nombre_paquete\n</code></pre> <p>Descarga e instala el paquete junto con todas sus dependencias autom\u00e1ticamente.</p> <p>Desinstalar un paquete:</p> <pre><code>sudo apt remove nombre_paquete\n</code></pre> <p>Elimina el paquete pero mantiene sus archivos de configuraci\u00f3n.</p> <pre><code>sudo apt purge nombre_paquete\n</code></pre> <p>Elimina el paquete y tambi\u00e9n sus archivos de configuraci\u00f3n.</p> <p>Limpiar paquetes innecesarios:</p> <pre><code>sudo apt autoremove\n</code></pre> <p>Elimina paquetes que fueron instalados como dependencias pero ya no son necesarios.</p> <pre><code>sudo apt autoclean\n</code></pre> <p>Elimina archivos de paquetes descargados antiguos para liberar espacio.</p>"},{"location":"07_02_ubuntudesktop/#ejemplo-practico-instalar-tree","title":"Ejemplo pr\u00e1ctico: instalar tree","text":"<p><code>tree</code> es una utilidad muy \u00fatil que muestra la estructura de directorios en forma de \u00e1rbol jer\u00e1rquico. Es mucho m\u00e1s visual que <code>ls -R</code>.</p> <pre><code>sudo apt update\nsudo apt install -y tree\n</code></pre> <p>Una vez instalado, podemos usarlo:</p> <pre><code>tree /home/sergio/\n</code></pre> <p>Muestra toda la estructura de carpetas y archivos dentro de Documentos en forma de \u00e1rbol.</p> <pre><code>tree -L 2 /home/sergio\n</code></pre> <p>Muestra solo 2 niveles de profundidad (\u00fatil para carpetas muy grandes).</p> <pre><code>tree -d /usr\n</code></pre> <p>Muestra solo directorios, sin archivos (<code>-d</code> significa \"directories only\").</p>"},{"location":"07_02_ubuntudesktop/#snap-paquetes-universales-y-autocontenidos","title":"Snap: paquetes universales y autocontenidos","text":"<p>Snap es un sistema de paquetes m\u00e1s moderno desarrollado por Canonical (la empresa detr\u00e1s de Ubuntu). Los paquetes snap tienen caracter\u00edsticas diferentes a los paquetes apt tradicionales:</p> <p>Autocontenidos: incluyen todas sus dependencias dentro del propio paquete. Esto garantiza que funcionar\u00e1n igual en cualquier versi\u00f3n de Ubuntu (incluso en otras distribuciones Linux).</p> <p>Aislados: se ejecutan en un entorno aislado (sandbox), lo que mejora la seguridad. No pueden acceder a todo el sistema libremente.</p> <p>Actualizaciones autom\u00e1ticas: los snaps se actualizan autom\u00e1ticamente en segundo plano sin intervenci\u00f3n del usuario.</p> <p>Versiones m\u00faltiples: pueden coexistir diferentes versiones del mismo snap instaladas simult\u00e1neamente.</p>"},{"location":"07_02_ubuntudesktop/#comandos-basicos-de-snap","title":"Comandos b\u00e1sicos de snap","text":"<p>Buscar un paquete:</p> <pre><code>snap find nombre_aplicacion\n</code></pre> <p>Instalar un snap:</p> <pre><code>sudo snap install nombre_paquete\n</code></pre> <p>Listar snaps instalados:</p> <pre><code>snap list\n</code></pre> <p>Actualizar un snap:</p> <pre><code>sudo snap refresh nombre_paquete\n</code></pre> <p>O actualizar todos:</p> <pre><code>sudo snap refresh\n</code></pre> <p>Desinstalar un snap:</p> <pre><code>sudo snap remove nombre_paquete\n</code></pre>"},{"location":"07_02_ubuntudesktop/#cuando-usar-apt-y-cuando-snap","title":"\u00bfCu\u00e1ndo usar apt y cu\u00e1ndo snap?","text":"<p>Usad apt para:</p> <ul> <li>Software tradicional de Linux (utilidades del sistema, servidores, herramientas de terminal)</li> <li>Cuando quer\u00e9is m\u00e1ximo rendimiento y m\u00ednimo uso de espacio</li> <li>Cuando necesit\u00e1is control total sobre el software</li> </ul> <p>Usad snap para:</p> <ul> <li>Aplicaciones modernas que se actualizan frecuentemente (navegadores, editores, herramientas de desarrollo)</li> <li>Software que no est\u00e1 disponible en los repositorios apt</li> <li>Cuando quer\u00e9is la \u00faltima versi\u00f3n de un programa sin esperar a que se actualice en los repositorios</li> </ul> <p>En general, si un programa est\u00e1 disponible tanto en apt como en snap, preferid apt. Los snaps ocupan m\u00e1s espacio y pueden ser ligeramente m\u00e1s lentos al iniciarse.</p>"},{"location":"07_02_ubuntudesktop/#tienda-de-aplicaciones-grafica-gnome-software","title":"Tienda de aplicaciones gr\u00e1fica (GNOME Software)","text":"<p>Ubuntu incluye una tienda de aplicaciones gr\u00e1fica llamada Software o Tienda de Ubuntu, similar a la Microsoft Store de Windows.</p> <p>Para abrirla, buscamos \"Software\" en Actividades o hacemos clic en el icono de maleta del Dock.</p> <p>Desde aqu\u00ed podemos:</p> <ul> <li>Explorar aplicaciones por categor\u00edas (Productividad, Juegos, Desarrollo, etc.)</li> <li>Buscar aplicaciones por nombre</li> <li>Instalar y desinstalar con un solo clic</li> <li>Ver rese\u00f1as y valoraciones de otros usuarios</li> <li>Actualizar aplicaciones instaladas</li> </ul> <p>La tienda gestiona tanto paquetes apt como snaps de forma transparente. Es c\u00f3moda para usuarios que no quieren usar la terminal, pero los administradores suelen preferir la terminal porque es m\u00e1s r\u00e1pida y permite automatizaci\u00f3n.</p>"},{"location":"07_02_ubuntudesktop/#instalaciones-practicas","title":"Instalaciones pr\u00e1cticas","text":"<p>Vamos a instalar varias aplicaciones para familiarizarnos con los diferentes m\u00e9todos.</p>"},{"location":"07_02_ubuntudesktop/#gparted-editor-de-particiones-grafico","title":"GParted: editor de particiones gr\u00e1fico","text":"<p>GParted es el equivalente a la Administraci\u00f3n de discos de Windows. Permite crear, redimensionar, formatear y gestionar particiones de forma visual.</p> <pre><code>sudo apt install -y gparted\n</code></pre> <p>Una vez instalado, lo encontramos buscando \"GParted\" en Actividades. Requiere privilegios de administrador para ejecutarse, por lo que pedir\u00e1 contrase\u00f1a al abrirlo.</p> <p>ADVERTENCIA: GParted es una herramienta potente. Modificar particiones incorrectamente puede causar p\u00e9rdida de datos. Usadla con precauci\u00f3n y siempre en m\u00e1quinas virtuales para practicar.</p>"},{"location":"07_02_ubuntudesktop/#conky-informacion-del-sistema","title":"Conky: Informaci\u00f3n del sistema","text":"<p>Conky permite ver informaci\u00f3n sobre el sistema. Para su instalaci\u00f3n</p> <pre><code>sudo apt install -y conky\n</code></pre> <p>Una vez instalado, lo ejecutamos desde terminal:</p> <pre><code>conky &amp;\n</code></pre> Ejecuci\u00f3n de conky <p>Ejecutar Conky al inicio del sistema:</p> <p>Para que Plank se inicie autom\u00e1ticamente cada vez que iniciamos sesi\u00f3n, lo a\u00f1adimos a las aplicaciones de inicio:</p> <ol> <li>Abrimos Configuraci\u00f3n</li> <li>Vamos a Aplicaciones</li> <li>Buscamos la secci\u00f3n Aplicaciones al inicio o Inicio autom\u00e1tico</li> <li>Hacemos clic en A\u00f1adir o el bot\u00f3n <code>+</code></li> <li>En \"Nombre\" escribimos: <code>Conky</code></li> <li>En \"Comando\" escribimos: <code>conky</code></li> <li>Opcionalmente a\u00f1adimos una descripci\u00f3n</li> <li>Guardamos</li> </ol> <p>Ahora Plank se iniciar\u00e1 autom\u00e1ticamente en cada inicio de sesi\u00f3n.</p> <p>Si queremos configurar cualquier programa para que se ejecute al inicio, seguimos el mismo proceso, solo necesitamos conocer el comando que lo ejecuta.</p>"},{"location":"07_02_ubuntudesktop/#instalacion-de-otras-herramientas","title":"Instalaci\u00f3n de otras herramientas","text":"<p>Instalad los siguientes programas usando el m\u00e9todo que prefir\u00e1is (apt, snap o tienda gr\u00e1fica):</p> <p>GIMP: editor de im\u00e1genes similar a Photoshop. Buscadlo en la tienda de aplicaciones o instaladlo con:</p> <pre><code>sudo apt install -y gimp\n</code></pre> <p>VLC: reproductor multimedia que puede reproducir pr\u00e1cticamente cualquier formato de audio y v\u00eddeo.</p> <pre><code>sudo snap install vlc\n</code></pre> <p>htop: monitor del sistema mejorado para terminal (versi\u00f3n avanzada de <code>top</code>).</p> <pre><code>sudo apt install -y htop\n</code></pre> <p>Ejecutadlo con:</p> <pre><code>htop\n</code></pre>"},{"location":"07_03_ubuntudesktop_red/","title":"Ubuntu Desktop. Configuraci\u00f3n de red con Netplan y NetworkManager","text":"<p>En este apartado vamos a ver c\u00f3mo configurar la red de nuestro equipo Ubuntu Desktop. Para que todo fucione correctamente:</p> <ul> <li>El servidor Windows Server debe estar iniciado</li> <li>La red en virtual box debes configurarla para comunicarte con el servidor</li> </ul>"},{"location":"07_03_ubuntudesktop_red/#introduccion-a-la-gestion-de-red-en-ubuntu-desktop","title":"Introducci\u00f3n a la gesti\u00f3n de red en Ubuntu Desktop","text":"<p>La configuraci\u00f3n de red en Ubuntu Desktop funciona de manera diferente a Ubuntu Server, y es importante entender por qu\u00e9 y cu\u00e1ndo usar cada sistema. Ubuntu Desktop viene configurado con NetworkManager por defecto, mientras que Ubuntu Server usa Netplan con <code>systemd-networkd</code>. Ambos sistemas pueden coexistir, pero es fundamental entender sus diferencias y cu\u00e1ndo usar cada uno.</p>"},{"location":"07_03_ubuntudesktop_red/#networkmanager-vs-netplan-cual-usar","title":"NetworkManager vs Netplan: \u00bfcu\u00e1l usar?","text":"<p>NetworkManager est\u00e1 dise\u00f1ado para equipos de escritorio donde:</p> <ul> <li>La configuraci\u00f3n de red cambia frecuentemente (WiFi de casa, cable en la oficina, hotspot del m\u00f3vil, etc.)</li> <li>El usuario necesita cambiar configuraciones sin ser administrador</li> <li>Se valora la comodidad de una interfaz gr\u00e1fica</li> <li>La m\u00e1quina se mueve entre diferentes redes</li> </ul> <p>Netplan con <code>systemd-networkd</code> est\u00e1 dise\u00f1ado para servidores donde:</p> <ul> <li>La configuraci\u00f3n de red es est\u00e1tica y raramente cambia</li> <li>Se prefiere la configuraci\u00f3n mediante archivos de texto para poder versionarla y automatizarla</li> <li>No hay interfaz gr\u00e1fica disponible</li> <li>Se requiere configuraci\u00f3n avanzada de red (bridges, VLANs, bonding, etc.)</li> </ul>"},{"location":"07_03_ubuntudesktop_red/#configuracion-por-defecto-en-ubuntu-desktop","title":"Configuraci\u00f3n por defecto en Ubuntu Desktop","text":"<p>Por defecto, Ubuntu Desktop delega toda la gesti\u00f3n de red en NetworkManager. Si miramos la configuraci\u00f3n de Netplan:</p> <pre><code>cat /etc/netplan/*.yaml\n</code></pre> <p>Probablemente veremos algo as\u00ed:</p> <pre><code>network:\n  version: 2\n  renderer: NetworkManager\n</code></pre> <p>Esta configuraci\u00f3n significa: \"Netplan, no configures nada t\u00fa. Deja que NetworkManager gestione toda la red\".</p> <p>Esta es la configuraci\u00f3n \u00f3ptima para un equipo Desktop de uso general, y no deber\u00edamos cambiarla a menos que tengamos una raz\u00f3n espec\u00edfica.</p>"},{"location":"07_03_ubuntudesktop_red/#networkmanager-configuracion-grafica","title":"NetworkManager: configuraci\u00f3n gr\u00e1fica","text":"<p>Para la mayor\u00eda de situaciones en un equipo Desktop, NetworkManager es la herramienta adecuada. Vamos a ver c\u00f3mo configurar los aspectos m\u00e1s importantes desde su interfaz gr\u00e1fica.</p>"},{"location":"07_03_ubuntudesktop_red/#acceso-a-la-configuracion","title":"Acceso a la configuraci\u00f3n","text":"<p>Para acceder a la configuraci\u00f3n de red:</p> <ol> <li>Hacemos clic en el icono de red del panel superior (esquina superior derecha)</li> <li>En el men\u00fa desplegable, seleccionamos Configuraci\u00f3n o Configuraci\u00f3n de red</li> <li>Se abre la aplicaci\u00f3n de Configuraci\u00f3n del sistema en la secci\u00f3n de Red</li> </ol> <p>Alternativamente, podemos: - Buscar \"Red\" o \"Network\" en Actividades - Abrir Configuraci\u00f3n y buscar la secci\u00f3n Red</p>"},{"location":"07_03_ubuntudesktop_red/#configuracion-dhcp-automatica-por-defecto","title":"Configuraci\u00f3n DHCP autom\u00e1tica (por defecto)","text":"<p>Esta es la configuraci\u00f3n que viene por defecto y es adecuada para la mayor\u00eda de situaciones:</p> <ol> <li>En la ventana de configuraci\u00f3n de red, vemos nuestra conexi\u00f3n \"Conexi\u00f3n cableada\" o \"Wired\"</li> <li>Junto a ella hay un icono de engranaje \u2699\ufe0f </li> <li>Hacemos clic en el engranaje para ver los detalles</li> </ol> <p>En la pesta\u00f1a IPv4, veremos:</p> <ul> <li>M\u00e9todo IPv4: Autom\u00e1tico (DHCP)</li> <li>Direcciones autom\u00e1ticas: Activado</li> <li>DNS autom\u00e1tico: Activado</li> <li>Rutas autom\u00e1ticas: Activado</li> </ul> <p>Con esta configuraci\u00f3n, el equipo obtiene autom\u00e1ticamente: - Direcci\u00f3n IP - M\u00e1scara de red - Puerta de enlace (gateway) - Servidores DNS</p> <p>Esta configuraci\u00f3n es perfecta si estamos en una red con servidor DHCP y no necesitamos IP fija.</p>"},{"location":"07_03_ubuntudesktop_red/#configuracion-manual-ip-estatica","title":"Configuraci\u00f3n manual (IP est\u00e1tica)","text":"<p>Para equipos que formar\u00e1n parte de un dominio Active Directory, necesitamos configuraci\u00f3n manual para asegurar que la IP no cambie y que usamos el DNS correcto.</p>"},{"location":"07_03_ubuntudesktop_red/#escenario-equipo-que-se-unira-a-active-directory","title":"Escenario: Equipo que se unir\u00e1 a Active Directory","text":"<p>Configuraci\u00f3n necesaria para nuestro entorno ISCASOX:</p> <ul> <li>IP fija: 192.168.100.50 (elegid una libre en vuestra red)</li> <li>M\u00e1scara: 255.255.255.0 (equivalente a /24)</li> <li>Puerta de enlace: 192.168.100.1 (el Windows Server)</li> <li>DNS primario: 192.168.100.1 (el Windows Server - CR\u00cdTICO)</li> <li>DNS secundario: 1.1.1.1 (Cloudflare, como backup)</li> <li>Dominios de b\u00fasqueda: DOMXXX.local</li> </ul> Configuraci\u00f3n de red por NetworkManager <p>Verificaci\u00f3n de la configuraci\u00f3n:</p> <p>Abrimos una terminal y ejecutamos:</p> <pre><code>ip addr show\n</code></pre> <p>Deber\u00edamos ver nuestra interfaz (normalmente <code>enp0s3</code> o <code>ens33</code>) con la IP que configuramos:</p> <pre><code>2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;\n    inet 192.168.100.50/24 brd 192.168.100.255 scope global dynamic noprefixroute enp0s3\n</code></pre> <p>Verificamos el gateway:</p> <pre><code>ip route show\n</code></pre> <p>Deber\u00edamos ver una l\u00ednea como:</p> <pre><code>default via 192.168.100.1 dev enp0s3 proto static metric 100\n</code></pre> <p>Verificamos el DNS:</p> <pre><code>resolvectl status\n</code></pre> <p>En la secci\u00f3n de nuestra interfaz (<code>enp0s3</code> o similar) deber\u00edamos ver:</p> <pre><code>Link 2 (enp0s3)\n    Current DNS Server: 192.168.100.1\n           DNS Servers: 192.168.100.1\n                        1.1.1.1\n            DNS Domain: DOMXXX.local\n</code></pre> <p>Si todo coincide, la configuraci\u00f3n es correcta.</p> <p>Probar la conectividad:</p> <p>Ping al gateway:</p> <pre><code>ping -c 3 192.168.100.1\n</code></pre> <p>Resoluci\u00f3n de nombres del dominio:</p> <pre><code>nslookup DOMXXX.local\n</code></pre> <p>Deber\u00eda responder con la IP del Windows Server (192.168.100.1).</p> <p>Ping a Internet para verificar que tenemos salida:</p> <pre><code>ping -c 3 google.com\n</code></pre> <p>Si todos estos comandos funcionan, la red est\u00e1 perfectamente configurada.</p>"},{"location":"07_03_ubuntudesktop_red/#netplan-configuracion-avanzada","title":"Netplan: configuraci\u00f3n avanzada","text":"<p>Aunque NetworkManager es suficiente para la mayor\u00eda de casos en Desktop, hay situaciones donde necesitamos o preferimos usar Netplan directamente:</p> <ul> <li>Configuraci\u00f3n reproducible: podemos versionar archivos YAML y aplicarlos autom\u00e1ticamente</li> <li>Configuraciones complejas: bridges, VLANs, bonding, m\u00faltiples IPs en una interfaz</li> <li>Automatizaci\u00f3n: scripting y despliegue automatizado de configuraciones</li> <li>Preferencia personal: algunos administradores prefieren editar archivos de texto</li> <li>Consistencia: si gestionamos tanto Servers como Desktops, usar la misma herramienta simplifica</li> </ul>"},{"location":"07_03_ubuntudesktop_red/#como-funciona-netplan","title":"C\u00f3mo funciona Netplan","text":"<p>Netplan es una capa de abstracci\u00f3n sobre los sistemas de red de Linux. No gestiona la red directamente, sino que lee archivos de configuraci\u00f3n YAML y genera la configuraci\u00f3n para el \"renderer\" (gestor de red) que hayamos elegido.</p> <p>Los dos renderers principales son:</p> <ul> <li>NetworkManager: para Desktop (soporta WiFi, interfaces gr\u00e1ficas, configuraci\u00f3n din\u00e1mica)</li> <li>systemd-networkd: para Server (m\u00e1s ligero, sin GUI, configuraci\u00f3n est\u00e1tica)</li> </ul> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Archivos Netplan   \u2502  \u2190 Editamos estos (.yaml en /etc/netplan/)\n\u2502   (formato YAML)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u2193\n      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n      \u2502Netplan \u2502  \u2190 Procesa el YAML y genera configuraci\u00f3n\n      \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518\n           \u2502\n           \u2193\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502    Renderer    \u2502  \u2190 NetworkManager o systemd-networkd\n  \u2502 (gestor real)  \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"07_03_ubuntudesktop_red/#ubicacion-y-estructura-de-archivos","title":"Ubicaci\u00f3n y estructura de archivos","text":"<p>Los archivos de configuraci\u00f3n de Netplan est\u00e1n en <code>/etc/netplan/</code> y tienen extensi\u00f3n <code>.yaml</code>.</p> <pre><code>ls /etc/netplan/\n</code></pre> <p>El nombre del archivo determina el orden de aplicaci\u00f3n. Los archivos se procesan en orden num\u00e9rico/alfab\u00e9tico:</p> <ul> <li><code>00-installer-config.yaml</code> - configuraci\u00f3n del instalador</li> <li><code>01-network-manager-all.yaml</code> - configuraci\u00f3n para NetworkManager</li> <li><code>50-cloud-init.yaml</code> - configuraci\u00f3n de cloud-init (si existe)</li> </ul> <p>Si hay m\u00faltiples archivos, sus configuraciones se combinan. En caso de conflicto, el \u00faltimo archivo tiene prioridad.</p> <p>Buena pr\u00e1ctica: usar nombres descriptivos con n\u00fameros:</p> <pre><code>00-base.yaml           (configuraci\u00f3n b\u00e1sica)\n10-static-ip.yaml      (configuraci\u00f3n est\u00e1tica)\n50-advanced.yaml       (configuraciones avanzadas)\n</code></pre> <p>Permisos de archivos de Netplan</p> <p>Los archivos de configuraci\u00f3n de Netplan contienen informaci\u00f3n sensible (contrase\u00f1as WiFi, configuraciones de red). Debemos protegerlos:</p> <pre><code>sudo chmod 600 /etc/netplan/*.yaml\n</code></pre> <p>Esto asegura que solo root puede leer/escribir estos archivos.</p>"},{"location":"07_03_ubuntudesktop_red/#sintaxis-basica-de-yaml-para-netplan","title":"Sintaxis b\u00e1sica de YAML para Netplan","text":"<p>YAML es muy estricto con la sintaxis. Estos son los puntos cr\u00edticos:</p> <p>Indentaci\u00f3n con espacios, NUNCA tabuladores: Cada nivel de indentaci\u00f3n son exactamente 2 espacios.</p> <pre><code># CORRECTO\nnetwork:\n  version: 2\n\n# INCORRECTO (tabuladores)\nnetwork:\n    version: 2\n</code></pre> <p>Los dos puntos (<code>:</code>) son obligatorios despu\u00e9s de cada clave:</p> <pre><code>network:\n  ethernets:\n    enp0s3:\n</code></pre> <p>Las listas se indican con guiones (<code>-</code>):</p> <pre><code>addresses:\n  - 192.168.100.50/24\n  - 192.168.100.51/24\n</code></pre> <p>Las comillas no son obligatorias para strings simples, pero s\u00ed para valores con caracteres especiales:</p> <pre><code># Sin comillas (preferido para simplicidad)\nrenderer: networkd\n\n# Con comillas (necesario si hay espacios o caracteres especiales)\ncomment: \"Esta es una configuraci\u00f3n de red\"\n</code></pre> <p>Booleanos: <code>true/false</code> o <code>yes/no</code> (ambos v\u00e1lidos):</p> <pre><code>dhcp4: false\ndhcp6: no\n</code></pre>"},{"location":"07_03_ubuntudesktop_red/#ejemplos-de-configuracion-de-netplan","title":"Ejemplos de configuraci\u00f3n de Netplan","text":"<p>A continuaci\u00f3n se presentan 3 configuraciones diferentes de Netplan. </p> <p>Para editar el fichero de configuraci\u00f3n, ejecutamos un comando como:</p> <pre><code>sudo nano /etc/netplan/01-static-config.yaml\n</code></pre> <p>Y para probar o aplicar la configuraci\u00f3n:</p> <pre><code># Verificar sintaxis\nsudo netplan try\n\n# Aplicar configuraci\u00f3n\nsudo netplan aply\n</code></pre> <p>El comando <code>netplan try</code> es MUY IMPORTANTE: aplica la configuraci\u00f3n temporalmente y revierte autom\u00e1ticamente si no confirmamos en 120 segundos. Esto evita que nos quedemos sin acceso de red por un error de configuraci\u00f3n.</p> <p>Si la red funciona, pulsamos Enter para aceptar. Si algo falla o no respondemos, la configuraci\u00f3n se revierte autom\u00e1ticamente.</p> <p>Ejemplo 1: Delegar todo a NetworkManager (configuraci\u00f3n por defecto)</p> <p>Esta es la configuraci\u00f3n m\u00e1s simple y es la que viene por defecto en Ubuntu Desktop:</p> <pre><code>network:\n  version: 2\n  renderer: NetworkManager\n</code></pre> <p>Explicaci\u00f3n</p> <ul> <li><code>network</code>: ra\u00edz de toda configuraci\u00f3n de Netplan</li> <li><code>version: 2</code>: versi\u00f3n del formato YAML de Netplan (siempre usamos 2)</li> <li><code>renderer: NetworkManager</code>: delega toda la gesti\u00f3n a NetworkManager</li> </ul> <p>Con esta configuraci\u00f3n, Netplan no hace nada m\u00e1s. NetworkManager gestiona todo mediante su interfaz gr\u00e1fica.</p> <p>Cu\u00e1ndo usarla: Siempre que queramos que NetworkManager gestione la red completamente mediante GUI.</p> <p>Ejemplo 2: IP est\u00e1tica b\u00e1sica con systemd-networkd</p> <p>Configuraci\u00f3n simple de IP est\u00e1tica usando <code>systemd-networkd</code> como renderer:</p> <pre><code>network:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp0s3:\n      dhcp4: false\n      dhcp6: false\n      addresses:\n        - 192.168.100.50/24\n      routes:\n        - to: default\n          via: 192.168.100.1\n      nameservers:\n        addresses:\n          - 192.168.100.1\n          - 1.1.1.1\n</code></pre> <p>Explicaci\u00f3n l\u00ednea por l\u00ednea</p> <ul> <li><code>renderer: networkd</code>: usar systemd-networkd en lugar de NetworkManager</li> <li><code>ethernets:</code>: secci\u00f3n para configuraci\u00f3n de interfaces Ethernet cableadas</li> <li><code>enp0s3:</code>: nombre de nuestra interfaz de red (verificar con <code>ip addr</code>)</li> <li><code>dhcp4: false</code>: no usar DHCP para IPv4</li> <li><code>dhcp6: false</code>: no usar DHCP para IPv6</li> <li><code>addresses:</code>: lista de direcciones IP a asignar</li> <li><code>- 192.168.100.50/24</code>: IP est\u00e1tica con m\u00e1scara /24 (255.255.255.0)</li> <li><code>routes:</code>: rutas de red</li> <li><code>to: default</code>: ruta por defecto (equivale a 0.0.0.0/0)</li> <li><code>via: 192.168.100.1</code>: gateway (puerta de enlace)</li> <li><code>nameservers:</code>: configuraci\u00f3n de DNS</li> <li><code>addresses:</code>: lista de servidores DNS<ul> <li><code>192.168.100.1</code>: DNS primario (nuestro Windows Server)</li> <li><code>1.1.1.1</code>: DNS secundario (Cloudflare)</li> </ul> </li> </ul> <p>Ejemplo 3: Configuraci\u00f3n para equipo en dominio Active Directory</p> <p>Esta es la configuraci\u00f3n \u00f3ptima para un equipo Ubuntu Desktop que se unir\u00e1 a un dominio Windows:</p> <pre><code>network:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp0s3:\n      dhcp4: false\n      dhcp6: false\n      addresses:\n        - 192.168.100.50/24\n      routes:\n        - to: default\n          via: 192.168.100.1\n      nameservers:\n        search:\n          - DOMSERGIO.local\n        addresses:\n          - 192.168.100.1\n          - 1.1.1.1\n</code></pre> <p>Diferencias clave respecto al ejemplo anterior</p> <ul> <li><code>search:</code>: dominios de b\u00fasqueda DNS</li> <li><code>- DOMSERGIO.local</code>: nuestro dominio Active Directory</li> </ul> <p>Esta l\u00ednea <code>search</code> es CR\u00cdTICA para Active Directory. Permite:</p> <ol> <li>Resolver nombres cortos: escribir <code>ping servidor</code> en lugar de <code>ping servidor.domsergio.local</code></li> <li>Facilitar la uni\u00f3n al dominio</li> <li>Permitir que las aplicaciones encuentren servicios del dominio</li> </ol> <p>El orden de los DNS es importante:</p> <pre><code>nameservers:\n  addresses:\n    - 192.168.100.1    # DNS PRIMARIO: el controlador de dominio\n    - 1.1.1.1          # DNS SECUNDARIO: backup para Internet\n</code></pre> <p>Siempre ponemos el controlador de dominio primero porque:</p> <ul> <li>Active Directory requiere que los clientes usen su DNS</li> <li>El DNS de AD contiene registros SRV necesarios para localizar servicios del dominio</li> <li>Si pusiera 1.1.1.1 primero, muchas consultas de dominio fallar\u00edan</li> </ul> <p>Verificaci\u00f3n espec\u00edfica para dominio:</p> <pre><code># Verificar que el dominio de b\u00fasqueda est\u00e1 configurado\nresolvectl status\n\n# Probar resoluci\u00f3n del dominio\nnslookup DOMSERGIO.local\n</code></pre> Verificaci\u00f3n de la res"},{"location":"07_03_ubuntudesktop_red/#comandos-utiles-de-netplan","title":"Comandos \u00fatiles de Netplan","text":"<p>Verificar sintaxis sin aplicar:</p> <pre><code>sudo netplan generate\n</code></pre> <p>Genera la configuraci\u00f3n pero no la aplica. Si hay errores de sintaxis, los muestra.</p> <p>Aplicar configuraci\u00f3n con seguridad (recomendado):</p> <pre><code>sudo netplan try\n</code></pre> <p>Aplica temporalmente. Si no confirmamos en 120 segundos, revierte autom\u00e1ticamente. Evita quedarnos sin conexi\u00f3n.</p> <p>Aplicar configuraci\u00f3n inmediatamente:</p> <pre><code>sudo netplan apply\n</code></pre> <p>Aplica la configuraci\u00f3n sin pedir confirmaci\u00f3n. Solo usar cuando estemos seguros.</p> <p>Ver la configuraci\u00f3n efectiva:</p> <pre><code>sudo netplan get\n</code></pre> <p>Muestra la configuraci\u00f3n final despu\u00e9s de combinar todos los archivos YAML.</p> <p>Depurar problemas:</p> <pre><code>sudo netplan --debug apply\n</code></pre> <p>Muestra informaci\u00f3n detallada sobre qu\u00e9 est\u00e1 haciendo Netplan.</p>"},{"location":"07_04_ubuntudesktop_varios/","title":"Ubuntu Desktop. Organizaci\u00f3n de discos y carpetas en Linux","text":""},{"location":"07_04_ubuntudesktop_varios/#organizacion-de-discos-y-carpetas-en-linux","title":"Organizaci\u00f3n de discos y carpetas en Linux","text":"<p>Una de las diferencias m\u00e1s evidentes entre Windows y Linux es c\u00f3mo organizan el sistema de archivos. Entender esta estructura es fundamental para moveros con soltura en Ubuntu.</p>"},{"location":"07_04_ubuntudesktop_varios/#el-sistema-de-archivos-todo-parte-de","title":"El sistema de archivos: todo parte de <code>/</code>","text":"<p>En Windows estamos acostumbrados a tener varias unidades: <code>C:</code> para el sistema, <code>D:</code> para datos, etc. Cada disco tiene su propia letra y son independientes entre s\u00ed.</p> <p>En Linux no existen las letras de unidad. Todo el sistema de archivos es un \u00fanico \u00e1rbol jer\u00e1rquico que empieza en <code>/</code> (llamado \"ra\u00edz\" o \"root\").</p> <p>Todos los archivos, carpetas, discos duros, unidades USB, conexiones de red, etc., cuelgan deesta ra\u00edz \u00fanica. Los discos adicionales se \"montan\" como carpetas dentro de este \u00e1rbol.</p> <p>Por ejemplo, si tenemos un disco duro adicional, podr\u00edamos montarlo en <code>/datos</code> y acceder\u00edamos a su contenido a trav\u00e9s de esa ruta, pero seguir\u00eda siendo parte del mismo \u00e1rbol de directorios.</p>"},{"location":"07_04_ubuntudesktop_varios/#estructura-de-directorios-estandar","title":"Estructura de directorios est\u00e1ndar","text":"<p>Linux sigue una estructura de directorios estandarizada que es pr\u00e1cticamente id\u00e9ntica en todas las distribuciones:</p> <p><code>/</code> (ra\u00edz): La cima de la jerarqu\u00eda. Contiene todos los dem\u00e1s directorios.</p> <p><code>/home</code>: Carpetas personales de los usuarios. Es el equivalente a <code>C:\\Users</code> en Windows.</p> <ul> <li><code>/home/sergio</code>: carpeta personal del usuario sergio</li> <li><code>/home/maria</code>: carpeta personal del usuario maria</li> </ul> <p>Cada usuario tiene permisos completos sobre su carpeta personal, pero no puede acceder a las carpetas de otros usuarios.</p> <p><code>/root</code>: Carpeta personal del superusuario root. No est\u00e1 dentro de <code>/home</code> por razones hist\u00f3ricas y de seguridad.</p> <p><code>/etc</code>: Archivos de configuraci\u00f3n del sistema. Equivalente al Registro de Windows pero en formato texto legible.</p> <ul> <li><code>/etc/netplan</code>: configuraci\u00f3n de red</li> <li><code>/etc/samba</code>: configuraci\u00f3n de Samba</li> <li><code>/etc/passwd</code>: lista de usuarios del sistema</li> </ul> <p><code>/var</code>: Datos variables que cambian durante la operaci\u00f3n del sistema.</p> <ul> <li><code>/var/log</code>: archivos de registro (logs)</li> <li><code>/var/www</code>: contenido de servidores web</li> <li><code>/var/spool</code>: colas de impresi\u00f3n, correo, etc.</li> </ul> <p><code>/tmp</code>: Archivos temporales. Se borra autom\u00e1ticamente al reiniciar. Cualquier usuario puede escribir aqu\u00ed.</p> <p><code>/usr</code>: Aplicaciones y datos de usuario (pero no confundir con carpetas personales).</p> <ul> <li><code>/usr/bin</code>: programas ejecutables de usuario</li> <li><code>/usr/lib</code>: librer\u00edas compartidas</li> <li><code>/usr/share</code>: datos compartidos (iconos, documentaci\u00f3n, etc.)</li> </ul> <p><code>/opt</code>: Software opcional instalado manualmente (no desde repositorios). Es el equivalente a <code>C:\\Program Files</code> en Windows.</p> <p><code>/mnt</code> y <code>/media</code>: Puntos de montaje temporales. En <code>/media</code> se montan autom\u00e1ticamente las unidades USB, CDs, etc.</p> <p><code>/bin</code> y <code>/sbin</code>: Programas esenciales del sistema.</p> <ul> <li><code>/bin</code>: comandos b\u00e1sicos disponibles para todos los usuarios (ls, cp, etc.)</li> <li><code>/sbin</code>: comandos de administraci\u00f3n del sistema (solo root)</li> </ul> <p><code>/boot</code>: Archivos necesarios para arrancar el sistema (kernel, initramfs, etc.).</p> <p><code>/dev</code>: Archivos de dispositivos. En Linux, los dispositivos hardware se representan como archivos especiales.</p> <ul> <li><code>/dev/sda</code>: primer disco duro</li> <li><code>/dev/sdb1</code>: primera partici\u00f3n del segundo disco</li> <li><code>/dev/null</code>: dispositivo especial que descarta todo lo que se le env\u00eda</li> </ul>"},{"location":"07_04_ubuntudesktop_varios/#rutas-absolutas-vs-relativas","title":"Rutas absolutas vs relativas","text":"<p>Ruta absoluta: comienza desde la ra\u00edz <code>/</code>. Ejemplo: <code>/home/sergio/Documentos/proyecto.txt</code></p> <p>Siempre apunta al mismo lugar independientemente de d\u00f3nde estemos en el sistema.</p> <p>Ruta relativa: no comienza con <code>/</code>. Es relativa al directorio actual.</p> <ul> <li>Si estamos en <code>/home/sergio</code> y escribimos <code>Documentos/proyecto.txt</code>, se refiere a <code>/home/sergio/Documentos/proyecto.txt</code></li> <li><code>.</code> representa el directorio actual</li> <li><code>..</code> representa el directorio padre (un nivel arriba)</li> </ul> <p>Ejemplo pr\u00e1ctico:</p> <pre><code>cd /home/sergio/Documentos/proyecto\npwd                    # Muestra: /home/sergio/Documentos/proyecto\ncd ..                  # Subimos un nivel\npwd                    # Muestra: /home/sergio/Documentos\ncd ../Im\u00e1genes         # Subimos un nivel y entramos en Im\u00e1genes\npwd                    # Muestra: /home/sergio/Im\u00e1genes\n</code></pre>"},{"location":"07_04_ubuntudesktop_varios/#carpeta-personal-y-variables-de-entorno","title":"Carpeta personal y variables de entorno","text":"<p>La carpeta personal del usuario actual se puede referenciar con <code>~</code> (tilde).</p> <pre><code>cd ~           # Va a /home/sergio (si sergio es el usuario actual)\ncd ~/Descargas # Va a /home/sergio/Descargas\n</code></pre> <p>Tambi\u00e9n existe la variable de entorno <code>$HOME</code> que contiene la ruta de nuestra carpeta personal:</p> <pre><code>echo $HOME     # Muestra: /home/sergio\ncd $HOME       # Mismo efecto que 'cd ~'\n</code></pre>"},{"location":"07_04_ubuntudesktop_varios/#permisos-del-sistema-de-archivos","title":"Permisos del sistema de archivos","text":"<p>A diferencia de Windows, donde los permisos se gestionan mediante ACLs complejas, Linux usa un sistema m\u00e1s simple de permisos UNIX tradicionales.</p> <p>Cada archivo o carpeta tiene:</p> <ul> <li>Propietario (un usuario)</li> <li>Grupo (un grupo de usuarios)</li> <li>Permisos para propietario, grupo y otros</li> </ul> <p>Los permisos se dividen en tres tipos:</p> <ul> <li>r (read): permiso de lectura</li> <li>w (write): permiso de escritura</li> <li>x (execute): permiso de ejecuci\u00f3n (para archivos) o acceso (para carpetas)</li> </ul> <p>Cuando hacemos <code>ls -l</code>, vemos:</p> <pre><code>-rw-r--r-- 1 sergio sergio 2048 ene 15 10:30 documento.txt\ndrwxr-xr-x 2 sergio sergio 4096 ene 15 10:35 carpeta\n</code></pre> <p>La primera columna indica los permisos:</p> <ul> <li>Primer car\u00e1cter: tipo (<code>-</code> = archivo, <code>d</code> = directorio, <code>l</code> = enlace simb\u00f3lico)</li> <li>Siguientes 3: permisos del propietario (rw- = lectura y escritura, sin ejecuci\u00f3n)</li> <li>Siguientes 3: permisos del grupo (r-- = solo lectura)</li> <li>\u00daltimos 3: permisos de otros (r-- = solo lectura)</li> </ul> <p>Para cambiar permisos usamos <code>chmod</code> (lo veremos m\u00e1s adelante si es necesario).</p>"},{"location":"07_04_ubuntudesktop_varios/#archivos-ocultos","title":"Archivos ocultos","text":"<p>En Linux, cualquier archivo o carpeta cuyo nombre comienza con un punto <code>.</code> se considera oculto.</p> <p>Por ejemplo: - <code>.bashrc</code>: archivo de configuraci\u00f3n de bash - <code>.config</code>: carpeta de configuraciones de aplicaciones</p> <p>Para ver archivos ocultos en terminal:</p> <pre><code>ls -la\n</code></pre> <p>En el explorador gr\u00e1fico (Nautilus), pulsamos <code>Ctrl+H</code>.</p> <p>Los archivos de configuraci\u00f3n de usuario normalmente est\u00e1n ocultos en la carpeta personal para no \"ensuciar\" visualmente el espacio de trabajo del usuario.</p>"},{"location":"07_04_ubuntudesktop_varios/#diferencias-clave-con-windows","title":"Diferencias clave con Windows","text":"<p>Ahora que tenemos Ubuntu Desktop instalado y hemos aprendido lo b\u00e1sico, es importante destacar las diferencias fundamentales que encontrar\u00e9is al trabajar con Linux en comparaci\u00f3n con Windows. Entender estas diferencias os ayudar\u00e1 a adaptaros m\u00e1s r\u00e1pidamente.</p>"},{"location":"07_04_ubuntudesktop_varios/#filosofia-de-diseno","title":"Filosof\u00eda de dise\u00f1o","text":"<p>Windows: Dise\u00f1ado para que todo sea configurable desde interfaces gr\u00e1ficas. Oculta la complejidad al usuario mediante asistentes y ventanas de propiedades. El usuario promedio nunca necesita abrir una terminal.</p> <p>Linux: Dise\u00f1ado para que todo sea configurable mediante archivos de texto. La interfaz gr\u00e1fica es una capa sobre un sistema fundamentalmente basado en terminal. Los usuarios avanzados suelen preferir la terminal porque es m\u00e1s r\u00e1pida, potente y automatizable.</p> <p>Implicaci\u00f3n pr\u00e1ctica: En Windows raramente editamos archivos de configuraci\u00f3n manualmente. En Linux, editar archivos de texto en <code>/etc/</code> es rutinario y normal para configuraciones avanzadas.</p>"},{"location":"07_04_ubuntudesktop_varios/#instalacion-de-software","title":"Instalaci\u00f3n de software","text":"<p>Windows: - Descargamos archivos <code>.exe</code> o <code>.msi</code> de Internet - Cada programa se instala independientemente - Las actualizaciones las gestiona cada aplicaci\u00f3n individualmente - No hay verificaci\u00f3n centralizada de seguridad</p> <p>Linux: - El software se instala desde repositorios oficiales mediante gestores de paquetes - Un solo comando instala el programa y todas sus dependencias - Un solo comando actualiza el sistema operativo y todas las aplicaciones - Todo el software est\u00e1 firmado digitalmente y verificado</p> <p>Implicaci\u00f3n pr\u00e1ctica: En Linux es m\u00e1s seguro y c\u00f3modo instalar software, pero requiere aprender comandos como <code>apt install</code>. A cambio, obtenemos un sistema donde \"sudo apt update &amp;&amp; sudo apt upgrade\" mantiene absolutamente todo actualizado.</p>"},{"location":"07_04_ubuntudesktop_varios/#sistema-de-archivos","title":"Sistema de archivos","text":"<p>Windows: - Letras de unidad separadas (C:, D:, E:) - Barra invertida <code>\\</code> como separador de rutas - No distingue entre may\u00fasculas y min\u00fasculas en nombres de archivo - Muchas extensiones de archivo con significado (.exe, .dll, .bat, etc.)</p> <p>Linux: - Un \u00fanico \u00e1rbol de directorios desde <code>/</code> - Barra normal <code>/</code> como separador de rutas - Distingue may\u00fasculas y min\u00fasculas: <code>archivo.txt</code> y <code>Archivo.txt</code> son archivos diferentes - Las extensiones son solo convenciones, no determinan el tipo de archivo - Los permisos de ejecuci\u00f3n determinan si un archivo es ejecutable, no su extensi\u00f3n</p> <p>Implicaci\u00f3n pr\u00e1ctica: En Linux deb\u00e9is tener mucho cuidado con may\u00fasculas/min\u00fasculas al escribir nombres de archivo. <code>cd Documentos</code> funciona, pero <code>cd documentos</code> dar\u00e1 error si la carpeta se llama \"Documentos\" con D may\u00fascula.</p>"},{"location":"07_04_ubuntudesktop_varios/#usuarios-y-permisos","title":"Usuarios y permisos","text":"<p>Windows: - Usuarios est\u00e1ndar y administradores - Control de Cuentas de Usuario (UAC) para elevar privilegios - Permisos basados en ACLs complejas</p> <p>Linux: - Usuario normal, superusuario (root) y usuarios del sistema - <code>sudo</code> para ejecutar comandos espec\u00edficos con privilegios - Permisos m\u00e1s simples pero muy efectivos (propietario, grupo, otros)</p> <p>Implicaci\u00f3n pr\u00e1ctica: En Linux NUNCA trabajamos como root. Siempre trabajamos como usuario normal y usamos <code>sudo</code> solo cuando es necesario. Esto hace el sistema mucho m\u00e1s seguro.</p>"},{"location":"07_04_ubuntudesktop_varios/#terminal-y-linea-de-comandos","title":"Terminal y l\u00ednea de comandos","text":"<p>Windows: - La terminal (cmd, PowerShell) es opcional y poco usada por usuarios normales - Muchas tareas administrativas requieren interfaz gr\u00e1fica - Nombres de comandos verbosos (<code>Get-ChildItem</code>, <code>Remove-Item</code>)</p> <p>Linux: - La terminal es fundamental y extremadamente potente - Pr\u00e1cticamente todo se puede hacer desde terminal - Comandos cortos y eficientes (<code>ls</code>, <code>rm</code>, <code>cp</code>) - Scripting integrado en el sistema (bash)</p> <p>Implicaci\u00f3n pr\u00e1ctica: Aunque Ubuntu Desktop tiene buenas herramientas gr\u00e1ficas, merece la pena aprender comandos b\u00e1sicos de terminal porque son m\u00e1s r\u00e1pidos y potentes. Adem\u00e1s, toda la documentaci\u00f3n en Internet asume que sab\u00e9is usar la terminal.</p>"},{"location":"07_04_ubuntudesktop_varios/#configuracion-del-sistema","title":"Configuraci\u00f3n del sistema","text":"<p>Windows: - Configuraci\u00f3n almacenada en el Registro (base de datos binaria) - Dif\u00edcil de editar manualmente o hacer backups selectivos</p> <p>Linux: - Toda la configuraci\u00f3n en archivos de texto plano en <code>/etc/</code> - F\u00e1cil de editar, copiar, versionar y compartir - F\u00e1cil hacer backup de configuraciones espec\u00edficas</p> <p>Implicaci\u00f3n pr\u00e1ctica: En Linux es trivial hacer backup de una configuraci\u00f3n: simplemente copiamos el archivo correspondiente de <code>/etc/</code>. Tambi\u00e9n es f\u00e1cil compartir configuraciones o buscar ayuda en Internet porque podemos copiar y pegar fragmentos de archivos de configuraci\u00f3n.</p>"},{"location":"07_04_ubuntudesktop_varios/#seguridad","title":"Seguridad","text":"<p>Windows: - Objetivo principal de virus y malware - Requiere antivirus - Actualizaciones a veces problem\u00e1ticas - Muchos exploits conocidos</p> <p>Linux: - Muy pocos virus (aunque existen) - No requiere antivirus tradicional en uso normal - Modelo de permisos m\u00e1s restrictivo por dise\u00f1o - Actualizaciones generalmente sin problemas</p> <p>Implicaci\u00f3n pr\u00e1ctica: En Linux no necesit\u00e1is antivirus (salvo que el servidor act\u00fae de gateway para clientes Windows). El modelo de permisos de UNIX hace que sea muy dif\u00edcil que un virus se propague o afecte al sistema.</p>"},{"location":"07_04_ubuntudesktop_varios/#gestion-de-procesos","title":"Gesti\u00f3n de procesos","text":"<p>Windows: - Servicios gestionados por Services.msc - Tareas programadas en Programador de tareas - Inicio autom\u00e1tico configurado en el Registro</p> <p>Linux: - Servicios gestionados por systemd (comandos <code>systemctl</code>) - Tareas programadas con cron - Inicio autom\u00e1tico configurado en archivos de texto</p> <p>Implicaci\u00f3n pr\u00e1ctica: En Linux, comandos como <code>systemctl status</code>, <code>systemctl start</code>, <code>systemctl enable</code> son fundamentales para gestionar servicios. Es m\u00e1s directo y potente que navegar por men\u00fas gr\u00e1ficos.</p>"},{"location":"07_04_ubuntudesktop_varios/#nombres-de-cosas-comunes","title":"Nombres de cosas comunes","text":"<p>Para facilitar la transici\u00f3n, aqu\u00ed hay una tabla de equivalencias:</p> Windows Linux Funci\u00f3n C:\\Users /home Carpetas de usuarios C:\\Program Files /usr o /opt Programas instalados Panel de Control Configuraci\u00f3n (Settings) Configuraci\u00f3n del sistema Administrador de tareas Monitor del sistema (gnome-system-monitor) Ver procesos y recursos Explorador de archivos Nautilus (Archivos) Gestor de archivos Bloc de notas gedit o nano Editor de texto cmd / PowerShell bash (Terminal) L\u00ednea de comandos Administrador de discos GParted Gesti\u00f3n de particiones Registro de Windows /etc/ (archivos de configuraci\u00f3n) Configuraci\u00f3n del sistema"},{"location":"07_04_ubuntudesktop_varios/#actitud-y-aprendizaje","title":"Actitud y aprendizaje","text":"<p>La diferencia m\u00e1s importante no es t\u00e9cnica, sino de mentalidad:</p> <p>En Windows: Si algo no funciona con la interfaz gr\u00e1fica, es un problema. Esperamos que todo tenga un bot\u00f3n o un asistente.</p> <p>En Linux: Si algo no funciona con la interfaz gr\u00e1fica, usamos la terminal. Es normal consultar documentaci\u00f3n, leer mensajes de error y buscar soluciones en Internet.</p> <p>Linux premia la curiosidad y el aprendizaje continuo. No teng\u00e1is miedo de experimentar, leer man pages (<code>man comando</code>) y buscar en Google cuando algo no funcione. La comunidad Linux es enorme y hay soluciones documentadas para pr\u00e1cticamente cualquier problema que encontr\u00e9is.</p>"},{"location":"07_05_ubuntudesktop_ad/","title":"Ubuntu Desktop. Integraci\u00f3n con Active Directory","text":""},{"location":"07_05_ubuntudesktop_ad/#integracion-de-ubuntu-desktop-con-active-directory","title":"Integraci\u00f3n de Ubuntu Desktop con Active Directory","text":"<p>Ahora llega la parte m\u00e1s interesante: vamos a unir este equipo Ubuntu Desktop al dominio Active Directory de Windows Server que creamos en temas anteriores. Una vez completada la integraci\u00f3n, los usuarios del dominio podr\u00e1n iniciar sesi\u00f3n en Ubuntu con sus credenciales corporativas, exactamente igual que lo hacen en los equipos Windows.</p>"},{"location":"07_05_ubuntudesktop_ad/#introduccion-a-la-integracion","title":"Introducci\u00f3n a la integraci\u00f3n","text":"<p>La integraci\u00f3n de Linux con Active Directory es una necesidad real en empresas con infraestructuras h\u00edbridas. Permite:</p> <p>Centralizar la gesti\u00f3n de usuarios: Un \u00fanico lugar (Active Directory) gestiona las credenciales de todos los equipos, tanto Windows como Linux.</p> <p>Single Sign-On (SSO): Los usuarios inician sesi\u00f3n una vez y pueden acceder a recursos tanto en servidores Windows como Linux sin volver a autenticarse.</p> <p>Pol\u00edticas centralizadas: Aunque limitadas comparadas con GPOs de Windows, pueden aplicarse ciertas pol\u00edticas a equipos Linux unidos al dominio.</p> <p>Auditor\u00eda unificada: Todos los inicios de sesi\u00f3n, tanto Windows como Linux, quedan registrados en el controlador de dominio.</p> <p>Experiencia consistente para usuarios: Los usuarios no necesitan recordar diferentes credenciales para diferentes sistemas.</p>"},{"location":"07_05_ubuntudesktop_ad/#tecnologias-involucradas","title":"Tecnolog\u00edas involucradas","text":"<p>La integraci\u00f3n utiliza varias tecnolog\u00edas que trabajan juntas:</p> <p>Realmd: Servicio que simplifica la uni\u00f3n a dominios Active Directory. Es una capa de abstracci\u00f3n que facilita todo el proceso.</p> <p>SSSD (System Security Services Daemon): Demonio que gestiona la autenticaci\u00f3n y el acceso a recursos de red. Hace de intermediario entre Linux y Active Directory.</p> <p>Kerberos: Protocolo de autenticaci\u00f3n que usa Active Directory. Permite autenticaci\u00f3n segura sin enviar contrase\u00f1as por la red.</p> <p>Samba: Aunque no lo usaremos para compartir archivos en el Desktop, sus utilidades nos permiten comunicarnos con dominios Windows.</p>"},{"location":"07_05_ubuntudesktop_ad/#guias-detalladas","title":"Gu\u00edas detalladas","text":"<p>El proceso de integraci\u00f3n es bastante extenso y requiere m\u00faltiples pasos. Afortunadamente, existe documentaci\u00f3n externa muy completa que explica todo el proceso paso a paso con capturas de pantalla.</p> <p>Vais a seguir estas dos gu\u00edas en orden:</p> <p>Parte 1: Preparaci\u00f3n e instalaci\u00f3n de paquetes</p> <p>Unir un cliente Ubuntu 24.04 a un dominio de Active Directory sobre Windows Server 2022 - Parte 1</p> <p>Esta primera parte cubre:</p> <ul> <li>Requisitos previos de red y DNS</li> <li>Instalaci\u00f3n de todos los paquetes necesarios</li> <li>Configuraci\u00f3n inicial del sistema</li> </ul> <p>Parte 2: Uni\u00f3n al dominio y configuraci\u00f3n</p> <p>Unir un cliente Ubuntu 24.04 a un dominio de Active Directory sobre Windows Server 2022 - Parte 2</p> <p>Esta segunda parte cubre:</p> <ul> <li>Uni\u00f3n real al dominio usando <code>realm</code></li> <li>Configuraci\u00f3n de SSSD</li> <li>Verificaci\u00f3n de la integraci\u00f3n</li> <li>Configuraci\u00f3n de carpetas personales para usuarios del dominio</li> <li>Resoluci\u00f3n de problemas comunes</li> </ul>"},{"location":"07_05_ubuntudesktop_ad/#aspectos-importantes-a-tener-en-cuenta","title":"Aspectos importantes a tener en cuenta","text":"<p>Antes de comenzar el proceso, tened en cuenta estos puntos cr\u00edticos para nuestro entorno ISCASOX:</p> <p>Configuraci\u00f3n de red previa:</p> <p>Vuestro Ubuntu Desktop debe tener configurado el Windows Server como DNS primario. Esto es absolutamente cr\u00edtico porque Active Directory depende completamente de DNS para funcionar.</p> <p>Deb\u00e9is configurarlo usando Netplan mediate fichero yaml tal y como hemos visto en apartados anteriores:</p> <p>Configurar:</p> <ul> <li>Direcci\u00f3n IP: <code>192.168.100.XX</code> (elegid una libre en la red de departamentos)</li> <li>M\u00e1scara: <code>255.255.255.0</code></li> <li>Puerta de enlace: <code>192.168.100.1</code> (el Windows Server)</li> <li>DNS: <code>192.168.100.1</code> (muy importante: el Windows Server) y <code>1.1.1.1</code> por si acaso para acceder a intenet</li> <li>Dominios de b\u00fasqueda: <code>DOMXXX.local</code> (vuestro dominio)</li> </ul> <p>Sincronizaci\u00f3n de hora:</p> <p>Kerberos es extremadamente sensible a diferencias de hora. Si el reloj del Ubuntu y del Windows Server difieren en m\u00e1s de 5 minutos, la autenticaci\u00f3n fallar\u00e1.</p> <p>Ubuntu Desktop normalmente sincroniza la hora autom\u00e1ticamente, pero verificadlo:</p> <pre><code>timedatectl\n</code></pre> <p>Si <code>System clock synchronized: yes</code>, est\u00e1is bien. Si no, instalad y configurad chrony:</p> <pre><code>sudo apt install -y chrony\n</code></pre> <p>Nombres de dominio:</p> <p>Sustituir correctamente <code>DOMXXX.local</code> por el nombre real de vuestro dominio en todos los comandos y archivos de configuraci\u00f3n. Un error aqu\u00ed har\u00e1 que nada funcione.</p>"},{"location":"07_05_ubuntudesktop_ad/#diferencias-respecto-a-unir-un-windows-al-dominio","title":"Diferencias respecto a unir un Windows al dominio","text":"<p>Aunque conceptualmente es similar a unir un equipo Windows al dominio, hay diferencias importantes:</p> <p>En Windows:</p> <ul> <li>Proceso completamente gr\u00e1fico</li> <li>Unos pocos clics en Propiedades del sistema</li> <li>Reinicio y listo</li> </ul> <p>En Ubuntu Desktop:</p> <ul> <li>Requiere instalar varios paquetes</li> <li>Configuraci\u00f3n mediante archivos de texto y comandos</li> <li>M\u00e1s pasos pero tambi\u00e9n m\u00e1s control sobre el proceso</li> <li>No requiere reinicio (aunque es recomendable)</li> </ul>"},{"location":"07_05_ubuntudesktop_ad/#que-verificar-despues-de-la-integracion","title":"Qu\u00e9 verificar despu\u00e9s de la integraci\u00f3n","text":"<p>Una vez completadas ambas gu\u00edas, deb\u00e9is verificar que todo funciona:</p> <p>Verificar que el equipo est\u00e1 en el dominio:</p> <pre><code>realm list\n</code></pre> <p>Debe mostrar vuestro dominio con informaci\u00f3n detallada.</p> <p>Listar usuarios del dominio:</p> <pre><code>getent passwd | grep DOMXXX\n</code></pre> <p>Deb\u00e9is ver usuarios del Active Directory.</p> <p>Probar inicio de sesi\u00f3n:</p> <p>Cerrad sesi\u00f3n e intentad iniciar sesi\u00f3n con un usuario del dominio. En la pantalla de login:</p> <ol> <li>Si no aparece el usuario, clickad en \"Not listed?\" o \"\u00bfNo est\u00e1 en la lista?\"</li> <li>Introducid: <code>usuario@DOMXXX.local</code> o <code>DOMXXX\\usuario</code></li> <li>Introducid la contrase\u00f1a del dominio</li> </ol> <p>Si pod\u00e9is iniciar sesi\u00f3n, \u00a1enhorabuena! La integraci\u00f3n es correcta.</p> <p>Verificar carpeta personal:</p> <p>Una vez dentro con un usuario del dominio, verificad que se ha creado su carpeta personal:</p> <pre><code>pwd\nls -la\n</code></pre> <p>Deber\u00eda estar en <code>/home/usuario@domxxx.local/</code> o similar, y contener las subcarpetas t\u00edpicas (Documentos, Descargas, etc.).</p>"},{"location":"07_05_ubuntudesktop_ad/#limitaciones-de-la-integracion","title":"Limitaciones de la integraci\u00f3n","text":"<p>Es importante entender que aunque el equipo est\u00e9 unido al dominio, la experiencia no es exactamente igual a la de Windows:</p> <p>Las GPOs de Windows no se aplican a equipos Linux. No podemos usar Group Policy para configurar Ubuntu. Existen alternativas como Ansible o Chef para gesti\u00f3n centralizada de Linux, pero son diferentes sistemas.</p> <p>Los perfiles m\u00f3viles de Windows no funcionan en Linux. Los perfiles son sistemas diferentes. Cada sistema mantiene su configuraci\u00f3n independiente.</p> <p>Algunas aplicaciones Windows que dependen de caracter\u00edsticas espec\u00edficas de Windows no funcionar\u00e1n en Linux, aunque las credenciales sean las mismas.</p> <p>Los scripts de inicio de sesi\u00f3n (.bat, .vbs) de Windows no se ejecutan en Linux. Deber\u00edamos crear scripts equivalentes en bash si fuera necesario.</p> <p>A pesar de estas limitaciones, la integraci\u00f3n es muy \u00fatil porque:</p> <ul> <li>Centraliza usuarios y contrase\u00f1as</li> <li>Permite acceso a recursos compartidos en servidores Windows</li> <li>Simplifica la gesti\u00f3n cuando tenemos estaciones de trabajo Linux en la empresa</li> <li>Los usuarios no necesitan recordar credenciales diferentes</li> </ul>"},{"location":"08_01_instalacion_ubuntu_server/","title":"Instalaci\u00f3n de Ubuntu Server","text":""},{"location":"08_01_instalacion_ubuntu_server/#instalacion-de-ubuntu-server","title":"Instalaci\u00f3n de Ubuntu Server","text":""},{"location":"08_01_instalacion_ubuntu_server/#preparacion-de-la-maquina-virtual","title":"Preparaci\u00f3n de la m\u00e1quina virtual","text":"<p>Vamos a crear una nueva m\u00e1quina virtual en VirtualBox espec\u00edficamente para Ubuntu Server. La configuraci\u00f3n debe ser la siguiente:</p> <p>Par\u00e1metros b\u00e1sicos:</p> <ul> <li>Nombre: <code>SERVERXXX_Linux</code> (donde XXX es tu nombre)</li> <li>Tipo: Linux</li> <li>Versi\u00f3n: Ubuntu (64-bit)</li> <li>Memoria RAM: 2048 MB (2 GB)</li> <li>Procesadores: 2 CPUs</li> <li>Disco duro: 25 GB (reservado din\u00e1micamente)</li> </ul> <p>Configuraci\u00f3n de red:</p> <p>Para simplificar el montaje, vamos a usar una \u00fanica tarjeta de red que conectar\u00e1 el servidor Linux directamente a la red de departamentos de nuestra empresa ISCASOX.</p> <p>Adaptador 1: Red interna <code>red_departamentos</code>. IP est\u00e1tica <code>192.168.100.5/24</code>. Esta red conecta con el Windows Server (<code>192.168.100.1</code>) y con todos los departamentos de la empresa (gesti\u00f3n, taller, comercial, desarrollo).</p> <p>Esta configuraci\u00f3n es suficiente porque el Windows Server ya tiene salida a Internet y act\u00faa como gateway. El servidor Linux podr\u00e1 comunicarse con Internet a trav\u00e9s del Windows Server.</p> <p>A\u00f1adir el ISO de instalaci\u00f3n:</p> <p>Descarga Ubuntu Server 22.04 LTS desde la p\u00e1gina oficial de Ubuntu. En la configuraci\u00f3n de la VM, en la secci\u00f3n Almacenamiento, a\u00f1adid el archivo ISO descargado como disco \u00f3ptico.</p>"},{"location":"08_01_instalacion_ubuntu_server/#proceso-de-instalacion-paso-a-paso","title":"Proceso de instalaci\u00f3n paso a paso","text":"<p>Una vez creada la m\u00e1quina virtual, la iniciamos. Arrancar\u00e1 autom\u00e1ticamente desde el ISO y comenzar\u00e1 el instalador.</p> <p>Pantalla de idioma: Seleccionamos English. Aunque sea en ingl\u00e9s, es m\u00e1s f\u00e1cil buscar ayuda en Internet cuando aparecen mensajes en este idioma. Pulsamos Enter.</p> <p>Configuraci\u00f3n del teclado: </p> <p>Layout: Spanish</p> <p>Variant: Spanish</p> <p>Navegamos con las flechas del teclado y seleccionamos con Enter. Pulsamos \"Done\" para continuar.</p> <p>Tipo de instalaci\u00f3n: Dejamos seleccionado Ubuntu Server (es la opci\u00f3n por defecto). Pulsamos Done.</p> <p>Configuraci\u00f3n de red: </p> <p>Aqu\u00ed veremos la tarjeta de red que configuramos en VirtualBox. De momento tendr\u00e1 configuraci\u00f3n autom\u00e1tica o sin configurar. No os preocup\u00e9is, esto lo arreglaremos despu\u00e9s de la instalaci\u00f3n. No tocamos nada y pulsamos Done.</p> <p>Configuraci\u00f3n de proxy: Dejamos el campo en blanco (no necesitamos proxy) y pulsamos Done.</p> <p>Mirror de Ubuntu: Dejamos la URL por defecto y pulsamos Done.</p> <p>Configuraci\u00f3n del almacenamiento:</p> <p>Esta es una de las pantallas m\u00e1s importantes. Aqu\u00ed decidimos c\u00f3mo particionar el disco. Para esta instalaci\u00f3n inicial vamos a usar el particionado autom\u00e1tico. M\u00e1s adelante a\u00f1adiremos discos adicionales y configuraremos LVM manualmente.</p> <p>Dejamos seleccionado Use an entire disk y Set up this disk as an LVM group. Pulsamos Done.</p> <p>Nos mostrar\u00e1 un resumen del particionado propuesto. Veremos algo como:</p> <pre><code>USED DEVICES\nubuntu-lv     /     12.000G\n</code></pre> <p>Pulsamos Done y nos preguntar\u00e1 si estamos seguros. Seleccionamos Continue para proceder.</p> <p>Configuraci\u00f3n de perfil:</p> <p>Aqu\u00ed configuramos el usuario administrador principal del sistema. Este usuario tendr\u00e1 permisos para usar <code>sudo</code> y administrar el servidor.</p> <pre><code>Your name: Administrador\nYour server's name: SRVXXX_Linux  (XXX = tu nombre)\nPick a username: admin\nChoose a password: (contrase\u00f1a sencilla que record\u00e9is)\nConfirm your password: (repetir contrase\u00f1a)\n</code></pre> <p>IMPORTANTE: Apuntad este usuario y contrase\u00f1a en alg\u00fan lugar seguro. Lo necesitar\u00e9is constantemente.</p> <p>Configuraci\u00f3n SSH:</p> <p>SSH (Secure Shell) es el protocolo que usaremos para conectarnos remotamente al servidor desde Windows. Es absolutamente fundamental instalarlo.</p> <p>Marcamos con la barra espaciadora la opci\u00f3n Install OpenSSH server. Dejamos desmarcado \"Import SSH identity\". Pulsamos Done.</p> <p>Paquetes adicionales: </p> <p>El instalador nos ofrece instalar algunos paquetes populares. De momento no instalamos ninguno. Pulsamos Done sin marcar nada.</p> <p>Instalaci\u00f3n: </p> <p>Comenzar\u00e1 el proceso de instalaci\u00f3n. Tardar\u00e1 varios minutos. Podemos ver el progreso en pantalla con mensajes como \"Installing system\", \"Configuring apt\", etc.</p> <p>Reinicio: </p> <p>Cuando termine la instalaci\u00f3n aparecer\u00e1 un bot\u00f3n \"Reboot Now\". Pulsamos sobre \u00e9l. Si nos pide que quitemos el medio de instalaci\u00f3n, simplemente pulsamos Enter. El sistema se reiniciar\u00e1 autom\u00e1ticamente.</p>"},{"location":"08_01_instalacion_ubuntu_server/#primer-acceso-al-sistema","title":"Primer acceso al sistema","text":"<p>Tras el reinicio, aparecer\u00e1 una pantalla de login en modo texto:</p> <pre><code>Ubuntu 22.04.X LTS SRVXXX_Linux tty1\n\nSRVXXX_Linux login: _\n</code></pre> <p>Introducimos nuestras credenciales:</p> <pre><code>login: admin\npassword: (nuestra contrase\u00f1a)\n</code></pre> <p>La contrase\u00f1a no se ve al escribir, es una medida de seguridad. Es completamente normal.</p> <p>Si todo va bien, veremos la pantalla de bienvenida y el prompt del sistema:</p> <pre><code>Welcome to Ubuntu 22.04.X LTS (GNU/Linux 5.15.0-XX-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\nLast login: ...\nadmin@SRVXXX_Linux:~$ _\n</code></pre> <p>Este es el prompt de Linux. Nos proporciona informaci\u00f3n importante:</p> <ul> <li>admin: el usuario con el que estamos trabajando</li> <li>SRVXXX_Linux: nombre del servidor</li> <li>~: indica que estamos en nuestra carpeta personal (<code>/home/admin</code>)</li> <li>$: s\u00edmbolo que indica que somos un usuario normal (no root). Si fu\u00e9ramos root, aparecer\u00eda <code>#</code></li> </ul>"},{"location":"08_01_instalacion_ubuntu_server/#comandos-basicos-para-orientarnos","title":"Comandos b\u00e1sicos para orientarnos","text":"<p>Vamos a ejecutar algunos comandos b\u00e1sicos para familiarizarnos con el sistema y verificar que todo funciona correctamente.</p> <p>Ver en qu\u00e9 directorio estamos:</p> <pre><code>pwd\n</code></pre> <p>Resultado: <code>/home/admin</code></p> <p>Este comando significa \"Print Working Directory\" (imprimir directorio de trabajo). Siempre nos dice d\u00f3nde estamos en el \u00e1rbol de directorios.</p> <p>Listar archivos del directorio actual:</p> <pre><code>ls\n</code></pre> <p>Probablemente no veamos nada porque el directorio est\u00e1 vac\u00edo al ser reci\u00e9n creado.</p> <p>Listar archivos con detalles:</p> <pre><code>ls -la\n</code></pre> <p>La opci\u00f3n <code>-l</code> muestra formato largo con permisos, propietario, tama\u00f1o y fecha. La opci\u00f3n <code>-a</code> muestra tambi\u00e9n archivos ocultos (los que empiezan por punto).</p> <p>Ver informaci\u00f3n del sistema:</p> <pre><code>uname -a\n</code></pre> <p>Muestra informaci\u00f3n sobre el kernel: versi\u00f3n, arquitectura, nombre del host, etc.</p> <p>Ver informaci\u00f3n de red:</p> <pre><code>ip addr\n</code></pre> <p>Este comando es fundamental. Muestra todas las interfaces de red. Deber\u00edamos ver algo similar a:</p> <pre><code>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    inet 127.0.0.1/8 scope host lo\n\n2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    inet 192.168.10.X/24 brd 192.168.10.255 scope global dynamic enp0s3\n</code></pre> <p>Aqu\u00ed vemos:</p> <ul> <li><code>lo</code>: interfaz de loopback local (siempre presente)</li> <li><code>enp0s3</code>: nuestra interfaz de red (puede que a\u00fan sin configurar o con IP temporal)</li> </ul> <p>El nombre exacto (<code>enp0s3</code>, <code>eth0</code>, <code>ens33</code>, etc.) puede variar seg\u00fan la configuraci\u00f3n de VirtualBox y el hardware virtualizado.</p> <p>Actualizar el sistema:</p> <p>Es buena pr\u00e1ctica actualizar el sistema reci\u00e9n instalado para tener todas las \u00faltimas correcciones de seguridad:</p> <pre><code>sudo apt update\n</code></pre> <p>La primera vez que usamos <code>sudo</code> nos pedir\u00e1 la contrase\u00f1a de nuestro usuario <code>admin</code>. La escribimos (no se ver\u00e1 nada al escribir, es normal por seguridad) y pulsamos Enter.</p> <p>Este comando actualiza la lista de paquetes disponibles desde los repositorios.</p> <pre><code>sudo apt upgrade -y\n</code></pre> <p>Este comando instala las actualizaciones disponibles. El par\u00e1metro <code>-y</code> responde autom\u00e1ticamente \"yes\" a todas las preguntas de confirmaci\u00f3n.</p> <p>Puede tardar varios minutos. Es normal. Esperamos pacientemente a que termine.</p>"},{"location":"08_01_instalacion_ubuntu_server/#que-es-sudo","title":"Qu\u00e9 es sudo","text":"<p>En Linux, las tareas de administraci\u00f3n del sistema requieren permisos de root (el superusuario, equivalente a \"Administrador\" en Windows).</p> <p>Por razones de seguridad, no trabajamos directamente como root. En su lugar, usamos el comando <code>sudo</code> (que significa \"SuperUser DO\") delante de comandos que requieren permisos elevados.</p> <p>Cuando usamos <code>sudo</code>, el sistema:</p> <ol> <li>Nos pide la contrase\u00f1a de nuestro usuario actual</li> <li>Verifica que nuestro usuario tiene permisos para usar sudo</li> <li>Ejecuta el comando con privilegios de root</li> <li>Registra la acci\u00f3n en los logs del sistema</li> </ol> <p>La primera vez que usamos <code>sudo</code> en una sesi\u00f3n pide contrase\u00f1a. Durante los siguientes 15 minutos no volver\u00e1 a pedirla (por comodidad). Despu\u00e9s de ese tiempo, volver\u00e1 a solicitarla.</p>"},{"location":"08_02_configuracion_red_netplan/","title":"Configuraci\u00f3n de red est\u00e1tica con Netplan","text":""},{"location":"08_02_configuracion_red_netplan/#configuracion-de-red-estatica-con-netplan","title":"Configuraci\u00f3n de red est\u00e1tica con Netplan","text":""},{"location":"08_02_configuracion_red_netplan/#por-que-configuracion-estatica","title":"Por qu\u00e9 configuraci\u00f3n est\u00e1tica","text":"<p>Cuando instalamos Ubuntu Server, la tarjeta de red se configura autom\u00e1ticamente mediante DHCP si hay un servidor DHCP disponible, o queda sin configurar si no lo hay.</p> <p>Para un servidor, es imprescindible que la direcci\u00f3n IP sea fija (est\u00e1tica). No puede cambiar cada vez que se reinicia el sistema. Imaginad si cada vez que el servidor se reinicia su IP cambia: los clientes no sabr\u00edan d\u00f3nde encontrarlo, las configuraciones de red fallar\u00edan y todo dejar\u00eda de funcionar.</p>"},{"location":"08_02_configuracion_red_netplan/#netplan-el-gestor-de-red-de-ubuntu","title":"Netplan: el gestor de red de Ubuntu","text":"<p>Ubuntu Server usa Netplan para configurar la red. Netplan es un sistema que:</p> <ul> <li>Lee archivos de configuraci\u00f3n en formato YAML</li> <li>Genera la configuraci\u00f3n para el gestor de red subyacente (NetworkManager o systemd-networkd)</li> <li>Aplica los cambios de forma consistente</li> </ul> <p>Los archivos de configuraci\u00f3n de Netplan est\u00e1n en el directorio <code>/etc/netplan/</code>.</p> <p>Veamos qu\u00e9 archivos hay:</p> <pre><code>ls /etc/netplan/\n</code></pre> <p>Normalmente encontraremos un archivo llamado <code>00-installer-config.yaml</code> o algo similar. Los n\u00fameros al principio determinan el orden de aplicaci\u00f3n si hay varios archivos.</p> <p>Veamos su contenido actual:</p> <pre><code>sudo cat /etc/netplan/00-installer-config.yaml\n</code></pre> <p>Veremos algo parecido a esto:</p> <pre><code>network:\n  ethernets:\n    enp0s3:\n      dhcp4: true\n  version: 2\n</code></pre> <p>Esto significa que la interfaz est\u00e1 configurada para obtener IP autom\u00e1ticamente mediante DHCP.</p> <p>Cuidado si hay m\u00e1s de un fichero en <code>/etc/netplan/</code></p> <p>Cuidado, porque si hay m\u00e1s de un fichero en la carpeta <code>/etc/netplan/</code> prevalece el que comienza por un n\u00famero superior, y en todo caso, se mezclan todas las configuraciones. </p> <p>Por ello, si hay m\u00e1s de un fichero, debemos identificar el fichero que no queremos y cambiar su nombre para que no acabe en <code>.yaml</code>.</p> <p>Por ejemplo, si tenemos un fichero como <code>50-cloud-init.yaml</code> lo podemos renombrar as\u00ed:</p> <pre><code>mv /etc/netplan/50-cloud-init.yaml /etc/netplan/50-cloud-init.yaml.bak\n</code></pre>"},{"location":"08_02_configuracion_red_netplan/#configurar-ip-estatica","title":"Configurar IP est\u00e1tica","text":"<p>Vamos a modificar este archivo para configurar una IP est\u00e1tica en nuestra interfaz de red.</p> <p>Esquema de red a configurar:</p> <p>Seg\u00fan el dise\u00f1o de nuestra red ISCASOX, la configuraci\u00f3n quedar\u00e1 as\u00ed:</p> <p>enp0s3 (\u00fanica interfaz - red departamentos):</p> <ul> <li>IP: <code>192.168.100.10/24</code></li> <li>Gateway: <code>192.168.100.1</code> (Windows Server)</li> <li>DNS: <code>192.168.100.1</code>, <code>8.8.8.8</code></li> </ul> <p>El Windows Server actuar\u00e1 como puerta de enlace para dar salida a Internet a nuestro servidor Linux.</p> <p>IMPORTANTE</p> <p>El nombre de la interfaz puede variar en vuestro sistema. Usad el comando <code>ip addr</code> para verificar el nombre real y ajustad la configuraci\u00f3n en consecuencia.</p>"},{"location":"08_02_configuracion_red_netplan/#editar-el-archivo-de-configuracion","title":"Editar el archivo de configuraci\u00f3n","text":"<p>Para editar archivos en Linux desde la terminal usamos editores de texto. Los m\u00e1s comunes son:</p> <ul> <li>nano: m\u00e1s sencillo e intuitivo, ideal para principiantes</li> <li>vi o vim: m\u00e1s potente pero con curva de aprendizaje pronunciada</li> </ul> <p>Usaremos nano porque es m\u00e1s f\u00e1cil de usar:</p> <pre><code>sudo nano /etc/netplan/99-installer-config.yaml\n</code></pre> <p>Nos pedir\u00e1 la contrase\u00f1a de sudo si han pasado m\u00e1s de 15 minutos desde la \u00faltima vez que lo usamos.</p> <p>El editor nano se abrir\u00e1 mostrando el contenido actual del archivo. En la parte inferior veremos atajos de teclado (el s\u00edmbolo <code>^</code> representa la tecla Ctrl).</p> <p>Borramos todo el contenido actual (con Supr o Backspace) y escribimos la siguiente configuraci\u00f3n:</p> <pre><code>network:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp0s3:\n      dhcp4: false\n      dhcp6: false\n      addresses:\n        - 192.168.100.10/24\n      routes:\n        - to: default\n          via: 192.168.100.1\n      nameservers:\n        addresses:\n          - 192.168.100.1\n        search:\n          - domsergio.local\n</code></pre> <p>IMPORTANTE - Aspectos cr\u00edticos de YAML</p> <p>En YAML, la indentaci\u00f3n es absolutamente cr\u00edtica. El formato usa espacios para indicar jerarqu\u00eda.</p> <p>Debe indentarse con espacios, NUNCA con tabuladores. Si us\u00e1is tabuladores, dar\u00e1 error.</p> <p>Cada nivel de indentaci\u00f3n son exactamente 2 espacios.</p> <p>Los dos puntos (<code>:</code>) despu\u00e9s de cada clave son obligatorios.</p> <p>Las listas se indican con guiones (<code>-</code>).</p> <p>Verificad cuidadosamente que el nombre de vuestra interfaz coincide con el que mostr\u00f3 <code>ip addr</code>. Si en vuestro sistema la interfaz se llama <code>ens33</code>, <code>eth0</code>, etc., deb\u00e9is usar ese nombre.</p> <p>Explicaci\u00f3n de la configuraci\u00f3n:</p> <ul> <li><code>addresses</code>: la IP est\u00e1tica que asignamos al servidor</li> <li><code>routes</code>: definimos la ruta por defecto (gateway) hacia el Windows Server</li> <li><code>nameservers</code>: servidores DNS que usar\u00e1 el sistema (primero el Windows Server, luego Google DNS como backup)</li> </ul>"},{"location":"08_02_configuracion_red_netplan/#guardar-el-archivo","title":"Guardar el archivo","text":"<p>Para guardar los cambios en nano:</p> <ol> <li>Pulsamos <code>Ctrl + O</code> (letra O, de \"Output\" o salida)</li> <li>Nos preguntar\u00e1 el nombre del archivo. Como no lo cambiamos, simplemente pulsamos <code>Enter</code></li> <li>Para salir del editor: <code>Ctrl + X</code></li> </ol> <p>Una vez guardado la configuraci\u00f3n es adecuado restringir el acceso a dicho fichero, por lo que reduciremos los permisos para evitar problemas futuros:</p> <pre><code>sudo chmod 600 /etc/netplan/99-installer-config.yaml \n</code></pre>"},{"location":"08_02_configuracion_red_netplan/#aplicar-la-configuracion","title":"Aplicar la configuraci\u00f3n","text":"<p>Antes de aplicar la configuraci\u00f3n definitivamente, Netplan nos permite probarla de forma segura:</p> <pre><code>sudo netplan try\n</code></pre> <p>Este comando es muy inteligente. Aplica la configuraci\u00f3n temporalmente y nos pregunta si funciona. Si no respondemos en 120 segundos, revierte autom\u00e1ticamente los cambios. Esto es una medida de seguridad fundamental para no quedarnos sin acceso al servidor.</p> <p>Si todo va bien, veremos:</p> Verificaci\u00f3n de la configuraci\u00f3n Netplan <p>Pulsamos Enter para aceptar definitivamente la nueva configuraci\u00f3n.</p> <p>Tambi\u00e9n se podr\u00eda haber aplicado directamente la configuraci\u00f3n con un </p> <pre><code>sudo netplan apply\n</code></pre> <p>Si hay errores de sintaxis, nos los mostrar\u00e1. Los errores m\u00e1s comunes son:</p> <ul> <li>Indentaci\u00f3n incorrecta (usar tabuladores en vez de espacios, o n\u00famero incorrecto de espacios)</li> <li>Nombre de interfaz incorrecto</li> <li>Falta de dos puntos (<code>:</code>) despu\u00e9s de las claves YAML</li> <li>Guiones (<code>-</code>) mal colocados en las listas</li> </ul> <p>Si hay error, el comando no aplicar\u00e1 los cambios. Debemos volver a editar el archivo y corregir.</p>"},{"location":"08_02_configuracion_red_netplan/#verificar-la-configuracion","title":"Verificar la configuraci\u00f3n","text":"<p>Una vez aplicada correctamente, verificamos que la IP se ha asignado:</p> <pre><code>ip addr show\n</code></pre> <p>Deber\u00edamos ver nuestra interfaz con la direcci\u00f3n IP configurada:</p> Verificaci\u00f3n de la configuraci\u00f3n de red <p>Verificamos que podemos comunicarnos con el Windows Server:</p> <pre><code>ping -c 4 192.168.10.1\n</code></pre> <p>Si el Windows Server est\u00e1 configurado correctamente como gateway, deber\u00edamos tener tambi\u00e9n acceso a Internet:</p> <pre><code>ping -c 4 google.com\n</code></pre> <p>Si ambos funcionan, \u00a1perfecto! La red est\u00e1 correctamente configurada.</p> <p>Nota: Si el ping a Internet no funciona, aseguraos de que el Windows Server tiene configurado correctamente el enrutamiento y el NAT para dar salida a Internet a las redes internas.</p>"},{"location":"08_02_configuracion_red_netplan/#configurar-el-nombre-del-servidor-hostname","title":"Configurar el nombre del servidor (hostname)","text":"<p>El nombre del servidor (hostname) se configura con el comando <code>hostnamectl</code>:</p> <pre><code>sudo hostnamectl set-hostname SRVXXX_Linux\n</code></pre> <p>Para verificar que se ha cambiado correctamente:</p> <pre><code>hostnamectl\n</code></pre> <p>Veremos informaci\u00f3n detallada del sistema incluyendo el nuevo hostname.</p> <p>IMPORTANTE: Tambi\u00e9n debemos editar el archivo <code>/etc/hosts</code> para que el sistema resuelva correctamente su propio nombre:</p> <pre><code>sudo nano /etc/hosts\n</code></pre> <p>El archivo debe contener al menos estas l\u00edneas:</p> <pre><code>127.0.0.1 localhost\n127.0.1.1 SRVXXX_Linux\n\n# Las siguientes l\u00edneas son para IPv6\n::1     ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n</code></pre> <p>La l\u00ednea importante es <code>127.0.1.1 SRVXXX_Linux</code>. Aseguraos de que coincide con vuestro hostname.</p> <p>Guardamos el archivo (<code>Ctrl+O</code>, <code>Enter</code>, <code>Ctrl+X</code>).</p> <p>Para que todos los cambios se apliquen completamente, reiniciamos el servidor:</p> <pre><code>sudo reboot\n</code></pre> <p>El sistema se reiniciar\u00e1. Esperamos unos 30 segundos y volvemos a hacer login. El prompt deber\u00eda mostrar ya el nuevo nombre del servidor:</p> <pre><code>admin@SRVXXX_Linux:~$\n</code></pre>"},{"location":"08_02_configuracion_red_netplan/#acceso-al-servidor-mediante-ssh","title":"Acceso al servidor mediante <code>ssh</code>","text":"<p>Trabajar con la interfaz del servidor no es muy amigable y adem\u00e1s como norma general en condiciones normales de cualquier empresa, no vamos a estar trabajando frente al servidor que se encontrar\u00e1 en un CPD (Centro de Proceso de Datos). Por eso, lo l\u00f3gico es conectarnos a los servidores GNU/Linux mediante <code>ssh</code>.</p> <p>Vamos a emular este entorno en nuestra m\u00e1quina de forma que:</p> <ul> <li>Configuraremos nuestra m\u00e1quina virtual para poder acceder a ella desde nuestro equipo host.</li> <li>Trabajaremos desde la terminal de nuestro host, que nos permitir\u00e1 trabajar mejor y entre otras cosas podremos copiar y pegar.</li> </ul> <p>As\u00ed pues sigamos los siguientes pasos.</p> <ol> <li>A\u00f1adamos una nueva tarjeta de red a nuestro equipo virtual</li> <li>Configuremos una IP para esta nueva tarjeta</li> <li>Accedamos usando <code>ssh</code></li> </ol>"},{"location":"08_02_configuracion_red_netplan/#1-configuracion-de-nueva-tarjeta-de-red","title":"1. Configuraci\u00f3n de nueva tarjeta de red.","text":"<p>Vamos a optar por una configuraci\u00f3n de red solo anfitri\u00f3n para poder acceder a nuestro servidor \u00fanicamente desde nuestro equipo host y no interferir con el resto de equipos de nuestra LAN del aula.</p> <p>Para ello, en Oracle VirtualBox vamos a Archivo &gt; Herramientas &gt; Red y en la primera pesta\u00f1a de Redes solo-anfitri\u00f3n pulsamos sobre el bot\u00f3n Crear y autom\u00e1ticamente se habr\u00e1 creado en nuestro equipo una interfaz virtual para comunicarnos directamente con nuestras m\u00e1quinas virtuales.</p> <p>Cono normal general, veremos que la red creada es una 192.168.56.1/24</p> Redes solo-anfitri\u00f3n en VirtualBox <p>Apagamos nuestro equipo y a\u00f1adimos una nueva tarjeta de red, habilitamos una segunda tarjeta de red y seleccionamos la red solo-anfitri\u00f3n que acabamos de crear.</p> Redes solo-anfitri\u00f3n en VirtualBox"},{"location":"08_02_configuracion_red_netplan/#2-configuracion-de-nueva-direccion-de-red","title":"2. Configuraci\u00f3n de nueva direcci\u00f3n de red.","text":"<p>Ahora iniciamos de nuevo el equipo y comprobamos las nuevas direcciones de red.</p> Configuraci\u00f3n red solo anfitri\u00f3n para conexi\u00f3n por ssh <p>En la imagen podemos ver que tenemos una nueva tarjeta de red <code>enp0s8</code> que no esta activa. Vamos a editar de nuevo nuestro netplan y simplemente le asignaremos una direcci\u00f3n de red teniendo en cuenta la red que ten\u00eda el interfaz solo-anfitri\u00f3n que acabamos de crear : <code>192.168.56.0/24</code></p> <p>As\u00ed pues, a\u00f1adimos nueva configuraci\u00f3n a nuestro <code>netplan</code></p> <pre><code>    enp0s8:\n      dhcp4: false\n      addresses:\n        - 192.168.56.2/24\n</code></pre> <p>probamos y aplicamos cambios y verificamos la nueva IP de nuestro equipo</p> Configuraci\u00f3n red solo anfitri\u00f3n para conexi\u00f3n por ssh <p>Ya tenemos el equipo preparado para acceder desde nuestro host.</p>"},{"location":"08_02_configuracion_red_netplan/#3-acceso-por-ssh","title":"3. Acceso por <code>ssh</code>","text":"<p>Ahora nos vamos a nuestro equipo host, abrimos un terminal y probamos las comunicaciones entre el Ubuntu Server y nuestro equipo de clase, haciendo respectivamente <code>ping</code> entre ellos:</p> Comprobar comunicaciones entre host y m\u00e1quina virtual <p>Y ahora solamente nos queda comunicarnos por <code>ssh</code> desde nuestro host mediante el siguiente comando:</p> <pre><code>ssh sergio@192.168.56.2\n</code></pre> <p>Donde:</p> <ul> <li><code>ssh</code> es el comando conectarnos</li> <li><code>sergio</code> es el nombre de tu usuario en tu Ubuntu Server</li> <li><code>192.168.56.2</code> es la IP de tu Ubuntu Server</li> </ul> <p>Ejecutamos el comando, nos pregunta si nos queremos conectar (y nos advierte de que vamos a dejar rastro) y contestamos <code>yes</code>, y en nuestra terminal estamos trabajando en el equipo servidor.</p> Conexi\u00f3n ssh <p>A partir de este momento, no tocamos el servidor, y trabajamos desde el terminal de nuestro equipo host.</p>"},{"location":"08_03_gestion_almacenamiento_linux/","title":"Gesti\u00f3n b\u00e1sica de almacenamiento en Linux","text":""},{"location":"08_03_gestion_almacenamiento_linux/#introduccion-al-almacenamiento-en-linux","title":"Introducci\u00f3n al almacenamiento en Linux","text":"<p>Cuando trabajamos con servidores Linux, es fundamental comprender c\u00f3mo funciona el sistema de almacenamiento. A diferencia de Windows, donde cada disco suele aparecer como una letra de unidad independiente (<code>C:</code>, <code>D:</code>, <code>E:</code>), en Linux todo el almacenamiento se integra en un \u00fanico \u00e1rbol de directorios que comienza en la ra\u00edz <code>/</code>.</p> <p>Esta diferencia conceptual puede resultar confusa al principio, pero en realidad proporciona una flexibilidad extraordinaria. Podemos a\u00f1adir discos nuevos y \"conectarlos\" en cualquier punto del sistema de archivos, de forma que para los usuarios y aplicaciones resulte completamente transparente d\u00f3nde se encuentra f\u00edsicamente cada dato.</p> <p>En esta secci\u00f3n vamos a aprender los conceptos fundamentales del almacenamiento en Linux: c\u00f3mo el sistema detecta los discos, c\u00f3mo los preparamos para su uso, y c\u00f3mo los integramos en el \u00e1rbol de directorios mediante el proceso de montaje.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#el-concepto-de-montaje-en-linux","title":"El concepto de montaje en Linux","text":""},{"location":"08_03_gestion_almacenamiento_linux/#diferencias-entre-windows-y-linux","title":"Diferencias entre Windows y Linux","text":"<p>Para entender el montaje en Linux, primero debemos comprender c\u00f3mo funciona en Windows, que probablemente nos resulte m\u00e1s familiar.</p> <p>En Windows, cada disco o partici\u00f3n aparece como una unidad independiente con su propia letra. Si tenemos tres discos duros, podr\u00edamos tener:</p> <pre><code>C:\\ (disco principal con Windows)\nD:\\ (disco de datos)\nE:\\ (disco de backups)\n</code></pre> <p>Cada unidad es como una \"isla\" separada. Para acceder a los datos del disco D:, debemos cambiar expl\u00edcitamente a esa unidad. No hay conexi\u00f3n directa entre ellas en el sistema de archivos.</p> <p>En Linux, en cambio, todo el almacenamiento forma parte de un \u00fanico \u00e1rbol jer\u00e1rquico que comienza en la ra\u00edz <code>/</code>. No existen letras de unidad. Todos los discos, particiones y dispositivos se integran como carpetas dentro de este \u00e1rbol \u00fanico.</p> <p>Por ejemplo, podr\u00edamos tener:</p> <pre><code>/ (ra\u00edz del sistema)\n\u251c\u2500\u2500 home (carpetas de usuarios)\n\u251c\u2500\u2500 var (datos variables del sistema)\n\u251c\u2500\u2500 srv (datos de servicios)\n\u2502   \u251c\u2500\u2500 empresa (montado desde un disco adicional)\n\u2502   \u2514\u2500\u2500 backups (montado desde otro disco)\n\u2514\u2500\u2500 boot (archivos de arranque)\n</code></pre> <p>En este esquema, <code>/srv/empresa</code> y <code>/srv/backups</code> podr\u00edan estar f\u00edsicamente en discos duros completamente diferentes, pero para el usuario aparecen simplemente como carpetas m\u00e1s dentro del sistema. Esta integraci\u00f3n se realiza mediante el proceso de montaje.</p> <p>Otro ejemplo:</p> Esquema de sistema con 3 d\u00edscos extra montados"},{"location":"08_03_gestion_almacenamiento_linux/#que-significa-montar-un-disco","title":"Qu\u00e9 significa \"montar\" un disco","text":"<p>Montar un disco o partici\u00f3n significa conectar su contenido a una carpeta espec\u00edfica del sistema de archivos. Esa carpeta se denomina punto de montaje.</p> <p>Pensemos en una analog\u00eda: el sistema de archivos de Linux es como un edificio de oficinas. La estructura del edificio (pasillos, salas, despachos) ya existe. Cuando montamos un disco, es como si coloc\u00e1ramos un archivador adicional en una de esas salas. El archivador (disco) contiene sus propios documentos, pero se accede a \u00e9l desde una ubicaci\u00f3n concreta dentro del edificio.</p> <p>Ejemplo pr\u00e1ctico: </p> <p>Imaginemos que a\u00f1adimos un disco duro de 100GB para almacenar datos de la empresa. Podemos:</p> <ol> <li>Crear una carpeta <code>/srv/empresa</code> (el punto de montaje, una sala vac\u00eda en nuestro edificio)</li> <li>Montar el disco en esa carpeta</li> <li>A partir de ese momento, todo lo que guardemos en <code>/srv/empresa</code> se almacenar\u00e1 f\u00edsicamente en ese disco de 100GB</li> </ol> <p>Para los usuarios y aplicaciones, <code>/srv/empresa</code> es simplemente otra carpeta m\u00e1s. No necesitan saber que est\u00e1 en un disco separado. Esta transparencia es una de las grandes ventajas de Linux.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#ventajas-del-sistema-de-montaje","title":"Ventajas del sistema de montaje","text":"<p>Este enfoque proporciona varias ventajas importantes:</p> <p>Flexibilidad total: podemos decidir exactamente d\u00f3nde queremos que aparezca cada disco. Si necesitamos m\u00e1s espacio para carpetas de usuarios, a\u00f1adimos un disco y lo montamos en <code>/home</code>. Si necesitamos espacio para backups, lo montamos en <code>/srv/backups</code>. La estructura l\u00f3gica permanece clara y ordenada.</p> <p>Transparencia: las aplicaciones y usuarios no necesitan saber en qu\u00e9 disco f\u00edsico est\u00e1n los datos. Simplemente usan rutas como <code>/srv/empresa/documentos/informe.pdf</code> y el sistema se encarga de dirigir la operaci\u00f3n al disco correcto.</p> <p>Seguridad: podemos montar discos con diferentes opciones de seguridad. Por ejemplo, un disco con datos sensibles podr\u00eda montarse como solo lectura, o un disco externo podr\u00eda montarse sin permitir la ejecuci\u00f3n de programas desde \u00e9l.</p> <p>Reorganizaci\u00f3n sencilla: si m\u00e1s adelante necesitamos cambiar un disco por otro m\u00e1s grande, podemos copiar los datos al disco nuevo, desmontarlo del punto antiguo, montar el nuevo en el mismo punto, y todo sigue funcionando exactamente igual.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#identificacion-de-discos-y-particiones","title":"Identificaci\u00f3n de discos y particiones","text":""},{"location":"08_03_gestion_almacenamiento_linux/#nomenclatura-de-dispositivos-en-linux","title":"Nomenclatura de dispositivos en Linux","text":"<p>Antes de poder trabajar con un disco, necesitamos saber c\u00f3mo identificarlo en el sistema. Linux asigna nombres espec\u00edficos a cada dispositivo de almacenamiento.</p> <p>Los discos duros tradicionales (SATA) y los virtuales (en VirtualBox) aparecen con nombres como:</p> <pre><code>/dev/sda    (primer disco)\n/dev/sdb    (segundo disco)\n/dev/sdc    (tercer disco)\n...\n</code></pre> <p>Las particiones dentro de cada disco se numeran:</p> <pre><code>/dev/sda1   (primera partici\u00f3n del primer disco)\n/dev/sda2   (segunda partici\u00f3n del primer disco)\n/dev/sdb1   (primera partici\u00f3n del segundo disco)\n...\n</code></pre> <p>Importante: en algunos sistemas, especialmente con discos virtuales, los nombres pueden ser <code>/dev/vda</code>, <code>/dev/vdb</code>, etc., en lugar de <code>sda</code>, <code>sdb</code>. El principio es el mismo, solo cambia la letra inicial.</p> <p>Estos nombres se encuentran siempre en el directorio <code>/dev/</code> (de \"devices\" - dispositivos), que es donde Linux coloca los archivos especiales que representan el hardware del sistema.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#ver-los-discos-disponibles","title":"Ver los discos disponibles","text":"<p>Para ver todos los dispositivos de bloque (discos, particiones, etc.) conectados al sistema, usamos el comando <code>lsblk</code>:</p> <pre><code>lsblk\n</code></pre> <p>Este comando muestra un \u00e1rbol con todos los dispositivos de almacenamiento. Una salida t\u00edpica podr\u00eda ser:</p> Ver los discos disponibles <p>Interpretaci\u00f3n de cada columna:</p> <ul> <li><code>NAME</code>: nombre del dispositivo o partici\u00f3n</li> <li><code>SIZE</code>: tama\u00f1o total</li> <li><code>TYPE</code>: tipo (disk=disco completo, part=partici\u00f3n, lvm=volumen LVM)</li> <li><code>MOUNTPOINTS</code>: d\u00f3nde est\u00e1 montado actualmente (si est\u00e1 montado)</li> </ul> <p>En este ejemplo vemos:</p> <ul> <li><code>sda</code>: disco principal de 25GB con tres particiones, la tercera montada en <code>/</code> (ra\u00edz del sistema)</li> <li><code>sr0</code>: Unidad de CD, que no tiene contenido y no esta montada</li> </ul> <p>Un disco que aparece sin \"MOUNTPOINTS\" no est\u00e1 montado, lo que significa que aunque el sistema lo detecta, todav\u00eda no podemos acceder a su contenido.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#practica-anadir-y-preparar-un-disco-nuevo","title":"Pr\u00e1ctica: a\u00f1adir y preparar un disco nuevo","text":"<p>Vamos a realizar el proceso completo de a\u00f1adir un disco nuevo a nuestro servidor, prepararlo y hacerlo accesible mediante montaje.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#paso-1-anadir-un-disco-en-virtualbox","title":"Paso 1: A\u00f1adir un disco en VirtualBox","text":"<p>Con la m\u00e1quina virtual completamente apagada, vamos a a\u00f1adir un disco adicional.</p> <p>Apagar la m\u00e1quina virtual:</p> <p>Desde la terminal del servidor ejecutamos:</p> <pre><code>sudo poweroff\n</code></pre> <p>El sistema se apagar\u00e1 de forma ordenada, cerrando todos los servicios correctamente.</p> <p>A\u00f1adir el disco en VirtualBox:</p> <p>Con la VM apagada, en VirtualBox:</p> <ol> <li>Seleccionamos nuestra VM <code>SRVXXX_Linux</code></li> <li>Click en Configuraci\u00f3n</li> <li>Navegamos a Almacenamiento</li> <li>En Controladora: SATA, click en el icono de disco con <code>+</code> (A\u00f1adir disco duro)</li> <li>Click en Crear</li> <li>Configuramos el nuevo disco:</li> <li>Tipo: VDI (VirtualBox Disk Image)</li> <li>Almacenamiento: Reservado din\u00e1micamente</li> <li>Tama\u00f1o: 5 GB</li> <li>Click en Crear y luego en Aceptar</li> </ol>"},{"location":"08_03_gestion_almacenamiento_linux/#paso-2-verificar-la-deteccion-del-disco","title":"Paso 2: Verificar la detecci\u00f3n del disco","text":"<p>Iniciamos la m\u00e1quina virtual y hacemos login con nuestro usuario inicial <code>admin</code>.</p> <p>Verificamos que el sistema ha detectado el nuevo disco:</p> <pre><code>lsblk\n</code></pre> <p>Deber\u00edamos ver algo similar a:</p> Nuevo disco `sdb2` instalado <p>El nuevo disco aparece como <code>sdb</code> de 5GB, sin particiones y sin montar. Est\u00e1 detectado por el sistema, pero todav\u00eda no podemos usarlo.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#paso-3-particionar-el-disco","title":"Paso 3: Particionar el disco","text":"<p>Aunque tenemos un disco de 5GB, el sistema operativo no puede usar directamente el disco completo. Primero debemos crear al menos una partici\u00f3n en \u00e9l.</p> <p>Una partici\u00f3n es una divisi\u00f3n l\u00f3gica de un disco. Podemos crear una \u00fanica partici\u00f3n que ocupe todo el disco, o dividirlo en varias particiones m\u00e1s peque\u00f1as. En nuestro caso, crearemos una \u00fanica partici\u00f3n que use todo el espacio disponible.</p> <p>Utilizaremos la herramienta <code>fdisk</code> para particionar:</p> <pre><code>sudo fdisk /dev/sdb\n</code></pre> <p>Este comando inicia un modo interactivo. Veremos un prompt <code>Command (m for help):</code> esperando nuestras \u00f3rdenes.</p> <p>Secuencia de comandos a ejecutar:</p> <ol> <li>Escribimos <code>n</code> (new - nueva partici\u00f3n) y pulsamos Enter</li> <li>Elegimos <code>p</code> (primary - partici\u00f3n primaria) y pulsamos Enter</li> <li>N\u00famero de partici\u00f3n: pulsamos Enter para aceptar el valor por defecto (1)</li> <li>Primer sector: pulsamos Enter para aceptar el valor por defecto</li> <li>\u00daltimo sector: pulsamos Enter para usar todo el espacio disponible</li> <li>Escribimos <code>w</code> (write - escribir cambios) y pulsamos Enter</li> </ol> <p>La herramienta guardar\u00e1 los cambios y saldr\u00e1.</p> Particionando nuevo disco <p>Verificamos que la partici\u00f3n se ha creado:</p> <pre><code>lsblk\n</code></pre> <p>Ahora veremos:</p> Nuevo disco sdb particionado <p>Perfecto. Tenemos <code>sdb1</code>, una partici\u00f3n que ocupa los 5GB completos del disco <code>sdb</code>.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#paso-4-crear-un-sistema-de-archivos","title":"Paso 4: Crear un sistema de archivos","text":"<p>La partici\u00f3n existe, pero est\u00e1 \"vac\u00eda\" a nivel l\u00f3gico. Necesita un sistema de archivos para poder almacenar datos de forma organizada.</p> <p>El sistema de archivos es como el \"\u00edndice\" que permite al sistema operativo saber d\u00f3nde est\u00e1 cada archivo, c\u00f3mo se llama, qu\u00e9 permisos tiene, etc. Sin sistema de archivos, el disco ser\u00eda simplemente un mont\u00f3n de bytes sin estructura.</p> <p>En Linux, el sistema de archivos m\u00e1s com\u00fan es ext4 (Fourth Extended Filesystem). Es maduro, estable, eficiente y ampliamente compatible.</p> <p>Creamos el sistema de archivos ext4 en nuestra partici\u00f3n:</p> <pre><code>sudo mkfs.ext4 /dev/sdb1\n</code></pre> <p>Este proceso formatea la partici\u00f3n y tarda unos segundos. Veremos una salida similar a:</p> Formateando la nueva partici\u00f3n <p>La partici\u00f3n ahora tiene un sistema de archivos ext4 completamente funcional y listo para almacenar datos.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#paso-5-crear-el-punto-de-montaje","title":"Paso 5: Crear el punto de montaje","text":"<p>Antes de montar el disco, necesitamos decidir d\u00f3nde queremos que aparezca en el \u00e1rbol de directorios. Vamos a montarlo en <code>/srv/datos</code>, un lugar apropiado para datos de servicios del servidor.</p> <p>Primero verificamos si la carpeta <code>/srv</code> existe:</p> <pre><code>ls -ld /srv\n</code></pre> <p>Si existe (lo cual es habitual), veremos:</p> <pre><code>drwxr-xr-x 2 root root 4096 ... /srv\n</code></pre> <p>Si no existiera, la crear\u00edamos con <code>sudo mkdir /srv</code>.</p> <p>Ahora creamos la carpeta espec\u00edfica donde montaremos nuestro disco:</p> <pre><code>sudo mkdir /srv/datos\n</code></pre> <p>Verificamos que se ha creado:</p> <pre><code>ls -l /srv/\n</code></pre> Preparando carpeta para montar unidad <p>La carpeta <code>/srv/datos</code> existe y est\u00e1 vac\u00eda. Este ser\u00e1 nuestro punto de montaje.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#paso-6-montar-el-disco","title":"Paso 6: Montar el disco","text":"<p>Ahora conectamos la partici\u00f3n formateada a la carpeta que acabamos de crear:</p> <pre><code>sudo mount /dev/sdb1 /srv/datos\n</code></pre> <p>Este comando no muestra ninguna salida si todo va bien.</p> <p>Verificamos que el montaje se ha realizado correctamente:</p> <pre><code>df -h\n</code></pre> <p>El comando <code>df</code> (disk free) muestra todos los sistemas de archivos montados y su espacio disponible. La opci\u00f3n <code>-h</code> hace que los tama\u00f1os se muestren en formato legible (GB, MB, etc.).</p> <p>Al final de la lista deber\u00edamos ver:</p> Unidad montada en la carpeta <p>Perfecto. Nuestro disco de 5GB est\u00e1 montado en <code>/srv/datos</code> y tiene aproximadamente 4.9GB disponibles (el sistema de archivos usa un poco de espacio para sus estructuras internas).</p> <p>Tambi\u00e9n podemos verificarlo con <code>lsblk</code>:</p> <pre><code>lsblk\n</code></pre> <p>Ahora <code>sdb1</code> muestra su punto de montaje: <code>/srv/datos</code>.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#paso-7-probar-el-disco","title":"Paso 7: Probar el disco","text":"<p>Vamos a verificar que podemos crear y leer archivos en nuestro nuevo disco.</p> <p>Creamos un archivo de prueba:</p> <pre><code>sudo touch /srv/datos/prueba.txt\n</code></pre> <p>El comando <code>touch</code> crea un archivo vac\u00edo. Verificamos que se ha creado:</p> <pre><code>ls -l /srv/datos/\n</code></pre> Contenido de la carpeta <p>Vemos dos elementos:</p> <ul> <li><code>lost+found</code>: carpeta especial que ext4 crea autom\u00e1ticamente para recuperaci\u00f3n de datos en caso de errores del sistema</li> <li><code>prueba.txt</code>: nuestro archivo de prueba</li> </ul> <p>Creamos tambi\u00e9n una carpeta y un archivo dentro con algo de contenido:</p> <pre><code>sudo mkdir /srv/datos/documentos\necho \"Archivo de prueba en disco adicional\" | sudo tee /srv/datos/documentos/info.txt\n</code></pre> <p>Verificamos el contenido:</p> <pre><code>cat /srv/datos/documentos/info.txt\n</code></pre> Contenido de la carpeta <p>Perfecto. El disco funciona correctamente y podemos leer y escribir datos en \u00e9l.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#paso-8-montaje-automatico-con-etcfstab","title":"Paso 8: Montaje autom\u00e1tico con /etc/fstab","text":"<p>Hay un problema importante: si reiniciamos el servidor ahora, el disco no se montar\u00e1 autom\u00e1ticamente. Despu\u00e9s de cada reinicio, <code>/srv/datos</code> estar\u00eda vac\u00edo y tendr\u00edamos que volver a ejecutar <code>sudo mount /dev/sdb1 /srv/datos</code> manualmente.</p> <p>Para que el disco se monte autom\u00e1ticamente cada vez que el sistema arranque, debemos a\u00f1adir una entrada en el archivo <code>/etc/fstab</code>.</p> <p>El archivo <code>/etc/fstab</code> (file systems table - tabla de sistemas de archivos) contiene la lista de todos los sistemas de archivos que deben montarse autom\u00e1ticamente al inicio. Es uno de los archivos de configuraci\u00f3n m\u00e1s importantes de Linux.</p> <p>Siempre hacer backup antes de modificar fstab:</p> <p>Un error en este archivo puede impedir que el sistema arranque correctamente, as\u00ed que es fundamental hacer una copia de seguridad antes de tocarlo:</p> <pre><code>sudo cp /etc/fstab /etc/fstab.backup\n</code></pre> <p>Si algo sale mal, podremos recuperar el archivo original desde esta copia.</p> <p>Editamos el archivo:</p> <pre><code>sudo nano /etc/fstab\n</code></pre> <p>Veremos algo similar a esto (puede variar seg\u00fan la instalaci\u00f3n):</p> <pre><code># /etc/fstab: static file system information.\n#\n# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\nUUID=abc-123-def... / ext4 defaults 0 1\nUUID=xyz-789-ghi... /boot ext4 defaults 0 2\n/swap.img none swap sw 0 0\n</code></pre> <p>Nos desplazamos hasta el final del archivo (con las flechas del teclado) y a\u00f1adimos esta l\u00ednea:</p> <pre><code>/dev/sdb1  /srv/datos  ext4  defaults  0  2\n</code></pre> <p>Explicaci\u00f3n de cada campo (separados por espacios o tabuladores):</p> <ol> <li><code>/dev/sdb1</code>: dispositivo a montar (nuestra partici\u00f3n)</li> <li><code>/srv/datos</code>: punto de montaje (d\u00f3nde queremos que aparezca)</li> <li><code>ext4</code>: tipo de sistema de archivos</li> <li><code>defaults</code>: opciones de montaje (usa las opciones por defecto: lectura/escritura, permitir ejecuci\u00f3n, etc.)</li> <li><code>0</code>: dump (backup autom\u00e1tico con la herramienta dump). <code>0</code> = no hacer backup autom\u00e1tico</li> <li><code>2</code>: orden de comprobaci\u00f3n al arrancar. <code>0</code> = no comprobar, <code>1</code> = comprobar primero (solo para <code>/</code>), <code>2</code> = comprobar despu\u00e9s</li> </ol> <p>Guardamos el archivo (<code>Ctrl+O</code>, <code>Enter</code>) y salimos del editor (<code>Ctrl+X</code>).</p> <p>Verificar que no hay errores (paso cr\u00edtico):</p> <p>Antes de reiniciar, SIEMPRE debemos verificar que el archivo <code>/etc/fstab</code> es correcto. Un error tipogr\u00e1fico podr\u00eda impedir que el sistema arranque.</p> <pre><code>sudo mount -a\n</code></pre> <p>Este comando intenta montar todos los sistemas de archivos listados en <code>/etc/fstab</code>. Si hay alg\u00fan error, nos lo mostrar\u00e1 inmediatamente. Si no muestra ning\u00fan mensaje, significa que todo est\u00e1 correcto.</p> <p>Verificamos que el disco sigue montado correctamente:</p> <pre><code>df -h | grep datos\n</code></pre> <pre><code>/dev/sdb1       4.9G   28K  4.6G   1% /srv/datos\n</code></pre> <p>Perfecto.</p> <p>Probar con un reinicio:</p> <p>Ahora s\u00ed podemos reiniciar con confianza:</p> <pre><code>sudo reboot\n</code></pre> <p>El sistema se reiniciar\u00e1. Esperamos unos 30 segundos y volvemos a conectarnos.</p> <p>Tras el reinicio, lo primero que hacemos es verificar que el disco se ha montado autom\u00e1ticamente:</p> <pre><code>df -h | grep datos\n</code></pre> <p>Si vemos el disco montado, todo ha funcionado correctamente. El montaje autom\u00e1tico est\u00e1 configurado.</p> <p>Verificamos tambi\u00e9n que nuestros archivos de prueba siguen ah\u00ed:</p> <pre><code>ls -l /srv/datos/\ncat /srv/datos/documentos/info.txt\n</code></pre> <p>Si vemos nuestros archivos, \u00a1perfecto! El disco est\u00e1 correctamente integrado en el sistema y persistir\u00e1 tras reinicios.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#permisos-y-propiedad-de-carpetas-montadas","title":"Permisos y propiedad de carpetas montadas","text":"<p>Cuando montamos un disco, la carpeta ra\u00edz de ese disco pertenece por defecto al usuario <code>root</code>. Esto significa que los usuarios normales no pueden crear archivos en \u00e9l sin usar <code>sudo</code>.</p> <p>Si queremos que un usuario espec\u00edfico (por ejemplo, nuestro usuario <code>admin</code>) pueda escribir libremente en <code>/srv/datos</code>, debemos cambiar la propiedad de la carpeta:</p> <pre><code>sudo chown admin:admin /srv/datos\n</code></pre> <p>Este comando cambia el propietario y el grupo de <code>/srv/datos</code> a <code>admin</code>. A partir de ahora, el usuario <code>admin</code> puede crear y modificar archivos en esa carpeta sin necesidad de <code>sudo</code>.</p> <p>Verificamos el cambio:</p> <pre><code>ls -ld /srv/datos\n</code></pre> <pre><code>drwxr-xr-x 4 admin admin 4096 ... /srv/datos\n</code></pre> <p>Ahora podemos crear archivos sin <code>sudo</code>:</p> <pre><code>touch /srv/datos/mi_archivo.txt\nls -l /srv/datos/\n</code></pre> <pre><code>-rw-r--r-- 1 admin admin    0 ... mi_archivo.txt\n</code></pre> <p>El archivo pertenece a <code>admin</code> y lo hemos creado sin privilegios de superusuario.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#desmontar-un-disco","title":"Desmontar un disco","text":"<p>Si en alg\u00fan momento necesitamos desconectar el disco del sistema (por ejemplo, para mantenimiento o para moverlo a otro punto de montaje), usamos el comando <code>umount</code> (sin 'n'):</p> <pre><code>sudo umount /srv/datos\n</code></pre> <p>Este comando desmonta el sistema de archivos. La carpeta <code>/srv/datos</code> volver\u00e1 a estar vac\u00eda (pero seguir\u00e1 existiendo).</p> <p>Verificamos:</p> <pre><code>df -h | grep datos\n</code></pre> <p>No deber\u00edamos ver ninguna salida, confirmando que el disco ya no est\u00e1 montado.</p> <p>Si intentamos listar el contenido:</p> <pre><code>ls /srv/datos/\n</code></pre> <p>La carpeta aparecer\u00e1 vac\u00eda (o solo mostrar\u00e1 archivos que estuvieran ah\u00ed antes de montar el disco).</p> <p>Importante: no podemos desmontar un disco que est\u00e9 en uso. Si alg\u00fan proceso est\u00e1 accediendo a archivos en ese disco, o si alg\u00fan usuario tiene su directorio de trabajo en \u00e9l, <code>umount</code> dar\u00e1 un error:</p> <pre><code>umount: /srv/datos: target is busy\n</code></pre> <p>En ese caso, debemos cerrar todos los procesos que est\u00e9n usando ese disco antes de poder desmontarlo.</p> <p>Para volver a montarlo:</p> <pre><code>sudo mount /dev/sdb1 /srv/datos\n</code></pre> <p>O simplemente:</p> <pre><code>sudo mount -a\n</code></pre> <p>Que monta todo lo que est\u00e9 en <code>/etc/fstab</code>.</p>"},{"location":"08_03_gestion_almacenamiento_linux/#comandos-utiles-para-gestion-de-almacenamiento","title":"Comandos \u00fatiles para gesti\u00f3n de almacenamiento","text":"<p>Aqu\u00ed tenemos un resumen de los comandos m\u00e1s importantes que hemos visto:</p> <p>Ver discos y particiones: </p><pre><code>lsblk                    # Lista todos los dispositivos de bloque\nsudo fdisk -l            # Lista discos y particiones con detalles\n</code></pre><p></p> <p>Ver espacio en discos montados: </p><pre><code>df -h                    # Espacio de todos los sistemas de archivos montados\ndf -h /srv/datos         # Espacio de un punto de montaje espec\u00edfico\n</code></pre><p></p> <p>Ver uso de espacio en carpetas: </p><pre><code>du -sh /srv/datos/*      # Tama\u00f1o de cada subcarpeta\ndu -sh /srv/datos        # Tama\u00f1o total de la carpeta\n</code></pre><p></p> <p>Montar y desmontar: </p><pre><code>sudo mount /dev/sdb1 /srv/datos    # Montar manualmente\nsudo umount /srv/datos             # Desmontar\nsudo mount -a                      # Montar todo lo de /etc/fstab\n</code></pre><p></p> <p>Verificar fstab: </p><pre><code>cat /etc/fstab           # Ver el contenido actual\nsudo mount -a            # Probar que no hay errores\n</code></pre><p></p>"},{"location":"08_03_gestion_almacenamiento_linux/#reflexion-final","title":"Reflexi\u00f3n final","text":"<p>Hemos completado el ciclo completo de a\u00f1adir un disco nuevo a un sistema Linux:</p> <ol> <li>A\u00f1adir el disco f\u00edsico (en VirtualBox)</li> <li>Verificar que el sistema lo detecta</li> <li>Particionarlo</li> <li>Crear un sistema de archivos en la partici\u00f3n</li> <li>Crear un punto de montaje</li> <li>Montar el disco</li> <li>Configurar el montaje autom\u00e1tico</li> <li>Verificar que todo funciona correctamente</li> </ol> <p>Este proceso es fundamental en la administraci\u00f3n de servidores Linux. Entender c\u00f3mo funciona el montaje nos da el control total sobre c\u00f3mo organizamos el almacenamiento de nuestro sistema, permiti\u00e9ndonos adaptarlo perfectamente a las necesidades de cada situaci\u00f3n.</p> <p>Ahora que comprendemos los fundamentos del montaje y la gesti\u00f3n b\u00e1sica de discos, estamos preparados para aprender sobre LVM (Logical Volume Manager), que a\u00f1ade una capa de abstracci\u00f3n y flexibilidad extraordinaria sobre estos conceptos b\u00e1sicos que acabamos de dominar.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/","title":"Gesti\u00f3n de almacenamiento con LVM","text":""},{"location":"08_04_gestion_almacenamiento_lvm/#que-es-lvm-y-por-que-usarlo","title":"Qu\u00e9 es LVM y por qu\u00e9 usarlo","text":"<p>LVM (Logical Volume Manager) es un sistema de gesti\u00f3n de almacenamiento que a\u00f1ade una capa de abstracci\u00f3n entre los discos f\u00edsicos y el sistema de archivos. Esta abstracci\u00f3n nos proporciona una flexibilidad extraordinaria que no existe con las particiones tradicionales.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#comparacion-particiones-tradicionales-vs-lvm","title":"Comparaci\u00f3n: Particiones tradicionales vs LVM","text":"<p>Con particiones tradicionales:</p> <p>Cuando creamos una partici\u00f3n, definimos su tama\u00f1o de forma fija en el disco. Si esa partici\u00f3n se queda sin espacio m\u00e1s adelante, ampliarla es extremadamente complicado y arriesgado. Normalmente requiere:</p> <ul> <li>Parar el sistema completamente</li> <li>Redimensionar la partici\u00f3n con herramientas especiales</li> <li>Rezar para que no haya corrupci\u00f3n de datos</li> <li>Reiniciar el sistema</li> </ul> <p>No podemos \"mover\" espacio libre de una partici\u00f3n a otra f\u00e1cilmente. Si tenemos 50GB libres en una partici\u00f3n y otra se ha quedado sin espacio, no hay forma sencilla de transferir ese espacio.</p> <p>Tampoco podemos combinar varios discos f\u00edsicos para formar una \u00fanica partici\u00f3n grande. Cada disco es independiente.</p> <p>Con LVM:</p> <ul> <li>Podemos ampliar vol\u00famenes f\u00e1cilmente, incluso con el sistema en funcionamiento y sin parar servicios. Los usuarios ni se enterar\u00e1n.</li> <li>Podemos reducir vol\u00famenes si necesitamos recuperar espacio para asignarlo a otro volumen.</li> <li>Podemos combinar varios discos f\u00edsicos en un \u00fanico espacio de almacenamiento l\u00f3gico.</li> <li>Podemos crear snapshots (copias instant\u00e1neas) de vol\u00famenes, ideales para backups o pruebas.</li> <li>Podemos mover datos entre discos sin detener el sistema ni afectar a las aplicaciones.</li> </ul> <p>Analog\u00eda pr\u00e1ctica: </p> <p>Las particiones tradicionales son como habitaciones de una casa con paredes de hormig\u00f3n. Una vez construidas, cambiar su tama\u00f1o implica derribar paredes, lo cual es costoso y arriesgado.</p> <p>LVM es como una oficina moderna con paneles modulares. Puedes mover los \"tabiques\" f\u00e1cilmente, combinar espacios, dividirlos o reorganizarlos seg\u00fan las necesidades cambien, todo sin obras mayores.</p> <p>En Windows Server existe algo similar llamado Storage Spaces o Espacios de almacenamiento, aunque LVM es m\u00e1s maduro, estable y potente al tener d\u00e9cadas de desarrollo.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#conceptos-fundamentales-de-lvm","title":"Conceptos fundamentales de LVM","text":"<p>LVM funciona con tres niveles jer\u00e1rquicos que debemos entender claramente:</p> Niveles jer\u00e1rquicos de LVM <p>1. PV (Physical Volume - Volumen F\u00edsico):</p> <p>Es la base de todo. Un PV es un disco duro f\u00edsico (o partici\u00f3n) que hemos \"preparado\" para que LVM pueda trabajar con \u00e9l. B\u00e1sicamente le decimos a LVM: \"este disco est\u00e1 disponible para que lo gestiones\".</p> <p>Comandos principales:</p> <ul> <li><code>pvcreate</code>: convierte un disco en PV</li> <li><code>pvs</code> o <code>pvdisplay</code>: muestra informaci\u00f3n de los PVs</li> </ul> <p>2. VG (Volume Group - Grupo de Vol\u00famenes):</p> <p>Es un \"contenedor\" que agrupa uno o varios PVs. Pensad en el VG como una \"bolsa com\u00fan de espacio\" donde depositamos todos nuestros discos. Este espacio conjunto luego lo repartiremos como queramos.</p> <p>Por ejemplo, si tenemos tres discos de 10GB cada uno, los agrupamos en un VG y tenemos 30GB de espacio total para trabajar.</p> <p>Comandos principales:</p> <ul> <li><code>vgcreate</code>: crea un nuevo grupo de vol\u00famenes</li> <li><code>vgs</code> o <code>vgdisplay</code>: muestra informaci\u00f3n de los VGs</li> </ul> <p>3. LV (Logical Volume - Volumen L\u00f3gico):</p> <p>Es el \"volumen\" que usaremos realmente. Los LV se crean dentro de un VG, tomando el espacio que necesitemos de la \"bolsa com\u00fan\". Este es el que finalmente montaremos como carpeta en el sistema y donde guardaremos datos.</p> <p>Por ejemplo, de nuestros 30GB totales del VG, podemos crear: - Un LV de 15GB para datos de empresa - Un LV de 10GB para carpetas de usuarios - Un LV de 5GB para backups</p> <p>Comandos principales:</p> <ul> <li><code>lvcreate</code>: crea un nuevo volumen l\u00f3gico</li> <li><code>lvs</code> o <code>lvdisplay</code>: muestra informaci\u00f3n de los LVs</li> </ul> <p>Diagrama conceptual:</p> <p>Em el siguiente esquema podemos ver como unimos 3 discos de 10GB en un Grupo de Vol\u00famenes (VG) de 60GB y posteriormente lo distribuimos en 3 vol\u00famenes l\u00f3gicos de diferentes capacidades que asignamos a diferentes ubicaciones</p> <pre><code>Discos f\u00edsicos:  [Disco 10GB] [Disco 10GB] [Disco 10GB]\n                    \u2193           \u2193             \u2193\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 PVs \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2193\n                      [VG: vg_datos - 30GB]\n                                \u2193\n                \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                \u2193               \u2193               \u2193\n        [LV: lv_empresa]  [LV: lv_usuarios]  [LV: lv_backup]\n            15GB              10GB              5GB\n                \u2193               \u2193               \u2193\n          /srv/empresa    /srv/usuarios    /srv/backup\n</code></pre> <p>y teniendo en cuenta los comandos asociados tenemos el siguiente esquema:</p> Esquema conceptual: Comandos"},{"location":"08_04_gestion_almacenamiento_lvm/#anadir-discos-a-la-maquina-virtual","title":"A\u00f1adir discos a la m\u00e1quina virtual","text":"<p>Antes de poder trabajar con LVM, necesitamos a\u00f1adir discos adicionales a nuestra m\u00e1quina virtual. Vamos a a\u00f1adir tres discos de 10GB cada uno.</p> <p>Apagar la m\u00e1quina virtual:</p> <p>Desde la terminal del servidor ejecutamos:</p> <pre><code>sudo poweroff\n</code></pre> <p>El sistema se apagar\u00e1 de forma ordenada, cerrando todos los servicios correctamente.</p> <p>A\u00f1adir 3 discos en VirtualBox:</p> <p>Con la VM completamente apagada (no pausada, apagada), en VirtualBox:</p> <ol> <li>Seleccionamos nuestra VM <code>SRVXXX_Linux</code></li> <li>Click en Configuraci\u00f3n</li> <li>Navegamos a la secci\u00f3n Almacenamiento</li> <li>En el controlador Controladora: SATA, hacemos click en el icono de disco con el s\u00edmbolo <code>+</code> (A\u00f1adir disco duro)</li> <li>Click en Crear</li> <li>Configuramos el nuevo disco:</li> <li>Tipo de archivo: VDI (VirtualBox Disk Image)</li> <li>Almacenamiento: Reservado din\u00e1micamente (solo usa espacio real cuando se escribe en \u00e9l)</li> <li>Tama\u00f1o: 10 GB</li> <li>Nombre: dejamos el sugerido (VirtualBox le pondr\u00e1 un nombre autom\u00e1tico)</li> <li>Click en Crear</li> <li>Repetimos todo el proceso 2 veces m\u00e1s para tener un total de 3 discos nuevos de 10GB</li> </ol> <p>Al finalizar, en la secci\u00f3n de almacenamiento de la controladora SATA deber\u00edamos ver:</p> <ul> <li><code>SRVXXX_Linux.vdi</code> (disco principal del sistema, 25GB)</li> <li><code>SRVXXX_Linux_1.vdi</code> (disco adicional 1, 10GB)</li> <li><code>SRVXXX_Linux_2.vdi</code> (disco adicional 2, 10GB)</li> <li><code>SRVXXX_Linux_3.vdi</code> (disco adicional 3, 10GB)</li> </ul> <p>Hacemos click en Aceptar para guardar todos los cambios.</p> <p>Iniciar la VM y verificar discos:</p> <p>Iniciamos la m\u00e1quina virtual normalmente y hacemos login con nuestro usuario <code>admin</code>.</p> <p>Verificamos que el sistema ha detectado los nuevos discos:</p> <pre><code>lsblk\n</code></pre> <p>Este comando lista todos los dispositivos de bloque (discos) disponibles en el sistema. Deber\u00edamos ver algo similar a:</p> Vista de 3 nuevos discos <p>Interpretaci\u00f3n de la salida:</p> <ul> <li><code>sda</code>: nuestro disco principal (25GB) donde ya est\u00e1 instalado Ubuntu. Vemos sus particiones (<code>sda1</code>, <code>sda2</code>, <code>sda3</code>)</li> <li><code>sdb</code>, <code>sdc</code>, <code>sdd</code>: los tres discos nuevos de 10GB que acabamos de a\u00f1adir. Aparecen sin particiones ni formato, completamente v\u00edrgenes.</li> <li><code>sr0</code>: es el disco magn\u00e9tico: Disquete.</li> </ul> <p>Nota importante: Los nombres de los discos (<code>sda</code>, <code>sdb</code>, etc.) pueden variar ligeramente seg\u00fan la configuraci\u00f3n. En algunos sistemas pueden aparecer como <code>vda</code>, <code>vdb</code>, etc. Lo importante es identificar visualmente los tres discos de 10GB que acabamos de a\u00f1adir.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#crear-la-estructura-lvm-paso-a-paso","title":"Crear la estructura LVM paso a paso","text":"<p>Ahora vamos a crear nuestra estructura LVM completa, nivel por nivel, de forma muy detallada.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#paso-1-crear-physical-volumes-pvs","title":"Paso 1: Crear Physical Volumes (PVs)","text":"<p>El primer paso es convertir nuestros tres discos f\u00edsicos en vol\u00famenes f\u00edsicos que LVM pueda gestionar:</p> <pre><code>sudo pvcreate /dev/sdb \nsudo pvcreate /dev/sdc \nsudo pvcreate /dev/sdd \n</code></pre> <p>Deber\u00edamos ver una confirmaci\u00f3n para cada disco:</p> <pre><code>  Physical volume \"/dev/sdb\" successfully created.\n  Physical volume \"/dev/sdc\" successfully created.\n  Physical volume \"/dev/sdd\" successfully created.\n</code></pre> <p>Verificamos que se han creado correctamente:</p> <pre><code>sudo pvs\n</code></pre> <p>La salida mostrar\u00e1:</p> Vista de 3 nuevos discos como PV <p>Interpretaci\u00f3n:</p> <ul> <li><code>/dev/sda3</code>: el PV que se cre\u00f3 autom\u00e1ticamente durante la instalaci\u00f3n para el sistema</li> <li><code>/dev/sdb</code>, <code>/dev/sdc</code>, <code>/dev/sdd</code>: nuestros tres PVs nuevos, todav\u00eda sin asignar a ning\u00fan VG (columna VG vac\u00eda)</li> <li>La columna <code>PFree</code> muestra que los 10GB de cada disco est\u00e1n completamente disponibles</li> </ul>"},{"location":"08_04_gestion_almacenamiento_lvm/#paso-2-crear-volume-group-vg","title":"Paso 2: Crear Volume Group (VG)","text":"<p>Ahora agrupamos nuestros tres PVs en un \u00fanico grupo llamado <code>vg_datos</code>:</p> <pre><code>sudo vgcreate vg_datos /dev/sdb /dev/sdc /dev/sdd\n</code></pre> <p>Confirmaci\u00f3n:</p> <pre><code>  Volume group \"vg_datos\" successfully created\n</code></pre> <p>Verificamos el grupo creado:</p> <pre><code>sudo vgs\n</code></pre> <p>Salida:</p> Vista de 3 nuevos discos como un \u00fanico VG <p>Interpretaci\u00f3n:</p> <ul> <li><code>vg_datos</code>: nuestro nuevo grupo de vol\u00famenes</li> <li><code>#PV</code>: 3 (contiene 3 vol\u00famenes f\u00edsicos)</li> <li><code>#LV</code>: 0 (todav\u00eda no hemos creado vol\u00famenes l\u00f3gicos dentro)</li> <li><code>VSize</code>: ~30GB (10GB \u00d7 3 discos, menos un peque\u00f1o espacio para metadatos de LVM)</li> <li><code>VFree</code>: ~30GB (todo el espacio est\u00e1 disponible)</li> </ul> <p>Podemos ver m\u00e1s detalles con:</p> <pre><code>sudo vgdisplay vg_datos\n</code></pre> <p>Esto muestra informaci\u00f3n completa sobre el grupo, incluyendo el tama\u00f1o exacto de las unidades de asignaci\u00f3n (PE - Physical Extents), cu\u00e1ntas hay libres, etc.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#paso-3-crear-logical-volumes-lvs","title":"Paso 3: Crear Logical Volumes (LVs)","text":"<p>Ahora creamos tres vol\u00famenes l\u00f3gicos dentro de <code>vg_datos</code>. Estos ser\u00e1n los \"discos virtuales\" que montaremos y usaremos realmente.</p> <p>Volumen para datos de empresa (15GB):</p> <pre><code>sudo lvcreate -L 15G -n lv_empresa vg_datos\n</code></pre> <p>Explicaci\u00f3n del comando:</p> <ul> <li><code>-L 15G</code>: tama\u00f1o del volumen (15 gigabytes)</li> <li><code>-n lv_empresa</code>: nombre del volumen l\u00f3gico</li> <li><code>vg_datos</code>: grupo de vol\u00famenes donde se crea</li> </ul> <p>Confirmaci\u00f3n:</p> <pre><code>  Logical volume \"lv_empresa\" created.\n</code></pre> Creaci\u00f3n de un volumen l\u00f3gico de 15 GB <p>Volumen para carpetas de usuarios (10GB):</p> <pre><code>sudo lvcreate -L 10G -n lv_usuarios vg_datos\n</code></pre> <p>Volumen para datos compartidos (5GB):</p> <pre><code>sudo lvcreate -L 5G -n lv_compartido vg_datos\n</code></pre> <p>Verificamos todos los vol\u00famenes creados:</p> <pre><code>sudo lvs\n</code></pre> <p>Salida:</p> Creaci\u00f3n de un volumen l\u00f3gico de 15 GB + 10 GB + 4.5GB <p>Interpretaci\u00f3n de error al crear el \u00faltimo Volumen L\u00f3gico</p> <p>Si observamos el mensaje que nos da el sistema:</p> <p><code>Volume group \"vb_datos\" has insufficient free space (1277 extends): **1280 required**</code></p> <p>Nos indica que para crear un Volumen L\u00f3gico de 5GB nos hacen falta <code>1280 extends</code>, pero nos faltan 3 que se han perdido al crear partiiciones y guardar informaci\u00f3n de los todo el sistema LVM, por lo que el \u00faltimo volumen lo hemos creado de un tama\u00f1o m\u00e1s peque\u00f1o.</p> <p>Un Extend es la unidad m\u00ednima de espacio direccionable que se asigna a un volumen l\u00f3gico para permitir que su tama\u00f1o crezca de forma flexible</p> <p>Ahora ya tenemos nuestros tres vol\u00famenes l\u00f3gicos creados con los tama\u00f1os especificados.</p> <p>Verificamos el espacio restante en el grupo de vol\u00famenes:</p> <pre><code>sudo vgs\n</code></pre> Espacio utilizado en los dos VG (Volumen Group) <p>Tenemos aproximadamente 500MB libres en <code>vg_datos</code> que podremos usar m\u00e1s adelante para ampliar vol\u00famenes existentes o crear nuevos.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#paso-4-crear-sistemas-de-archivos","title":"Paso 4: Crear sistemas de archivos","text":"<p>Los vol\u00famenes l\u00f3gicos est\u00e1n creados, pero son como \"discos en blanco\" sin formato. Necesitan un sistema de archivos para poder almacenar datos.</p> <p>En Linux, el sistema de archivos m\u00e1s com\u00fan y recomendado es ext4. Es estable, eficiente y ampliamente soportado.</p> <p>Formateamos cada volumen l\u00f3gico:</p> <pre><code>sudo mkfs.ext4 /dev/vg_datos/lv_empresa\n</code></pre> <p>Este comando tardar\u00e1 unos segundos y mostrar\u00e1 informaci\u00f3n sobre el sistema de archivos creado:</p> <pre><code>mke2fs 1.46.5 (30-Dec-2021)\nCreating filesystem with 3932160 4k blocks and 983040 inodes\nFilesystem UUID: abc123-def456-...\nSuperblock backups stored on blocks: ...\n...\nAllocating group tables: done\nWriting inode tables: done\nCreating journal (16384 blocks): done\nWriting superblocks and filesystem accounting information: done\n</code></pre> <p>Repetimos para los otros dos vol\u00famenes:</p> <pre><code>sudo mkfs.ext4 /dev/vg_datos/lv_usuarios\nsudo mkfs.ext4 /dev/vg_datos/lv_compartido\n</code></pre> Formateando los Vol\u00famenes L\u00f3gicos creados <p>Ahora nuestros vol\u00famenes tienen un sistema de archivos y est\u00e1n listos para usarse.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#paso-5-crear-puntos-de-montaje","title":"Paso 5: Crear puntos de montaje","text":"<p>En Linux, para acceder a un volumen debemos montarlo en una carpeta del sistema. Esa carpeta se llama punto de montaje.</p> <p>Por convenci\u00f3n, los datos de servidores suelen montarse en <code>/srv/</code> (de \"service\" - servicio).</p> <p>Creamos las carpetas donde montaremos nuestros vol\u00famenes:</p> <pre><code>sudo mkdir -p /srv/empresa\nsudo mkdir -p /srv/usuarios\nsudo mkdir -p /srv/compartido\n</code></pre> <p>El par\u00e1metro <code>-p</code> (parent) crea todas las carpetas necesarias en la ruta. Si <code>/srv</code> no existiera (aunque normalmente s\u00ed existe), tambi\u00e9n la crear\u00eda.</p> <p>Verificamos que se han creado:</p> <pre><code>ls -l /srv/\n</code></pre> <p>Deber\u00edamos ver:</p> <pre><code>total 12\ndrwxr-xr-x 2 root root 4096 ... compartido\ndrwxr-xr-x 2 root root 4096 ... empresa\ndrwxr-xr-x 2 root root 4096 ... usuarios\n</code></pre>"},{"location":"08_04_gestion_almacenamiento_lvm/#paso-6-montar-los-volumenes","title":"Paso 6: Montar los vol\u00famenes","text":"<p>Ahora montamos cada volumen l\u00f3gico en su carpeta correspondiente:</p> <pre><code>sudo mount /dev/vg_datos/lv_empresa /srv/empresa\nsudo mount /dev/vg_datos/lv_usuarios /srv/usuarios\nsudo mount /dev/vg_datos/lv_compartido /srv/compartido\n</code></pre> <p>Estos comandos no muestran ninguna salida si todo va bien (en Linux, \"ninguna noticia es buena noticia\").</p> <p>Verificamos que los vol\u00famenes est\u00e1n montados correctamente:</p> <pre><code>df -h\n</code></pre> <p>El comando <code>df</code> (disk free) muestra el espacio de todos los sistemas de archivos montados. Con la opci\u00f3n <code>-h</code> (human-readable) muestra los tama\u00f1os en formato legible.</p> <p>Al final de la lista deber\u00edamos ver:</p> Vol\u00famenes l\u00f3gicos montados <p>Interpretaci\u00f3n:</p> <ul> <li>Los vol\u00famenes est\u00e1n montados en las rutas correctas</li> <li>El espacio disponible es ligeramente menor que el tama\u00f1o asignado (normal, el sistema de archivos necesita espacio para metadatos)</li> <li>Uso actual: casi 0% (solo metadatos del sistema de archivos)</li> </ul> <p>Podemos probar a crear un archivo de prueba:</p> <pre><code>sudo touch /srv/empresa/prueba.txt\nls -l /srv/empresa/\n</code></pre> <p>Deber\u00edamos ver el archivo creado.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#paso-7-montaje-automatico-con-etcfstab","title":"Paso 7: Montaje autom\u00e1tico con /etc/fstab","text":"<p>Hay un problema: si reiniciamos el servidor ahora, los vol\u00famenes NO se montar\u00e1n autom\u00e1ticamente. Despu\u00e9s de cada reinicio tendr\u00edamos que montarlos manualmente.</p> <p>Para que se monten autom\u00e1ticamente al iniciar el sistema, debemos configurar el archivo <code>/etc/fstab</code> (file systems table - tabla de sistemas de archivos).</p> <p>Primero, hacemos una copia de seguridad del archivo (buena pr\u00e1ctica antes de modificar archivos cr\u00edticos):</p> <pre><code>sudo cp /etc/fstab /etc/fstab.backup\n</code></pre> <p>Editamos el archivo:</p> <pre><code>sudo nano /etc/fstab\n</code></pre> <p>Veremos l\u00edneas similares a estas (puede variar):</p> <pre><code># /etc/fstab: static file system information.\nUUID=abc-123... / ext4 defaults 0 1\nUUID=def-456... /boot ext4 defaults 0 2\n/swap.img none swap sw 0 0\n</code></pre> <p>Nos desplazamos al final del archivo y a\u00f1adimos estas tres l\u00edneas:</p> <pre><code>/dev/vg_datos/lv_empresa    /srv/empresa     ext4  defaults  0  2\n/dev/vg_datos/lv_usuarios   /srv/usuarios    ext4  defaults  0  2\n/dev/vg_datos/lv_compartido /srv/compartido  ext4  defaults  0  2\n</code></pre> <p>Explicaci\u00f3n de cada campo:</p> <ol> <li>Dispositivo: <code>/dev/vg_datos/lv_empresa</code> (ruta al volumen)</li> <li>Punto de montaje: <code>/srv/empresa</code> (d\u00f3nde se monta)</li> <li>Tipo de sistema de archivos: <code>ext4</code></li> <li>Opciones: <code>defaults</code> (usa opciones por defecto: lectura/escritura, etc.)</li> <li>Dump: <code>0</code> (no hacer backup autom\u00e1tico con dump)</li> <li>Pass: <code>2</code> (orden de comprobaci\u00f3n en el arranque. 0=no comprobar, 1=primero el root, 2=despu\u00e9s los dem\u00e1s)</li> </ol> <p>Guardamos el archivo (<code>Ctrl+O</code>, <code>Enter</code>, <code>Ctrl+X</code>).</p> <p>Verificar que no hay errores (PASO CR\u00cdTICO):</p> <p>Antes de reiniciar, SIEMPRE debemos verificar que el archivo <code>/etc/fstab</code> no contiene errores. Un error en este archivo puede hacer que el sistema no arranque.</p> <pre><code>sudo mount -a\n</code></pre> <p>Este comando intenta montar todos los sistemas de archivos listados en <code>/etc/fstab</code>. Si hay alg\u00fan error, nos lo mostrar\u00e1. Si no muestra nada, significa que todo est\u00e1 correcto.</p> <p>Verificamos de nuevo que los vol\u00famenes siguen montados:</p> <pre><code>df -h | grep srv\n</code></pre> <p>Deber\u00edamos ver nuestros tres vol\u00famenes.</p> <p>Reiniciar para comprobar que funciona:</p> <pre><code>sudo reboot\n</code></pre> <p>El sistema se reiniciar\u00e1. Esperamos unos 30 segundos y volvemos a hacer login.</p> <p>Tras el reinicio, verificamos inmediatamente que los vol\u00famenes se han montado autom\u00e1ticamente:</p> <pre><code>df -h | grep srv\n</code></pre> <p>Si vemos los tres vol\u00famenes montados, \u00a1perfecto! El montaje autom\u00e1tico funciona correctamente.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#ampliar-un-volumen-logico","title":"Ampliar un volumen l\u00f3gico","text":"<p>Una de las grandes ventajas de LVM es la capacidad de ampliar vol\u00famenes f\u00e1cilmente, incluso con el sistema en funcionamiento. Vamos a demostrarlo ampliando <code>lv_empresa</code> en 3GB adicionales.</p> <p>Este proceso se hace sin detener el servidor, sin desmontar el volumen y sin interrumpir el acceso a los datos. Es una funcionalidad extraordinaria que no existe con particiones tradicionales.</p> <p>Paso 1: Verificar espacio disponible en el VG:</p> <p>Antes de ampliar, confirmamos que tenemos espacio libre en el grupo de vol\u00famenes:</p> <pre><code>sudo vgs\n</code></pre> <pre><code>  VG        #PV #LV #SN Attr   VSize  VFree \n  vg_datos    3   3   0 wz--n- 29.99g 500M\n</code></pre> <p>Tenemos aproximadamente 500MB libres, suficiente para a\u00f1adir 400MB a un volumen.</p> <p>Paso 2: Ampliar el volumen l\u00f3gico:</p> <pre><code>sudo lvextend -L +400M /dev/vg_datos/lv_empresa\n</code></pre> <p>Explicaci\u00f3n:</p> <ul> <li><code>lvextend</code>: comando para extender (ampliar) un volumen l\u00f3gico</li> <li><code>-L +3G</code>: a\u00f1adir 3 gigabytes al tama\u00f1o actual (el <code>+</code> indica que es adicional, no el tama\u00f1o total)</li> <li><code>/dev/vg_datos/lv_empresa</code>: ruta al volumen que queremos ampliar</li> </ul> <p>Confirmaci\u00f3n:</p> <pre><code>  Size of logical volume vg_datos/lv_empresa changed from 15.00 GiB to 18.00 GiB.\n  Logical volume vg_datos/lv_empresa successfully resized.\n</code></pre> <p>Paso 3: Ampliar el sistema de archivos:</p> <p>Hemos ampliado el volumen l\u00f3gico, pero el sistema de archivos ext4 que hay dentro todav\u00eda \"piensa\" que tiene 15GB. Debemos indicarle que ocupe todo el nuevo espacio:</p> <pre><code>sudo resize2fs /dev/vg_datos/lv_empresa\n</code></pre> <p>Salida:</p> <pre><code>resize2fs 1.46.5 (30-Dec-2021)\nFilesystem at /dev/vg_datos/lv_empresa is mounted on /srv/empresa; on-line resizing required\nold_desc_blocks = 2, new_desc_blocks = 3\nThe filesystem on /dev/vg_datos/lv_empresa is now 4718592 (4k) blocks long.\n</code></pre> <p>La l\u00ednea clave es <code>on-line resizing required</code> que confirma que se est\u00e1 redimensionando con el sistema en funcionamiento.</p> <p>Paso 4: Verificar el resultado:</p> <pre><code>df -h | grep empresa\n</code></pre> <pre><code>/dev/mapper/vg_datos-lv_empresa  18G  24K  17G   1% /srv/empresa\n</code></pre> Resultado del cambio de tama\u00f1o del volumen <p>\u00a1Perfecto! El volumen ahora tiene 15.4GB en lugar de 15GB.</p> <p>Reflexi\u00f3n sobre lo que hemos hecho:</p> <p>Acabamos de ampliar un volumen de 15GB a 15.4GB:</p> <ul> <li>Sin detener el servidor</li> <li>Sin desmontar el volumen</li> <li>Sin interrumpir el acceso a los datos</li> <li>En menos de un minuto</li> <li>Sin riesgo de p\u00e9rdida de datos</li> </ul> <p>Con particiones tradicionales, esto habr\u00eda requerido:</p> <ol> <li>Hacer backup completo de los datos</li> <li>Apagar el servidor</li> <li>Particionar de nuevo el disco</li> <li>Formatear</li> <li>Restaurar los datos</li> <li>Reiniciar y cruzar los dedos</li> </ol> <p>Esta es la potencia de LVM.</p>"},{"location":"08_04_gestion_almacenamiento_lvm/#ampliar-con-un-nuevo-disco","title":"Ampliar con un nuevo disco","text":"<p>Podemos pensar que hemos llegado al final, pero todav\u00eda podemos ampliar m\u00e1s nuestro almacenamiento a\u00f1adiendo nuevos discos que vamos convertir en Physical Volumes (<code>pvcreate</code>) que servir\u00e1 para ampliar o extender cualquiera de los Logical Volumes (<code>vgextend</code>) y a su vez para poder hacer m\u00e1s grandes nuestras Logical Volumes (<code>lvextend</code>) tal y como hemos hecho en el paso anterior.</p> <p>As\u00ed pues, vamos a parar de nuevo nuestro servidor (ahora si), para a\u00f1adir un nuevo disco, por ejemplo de 15GB.</p> <p>Iniciemos de nuevo el servidor y comprobemos que el nuevo disco esta ah\u00ed:</p> <pre><code>lsblk\n</code></pre> <p>debe aparecer un nuevo disco <code>/dev/sde</code>.</p> <p>Ahora creemos de nuevo ese disco en un Physical Volume usando <code>pvcreate</code></p> <pre><code>sudo pvcreate /dev/sde\n</code></pre> <p>El siguiente paso ser\u00e1 a\u00f1adir mediante el comando <code>vgextend</code> este nuevo Physical Volume al Volume Group exitente <code>vb_datos</code>, ejecutando el siguiente comando:</p> <pre><code>sudo vgextend vg_datos /dev/sde\n</code></pre> <p>y ahora podremos ver que tenemos un nuevo Physical Volume en nuestro Volume Group mediante el comando <code>pvs</code></p> <p>Ejecutamos ahora el comando para ver el estado de nuestros Volume Group</p> <pre><code>sudo vgs\n</code></pre> <p>y nos saldr\u00e1 que ahora tenemos 15GB mas de espacio disponible en <code>vg_datos</code>.</p> Resultado del cambio de tama\u00f1o del volumen <p>y con esto, podemos volver a ampliar de nuevo uno de nuestros Logical Volume, por ejemplo <code>lv_empresa</code> con 10GB m\u00e1s:</p> <pre><code>sudo lvextend -L +10G /dev/vg_datos/lv_empresa\nsudo resize2fs /dev/vg_datos/lv_empresa\n</code></pre> <p>el segundo comando, <code>resize2fs</code> permite ampliar el tama\u00f1o de la partici\u00f3n al tama\u00f1o nuevo de la Logical Volume</p> Resultado del cambio de tama\u00f1o del volumen l\u00f3gico <p>y as\u00ed podemos seguir ampliando mientras tengamos capacidad f\u00edsica en nuestro servidor para seguir creciendo.</p> <p>Por \u00faltimo, por curiosidad, si ejecutamos <code>lsblk</code> podremos observar que por ejemplo el Logical Volume <code>lv_empresa</code> realmente se encuentra repartido por 3 discos duros; <code>sdb</code>, <code>sdc</code> y <code>sde</code>.</p> Ubicaci\u00f3n f\u00edsica de /srv/empresa"},{"location":"08_04_gestion_almacenamiento_lvm/#comandos-utiles-de-lvm-para-el-dia-a-dia","title":"Comandos \u00fatiles de LVM para el d\u00eda a d\u00eda","text":"<p>Ver informaci\u00f3n resumida: </p><pre><code>sudo pvs    # Resumen de vol\u00famenes f\u00edsicos\nsudo vgs    # Resumen de grupos de vol\u00famenes\nsudo lvs    # Resumen de vol\u00famenes l\u00f3gicos\n</code></pre><p></p> <p>Ver informaci\u00f3n detallada: </p><pre><code>sudo pvdisplay                    # Detalle de todos los PVs\nsudo vgdisplay vg_datos          # Detalle de un VG espec\u00edfico\nsudo lvdisplay /dev/vg_datos/lv_empresa  # Detalle de un LV espec\u00edfico\n</code></pre><p></p> <p>Ampliar un grupo : </p><pre><code>sudo vgextend vg_datos /dev/sde\n</code></pre><p></p> <p>Ampliar un volumen o un grupo : </p><pre><code>sudo lvextend -L +2G /dev/vg_datos/lv_usuarios\nsudo resize2fs /dev/vg_datos/lv_usuarios\n</code></pre><p></p> <p>A\u00f1adir un disco nuevo a un VG existente: </p><pre><code>sudo pvcreate /dev/sde          # Preparar el disco nuevo\nsudo vgextend vg_datos /dev/sde # A\u00f1adirlo al grupo\n</code></pre><p></p> <p>Ver estado del montaje: </p><pre><code>df -h               # Ver todos los sistemas de archivos montados\nmount | grep srv    # Ver solo nuestros vol\u00famenes\n</code></pre><p></p>"},{"location":"08_05_instalacion_configuracion_samba/","title":"Instalaci\u00f3n y configuraci\u00f3n b\u00e1sica de Samba","text":""},{"location":"08_05_instalacion_configuracion_samba/#que-es-samba-y-para-que-sirve","title":"Qu\u00e9 es Samba y para qu\u00e9 sirve","text":"<p>Samba es una suite de software que permite que sistemas Linux/Unix compartan carpetas, archivos e impresoras con sistemas Windows de forma nativa y transparente.</p> <p>Samba implementa el protocolo SMB/CIFS (Server Message Block / Common Internet File System), que es exactamente el mismo protocolo que Windows usa para compartir recursos en red. Esto significa que desde un cliente Windows, acceder a una carpeta compartida de Linux con Samba es id\u00e9ntico a acceder a una carpeta compartida de otro Windows. El usuario no nota ninguna diferencia.</p> <p>\u00bfPor qu\u00e9 necesitamos Samba?</p> <p>Windows y Linux hablan \"idiomas\" diferentes para compartir archivos. Windows usa SMB/CIFS. Linux hist\u00f3ricamente usaba NFS (Network File System). Sin Samba, los clientes Windows no podr\u00edan acceder a carpetas compartidas en servidores Linux.</p> <p>Samba act\u00faa como un \"traductor\" que hace que el servidor Linux hable SMB perfectamente, permitiendo la integraci\u00f3n con redes Windows.</p> <p>Algunos de los usos comunes de <code>Samba</code> en GNU/Linux son:</p> <ul> <li>Compartir archivos: Samba permite compartir archivos y directorios entre sistemas operativos diferentes, lo que facilita la transferencia de archivos entre ellos.</li> <li>Compartir impresoras: Samba tambi\u00e9n puede utilizarse para compartir impresoras en una red local.</li> <li>Autenticaci\u00f3n de usuarios: Samba puede utilizarse para autenticar usuarios en una red local.</li> <li>Controlador de dominio: Samba puede actuar como un controlador de dominio en una red local.</li> </ul>"},{"location":"08_05_instalacion_configuracion_samba/#instalar-samba","title":"Instalar Samba","text":"<p>La instalaci\u00f3n de Samba en Ubuntu Server es muy sencilla gracias al gestor de paquetes <code>apt</code>.</p> <p>Primero actualizamos la lista de paquetes disponibles:</p> <pre><code>sudo apt update\n</code></pre> <p>Instalamos Samba y sus herramientas:</p> <pre><code>sudo apt install -y samba samba-common-bin\n</code></pre> <p>Explicaci\u00f3n de los paquetes</p> <ul> <li><code>samba</code>: el servidor Samba propiamente dicho</li> <li><code>samba-common-bin</code>: herramientas de l\u00ednea de comandos para gestionar Samba</li> <li>El par\u00e1metro <code>-y</code> responde autom\u00e1ticamente \"yes\" a la confirmaci\u00f3n</li> </ul> <p>La instalaci\u00f3n tardar\u00e1 un par de minutos. Descargar\u00e1 los paquetes, los instalar\u00e1 y configurar\u00e1 los servicios autom\u00e1ticamente.</p> <p>Una vez instalado, verificamos que el servicio de Samba est\u00e1 activo y funcionando:</p> <pre><code>sudo systemctl status smbd\n</code></pre> <p>Deber\u00edamos ver algo como:</p> sudo systemctl status smbd - Resultado OK <p>Puntos clave a verificar:</p> <ul> <li><code>Loaded: ...enabled...</code>: el servicio est\u00e1 habilitado para iniciarse autom\u00e1ticamente al arrancar</li> <li><code>Active: active (running)</code>: el servicio est\u00e1 ejecut\u00e1ndose ahora mismo</li> </ul> <p>Si por alguna raz\u00f3n el servicio no estuviera activo, lo iniciamos y habilitamos:</p> <pre><code>sudo systemctl start smbd\nsudo systemctl enable smbd\n</code></pre> <p>Verificamos tambi\u00e9n el estado del servicio de nombres NetBIOS (necesario para la resoluci\u00f3n de nombres en redes Windows):</p> <pre><code>sudo systemctl status nmbd\n</code></pre> <p>Debe mostrar tambi\u00e9n <code>active (running)</code>.</p> <p>Informaci\u00f3n adicional</p> <p>Para m\u00e1s informaci\u00f3n de instalaci\u00f3n y configuraci\u00f3n b\u00e1sica de <code>Samba</code>, aqu\u00ed tienes el siguiente enlace: Ubuntu.com: Install and Configure Samba.</p> <p>En siguiente enlace puedes ver la configuraci\u00f3n b\u00e1sica de dos carpetas compartidas, una accesible por todos los usuarios con permisos de lectura y otra crea una carpeta por usuario conectado, solo accesible por el propio usuario. Instalar y configurar un servidor SAMBA en Debian y Ubuntu</p>"},{"location":"08_05_instalacion_configuracion_samba/#configuracion-del-firewall","title":"Configuraci\u00f3n del firewall","text":"<p>Ubuntu Server por defecto no tiene firewall activado, pero si lo tuvi\u00e9ramos, necesitar\u00edamos abrir los puertos de Samba:</p> <pre><code>sudo ufw allow samba\n</code></pre> <p>En nuestro caso, como estamos en un entorno de laboratorio y probablemente no tenemos el firewall activado, este paso es opcional. Podemos verificar el estado del firewall con:</p> <pre><code>sudo ufw status\n</code></pre> <p>Si muestra <code>Status: inactive</code>, no necesitamos hacer nada m\u00e1s.</p>"},{"location":"08_05_instalacion_configuracion_samba/#crear-una-carpeta-compartida-simple","title":"Crear una carpeta compartida simple","text":"<p>Antes de complicarnos con Active Directory y configuraciones avanzadas, vamos a crear una carpeta compartida simple para entender c\u00f3mo funciona Samba y verificar que todo est\u00e1 correctamente instalado.</p>"},{"location":"08_05_instalacion_configuracion_samba/#crear-la-carpeta-y-asignar-permisos","title":"Crear la carpeta y asignar permisos","text":"<p>Vamos a crear una carpeta de prueba en uno de nuestros vol\u00famenes LVM:</p> <pre><code>sudo mkdir -p /srv/compartido/prueba\n</code></pre> <p>De momento, vamos a permitir que cualquiera pueda escribir en esta carpeta (solo para pruebas, en producci\u00f3n jam\u00e1s har\u00edamos esto):</p> <pre><code>sudo chmod 777 /srv/compartido/prueba\n</code></pre> <p>Explicaci\u00f3n del permiso 777</p> <ul> <li>Primer 7: permisos del propietario (lectura + escritura + ejecuci\u00f3n)</li> <li>Segundo 7: permisos del grupo (lectura + escritura + ejecuci\u00f3n)</li> <li>Tercer 7: permisos de otros (lectura + escritura + ejecuci\u00f3n)</li> </ul> <p>RECUERDA</p> <p>Esto es muy inseguro y solo lo hacemos para las pruebas iniciales. M\u00e1s adelante configuraremos permisos adecuados.</p>"},{"location":"08_05_instalacion_configuracion_samba/#configurar-samba","title":"Configurar Samba","text":"<p>El archivo de configuraci\u00f3n principal de Samba es <code>/etc/samba/smb.conf</code>. Este archivo controla todos los aspectos del servidor: recursos compartidos, permisos, autenticaci\u00f3n, etc.</p> <p>Antes de modificarlo, hacemos una copia de seguridad del archivo original:</p> <pre><code>sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.original\n</code></pre> <p>Ahora editamos el archivo:</p> <pre><code>sudo nano /etc/samba/smb.conf\n</code></pre> <p>El archivo es bastante largo y contiene muchas opciones comentadas (l\u00edneas que empiezan con <code>;</code> o <code>#</code>). No necesitamos entender todo ahora.</p> <p>Nos desplazamos al final del archivo (podemos usar <code>Ctrl+V</code> varias veces para avanzar p\u00e1ginas r\u00e1pidamente en nano).</p> <p>Al final del archivo, a\u00f1adimos la configuraci\u00f3n de nuestro recurso compartido:</p> <pre><code>[Prueba]\n   comment = Carpeta de prueba\n   path = /srv/compartido/prueba\n   browseable = yes\n   read only = no\n   guest ok = yes\n   create mask = 0777\n   directory mask = 0777\n</code></pre> <p>Explicaci\u00f3n de cada par\u00e1metro</p> <ul> <li><code>[Prueba]</code>: nombre del recurso compartido (es lo que ver\u00e1n los clientes Windows al conectarse)</li> <li><code>comment</code>: descripci\u00f3n del recurso (aparece en algunas herramientas de Windows)</li> <li><code>path</code>: ruta real en el sistema Linux donde est\u00e1n los archivos</li> <li><code>browseable = yes</code>: el recurso aparecer\u00e1 cuando se navegue por la red (lo veremos sin tener que escribir su nombre)</li> <li><code>read only = no</code>: permite escritura (si fuera <code>yes</code>, solo lectura)</li> <li><code>guest ok = yes</code>: permite acceso sin autenticaci\u00f3n (cualquiera puede entrar sin usuario/contrase\u00f1a)</li> <li><code>create mask = 0777</code>: permisos que tendr\u00e1n los archivos nuevos que se creen</li> <li><code>directory mask = 0777</code>: permisos que tendr\u00e1n las carpetas nuevas que se creen</li> </ul> <p>IMPORTANTE: La configuraci\u00f3n con <code>guest ok = yes</code> es insegura y solo para pruebas. M\u00e1s adelante la cambiaremos.</p> <p>Guardamos el archivo (<code>Ctrl+O</code>, <code>Enter</code>, <code>Ctrl+X</code>).</p>"},{"location":"08_05_instalacion_configuracion_samba/#verificar-la-configuracion","title":"Verificar la configuraci\u00f3n","text":"<p>Antes de reiniciar Samba, verificamos que no hay errores de sintaxis en el archivo de configuraci\u00f3n:</p> <pre><code>testparm\n</code></pre> <p>Este comando es muy \u00fatil. Lee el archivo <code>smb.conf</code>, detecta errores de sintaxis y muestra la configuraci\u00f3n real que se aplicar\u00e1 (ignora l\u00edneas comentadas y valores por defecto).</p> <p>Si hay errores, los mostrar\u00e1 en rojo. Si todo est\u00e1 bien, veremos algo como:</p> Verificando configuraci\u00f3n smb.conf <p>La l\u00ednea <code>Loaded services file OK.</code> confirma que no hay errores de sintaxis.</p> <p>Pulsamos <code>Enter</code> para ver la configuraci\u00f3n completa o <code>Ctrl+C</code> para salir.</p>"},{"location":"08_05_instalacion_configuracion_samba/#reiniciar-samba","title":"Reiniciar Samba","text":"<p>Para que los cambios tengan efecto, reiniciamos el servicio de Samba:</p> <pre><code>sudo systemctl restart smbd\n</code></pre> <p>Verificamos que sigue activo despu\u00e9s del reinicio:</p> <pre><code>sudo systemctl status smbd\n</code></pre> <p>Debe mostrar <code>active (running)</code>.</p>"},{"location":"08_05_instalacion_configuracion_samba/#probar-desde-windows","title":"Probar desde Windows","text":"<p>Ahora viene el momento de la verdad: probar que podemos acceder desde un cliente Windows.</p> <p>Desde un equipo Windows conectado a la misma red que el servidor Linux (en nuestro caso, la red de departamentos <code>192.168.100.0/24</code>):</p> <ol> <li>Abrimos el Explorador de archivos</li> <li>En la barra de direcciones (donde aparece la ruta) escribimos: <code>\\\\192.168.100.5</code> (la IP de nuestro servidor Linux)</li> <li>Pulsamos <code>Enter</code></li> <li>Nos preguntar\u00e1 los credenciales para poder entrar en el recurso.</li> </ol> Petici\u00f3n de credenciales para entrar en recurso samba <p>Si no se tratara de un equipo en un d\u00f3minio, puesto que hemos puesto <code>guest ok = yes</code> deber\u00edamos ver una ventana con el recurso compartido Prueba y simplemente:</p> <ul> <li>Hacemos doble clic en Prueba para entrar</li> <li>Intentamos crear un archivo o carpeta dentro</li> </ul> <p>Si podemos crear archivos y carpetas, \u00a1enhorabuena! Samba est\u00e1 funcionando correctamente.</p> <p>Sin embargo a nosotros no nos pasa esto puesto que estamos dentro de un dominio y NO NOS DEJAR\u00c1 ENTRAR EN EL RECURSO COMPARTIDO.</p> <p>Para poder entrar en el sistema, necesitamos crear un usuario en samba y acceder como este usuario y no como un usuario del dominio, que de momento, es desconocido para nuestro servidor linux. As\u00ed que vamos a crear usuarios para samba</p>"},{"location":"08_05_instalacion_configuracion_samba/#usuarios-de-samba","title":"Usuarios de Samba","text":"<p>Como hemos visto anteriormente, puesto que estamos en un dominio con las seguridades activadas siempre necesitaremos autenticaci\u00f3n con usuarios. Samba mantiene su propia base de datos de usuarios y contrase\u00f1as, separada de los usuarios del sistema Linux.</p> <p>Para crear un usuario de Samba, primero debe existir como usuario del sistema Linux. Luego le asignamos una contrase\u00f1a espec\u00edfica para Samba.</p> <p>Ejemplo: Vamos a crear un usuario de prueba que inicialmente no existe en el servidor: <code>samba_test</code>:</p> <pre><code>sudo useradd -M -s /usr/sbin/nologin samba_test\n</code></pre> <p>Explicaci\u00f3n:</p> <ul> <li><code>useradd</code>: comando para crear usuarios</li> <li><code>-M</code>: no crear carpeta personal (no la necesita)</li> <li><code>-s /usr/sbin/nologin</code>: no permitir login interactivo (este usuario solo existe para Samba)</li> <li><code>samba_test</code>: nombre del usuario</li> </ul> <p>Ahora le asignamos una contrase\u00f1a para Samba:</p> <pre><code>sudo smbpasswd -a samba_test\n</code></pre> <p>Confirmaci\u00f3n:</p> <pre><code>Added user samba_test.\n</code></pre> <p>Este usuario ahora puede autenticarse en recursos compartidos que requieran usuario/contrase\u00f1a.</p> <p>Creaci\u00f3n de usuarios samba</p> <p>Es importante diferenciar los dos casos posibles: </p> <ul> <li>Si queremos crear un usuario samba que NO existe en el sistema, primero lo creamos en el sistema (<code>useradd</code>), y luego lo a\u00f1adimos a los usuarios samba (<code>smbpasswd</code>).</li> <li>Si queremos crear un usuario samba que SI existe en el sistema, simplemente lo a\u00f1adimos a los usuarios samba (<code>smbpasswd</code>).</li> </ul> <p>Ahora que tenemos un usuario en samba, probamos de nuevo conectarnos desde nuestro equipo Windows 11 y cuando nos pida las credenciales, introducimos los datos del usuario <code>samba_test</code> que acabamos de crear. </p> <p>Ahora ya debemos pode acceder a los recursos compartidos:</p> Acceso a carpeta compartida <p>Para listar los usuarios de Samba:</p> <pre><code>sudo pdbedit -L\n</code></pre> <p>Para eliminar un usuario de Samba (si lo necesitamos m\u00e1s adelante):</p> <pre><code>sudo smbpasswd -x nombre_usuario\n</code></pre>"},{"location":"08_05_instalacion_configuracion_samba/#ampliacion-de-la-informacion","title":"Ampliaci\u00f3n de la informaci\u00f3n","text":"<p>A continuaci\u00f3n se detalla de forma mas detallada la configuraci\u00f3n de los recursos compartido <code>samba</code></p>"},{"location":"08_05_instalacion_configuracion_samba/#el-fichero-etcsambasmbconf","title":"El fichero <code>/etc/samba/smb.conf</code>","text":"<p>La configuraci\u00f3n de SAMBA, tanto servidor como cliente, se realiza en el fichero <code>/etc/samba/smb.conf</code>. Este fichero establece las caracter\u00edsticas de SAMBA y los recursos que se compartir\u00e1n en la red. Aunque este fichero posee un gran n\u00famero de opciones, la configuraci\u00f3n del mismo suele ser sencilla, dado que el valor por defecto es apropiado para casi todas las opciones y casos posibles.</p> <p>Como punto importante, resaltar que se consideran comentarios todas las l\u00edneas que comienzan por <code>#</code> y por <code>;</code> (punto y coma), utiliz\u00e1ndose generalmente el s\u00edmbolo <code>#</code> para los comentarios formales y el punto y coma para comentar opciones de configuraci\u00f3n. Adem\u00e1s, el s\u00edmbolo <code>\\</code> indica que la l\u00ednea contin\u00faa en la l\u00ednea siguiente, por lo que debe ignorarse el retorno de carro insertado a continuaci\u00f3n.</p> <p>De forma general, podemos considerar el fichero de configuraci\u00f3n dividido en diferentes secciones. El comienzo de cada secci\u00f3n se indica mediante la etiqueta [nombre de secci\u00f3n], siendo el final de una secci\u00f3n el comienzo de la siguiente. </p> <p>Por defecto, el fichero se puede dividir en dos partes, una con la secci\u00f3n <code>[global]</code> y otra para el resto de recursos compartidos.</p> <p>Antes de nada, recordad que antes de manipular este tipo de ficheros, es aconsejable realizar una copia:</p> <pre><code>cp /etc/samba/smb.conf /etc/samba/smb_copia.conf\n</code></pre>"},{"location":"08_05_instalacion_configuracion_samba/#seccion-global","title":"Secci\u00f3n <code>[global]</code>","text":"<p>La secci\u00f3n <code>[global]</code> define los par\u00e1metros de SAMBA del nivel global, as\u00ed como los valores por defecto para el resto de par\u00e1metros en otras secciones si no se especifican en las mismas.</p>"},{"location":"08_05_instalacion_configuracion_samba/#configuracion-del-tipo-de-servidor-server-role","title":"Configuraci\u00f3n del tipo de servidor : <code>server role</code>","text":"<p>Es importante antes de nada tener en cuenta el tipo de servidor que vamos a configurar con samba: el par\u00e1metro <code>server role</code> se utiliza para especificar el papel que el servidor Samba desempe\u00f1ar\u00e1 en la red. Este par\u00e1metro determina si el servidor actuar\u00e1 como un controlador de dominio, un servidor aut\u00f3nomo o en alg\u00fan otro rol espec\u00edfico.</p> <p>En la siguiente tabla se muestran los diferentes opciones para este par\u00e1metro fundamental: </p> Valor Descripci\u00f3n <code>standalone server</code> (predeterminado) Servidor independiente sin funciones de controlador de dominio. <code>member server</code> Servidor que forma parte de un dominio existente. <code>classic primary domain controller</code> Controlador de dominio principal en un entorno Samba. <code>classic backup domain controller</code> Controlador de dominio de respaldo en un entorno Samba. <code>active directory domain controller</code> Controlador de dominio de Active Directory. <code>active directory domain member</code> Miembro de dominio de Active Directory. <code>active directory domain controller for the domain</code> Controlador de dominio espec\u00edfico de un dominio en Active Directory. <code>active directory domain controller for a new domain</code> Controlador de dominio para la creaci\u00f3n de un nuevo dominio en Active Directory. <p>Estos son algunos de los valores comunes para el par\u00e1metro \"<code>server role</code>\". Ten en cuenta que las opciones exactas pueden variar seg\u00fan la versi\u00f3n espec\u00edfica de Samba que est\u00e9s utilizando, y siempre es recomendable consultar la documentaci\u00f3n oficial correspondiente a tu versi\u00f3n espec\u00edfica para obtener la informaci\u00f3n m\u00e1s precisa. En todo caso los m\u00e1s utilizados son los 4 primeros, el resto son variaciones de estos.</p> <pre><code>server role = standalone server\nserver role = member server\nserver role = classic primary domain controller\nserver role = classic backup domain controller\n</code></pre> <p>Es importante elegir el valor correcto para \"<code>server role</code>\" seg\u00fan el papel que desees que el servidor Samba desempe\u00f1e en tu red. </p>"},{"location":"08_05_instalacion_configuracion_samba/#opciones-de-configuracion-principales","title":"Opciones de configuraci\u00f3n principales","text":"<p>Las principales opciones de configuraci\u00f3n de la secci\u00f3n global de SAMBA son:</p> Opci\u00f3n Descripci\u00f3n Valor por defecto workgroup Nombre del grupo de trabajo o dominio de SAMBA. Ninguno. server string Descripci\u00f3n del equipo en el dominio o grupo de trabajo. Ninguno. netbios name Nombre del ordenador SAMBA. Nombre DNS. interfaces Interfaces que utilizar\u00e1 SAMBA. Puede ser un interface (eth0), una direcci\u00f3n IP, una  direcci\u00f3n IP/mascara o una direcci\u00f3n broadcast/mascara. Todos los interfaces excepto el de loopback. security Nivel de seguridad. user passdb backend Modo de almacenamiento de las contrase\u00f1as. tdbsam smb passwd file Fichero con las contrase\u00f1as almacenadas. En el ejecutable. encrypt passwords Utilizar contrase\u00f1as cifradas de Windows. yes password server Servidores Windows para la autentificaci\u00f3n. Ninguno. null password Permitir el acceso de usuarios con contrase\u00f1a nula. no map to guest Indica cuando un acceso debe considerarse como invitado. Never hosts allow Permite restringir los ordenadores y/o redes que pueden acceder al servidor. Permiso a todos los ordenadores. log file Fichero de log /var/log/samba/log.%m max log file Tama\u00f1o m\u00e1ximo del fichero de log 50 kBytes <p>Un sencillo ejemplo de secci\u00f3n [global] es el siguiente:</p> <pre><code>[global]\nworkgroup = WORKGROUP\nserver string = SAMBA %v en %L\nserver role = standalone server\nnetbios name = glup\nsecurity = user\npassdb backend = tdbsam\nsmb passwd file = /var/lib/samba/private/passdb.tdb\nencrypt passwords = yes\nmap to guest = Never\nhosts allow = 192.168.13. 192.168.56.\n</code></pre> <p>Donde <code>%v</code> se sustituye por la versi\u00f3n de SAMBA y <code>%L</code> por el nombre del ordenador SAMBA. Mas adelante tenemos una tabla de equivalencia de estas variables.</p>"},{"location":"08_05_instalacion_configuracion_samba/#resto-de-secciones","title":"Resto de secciones","text":"<p>En el resto de secciones podemos diferenciar en tres tipos: </p> <p>Por una parte, la secci\u00f3n <code>[homes]</code> define un recurso de red para cada usuario conocido por SAMBA y lo asocia al directorio ra\u00edz de cada usuario del ordenador servidor de SAMBA. Esta secci\u00f3n funciona como opci\u00f3n por defecto, pues un servidor SAMBA intenta primero comprobar si existe un servicio con ese nombre. Si no se encuentra, la solicitud se trata como un nombre de usuario y se busca en el fichero local de contrase\u00f1as. Si el nombre existe y la clave es correcta, se crea un servicio, cuyo nombre se cambia de [homes] al nombre local del usuario y, si no se especifica otro valor, se utiliza el directorio ra\u00edz del usuario.</p> <p>Por otra parte, la secci\u00f3n <code>[printers]</code> define un recurso compartido para cada nombre de impresora conocida por SAMBA, que suelen ser las impresoras especificadas en el fichero <code>/etc/printcap</code> del ordenador. Su funcionamiento es similar al de la secci\u00f3n [homes].</p> <p>Por \u00faltimo, cualquier otro recurso (directorio o impresora) que se quiera compartir, debe especificarse creando una secci\u00f3n adicional en el fichero de configuraci\u00f3n, donde el nombre de la secci\u00f3n se corresponder\u00e1 con el nombre con el que el recurso ser\u00e1 conocido en la red. Aqui es donde nosotros trabajaremos habitualmente</p> <p>Las principales opciones de configuraci\u00f3n de estas secciones son:</p> Opci\u00f3n Descripci\u00f3n Valor por defecto read only Exportaci\u00f3n del recurso en solo lectura. yes writeable Exportaci\u00f3n del recurso en modo escritura no browseable Define si se permitir\u00e1 mostrar este recurso en las listas de recursos compartidos de Windows yes path Ruta absoluta al recurso Ninguno. comment Descripci\u00f3n del servicio. Ninguno. guest ok Define si se permitir\u00e1 el acceso como usuario invitado. El valor puede ser Yes o No. no guest account Usuario que identifica el acceso como invitado. nobody guest only Todos los accesos se realizan como invitado no public Es un equivalente de guest ok, es decir define si se permitir\u00e1 el acceso como usuario invitado. El valor puede ser Yes o No. no force user Fuerza a que el acceso al recurso se realice como el usuario especificado. Ninguno force group Fuerza a que el acceso al recurso se realice como el grupo especificado. Ninguno. hosts allow Lista de ordenadores desde el que se permite el acceso Lista vac\u00eda (todos los ordenadores). hosts deny Lista de ordenadores a los que se les deniega el acceso. Lista vac\u00eda (ning\u00fan ordenador). printable Indica si un dispositivo compartido es una impresora. no valid users Define los usuarios o grupos, que podr\u00e1n acceder al recurso compartido. Los valores pueden ser nombres de usuarios separados por comas o bien nombres de grupo antecedidos por una @. Ejemplo: fulano, mengano, @administradores Lista vac\u00eda (todos los usuarios). write list Define los usuarios o grupos, que podr\u00e1n acceder con permiso de escritura. Los valores pueden ser nombres de usuarios separados por comas o bien nombres de grupo antecedidos por una @. Ejemplo: fulano, mengano, @administradores Lista vac\u00eda (todos los usuarios). admin users Define los usuarios o grupos, que podr\u00e1n acceder con permisos administrativos para el recurso. Es decir, podr\u00e1n acceder hacia el recurso realizando todas las operaciones como super-usuarios. Lista vac\u00eda (ning\u00fan usuario). directory mask Es lo mismo que directory mode. Define qu\u00e9 permiso en el sistema tendr\u00e1n los subdirectorios creados dentro del recurso. Ejemplos: 1777 Definido por sistema create mask Define que permiso en el sistema tendr\u00e1n los nuevos archivos creados dentro del recurso. Ejemplo: 0644 Definido por sistema follow symlinks Permite el seguimiento de enlaces simb\u00f3licos Yes <p><code>read only</code> y <code>writeable</code> se refieren al modo de exportaci\u00f3n del recurso, solo que de forma inversa, as\u00ed el equivalente de <code>read only = yes</code> es <code>writeable = no</code>.</p> <p>IMPORTANTE: A la hora de compartir no solo debemos tener en cuenta los par\u00e1metros <code>read only</code> y <code>writeable</code> para establecer permisos, tambi\u00e9n debemos tener en cuenta los permisos de las carpetas compartidas, de forma similar a lo visto con NFS</p>"},{"location":"08_05_instalacion_configuracion_samba/#ejemplos-de-recursos-compartidos","title":"Ejemplos de recursos compartidos","text":"<p>En el siguiente ejemplo, en el cual se exportan los directorios ra\u00edz de los usuarios: </p><pre><code>[homes]\ncomment = Directorios raiz de los usuarios\nbrowseable = yes\nwriteable = yes\n</code></pre><p></p> <p>O en este otro ejemplo, en el que se exportan las impresoras conectadas al servidor de SAMBA:</p> <pre><code>[printers]\ncomment = Impresoras\npath = /var/spool/samba\nbrowseable = no\nguest ok = no\nwriteable = no\nprintable = yes\n</code></pre> <p>Otro ejemplo, en el que se exporta un directorio temporal para que los usuarios puedan escribir en el mismo, es el siguiente:</p> <pre><code>[tmp]\ncomment = Espacio temporal de disco\npath = /tmp\nbrowseable = yes\nread only = no\nguest ok = yes\n</code></pre> <p>Otro ejemplo de carpeta compartida en el que se permite acceso total a todo el mundo.</p> <pre><code>[compartido]\ncomment = Archivos Compartidos\npath = /home/compartido\nguest ok = yes\nbrowseable = yes\nwriteable = yes\ncreate mask = 0777\ndirectory mask = 0777\n</code></pre>"},{"location":"08_05_instalacion_configuracion_samba/#crear-editar-o-eliminar-usuarios-en-samba","title":"Crear, editar o eliminar usuarios en Samba","text":"<p>Los usuarios que queremos que tengan acceso al servidor Samba deben estar creados como usuarios en nuestro servidor linux, podemos crear un grupo samba y agregar a ese grupo todos los usuarios que tendr\u00e1n acceso al servidor samba:</p> <p>Supongamos que tenemos un usuarios ya creado llamado sergio y que lo queremos agregar a los usuarios de Samba, para esto ejecutamos el siguiente comando:</p> <p></p><pre><code>sudo smbpasswd -a sergio\n</code></pre> Adem\u00e1s : <p></p> <pre><code>smbpasswd -d nombre_usuario     # Para deshabilitar un usuario\nsmbpasswd -e nombre_usuario     # Para habilitar un usuario deshabilitado\nsmbpasswd -s nombre_usuario     # Para pregunta por el password del usuario\nsmbpasswd -n nombre_usuario     # Para resetear o variar el password\nsmbpasswd -x nombre_usuario     # Para borrar un usuario\n</code></pre>"},{"location":"08_05_instalacion_configuracion_samba/#asignar-permisos-a-usuarios","title":"Asignar permisos a usuarios","text":"<p>Para darle acceso a usuario concretos a carpetas, tenemos las entradas <code>valid-users</code> donde se puede tener un listado separado por comas de usuarios que pueden acceder o de grupos (precedidos por <code>@</code>)</p> <pre><code>[carp-juan]\ncomment = Carpeta para juan;\npath = /srv/compartido/carp-juan\nbrowseable = yes\nread only = no\nvalid users = juan\n</code></pre> <p>Recuerda que para que funcionen todo:</p> <ul> <li>El usuario debe esta creado para samba y tener una contrase\u00f1a</li> <li>La carpeta debe existir y tener permisos de acceso adecuados</li> <li>Una vez modificado el fichero <code>smb.conf</code> se debe testear y reiniciar el servicio <code>smbd</code></li> </ul>"},{"location":"08_06_integracion_active_directory/","title":"Integraci\u00f3n con Active Directory usando Winbind","text":"<p>Ahora llega la parte m\u00e1s interesante y compleja de este tema: vamos a unir nuestro servidor Linux al dominio Active Directory de Windows Server que creamos en temas anteriores.</p> <p>Una vez completada esta integraci\u00f3n, conseguiremos que:</p> <ul> <li>Los usuarios del dominio Windows puedan autenticarse en el servidor Linux con sus credenciales del AD</li> <li>Los recursos compartidos en Linux respeten los permisos y grupos del Active Directory</li> <li>Podamos gestionar permisos desde Windows de forma nativa, usando la interfaz gr\u00e1fica que ya conocemos</li> <li>Todo funcione de forma transparente: los usuarios no notar\u00e1n diferencia entre recursos Windows y Linux</li> </ul> <p>Esta configuraci\u00f3n es habitual en empresas con infraestructuras h\u00edbridas y representa una habilidad muy valorada profesionalmente. A diferencia de otras soluciones como SSSD, utilizaremos Winbind, que ofrece una integraci\u00f3n m\u00e1s profunda con Active Directory y permite una gesti\u00f3n m\u00e1s completa de ACLs de Windows.</p>"},{"location":"08_06_integracion_active_directory/#preparacion-del-entorno","title":"Preparaci\u00f3n del entorno","text":"<p>Antes de comenzar el proceso de integraci\u00f3n, debemos asegurarnos de que nuestro servidor Linux tiene correctamente configurados varios aspectos fundamentales de red e identificaci\u00f3n.</p>"},{"location":"08_06_integracion_active_directory/#configuracion-de-red-y-dns","title":"Configuraci\u00f3n de red y DNS","text":"<p>El primer paso cr\u00edtico es asegurar que nuestro servidor puede comunicarse correctamente con el controlador de dominio y, especialmente, que puede resolver nombres del dominio.</p> <p>Este paso ya lo tenemos hecho, pero es fundamental que nos aseguremos de que todo esta correcto. Para ellos, editamos la configuraci\u00f3n de red de Netplan:</p> <pre><code>sudo nano /etc/netplan/00-installer-config.yaml\n</code></pre> <p>La configuraci\u00f3n debe apuntar al Windows Server como servidor DNS primario. Es fundamental que el DNS sea el del controlador de dominio, ya que Active Directory depende completamente de DNS para funcionar:</p> <pre><code>network:\n  version: 2\n  ethernets:\n    enp0s3:\n      dhcp4: no\n      addresses: [192.168.100.10/24]\n      routes:\n        - to: default\n          via: 192.168.100.1\n      nameservers:\n        addresses: [192.168.100.1, 1.1.1.1]\n        search: [DOMXXX.local]\n</code></pre> <p>Sustituimos <code>DOMXXX</code> por el nombre real de nuestro dominio. La directiva <code>search</code> permite que podamos usar nombres cortos (como <code>servidor</code>) en lugar del nombre completo (como <code>servidor.domxxx.local</code>).</p> <p>Aplicamos los cambios:</p> <pre><code>sudo netplan apply\n</code></pre>"},{"location":"08_06_integracion_active_directory/#configuracion-del-archivo-hosts","title":"Configuraci\u00f3n del archivo hosts","text":"<p>Para evitar problemas de resoluci\u00f3n de nombres, especialmente con el propio servidor, configuramos el archivo <code>/etc/hosts</code>:</p> <pre><code>sudo nano /etc/hosts\n</code></pre> <p>A\u00f1adimos o modificamos las siguientes l\u00edneas:</p> <pre><code>127.0.0.1       localhost\n192.168.100.10  ubuntuserver.domXXX.local  ubuntuserver\n192.168.100.1   srvXXX.domXXX.local srvXXX domXXX.local\n</code></pre> <p>La \u00faltima l\u00ednea es especialmente importante: asegura que cuando el sistema intente resolver el nombre del dominio, encuentre directamente la IP del controlador de dominio.</p> contenido de fichero /etc/hosts <p>No es indispensable, pero es aconsejable poner todo en min\u00fasculas</p>"},{"location":"08_06_integracion_active_directory/#verificacion-de-conectividad","title":"Verificaci\u00f3n de conectividad","text":"<p>Antes de continuar, verificamos que todo funciona correctamente.</p> <p>Comprobamos que podemos hacer ping al controlador de dominio:</p> <pre><code>ping -c 3 DOMXXX.local\n</code></pre> <p>Deber\u00edamos recibir respuestas desde la IP del Windows Server (192.168.100.1).</p> <p>Si alguna de estas pruebas falla, debemos revisar la configuraci\u00f3n antes de continuar.</p>"},{"location":"08_06_integracion_active_directory/#resolucion-dns-del-dominio","title":"Resoluci\u00f3n DNS del dominio","text":"<p>Este es uno de los puntos m\u00e1s cr\u00edticos. El servidor Linux debe poder resolver el nombre del dominio Active Directory. Para ello, debe usar el Windows Server como servidor DNS.</p> <p>Probamos la resoluci\u00f3n del dominio:</p> <pre><code>nslookup DOMXXX.local\n</code></pre> <p>(Sustituimos DOMXXX por el nombre real de vuestro dominio)</p> Prueba de resoluci\u00f3n de nombres del dominio <p>Si funciona, deber\u00eda mostrar la IP del Windows Server. Si da error \"server can't find...\", hay un problema de DNS que debemos resolver antes de continuar.</p> <p>Si el servidor DNS no resuelve bien la direcci\u00f3n del DOMXXX</p> <p>Como tenemos un sistema muy complejo, es posible que el servidor DNS de nuestro Windows Server resuelva que la direcci\u00f3n del DOMSERGIO.local es 10.0.2.15, que es la IP de la tarjeta de red externa, y por lo tanto inaccesible para nuestro servidor Ubuntu.</p> <p>Para solucionar esto, debemos corregir el registro en el Servidor DNS (Windows Server) e indicarle al servicio DNS que no \"escuche\" ni responda por las interfaces que no pertenecen a tu red de gesti\u00f3n (como la de NAT de VirtualBox 10.0.2.15).</p> <p>En el Windows Server, abre el Administrador de DNS:</p> <ul> <li>Haz clic derecho sobre el nombre del servidor y selecciona Propiedades.</li> <li>Ve a la pesta\u00f1a Interfaces.</li> <li>Cambia la selecci\u00f3n a \"Solo las siguientes direcciones IP\".</li> <li>Desmarca la casilla de la IP 10.0.2.15 y aseg\u00farate de que solo la 192.168.100.1 est\u00e9 marcada.</li> <li>Aplica los cambios.</li> </ul> <p></p> Correcci\u00f3n de la resoluci\u00f3n de nombres DNS <p></p> <p>Tambi\u00e9n tienes que eliminar manualmente las zonas directas de b\u00fasqueda que no sean la tarjeta de red correcta. Al final debe quedar algo similar a la siguiente imagen:</p> <p></p> Correcic\u00f3n de la resoluci\u00f3n de nombres DNS <p></p> <p>Despu\u00e9s de todo esto, reinicia las DNS que tiene tu servidor ubuntu ejecutando</p> <pre><code>sudo resolvectl flush-caches\n</code></pre> <p>nslookup no instalado</p> <p>Si no ten\u00edamos <code>nslookup</code> instalado:</p> <pre><code>sudo apt install -y dnsutils\n</code></pre> <p>Tambi\u00e9n podemos probar con:</p> <pre><code>host DOMXXX.local\n</code></pre> <p>o</p> <pre><code>dig DOMXXX.local\n</code></pre>"},{"location":"08_06_integracion_active_directory/#sincronizacion-de-hora","title":"Sincronizaci\u00f3n de hora","text":"<p>La autenticaci\u00f3n Kerberos (que usa Active Directory) es extremadamente sensible a diferencias de hora. Si el reloj del servidor Linux y del Windows Server difieren en m\u00e1s de 5 minutos, la autenticaci\u00f3n fallar\u00e1.</p> <p>Instalamos el cliente NTP para sincronizaci\u00f3n de hora:</p> <pre><code>sudo apt install -y chrony\n</code></pre> <p>Verificamos que el servicio est\u00e1 activo:</p> <pre><code>sudo systemctl status chronyd\n</code></pre> <p>Verificamos la sincronizaci\u00f3n:</p> <pre><code>timedatectl\n</code></pre> <p>Deber\u00edamos ver:</p> Verificaci\u00f3n de la sincronizaci\u00f3n de reloj <p>La l\u00ednea clave es <code>System clock synchronized: yes</code>. Si muestra <code>no</code>, esperamos un minuto y volvemos a verificar.</p> <p>Tambi\u00e9n podemos ejecutar el estado de la sincronizaci\u00f3n mediante el comando:</p> <pre><code>chronyc sources -v\n</code></pre> <p>Si no tenemos completamente el reloj sincronizado, pero estamos en hora, el sistema puede funcionar perfectamente.</p> <p>Opcionalmente, podemos configurar el servidor NTP para que use el Windows Server como fuente de hora a\u00f1adiendo al fichero <code>/etc/chrony/chrony.conf</code> una l\u00ednea con el texto server <code>192.168.100.1 iburst prefer trust</code>, pero con chrony configurado por defecto suele ser suficiente.</p>"},{"location":"08_06_integracion_active_directory/#instalacion-de-software-necesario","title":"Instalaci\u00f3n de software necesario","text":"<p>Para unir Linux a Active Directory usando Winbind necesitamos varios paquetes que gestionan la autenticaci\u00f3n, la comunicaci\u00f3n con el AD y la integraci\u00f3n con Samba.</p> <p>Actualizamos la lista de paquetes e instalamos todo lo necesario:</p> <pre><code>sudo apt update\nsudo apt install -y samba winbind libnss-winbind libpam-winbind krb5-config\n</code></pre> <p>Durante la instalaci\u00f3n de <code>krb5-config</code>, el sistema nos preguntar\u00e1 por el \"Default Realm\". Es muy importante introducir el nombre del dominio en may\u00fasculas: <code>DOMXXX.LOCAL</code>.</p> Configuraci\u00f3n del paquete krb5-config durante la instalaci\u00f3n <p>Para el resto de preguntas que nos har\u00e1 no es necesario introducir nada.</p> <p>Explicaci\u00f3n de los paquetes principales</p> <ul> <li><code>samba</code>: proporciona los servicios de compartici\u00f3n de archivos compatibles con Windows</li> <li><code>winbind</code>: demonio que permite que Linux use usuarios y grupos de Active Directory</li> <li><code>libnss-winbind</code> y <code>libpam-winbind</code>: integran Winbind con el sistema de autenticaci\u00f3n de Linux</li> <li><code>krb5-config</code>: configuraci\u00f3n de Kerberos, el protocolo de autenticaci\u00f3n que usa Active Directory</li> </ul> <p>La instalaci\u00f3n puede tardar varios minutos. Al final, el sistema puede pedir que reiniciemos servicios para aplicar cambios, lo cual aceptamos.</p>"},{"location":"08_06_integracion_active_directory/#configuracion-del-sistema-de-nombres","title":"Configuraci\u00f3n del sistema de nombres","text":"<p>Linux necesita saber d\u00f3nde buscar informaci\u00f3n sobre usuarios y grupos. Por defecto, solo busca en los archivos locales (<code>/etc/passwd</code>, <code>/etc/group</code>), pero necesitamos que tambi\u00e9n consulte a Winbind para obtener usuarios del Active Directory.</p> <p>Editamos el archivo que controla este comportamiento:</p> <pre><code>sudo nano /etc/nsswitch.conf\n</code></pre> <p>Modificamos las l\u00edneas de <code>passwd</code>, <code>group</code> y <code>shadow</code> para que incluyan <code>winbind</code>:</p> <pre><code>passwd:         files systemd winbind\ngroup:          files systemd winbind\nshadow:         files systemd\ngshadow:        files systemd\n\nhosts:          files dns\nnetworks:       files\n</code></pre> <p>Explicaci\u00f3n del orden</p> <ul> <li><code>files</code>: primero busca en archivos locales (usuarios y grupos del sistema)</li> <li><code>systemd</code>: despu\u00e9s consulta usuarios din\u00e1micos de systemd</li> <li><code>winbind</code>: finalmente consulta el Active Directory a trav\u00e9s de Winbind</li> </ul> <p>Este orden es importante: asegura que los usuarios del sistema local (como <code>root</code>) siempre funcionen, incluso si hay problemas con Active Directory.</p>"},{"location":"08_06_integracion_active_directory/#configuracion-de-samba-y-winbind","title":"Configuraci\u00f3n de Samba y Winbind","text":"<p>Ahora viene la parte m\u00e1s importante: configurar Samba y Winbind para que trabajen con nuestro Active Directory. Esta configuraci\u00f3n es completa y permite tanto la autenticaci\u00f3n de usuarios como la gesti\u00f3n de permisos de Windows en carpetas Linux.</p> <p>Vamos a crear el fichero de configuraci\u00f3n de samba desde cero, por lo cual vamos a renombrar el fichero de configuraci\u00f3n por defecto, por si en un futuro nos hiciera falta_</p> <pre><code>sudo mv /etc/samba/smb.conf /etc/samba/smb.conf.bak\n</code></pre> <p>y ahora editamos el archivo principal de configuraci\u00f3n de Samba, que estar\u00e1 vac\u00edo:</p> <pre><code>sudo nano /etc/samba/smb.conf\n</code></pre> <p>Escribimos el siguiente contenido en el fichero. </p> <pre><code>[global]\n   workgroup = DOMXXX\n   realm = DOMXXX.LOCAL\n   security = ADS\n\n   # Configuraci\u00f3n de Winbind y mapeo de IDs\n   idmap config * : backend = tdb\n   idmap config * : range = 3000-7999\n   idmap config DOMXXX : backend = rid\n   idmap config DOMXXX : range = 10000-999999\n   template shell = /bin/bash\n   template homedir = /home/%U \n\n   # Configuraci\u00f3n de Winbind y Enumeraci\u00f3n\n   winbind use default domain = yes\n   winbind enum users = yes\n   winbind enum groups = yes\n   winbind refresh tickets = yes\n\n   # Logging y Red\n   log file = /var/log/samba/log.%m\n   max log size = 1000\n   interfaces = lo 192.168.100.0/24\n   bind interfaces only = yes\n   password server = 192.168.100.1\n\n   # Soporte ACLs de Windows\n   vfs objects = acl_xattr\n   map acl inherit = yes\n   store dos attributes = yes\n</code></pre> <p>IMPORTANTE: Sustituimos todas las ocurrencias de <code>DOMXXX</code> por el nombre real de nuestro dominio.</p> <p>Explicaci\u00f3n de las secciones principales:</p> <p>Identificaci\u00f3n del dominio:</p> <ul> <li><code>workgroup</code>: nombre NetBIOS del dominio (la parte antes del <code>.local</code>)</li> <li><code>realm</code>: nombre completo del dominio en may\u00fasculas</li> <li><code>security = ADS</code>: usar Active Directory Security</li> </ul> <p>Mapeo de identificadores: Las l\u00edneas <code>idmap</code> son cruciales. Active Directory identifica usuarios con SIDs (Security Identifiers), mientras que Linux usa UIDs y GIDs num\u00e9ricos. Esta configuraci\u00f3n establece c\u00f3mo se traducen:</p> <ul> <li><code>idmap config *</code>: configuraci\u00f3n por defecto para dominios desconocidos (rango 3000-7999)</li> <li><code>idmap config DOMXXX</code>: configuraci\u00f3n espec\u00edfica para nuestro dominio usando el m\u00e9todo RID (rango 10000-999999)</li> </ul> <p>Configuraci\u00f3n de Winbind:</p> <ul> <li><code>winbind use default domain = yes</code>: permite usar nombres cortos (solo <code>usuario</code> en lugar de <code>DOMXXX\\usuario</code>)</li> <li><code>winbind enum users/groups = yes</code>: permite listar todos los usuarios y grupos del dominio (muy importante para que funcione <code>getent</code>)</li> <li><code>winbind refresh tickets = yes</code>: mantiene los tickets de Kerberos actualizados</li> </ul> <p>Soporte de ACLs de Windows: Esta parte permite que los permisos de Windows se guarden correctamente en Linux:</p> <ul> <li><code>vfs objects = acl_xattr</code>: habilita el almacenamiento de ACLs extendidas</li> <li><code>map acl inherit = yes</code>: respeta la herencia de permisos de Windows</li> <li><code>store dos attributes = yes</code>: guarda atributos especiales de Windows (oculto, sistema, etc.)</li> </ul> <p>Finalmente, Verificamos que la configuraci\u00f3n es correcta:</p> <pre><code>testparm -s\n</code></pre> <p>Si hay errores de sintaxis o de cualquier tipo, este comando nos lo dir\u00e1 y los debemos corregir.</p> <p>Cuando todo sea correctos nos dir\u00e1 <code>Loaded services file OK.</code></p> testparm. Verificando fichero smb.conf <p>Puede darse el caso que tengamos alg\u00fan <code>WARNING</code>, de hecho en la configuraci\u00f3n planteada tenemos informaci\u00f3n redundante y tendremos un <code>WARNING</code>, pero seguiremos sin problemas. </p> <p>Si no hay errores, recargamos la configuraci\u00f3n de Samba:</p> <pre><code>sudo smbcontrol all reload-config\n</code></pre> <p>O reiniciamos los servicios:</p> <pre><code>sudo systemctl restart smbd nmbd\n</code></pre>"},{"location":"08_06_integracion_active_directory/#union-al-dominio","title":"Uni\u00f3n al dominio","text":"<p>Con toda la configuraci\u00f3n preparada, procedemos a unir el servidor Linux al dominio Active Directory.</p> <p>Ejecutamos el comando de uni\u00f3n al dominio:</p> <pre><code>sudo net ads join -U Administrador\n</code></pre> <p>Explicaci\u00f3n del comando:</p> <ul> <li><code>net ads join</code>: comando de Samba para unirse a un dominio Active Directory</li> <li><code>-U Administrador</code>: especifica el usuario con permisos para unir equipos al dominio</li> </ul> <p>El sistema nos pedir\u00e1 la contrase\u00f1a del usuario Administrador del dominio Windows. La introducimos (no se mostrar\u00e1 mientras escribimos) y pulsamos Enter.</p> <p>Si todo va bien, veremos un mensaje confirmando que nos hemos unido al dominio correctamente: <code>Joined 'UBUNTUSERVER' to dns domain 'DOMXXX.local'</code>.</p> Uni\u00f3n al dominio. <p>En la captura vemos alg\u00fan error de DNS, pero no es critico y podemos seguir con el proceso. </p> Verificaci\u00f3n de uni\u00f3n al dominio desde Windows Server. <p>Tambi\u00e9n podemos revisar que el equipo se ha unido al dominio mediante la consola de Uusuarios y equipos de Active Directory en nuestro Windows server:</p> <p>Ahora necesitamos reiniciar y habilitar los servicios de Winbind y Samba para que la configuraci\u00f3n tenga efecto:</p> <pre><code>sudo systemctl restart winbind smbd nmbd\nsudo systemctl enable winbind smbd nmbd\n</code></pre> <p>El comando <code>enable</code> asegura que estos servicios se inicien autom\u00e1ticamente al arrancar el servidor.</p>"},{"location":"08_06_integracion_active_directory/#verificacion-de-la-integracion","title":"Verificaci\u00f3n de la integraci\u00f3n","text":"<p>Es fundamental verificar que la integraci\u00f3n con Active Directory funciona correctamente antes de continuar. Vamos a realizar varias pruebas.</p>"},{"location":"08_06_integracion_active_directory/#verificar-la-union-al-dominio","title":"Verificar la uni\u00f3n al dominio","text":"<p>Comprobamos que la uni\u00f3n al dominio es v\u00e1lida:</p> <pre><code>sudo net ads testjoin\n</code></pre> <p>Debe responder: <code>Join is OK</code></p> <p>Verificamos la comunicaci\u00f3n con el controlador de dominio:</p> <pre><code>sudo wbinfo -t\n</code></pre> <p>Debe responder: <code>checking the trust secret ... succeeded</code></p> Verificaci\u00f3n de uni\u00f3n al dominio desde Ubuntu Server. <p>Estos dos comandos confirman que el servidor est\u00e1 correctamente unido al dominio y puede comunicarse con \u00e9l.</p>"},{"location":"08_06_integracion_active_directory/#verificar-usuarios-y-grupos-del-dominio","title":"Verificar usuarios y grupos del dominio","text":"<p>Ahora probamos que el sistema puede ver usuarios del Active Directory. Intentamos obtener informaci\u00f3n del usuario Administrador:</p> <pre><code>id Administrador\n</code></pre> <p>Deber\u00edamos ver informaci\u00f3n del usuario incluyendo su UID, GID y los grupos a los que pertenece. Algo similar a:</p> <pre><code>uid=10500(Administrador) gid=10513(domain users) grupos=10513(domain users),10512(domain admins)\n</code></pre> Verificaci\u00f3n de uni\u00f3n al dominio. Comprobando usuarios. <p>Listamos todos los usuarios del dominio:</p> <pre><code>getent passwd | grep -i DOMXXX\n</code></pre> <p>Deber\u00edamos ver una lista de todos los usuarios del Active Directory. Si no aparece ninguno, es probable que la configuraci\u00f3n de enumeraci\u00f3n (<code>winbind enum users = yes</code>) no est\u00e9 activa o que haya alg\u00fan problema de comunicaci\u00f3n.</p> <p>De forma similar, listamos los grupos:</p> <pre><code>getent group | grep -i DOMXXX\n</code></pre> <p>Si estos comandos funcionan correctamente, significa que la integraci\u00f3n b\u00e1sica est\u00e1 completa y el sistema puede consultar usuarios y grupos del dominio.</p>"},{"location":"08_06_integracion_active_directory/#configuracion-de-recursos-compartidos","title":"Configuraci\u00f3n de recursos compartidos","text":"<p>Una vez que tenemos la integraci\u00f3n funcionando, podemos crear recursos compartidos que usen la autenticaci\u00f3n del dominio y respeten los permisos de Active Directory.</p>"},{"location":"08_06_integracion_active_directory/#crear-el-directorio-para-compartir","title":"Crear el directorio para compartir","text":"<p>Vamos a crear una carpeta compartida para el departamento de Inform\u00e1tica. Primero creamos el directorio:</p> <pre><code>sudo mkdir -p /srv/samba/informatica\n</code></pre> <p>Usamos <code>/srv/samba/</code> como ubicaci\u00f3n est\u00e1ndar para recursos compartidos de Samba en Linux.</p>"},{"location":"08_06_integracion_active_directory/#configurar-permisos-del-sistema-de-archivos","title":"Configurar permisos del sistema de archivos","text":"<p>Para que Samba pueda gestionar correctamente los permisos de Windows, debemos preparar el sistema de archivos Linux con una configuraci\u00f3n espec\u00edfica.</p> <p>Asignamos el grupo del dominio como propietario:</p> <pre><code>sudo chgrp \"gInformatica\" /srv/samba/informatica\n</code></pre> <p>Establecemos permisos con el bit SGID (Set Group ID):</p> <pre><code>sudo chmod 2775 /srv/samba/informatica\n</code></pre> <p>Explicacion del comando</p> <p>El <code>2</code> al principio activa el bit SGID, que hace que cualquier archivo o carpeta creado dentro herede autom\u00e1ticamente el grupo propietario (<code>gInformatica</code>). Los permisos <code>775</code> significan:</p> <ul> <li>Propietario (root): lectura, escritura y ejecuci\u00f3n (7)</li> <li>Grupo (gInformatica): lectura, escritura y ejecuci\u00f3n (7)</li> <li>Otros: lectura y ejecuci\u00f3n (5)</li> </ul> <p>Configuramos las ACLs de POSIX para permitir que Samba gestione las ACLs de Windows. Esto no es obligatorio, pero nos permitir\u00e1 gestionar los permisos desde el servidor Windows. Sin esta configuraci\u00f3n los permisos los establecemos \u00fanicamente desde el servidor Ubuntu y no podremso cambiar los permisos de los diferentes archivos o carpetas que contegna. </p> <p>Primero instalaremos el paquete <code>acl</code> que nos permitir\u00e1 realizar estos ajustes.</p> <p>As\u00ed pues ejecutamos:</p> <pre><code>sudo apt install acl\nsudo setfacl -m g:\"gInformatica\":rwx /srv/samba/informatica\nsudo setfacl -d -m g:\"gInformatica\":rwx /srv/samba/informatica\n</code></pre> <p>Explicacion de los comandos</p> <p>El primer comando establece los permisos actuales. El segundo (<code>-d</code>) establece permisos por defecto que se aplicar\u00e1n autom\u00e1ticamente a cualquier archivo o carpeta creado dentro.</p> Creaendo carpeta para compartir"},{"location":"08_06_integracion_active_directory/#configurar-el-recurso-compartido-en-samba","title":"Configurar el recurso compartido en Samba","text":"<p>Editamos nuevamente la configuraci\u00f3n de Samba:</p> <pre><code>sudo nano /etc/samba/smb.conf\n</code></pre> <p>Al final del archivo, a\u00f1adimos la definici\u00f3n del recurso compartido:</p> <pre><code>[Informatica]\n   comment = Carpeta de equipo gestionada desde Active Directory\n   path = /srv/samba/informatica\n   browseable = yes\n   read only = no\n   guest ok = no\n\n   # Restricci\u00f3n de acceso a nivel de protocolo\n   valid users = @gInformatica\n\n   # Herencia de permisos NTFS\n   vfs objects = acl_xattr\n   map acl inherit = yes\n   store dos attributes = yes\n\n   # M\u00e1scaras de creaci\u00f3n para asegurar compatibilidad\n   create mask = 0664\n   directory mask = 0775\n</code></pre> <p>Explicaci\u00f3n de las directivas:</p> <ul> <li><code>comment</code>: descripci\u00f3n que ver\u00e1n los usuarios al explorar recursos compartidos</li> <li><code>path</code>: ruta f\u00edsica en el sistema de archivos Linux</li> <li><code>browseable = yes</code>: el recurso aparecer\u00e1 al explorar el servidor</li> <li><code>read only = no</code>: permite escritura (si no, ser\u00eda de solo lectura)</li> <li><code>guest ok = no</code>: requiere autenticaci\u00f3n, no permite acceso an\u00f3nimo</li> <li><code>valid users = @gInformatica</code>: solo usuarios del grupo gInformatica pueden acceder (el <code>@</code> indica que es un grupo)</li> <li><code>vfs objects</code>, <code>map acl inherit</code>, <code>store dos attributes</code>: permiten la gesti\u00f3n completa de ACLs de Windows</li> <li><code>create mask</code> y <code>directory mask</code>: permisos por defecto para archivos y carpetas creados</li> </ul> <p>Verificamos que la configuraci\u00f3n es correcta:</p> <pre><code>testparm -s\n</code></pre> <p>Si no hay errores, recargamos la configuraci\u00f3n de Samba:</p> <pre><code>sudo smbcontrol all reload-config\n</code></pre> <p>O reiniciamos los servicios:</p> <pre><code>sudo systemctl restart smbd nmbd\n</code></pre>"},{"location":"08_06_integracion_active_directory/#acceso-desde-windows","title":"Acceso desde Windows","text":"<p>Llega el momento de la verdad: probar que todo funciona desde un cliente Windows.</p> <p>Desde un equipo Windows unido al dominio, iniciamos sesi\u00f3n con un usuario del dominio que pertenezca al grupo <code>gInformatica</code>.</p> <p>Abrimos el Explorador de archivos y en la barra de direcciones escribimos:</p> <pre><code>\\\\192.168.100.10\n</code></pre> <p>o usando el nombre del servidor:</p> <pre><code>\\\\ubuntuserver\n</code></pre> <p>Deber\u00edamos ver el recurso compartido Informatica. Hacemos doble clic para acceder.</p> <p>Si todo est\u00e1 correctamente configurado:</p> <ul> <li>No pedir\u00e1 credenciales (usa autom\u00e1ticamente las del usuario actual del dominio)</li> <li>Podemos crear archivos y carpetas</li> <li>Los archivos creados pertenecer\u00e1n al usuario del dominio que los cre\u00f3</li> </ul>"},{"location":"08_06_integracion_active_directory/#gestion-de-permisos-desde-windows","title":"Gesti\u00f3n de permisos desde Windows","text":"<p>Una de las grandes ventajas de usar Winbind con esta configuraci\u00f3n es que podemos gestionar permisos directamente desde Windows, usando la interfaz gr\u00e1fica que ya conocemos.</p> <p>Dentro del recurso compartido, creamos una carpeta de prueba. Hacemos clic derecho sobre ella y seleccionamos Propiedades. Vamos a la pesta\u00f1a Seguridad.</p> Carpeta compartida y sus permisos <p>Aqu\u00ed veremos los permisos actuales. Podemos hacer clic en Editar o Opciones avanzadas para modificarlos.</p> <p>Ahora podemos:</p> <ul> <li>A\u00f1adir usuarios espec\u00edficos del Active Directory</li> <li>Asignarles permisos de lectura, escritura, control total, etc.</li> <li>Configurar herencia de permisos</li> <li>Todo tal como lo har\u00edamos en un servidor Windows</li> </ul> <p>Los cambios que hagamos aqu\u00ed se guardar\u00e1n como ACLs extendidas en el sistema de archivos Linux, y Samba las respetar\u00e1 completamente.</p>"},{"location":"08_06_integracion_active_directory/#verificaciones-finales-desde-el-servidor","title":"Verificaciones finales desde el servidor","text":"<p>Para verificar que los permisos se est\u00e1n guardando correctamente, podemos consultar las ACLs desde el servidor Linux:</p> <pre><code>getfacl /srv/samba/informatica\n</code></pre> <p>Deber\u00edamos ver las ACLs de POSIX que configuramos, incluyendo las entradas por defecto para el grupo gInformatica.</p> Carpeta compartida y sus permisos <p>Si creamos archivos desde Windows y despu\u00e9s listamos el contenido desde Linux:</p> <pre><code>ls -l /srv/samba/informatica\n</code></pre> <p>Veremos que los archivos pertenecen a los usuarios del dominio que los crearon.</p> <p>Tambi\u00e9n podemos verificar que el grupo del dominio est\u00e1 correctamente visible:</p> <pre><code>getent group gInformatica\n</code></pre> <p>Debe mostrar el GID y los miembros del grupo del Active Directory.</p>"},{"location":"08_06_integracion_active_directory/#solucion-de-problemas-comunes","title":"Soluci\u00f3n de problemas comunes","text":"<p>Si algo no funciona como esperamos, aqu\u00ed hay algunas verificaciones y soluciones:</p> <p>No puedo acceder al recurso desde Windows:</p> <ul> <li>Verificar que el firewall de Ubuntu permite conexiones Samba: <code>sudo ufw allow samba</code></li> <li>Comprobar que los servicios est\u00e1n activos: <code>sudo systemctl status smbd nmbd winbind</code></li> <li>Verificar los logs de Samba: <code>sudo tail -f /var/log/samba/log.smbd</code></li> </ul> <p>Los comandos <code>getent</code> no muestran usuarios del dominio:</p> <ul> <li>Verificar que <code>winbind enum users = yes</code> est\u00e1 en <code>smb.conf</code></li> <li>Reiniciar Winbind: <code>sudo systemctl restart winbind</code></li> <li>Comprobar la comunicaci\u00f3n con el DC: <code>sudo wbinfo -t</code></li> </ul> <p>No puedo gestionar permisos desde Windows:</p> <ul> <li>Verificar que las ACLs est\u00e1n habilitadas: <code>sudo tune2fs -l /dev/sda1 | grep acl</code></li> <li>Asegurar que los permisos del sistema de archivos son correctos (2775 con SGID)</li> <li>Revisar que <code>vfs objects = acl_xattr</code> est\u00e1 en la configuraci\u00f3n del recurso</li> </ul> <p>Errores de autenticaci\u00f3n Kerberos:</p> <ul> <li>Verificar sincronizaci\u00f3n de hora: <code>timedatectl</code></li> <li>Si hay diferencia de m\u00e1s de 5 minutos, la autenticaci\u00f3n Kerberos fallar\u00e1</li> <li>Instalar y configurar un cliente NTP: <code>sudo apt install chrony</code></li> </ul> <p>Con esta configuraci\u00f3n completa, tenemos un servidor Linux totalmente integrado con Active Directory, capaz de autenticar usuarios del dominio y gestionar permisos de forma nativa desde Windows. Esta es una configuraci\u00f3n profesional que encontrar\u00edamos en entornos empresariales reales con infraestructuras h\u00edbridas.</p>"},{"location":"08_07_cron-rsync/","title":"Administraci\u00f3n avanzada - Automatizaci\u00f3n y copias de seguridad","text":"<p>Con la infraestructura de red funcionando correctamente, llega el momento de abordar uno de los aspectos m\u00e1s cr\u00edticos de la administraci\u00f3n de sistemas: la automatizaci\u00f3n de tareas y la implementaci\u00f3n de pol\u00edticas de respaldo. Un buen administrador no solo construye sistemas que funcionan, sino que tambi\u00e9n garantiza su continuidad y prev\u00e9 los posibles problemas antes de que ocurran.</p> <p>En este bloque aprenderemos a programar tareas autom\u00e1ticas que se ejecuten sin intervenci\u00f3n manual, a implementar estrategias de copias de seguridad robustas y a utilizar las herramientas modernas que Linux pone a nuestra disposici\u00f3n para estos fines. La automatizaci\u00f3n no solo nos ahorra tiempo, sino que tambi\u00e9n reduce errores humanos y garantiza que las tareas cr\u00edticas se realicen de forma consistente.</p>"},{"location":"08_07_cron-rsync/#41-planificacion-de-tareas-con-cron","title":"4.1. Planificaci\u00f3n de tareas con cron","text":""},{"location":"08_07_cron-rsync/#introduccion-a-cron","title":"Introducci\u00f3n a cron","text":"<p>El demonio <code>cron</code> es uno de los servicios m\u00e1s veteranos y utilizados en sistemas Unix/Linux. Su nombre proviene de \"chronos\" (tiempo en griego) y su funci\u00f3n es ejecutar comandos o scripts en momentos espec\u00edficos de forma autom\u00e1tica. Desde limpiar archivos temporales cada noche hasta generar informes semanales o ejecutar actualizaciones mensuales, cron es la herramienta fundamental para la automatizaci\u00f3n de tareas peri\u00f3dicas.</p> <p>Cada usuario del sistema puede tener su propia tabla de cron (crontab), lo que permite una gesti\u00f3n granular de las tareas automatizadas. Adem\u00e1s, existe un crontab del sistema que permite ejecutar tareas con privilegios espec\u00edficos.</p>"},{"location":"08_07_cron-rsync/#comprender-la-sintaxis-de-crontab","title":"Comprender la sintaxis de crontab","text":"<p>La sintaxis de cron puede parecer cr\u00edptica al principio, pero sigue una l\u00f3gica muy clara. Cada l\u00ednea en un crontab representa una tarea programada y tiene el siguiente formato:</p> <pre><code>* * * * * comando_a_ejecutar\n\u2502 \u2502 \u2502 \u2502 \u2502\n\u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500 D\u00eda de la semana (0-7, donde 0 y 7 son domingo)\n\u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Mes (1-12)\n\u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 D\u00eda del mes (1-31)\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Hora (0-23)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Minuto (0-59)\n</code></pre> <p>Cada asterisco puede sustituirse por valores espec\u00edficos, rangos o listas. Veamos algunos ejemplos pr\u00e1cticos que ilustran las posibilidades:</p> <pre><code># Ejecutar todos los d\u00edas a las 3:30 AM\n30 3 * * * /ruta/script.sh\n\n# Ejecutar cada hora en punto\n0 * * * * /ruta/comando\n\n# Ejecutar de lunes a viernes a las 8:00 AM\n0 8 * * 1-5 /ruta/trabajo.sh\n\n# Ejecutar cada 15 minutos\n*/15 * * * * /ruta/monitor.sh\n\n# Ejecutar el primer d\u00eda de cada mes a las 00:00\n0 0 1 * * /ruta/mensual.sh\n\n# Ejecutar los lunes, mi\u00e9rcoles y viernes a las 18:30\n30 18 * * 1,3,5 /ruta/informe.sh\n</code></pre>"},{"location":"08_07_cron-rsync/#gestionar-tareas-cron","title":"Gestionar tareas cron","text":"<p>Para trabajar con cron, disponemos de varios comandos que nos permiten editar, visualizar y eliminar tareas programadas:</p> <pre><code># Editar el crontab del usuario actual\ncrontab -e\n\n# Ver el crontab actual\ncrontab -l\n\n# Eliminar el crontab del usuario actual\ncrontab -r\n\n# Editar el crontab de otro usuario (como root)\nsudo crontab -u nombre_usuario -e\n</code></pre> <p>Al ejecutar <code>crontab -e</code> por primera vez, el sistema nos pedir\u00e1 que elijamos un editor de texto. Para usuarios nuevos, <code>nano</code> suele ser la opci\u00f3n m\u00e1s amigable.</p>"},{"location":"08_07_cron-rsync/#variables-de-entorno-en-cron","title":"Variables de entorno en cron","text":"<p>Las tareas de cron se ejecutan en un entorno muy limitado, sin las variables de entorno habituales de una sesi\u00f3n de usuario. Esto puede causar problemas si nuestros scripts dependen de rutas o configuraciones espec\u00edficas. Podemos definir variables al inicio del crontab:</p> <pre><code># Definir variables de entorno\nSHELL=/bin/bash\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nMAILTO=admin@iscasox.local\n\n# Tareas programadas\n0 2 * * * /home/admin/scripts/backup.sh\n</code></pre> <p>La variable <code>MAILTO</code> es especialmente \u00fatil, ya que cron enviar\u00e1 por correo la salida de los comandos a la direcci\u00f3n especificada (requiere un sistema de correo configurado).</p>"},{"location":"08_07_cron-rsync/#ejemplo-practico-limpieza-automatica-de-logs","title":"Ejemplo pr\u00e1ctico: limpieza autom\u00e1tica de logs","text":"<p>Vamos a crear una tarea que limpie archivos de log antiguos cada semana. Primero creamos el script:</p> <pre><code>#!/bin/bash\n# Script: limpiar_logs.sh\n# Descripci\u00f3n: Elimina logs de m\u00e1s de 30 d\u00edas\n\nLOG_DIR=\"/var/log/aplicaciones\"\nDIAS_RETENCION=30\n\n# Encontrar y eliminar logs antiguos\nfind \"$LOG_DIR\" -name \"*.log\" -type f -mtime +$DIAS_RETENCION -delete\n\n# Registrar la limpieza\necho \"$(date): Limpieza de logs completada\" &gt;&gt; /var/log/limpieza_logs.log\n</code></pre> <p>Le damos permisos de ejecuci\u00f3n y lo programamos:</p> <pre><code>chmod +x /home/admin/scripts/limpiar_logs.sh\n\n# Editamos el crontab\ncrontab -e\n\n# A\u00f1adimos la tarea para ejecutar cada domingo a las 2 AM\n0 2 * * 0 /home/admin/scripts/limpiar_logs.sh\n</code></pre>"},{"location":"08_07_cron-rsync/#cron-del-sistema","title":"Cron del sistema","text":"<p>Adem\u00e1s de los crontabs de usuario, Linux utiliza directorios especiales para tareas del sistema ubicados en <code>/etc</code>:</p> <pre><code>/etc/cron.d/          # Archivos de cron con sintaxis completa\n/etc/cron.daily/      # Scripts ejecutados diariamente\n/etc/cron.hourly/     # Scripts ejecutados cada hora\n/etc/cron.weekly/     # Scripts ejecutados semanalmente\n/etc/cron.monthly/    # Scripts ejecutados mensualmente\n</code></pre> <p>Para a\u00f1adir una tarea al sistema, simplemente colocamos un script ejecutable en el directorio correspondiente. Por ejemplo, para una tarea diaria:</p> <pre><code>sudo nano /etc/cron.daily/actualizar_sistema\n\n#!/bin/bash\napt update\napt upgrade -y\necho \"$(date): Sistema actualizado\" &gt;&gt; /var/log/actualizaciones.log\n\nsudo chmod +x /etc/cron.daily/actualizar_sistema\n</code></pre>"},{"location":"08_07_cron-rsync/#depuracion-de-problemas-con-cron","title":"Depuraci\u00f3n de problemas con cron","text":"<p>Cuando una tarea cron no funciona como esperamos, hay varios lugares donde buscar informaci\u00f3n:</p> <pre><code># Ver el log de cron\nsudo tail -f /var/log/syslog | grep CRON\n\n# Verificar que el servicio cron est\u00e1 activo\nsudo systemctl status cron\n\n# Probar el comando manualmente con el PATH de cron\nenv -i /bin/bash --noprofile --norc\n/ruta/al/comando\n</code></pre> <p>Un truco \u00fatil es redirigir toda la salida de la tarea a un archivo para depuraci\u00f3n:</p> <pre><code>0 3 * * * /ruta/script.sh &gt;&gt; /var/log/mi_tarea.log 2&gt;&amp;1\n</code></pre>"},{"location":"08_07_cron-rsync/#42-copias-de-seguridad-con-rsync-y-tar","title":"4.2. Copias de seguridad con rsync y tar","text":""},{"location":"08_07_cron-rsync/#la-importancia-de-las-copias-de-seguridad","title":"La importancia de las copias de seguridad","text":"<p>Las copias de seguridad son la \u00faltima l\u00ednea de defensa contra la p\u00e9rdida de datos. No importa cu\u00e1n robusto sea nuestro sistema, siempre existe el riesgo de fallos de hardware, errores humanos, ataques maliciosos o desastres naturales. Una estrategia de backup bien implementada puede ser la diferencia entre una peque\u00f1a molestia y una cat\u00e1strofe empresarial.</p> <p>Existen diferentes tipos de copias de seguridad, cada una con sus ventajas: las completas copian todo pero ocupan mucho espacio, las incrementales solo copian los cambios desde la \u00faltima copia (de cualquier tipo), y las diferenciales copian los cambios desde la \u00faltima copia completa. En nuestro entorno utilizaremos principalmente copias completas y sincronizaci\u00f3n incremental.</p>"},{"location":"08_07_cron-rsync/#copias-de-seguridad-con-tar","title":"Copias de seguridad con tar","text":"<p>La herramienta <code>tar</code> (Tape ARchive) es el m\u00e9todo tradicional para crear archivos de respaldo en Linux. Permite empaquetar directorios completos en un \u00fanico archivo, opcionalmente comprimido:</p> <pre><code># Crear un backup completo comprimido de /home\nsudo tar -czf /backups/home-$(date +%Y%m%d).tar.gz /home\n\n# Opciones explicadas:\n# -c: crear archivo\n# -z: comprimir con gzip\n# -f: especificar nombre del archivo\n# $(date +%Y%m%d): a\u00f1ade la fecha al nombre (formato AAAAMMDD)\n</code></pre> <p>Para incluir m\u00e1s opciones \u00fatiles y hacer el backup m\u00e1s robusto:</p> <pre><code># Backup con verificaci\u00f3n y registro detallado\nsudo tar -czf /backups/home-$(date +%Y%m%d).tar.gz \\\n  --exclude=/home/*/.cache \\\n  --exclude=/home/*/Downloads \\\n  -v /home &gt; /var/log/backup-$(date +%Y%m%d).log 2&gt;&amp;1\n\n# Opciones adicionales:\n# --exclude: excluir directorios que no necesitamos respaldar\n# -v: modo verbose (detallado)\n</code></pre> <p>Para restaurar un backup creado con tar:</p> <pre><code># Listar contenido del archivo sin extraer\nsudo tar -tzf /backups/home-20250116.tar.gz\n\n# Extraer en ubicaci\u00f3n espec\u00edfica\nsudo tar -xzf /backups/home-20250116.tar.gz -C /restore/\n\n# Restaurar un archivo o directorio espec\u00edfico\nsudo tar -xzf /backups/home-20250116.tar.gz -C /restore/ home/usuario/documentos\n</code></pre>"},{"location":"08_07_cron-rsync/#script-automatizado-de-backup-con-tar","title":"Script automatizado de backup con tar","text":"<p>Creamos un script m\u00e1s completo que gestione rotaci\u00f3n de backups:</p> <pre><code>#!/bin/bash\n# Script: backup_tar.sh\n# Descripci\u00f3n: Backup diario con rotaci\u00f3n de 7 d\u00edas\n\nORIGEN=\"/home /etc /var/www\"\nDESTINO=\"/backups\"\nFECHA=$(date +%Y%m%d_%H%M%S)\nNOMBRE=\"backup-$FECHA.tar.gz\"\nDIAS_RETENCION=7\n\n# Crear directorio de backups si no existe\nmkdir -p \"$DESTINO\"\n\n# Realizar backup\necho \"Iniciando backup: $(date)\"\ntar -czf \"$DESTINO/$NOMBRE\" $ORIGEN \\\n  --exclude='*.cache' \\\n  --exclude='*/tmp/*' \\\n  2&gt;&gt; \"$DESTINO/backup.log\"\n\n# Verificar si el backup se complet\u00f3 correctamente\nif [ $? -eq 0 ]; then\n    echo \"Backup completado: $NOMBRE\" | tee -a \"$DESTINO/backup.log\"\n\n    # Eliminar backups antiguos\n    find \"$DESTINO\" -name \"backup-*.tar.gz\" -type f -mtime +$DIAS_RETENCION -delete\n    echo \"Backups antiguos eliminados\" | tee -a \"$DESTINO/backup.log\"\nelse\n    echo \"ERROR: Backup fall\u00f3\" | tee -a \"$DESTINO/backup.log\"\n    exit 1\nfi\n</code></pre>"},{"location":"08_07_cron-rsync/#sincronizacion-incremental-con-rsync","title":"Sincronizaci\u00f3n incremental con rsync","text":"<p>Mientras que <code>tar</code> crea archivos comprimidos, <code>rsync</code> es ideal para sincronizar directorios manteniendo copias espejo. Solo transfiere los archivos que han cambiado, lo que lo hace muy eficiente para backups incrementales:</p> <pre><code># Sintaxis b\u00e1sica de rsync\nrsync -av /origen/ /destino/\n\n# Opciones fundamentales:\n# -a: modo archivo (preserva permisos, fechas, enlaces)\n# -v: verbose (muestra progreso)\n</code></pre> <p>Para un backup m\u00e1s completo con rsync:</p> <pre><code># Backup con m\u00e1s opciones\nsudo rsync -avh --delete --progress \\\n  --exclude='*.cache' \\\n  --exclude='Downloads/' \\\n  /home/ /backups/home/\n\n# Opciones adicionales:\n# -h: formato human-readable\n# --delete: elimina en destino archivos que ya no existen en origen\n# --progress: muestra progreso de cada archivo\n</code></pre> <p>Una de las caracter\u00edsticas m\u00e1s potentes de rsync es la capacidad de crear backups incrementales con enlaces duros, ahorrando espacio:</p> <pre><code>#!/bin/bash\n# Script: backup_rsync_incremental.sh\n# Backup incremental con enlaces duros\n\nORIGEN=\"/home\"\nDESTINO=\"/backups\"\nFECHA=$(date +%Y%m%d_%H%M%S)\nULTIMO_BACKUP=\"$DESTINO/actual\"\nNUEVO_BACKUP=\"$DESTINO/backup-$FECHA\"\n\n# Realizar backup incremental\nrsync -av --delete \\\n  --link-dest=\"$ULTIMO_BACKUP\" \\\n  \"$ORIGEN/\" \"$NUEVO_BACKUP/\"\n\n# Actualizar enlace simb\u00f3lico al \u00faltimo backup\nrm -f \"$ULTIMO_BACKUP\"\nln -s \"$NUEVO_BACKUP\" \"$ULTIMO_BACKUP\"\n\necho \"Backup incremental completado: $NUEVO_BACKUP\"\n</code></pre> <p>Este m\u00e9todo crea copias completas aparentes, pero los archivos sin cambios son enlaces duros al backup anterior, ahorrando espacio significativo.</p>"},{"location":"08_07_cron-rsync/#backup-remoto-con-rsync","title":"Backup remoto con rsync","text":"<p>Una buena pr\u00e1ctica es mantener copias fuera del servidor. Rsync puede sincronizar con servidores remotos mediante SSH:</p> <pre><code># Backup a servidor remoto\nrsync -avz -e ssh /home/ usuario@servidor-backup:/backups/servidor1/\n\n# Opciones:\n# -z: compresi\u00f3n durante la transferencia\n# -e ssh: usar SSH como transporte\n\n# Backup desde servidor remoto (pull)\nrsync -avz -e ssh usuario@servidor:/importante/ /backups/remoto/\n</code></pre> <p>Para automatizar esto sin introducir contrase\u00f1as, configuramos autenticaci\u00f3n por clave SSH:</p> <pre><code># Generar par de claves (si no existe)\nssh-keygen -t rsa -b 4096\n\n# Copiar clave p\u00fablica al servidor remoto\nssh-copy-id usuario@servidor-backup\n\n# Ahora rsync funcionar\u00e1 sin contrase\u00f1a\n</code></pre>"},{"location":"08_07_cron-rsync/#estrategia-de-backup-3-2-1","title":"Estrategia de backup 3-2-1","text":"<p>Una pr\u00e1ctica recomendada en backups es la regla 3-2-1: mantener al menos 3 copias de los datos, en 2 tipos de medios diferentes, con 1 copia fuera del sitio. Un script que implementa parte de esta estrategia:</p> <pre><code>#!/bin/bash\n# Script: backup_completo.sh\n# Implementa backup local y remoto\n\nORIGEN=\"/home /etc /var/www\"\nLOCAL=\"/backups/local\"\nREMOTO=\"admin@backup-server:/backups/servidor1\"\nFECHA=$(date +%Y%m%d)\n\n# Backup local con tar\necho \"=== Backup local ===\"\ntar -czf \"$LOCAL/full-$FECHA.tar.gz\" $ORIGEN\n\n# Sincronizaci\u00f3n incremental local\necho \"=== Sincronizaci\u00f3n incremental ===\"\nrsync -av --delete $ORIGEN \"$LOCAL/sync/\"\n\n# Env\u00edo a servidor remoto\necho \"=== Backup remoto ===\"\nrsync -avz -e ssh \"$LOCAL/\" \"$REMOTO/\"\n\necho \"Proceso de backup completado: $(date)\"\n</code></pre>"},{"location":"08_07_cron-rsync/#43-systemd-timers-la-alternativa-moderna-a-cron","title":"4.3. Systemd timers: la alternativa moderna a cron","text":""},{"location":"08_07_cron-rsync/#introduccion-a-systemd-timers","title":"Introducci\u00f3n a systemd timers","text":"<p>Aunque cron ha sido la herramienta est\u00e1ndar durante d\u00e9cadas, systemd introduce su propio sistema de temporizaci\u00f3n que ofrece ventajas significativas: mejor integraci\u00f3n con el sistema, capacidad de gesti\u00f3n de dependencias, logs centralizados, y mayor flexibilidad en la programaci\u00f3n. Los systemd timers son la evoluci\u00f3n natural de cron para distribuciones modernas.</p> <p>Un timer en systemd funciona en combinaci\u00f3n con una unidad de servicio. El timer define cu\u00e1ndo ejecutar la tarea, mientras que el servicio define qu\u00e9 ejecutar. Esta separaci\u00f3n de responsabilidades proporciona mayor claridad y flexibilidad.</p>"},{"location":"08_07_cron-rsync/#crear-un-servicio-basico","title":"Crear un servicio b\u00e1sico","text":"<p>Primero creamos la unidad de servicio que realizar\u00e1 la tarea. Supongamos que queremos automatizar un backup:</p> <pre><code>sudo nano /etc/systemd/system/backup-diario.service\n</code></pre> <pre><code>[Unit]\nDescription=Backup diario del sistema\nAfter=network.target\n\n[Service]\nType=oneshot\nUser=root\nExecStart=/usr/local/bin/backup.sh\nStandardOutput=journal\nStandardError=journal\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Los par\u00e1metros m\u00e1s importantes:</p> <ul> <li><code>Type=oneshot</code> indica que el servicio se ejecuta una vez y termina</li> <li><code>User=root</code> especifica con qu\u00e9 usuario se ejecuta</li> <li><code>StandardOutput=journal</code> redirige la salida al journal de systemd para f\u00e1cil consulta</li> </ul>"},{"location":"08_07_cron-rsync/#crear-el-timer-correspondiente","title":"Crear el timer correspondiente","text":"<p>Ahora creamos el timer que programar\u00e1 la ejecuci\u00f3n del servicio:</p> <pre><code>sudo nano /etc/systemd/system/backup-diario.timer\n</code></pre> <pre><code>[Unit]\nDescription=Timer para backup diario\nRequires=backup-diario.service\n\n[Timer]\nOnCalendar=daily\nOnCalendar=*-*-* 02:00:00\nPersistent=true\nRandomizedDelaySec=30min\n\n[Install]\nWantedBy=timers.target\n</code></pre> <p>Las opciones del timer explicadas:</p> <ul> <li><code>OnCalendar=daily</code> ejecuta diariamente (equivalente a <code>OnCalendar=*-*-* 00:00:00</code>)</li> <li><code>Persistent=true</code> ejecuta la tarea si se perdi\u00f3 por tener el sistema apagado</li> <li><code>RandomizedDelaySec=30min</code> a\u00f1ade un retraso aleatorio (\u00fatil para distribuir carga)</li> </ul>"},{"location":"08_07_cron-rsync/#activar-y-gestionar-el-timer","title":"Activar y gestionar el timer","text":"<p>Para que el timer funcione, debemos activarlo e iniciarlo:</p> <pre><code># Recargar systemd para que reconozca las nuevas unidades\nsudo systemctl daemon-reload\n\n# Habilitar el timer (se activar\u00e1 al arranque)\nsudo systemctl enable backup-diario.timer\n\n# Iniciar el timer inmediatamente\nsudo systemctl start backup-diario.timer\n\n# Verificar el estado\nsudo systemctl status backup-diario.timer\n\n# Ver todos los timers activos\nsystemctl list-timers --all\n</code></pre>"},{"location":"08_07_cron-rsync/#sintaxis-de-oncalendar","title":"Sintaxis de OnCalendar","text":"<p>La directiva <code>OnCalendar</code> admite una sintaxis flexible para programar ejecuciones:</p> <pre><code># Cada minuto\nOnCalendar=*-*-* *:*:00\n\n# Cada hora en punto\nOnCalendar=hourly\nOnCalendar=*-*-* *:00:00\n\n# Diario a las 3:30 AM\nOnCalendar=*-*-* 03:30:00\n\n# Semanalmente los lunes a las 8 AM\nOnCalendar=Mon *-*-* 08:00:00\n\n# Mensualmente el d\u00eda 1 a las 00:00\nOnCalendar=*-*-01 00:00:00\n\n# Cada 15 minutos\nOnCalendar=*:0/15\n</code></pre> <p>Podemos probar expresiones de calendario con:</p> <pre><code>systemd-analyze calendar \"Mon *-*-* 08:00:00\"\n</code></pre>"},{"location":"08_07_cron-rsync/#timer-con-multiples-programaciones","title":"Timer con m\u00faltiples programaciones","text":"<p>Un timer puede tener m\u00faltiples directivas <code>OnCalendar</code> para ejecutar en diferentes momentos:</p> <pre><code>[Timer]\nOnCalendar=Mon,Wed,Fri 08:00:00\nOnCalendar=Tue,Thu 20:00:00\nPersistent=true\n</code></pre>"},{"location":"08_07_cron-rsync/#ejemplo-completo-limpieza-automatica-de-logs","title":"Ejemplo completo: limpieza autom\u00e1tica de logs","text":"<p>Creamos un servicio y timer para limpiar logs antiguos:</p> <pre><code># Servicio\nsudo nano /etc/systemd/system/limpieza-logs.service\n</code></pre> <pre><code>[Unit]\nDescription=Limpieza de logs antiguos\nDocumentation=man:find(1)\n\n[Service]\nType=oneshot\nExecStart=/bin/bash -c 'find /var/log -name \"*.log\" -type f -mtime +30 -delete'\nStandardOutput=journal\n</code></pre> <pre><code># Timer\nsudo nano /etc/systemd/system/limpieza-logs.timer\n</code></pre> <pre><code>[Unit]\nDescription=Ejecutar limpieza de logs semanalmente\n\n[Timer]\nOnCalendar=weekly\nOnCalendar=Sun 03:00:00\nPersistent=true\n\n[Install]\nWantedBy=timers.target\n</code></pre> <p>Activamos el timer:</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable --now limpieza-logs.timer\n</code></pre>"},{"location":"08_07_cron-rsync/#consultar-logs-de-ejecucion","title":"Consultar logs de ejecuci\u00f3n","text":"<p>Una gran ventaja de systemd timers es la integraci\u00f3n con journalctl para ver logs de ejecuci\u00f3n:</p> <pre><code># Ver logs del servicio de backup\nsudo journalctl -u backup-diario.service\n\n# Ver solo las \u00faltimas 20 l\u00edneas\nsudo journalctl -u backup-diario.service -n 20\n\n# Seguir los logs en tiempo real\nsudo journalctl -u backup-diario.service -f\n\n# Ver logs desde hoy\nsudo journalctl -u backup-diario.service --since today\n\n# Ver logs entre fechas\nsudo journalctl -u backup-diario.service --since \"2025-01-01\" --until \"2025-01-15\"\n</code></pre>"},{"location":"08_07_cron-rsync/#ejecutar-manualmente-un-servicio-de-timer","title":"Ejecutar manualmente un servicio de timer","text":"<p>Para probar un servicio sin esperar al timer, podemos ejecutarlo manualmente:</p> <pre><code># Ejecutar el servicio ahora\nsudo systemctl start backup-diario.service\n\n# Ver si se ejecut\u00f3 correctamente\nsudo systemctl status backup-diario.service\n</code></pre>"},{"location":"08_07_cron-rsync/#ejemplo-avanzado-backup-con-dependencias","title":"Ejemplo avanzado: backup con dependencias","text":"<p>Podemos crear servicios que dependan de otros o se ejecuten en cadena:</p> <pre><code># Servicio de pre-backup (preparaci\u00f3n)\nsudo nano /etc/systemd/system/pre-backup.service\n</code></pre> <pre><code>[Unit]\nDescription=Preparaci\u00f3n antes del backup\nBefore=backup-completo.service\n\n[Service]\nType=oneshot\nExecStart=/usr/local/bin/preparar-backup.sh\n</code></pre> <pre><code># Servicio de backup principal\nsudo nano /etc/systemd/system/backup-completo.service\n</code></pre> <pre><code>[Unit]\nDescription=Backup completo del sistema\nAfter=pre-backup.service\nWants=pre-backup.service\n\n[Service]\nType=oneshot\nExecStart=/usr/local/bin/backup-completo.sh\nExecStartPost=/usr/local/bin/notificar-backup.sh\n</code></pre> <p>La directiva <code>Wants=</code> asegura que se intente ejecutar pre-backup.service, y <code>After=</code> garantiza el orden de ejecuci\u00f3n.</p>"},{"location":"08_07_cron-rsync/#ventajas-de-systemd-timers-sobre-cron","title":"Ventajas de systemd timers sobre cron","text":"<p>Para concluir, resumimos por qu\u00e9 podr\u00edamos preferir systemd timers:</p> <p>Los systemd timers ofrecen gesti\u00f3n centralizada mediante systemctl, logs unificados accesibles con journalctl que incluyen salida est\u00e1ndar y errores, y capacidad de definir dependencias entre servicios. Adem\u00e1s, la opci\u00f3n Persistent ejecuta tareas perdidas tras un apagado, algo que cron no hace, y el control granular de recursos permite limitar CPU, memoria o I/O de las tareas programadas mediante directivas como CPUQuota o MemoryLimit.</p> <p>Sin embargo, cron sigue siendo v\u00e1lido para tareas sencillas y tiene la ventaja de ser universal en todos los sistemas Unix/Linux, mientras que systemd es espec\u00edfico de distribuciones que lo utilizan (la mayor\u00eda de las modernas, pero no todas).</p> <p>Con estas herramientas de automatizaci\u00f3n y respaldo, nuestro sistema est\u00e1 preparado para funcionar de forma aut\u00f3noma y resistente a fallos. La combinaci\u00f3n de cron o systemd timers para tareas programadas, junto con estrategias de backup usando tar y rsync, nos proporciona una base s\u00f3lida para la administraci\u00f3n profesional de servidores Linux. En los siguientes bloques aplicaremos estos conocimientos a escenarios m\u00e1s espec\u00edficos y avanzados.</p>"},{"location":"08_08_mantenimiento_logs/","title":"Mantenimiento y control - Monitorizaci\u00f3n y logs","text":"<p>Bloque 5: Mantenimiento y control - Monitorizaci\u00f3n y logs</p> <p>Finalizaremos con las herramientas de diagn\u00f3stico y resoluci\u00f3n de problemas:</p> <p>Gesti\u00f3n de logs con journald: Aprenderemos a usar journalctl para consultar y analizar los registros del sistema, diagnosticando problemas y monitorizando la actividad.</p> <p>Monitorizaci\u00f3n del sistema: Utilizaremos herramientas como htop, iotop, netstat y comandos de an\u00e1lisis de rendimiento para vigilar el estado del servidor.</p> <p>An\u00e1lisis de espacio en disco: Herramientas como df, du y ncdu para controlar el uso del almacenamiento.</p> <p>Resoluci\u00f3n de incidencias: Metodolog\u00eda para diagnosticar y resolver problemas comunes en servidores Linux.</p> <p>title: Mantenimiento y control - Monitorizaci\u00f3n y logs description: Herramientas de diagn\u00f3stico, an\u00e1lisis de logs y resoluci\u00f3n de problemas en Ubuntu Server</p>"},{"location":"08_08_mantenimiento_logs/#introduccion","title":"Introducci\u00f3n","text":"<p>El mantenimiento adecuado de un servidor Linux requiere habilidades de monitorizaci\u00f3n, an\u00e1lisis de logs y diagn\u00f3stico de problemas. En esta unidad aprenderemos a usar las herramientas m\u00e1s importantes para:</p> <ul> <li>Consultar y analizar logs del sistema con <code>journalctl</code></li> <li>Monitorizar recursos en tiempo real (CPU, memoria, red, disco)</li> <li>Analizar el uso del espacio en disco</li> <li>Diagnosticar y resolver problemas comunes en servidores</li> </ul> <p>Un administrador competente debe ser capaz de:</p> <ol> <li>Detectar problemas antes de que se vuelvan cr\u00edticos</li> <li>Investigar la causa ra\u00edz de fallos o rendimiento degradado</li> <li>Interpretar logs y mensajes de error del sistema</li> <li>Tomar medidas correctivas basadas en datos objetivos</li> </ol> <p>Importancia de la monitorizaci\u00f3n</p> <p>La monitorizaci\u00f3n proactiva puede prevenir:</p> <ul> <li>Ca\u00eddas del servidor por falta de recursos</li> <li>P\u00e9rdida de datos por discos llenos</li> <li>Violaciones de seguridad no detectadas</li> <li>Degradaci\u00f3n del rendimiento que afecta a usuarios</li> </ul> <p>Un servidor sin monitorizaci\u00f3n es un servidor en riesgo.</p>"},{"location":"08_08_mantenimiento_logs/#gestion-de-logs-con-journald","title":"Gesti\u00f3n de logs con journald","text":""},{"location":"08_08_mantenimiento_logs/#que-es-journald","title":"\u00bfQu\u00e9 es journald?","text":"<p>systemd-journald es el sistema de gesti\u00f3n de logs de <code>systemd</code>. Reemplaza al tradicional <code>syslog</code> y ofrece ventajas importantes:</p> <ul> <li>Almacenamiento binario estructurado (m\u00e1s eficiente que texto plano)</li> <li>Indexado para b\u00fasquedas r\u00e1pidas</li> <li>Integraci\u00f3n nativa con <code>systemd</code></li> <li>Capacidad de filtrado avanzado</li> <li>Rotaci\u00f3n autom\u00e1tica de logs</li> </ul> <p>Los logs se almacenan en <code>/var/log/journal/</code> (persistentes) o <code>/run/log/journal/</code> (vol\u00e1tiles, se pierden al reiniciar).</p>"},{"location":"08_08_mantenimiento_logs/#comando-journalctl-fundamentos","title":"Comando journalctl - Fundamentos","text":"<p><code>journalctl</code> es la herramienta para consultar y analizar los logs del sistema.</p>"},{"location":"08_08_mantenimiento_logs/#ver-todos-los-logs","title":"Ver todos los logs","text":"<pre><code># Ver todos los logs (puede ser muy largo)\nsudo journalctl\n\n# Navegar:\n# - Espacio: avanzar p\u00e1gina\n# - b: retroceder p\u00e1gina\n# - q: salir\n# - /: buscar texto\n# - n: siguiente coincidencia\n# - N: coincidencia anterior\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#ver-logs-en-tiempo-real","title":"Ver logs en tiempo real","text":"<pre><code># Seguir los logs en tiempo real (como tail -f)\nsudo journalctl -f\n\n# Mostrar las \u00faltimas 20 l\u00edneas y seguir\nsudo journalctl -n 20 -f\n</code></pre> <p>Equivalente a tail -f</p> <p><code>journalctl -f</code> es el equivalente de <code>tail -f /var/log/syslog</code> en sistemas tradicionales.</p>"},{"location":"08_08_mantenimiento_logs/#ver-logs-desde-el-ultimo-arranque","title":"Ver logs desde el \u00faltimo arranque","text":"<pre><code># Solo logs desde el \u00faltimo arranque\nsudo journalctl -b\n\n# Logs del arranque anterior\nsudo journalctl -b -1\n\n# Logs de hace 2 arranques\nsudo journalctl -b -2\n\n# Listar todos los arranques registrados\nsudo journalctl --list-boots\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#filtrar-por-tiempo","title":"Filtrar por tiempo","text":"<pre><code># Logs desde hace 1 hora\nsudo journalctl --since \"1 hour ago\"\n\n# Logs desde hace 2 d\u00edas\nsudo journalctl --since \"2 days ago\"\n\n# Logs de hoy\nsudo journalctl --since today\n\n# Logs de ayer\nsudo journalctl --since yesterday --until today\n\n# Logs entre dos fechas espec\u00edficas\nsudo journalctl --since \"2026-02-01 00:00:00\" --until \"2026-02-03 23:59:59\"\n\n# Combinar con tiempo relativo\nsudo journalctl --since \"2026-02-01\" --until \"3 days ago\"\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#filtrar-por-servicio","title":"Filtrar por servicio","text":"<pre><code># Ver logs de un servicio espec\u00edfico\nsudo journalctl -u smbd\n\n# Varios servicios a la vez\nsudo journalctl -u smbd -u nmbd\n\n# Logs de SSH\nsudo journalctl -u ssh\n\n# Logs de red (NetworkManager o systemd-networkd)\nsudo journalctl -u NetworkManager\nsudo journalctl -u systemd-networkd\n</code></pre> <p>Ejemplo pr\u00e1ctico: Diagnosticar problema de Samba</p> <pre><code># Ver logs de Samba de la \u00faltima hora\nsudo journalctl -u smbd --since \"1 hour ago\"\n\n# Seguir logs de Samba en tiempo real mientras pruebas conexi\u00f3n\nsudo journalctl -u smbd -u nmbd -f\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#filtrar-por-prioridad","title":"Filtrar por prioridad","text":"<p>Los logs tienen niveles de prioridad (de menor a mayor gravedad):</p> <ul> <li>0: emerg - Sistema inutilizable</li> <li>1: alert - Se requiere acci\u00f3n inmediata</li> <li>2: crit - Condiciones cr\u00edticas</li> <li>3: err - Errores</li> <li>4: warning - Advertencias</li> <li>5: notice - Eventos normales pero significativos</li> <li>6: info - Informaci\u00f3n</li> <li>7: debug - Mensajes de depuraci\u00f3n</li> </ul> <pre><code># Solo errores y niveles superiores (err, crit, alert, emerg)\nsudo journalctl -p err\n\n# Solo advertencias y superiores\nsudo journalctl -p warning\n\n# Errores de un servicio espec\u00edfico\nsudo journalctl -u smbd -p err\n</code></pre> <p>Diagnosticar problemas r\u00e1pidamente</p> <pre><code># Ver todos los errores desde el \u00faltimo arranque\nsudo journalctl -b -p err\n\n# Ver errores de las \u00faltimas 24 horas\nsudo journalctl --since \"24 hours ago\" -p err\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#filtrar-por-proceso-o-pid","title":"Filtrar por proceso o PID","text":"<pre><code># Logs de un ejecutable espec\u00edfico\nsudo journalctl /usr/sbin/smbd\n\n# Logs de un proceso por su PID\nsudo journalctl _PID=1234\n\n# Logs del kernel\nsudo journalctl -k\n# Equivalente a:\nsudo journalctl _TRANSPORT=kernel\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#busqueda-y-grep","title":"B\u00fasqueda y grep","text":"<pre><code># Buscar texto espec\u00edfico (distingue may\u00fasculas)\nsudo journalctl | grep \"error\"\n\n# Buscar ignorando may\u00fasculas/min\u00fasculas\nsudo journalctl | grep -i \"failed\"\n\n# Combinar filtros\nsudo journalctl -u smbd --since today | grep -i \"connection\"\n\n# Buscar m\u00faltiples patrones\nsudo journalctl | grep -E \"error|failed|denied\"\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#formato-de-salida","title":"Formato de salida","text":"<pre><code># Salida JSON (\u00fatil para scripts)\nsudo journalctl -u smbd -o json\n\n# Salida JSON con formato legible\nsudo journalctl -u smbd -o json-pretty\n\n# Solo el mensaje (sin metadatos)\nsudo journalctl -u smbd -o cat\n\n# Salida detallada (verbose)\nsudo journalctl -u smbd -o verbose\n\n# Formato corto (default)\nsudo journalctl -u smbd -o short\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#ejemplos-practicos-de-diagnostico","title":"Ejemplos pr\u00e1cticos de diagn\u00f3stico","text":""},{"location":"08_08_mantenimiento_logs/#diagnosticar-fallo-de-arranque-de-un-servicio","title":"Diagnosticar fallo de arranque de un servicio","text":"<pre><code># Ver errores del servicio\nsudo journalctl -u nombre_servicio -p err\n\n# Ver todo el contexto del \u00faltimo intento de arranque\nsudo journalctl -u nombre_servicio -b\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#investigar-problema-de-autenticacion-ssh","title":"Investigar problema de autenticaci\u00f3n SSH","text":"<pre><code># Ver intentos de login SSH\nsudo journalctl -u ssh | grep -i \"authentication\"\n\n# Ver intentos fallidos\nsudo journalctl -u ssh | grep -i \"failed\"\n\n# Ver desde cu\u00e1ndo hay problemas\nsudo journalctl -u ssh --since \"1 hour ago\" | grep -i \"failed\"\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#analizar-reinicio-inesperado-del-servidor","title":"Analizar reinicio inesperado del servidor","text":"<pre><code># Ver logs del arranque anterior (cuando ocurri\u00f3 el problema)\nsudo journalctl -b -1\n\n# Ver solo mensajes cr\u00edticos del arranque anterior\nsudo journalctl -b -1 -p crit\n\n# Ver qu\u00e9 pas\u00f3 antes del \u00faltimo shutdown\nsudo journalctl -b -1 --until \"shutdown\"\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#gestion-del-tamano-de-los-logs","title":"Gesti\u00f3n del tama\u00f1o de los logs","text":""},{"location":"08_08_mantenimiento_logs/#ver-espacio-usado-por-los-logs","title":"Ver espacio usado por los logs","text":"<pre><code># Ver cu\u00e1nto espacio ocupan los logs\nsudo journalctl --disk-usage\n</code></pre> <p>Salida t\u00edpica: </p><pre><code>Archived and active journals take up 384.0M in the file system.\n</code></pre><p></p>"},{"location":"08_08_mantenimiento_logs/#limpiar-logs-antiguos","title":"Limpiar logs antiguos","text":"<pre><code># Eliminar logs m\u00e1s antiguos de 2 d\u00edas\nsudo journalctl --vacuum-time=2d\n\n# Eliminar logs m\u00e1s antiguos de 1 semana\nsudo journalctl --vacuum-time=7d\n\n# Limitar el tama\u00f1o total a 500M\nsudo journalctl --vacuum-size=500M\n\n# Dejar solo los \u00faltimos 10 archivos de log\nsudo journalctl --vacuum-files=10\n</code></pre> <p>Cuidado con la limpieza agresiva</p> <p>No elimines logs demasiado recientes. Los logs antiguos pueden ser cruciales para investigar problemas que se manifestaron hace tiempo.</p>"},{"location":"08_08_mantenimiento_logs/#configurar-rotacion-automatica","title":"Configurar rotaci\u00f3n autom\u00e1tica","text":"<p>Editar <code>/etc/systemd/journald.conf</code>:</p> <pre><code>sudo nano /etc/systemd/journald.conf\n</code></pre> <p>Configuraci\u00f3n recomendada:</p> <pre><code>[Journal]\n# Almacenar en disco (persistente)\nStorage=persistent\n\n# L\u00edmite de tama\u00f1o total\nSystemMaxUse=500M\n\n# Tama\u00f1o m\u00e1ximo de archivos individuales\nSystemMaxFileSize=50M\n\n# Mantener logs de al menos 2 semanas\nMaxRetentionSec=2week\n</code></pre> <p>Aplicar cambios:</p> <pre><code>sudo systemctl restart systemd-journald\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#exportar-logs-para-analisis","title":"Exportar logs para an\u00e1lisis","text":"<pre><code># Exportar logs de un servicio a archivo\nsudo journalctl -u smbd &gt; samba_logs.txt\n\n# Exportar logs de las \u00faltimas 24 horas\nsudo journalctl --since \"24 hours ago\" &gt; system_24h.log\n\n# Exportar solo errores\nsudo journalctl -p err --since today &gt; errores_hoy.log\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#monitorizacion-del-sistema-en-tiempo-real","title":"Monitorizaci\u00f3n del sistema en tiempo real","text":""},{"location":"08_08_mantenimiento_logs/#htop-monitor-interactivo-de-procesos","title":"htop - Monitor interactivo de procesos","text":"<p><code>htop</code> es una versi\u00f3n mejorada de <code>top</code> con interfaz visual m\u00e1s amigable.</p>"},{"location":"08_08_mantenimiento_logs/#instalar-htop","title":"Instalar htop","text":"<pre><code>sudo apt update\nsudo apt install htop\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#usar-htop","title":"Usar htop","text":"<pre><code># Ejecutar htop\nhtop\n</code></pre> Interfaz de htop mostrando procesos del sistema <p>Interpretaci\u00f3n de la pantalla:</p> <p>Zona superior (barras de recursos):</p> <ul> <li>CPU: Una barra por cada n\u00facleo/hilo del procesador</li> <li>Verde: procesos normales</li> <li>Rojo: procesos del kernel</li> <li>Azul: procesos de baja prioridad</li> <li> <p>Cyan: procesos de virtualizaci\u00f3n</p> </li> <li> <p>Memoria (Mem):</p> </li> <li>Verde: memoria usada</li> <li>Azul: buffers</li> <li> <p>Amarillo: cach\u00e9</p> </li> <li> <p>Swap: Memoria de intercambio (disco usado como RAM)</p> </li> <li>Si est\u00e1 alto, el sistema necesita m\u00e1s RAM</li> </ul> <p>Columnas importantes:</p> <ul> <li>PID: ID del proceso</li> <li>USER: Usuario que ejecuta el proceso</li> <li>PRI: Prioridad</li> <li>NI: Nice (valor de prioridad ajustable)</li> <li>VIRT: Memoria virtual usada</li> <li>RES: Memoria RAM f\u00edsica usada</li> <li>SHR: Memoria compartida</li> <li>S: Estado (R=ejecutando, S=durmiendo, Z=zombie)</li> <li>CPU%: Porcentaje de CPU usado</li> <li>MEM%: Porcentaje de memoria usado</li> <li>TIME+: Tiempo total de CPU usado</li> <li>Command: Comando/programa</li> </ul> <p>Teclas \u00fatiles:</p> <ul> <li>F1: Ayuda</li> <li>F2: Configuraci\u00f3n</li> <li>F3: Buscar proceso (/)</li> <li>F4: Filtrar procesos</li> <li>F5: Vista de \u00e1rbol (jerarqu\u00eda de procesos)</li> <li>F6: Ordenar por columna</li> <li>F9: Matar proceso (kill)</li> <li>F10: Salir</li> <li>Espacio: Marcar proceso</li> <li>U: Mostrar procesos de un usuario espec\u00edfico</li> <li>t: Vista de \u00e1rbol</li> <li>H: Ocultar/mostrar hilos</li> <li>K: Enviar se\u00f1al a proceso</li> <li>I: Invertir orden</li> <li>s: Rastrear llamadas del sistema (strace)</li> <li>l: Ver archivos abiertos (lsof)</li> </ul> <p>Casos de uso de htop</p> <p>Encontrar proceso que consume mucha CPU:</p> <ol> <li>Presiona <code>F6</code> y selecciona <code>CPU%</code> para ordenar por uso de CPU</li> <li>Los procesos con mayor consumo estar\u00e1n arriba</li> </ol> <p>Matar un proceso que no responde:</p> <ol> <li>Busca el proceso con <code>F3</code> o navega con las flechas</li> <li>Presiona <code>F9</code> para enviar se\u00f1al de terminaci\u00f3n</li> <li>Selecciona <code>SIGTERM</code> (15) primero (terminaci\u00f3n limpia)</li> <li>Si no funciona, usa <code>SIGKILL</code> (9) (terminaci\u00f3n forzada)</li> </ol> <p>Ver qu\u00e9 servicios est\u00e1n consumiendo memoria:</p> <ol> <li>Presiona <code>F6</code> y ordena por <code>MEM%</code></li> <li>Los procesos con mayor uso de RAM estar\u00e1n arriba</li> </ol>"},{"location":"08_08_mantenimiento_logs/#comandos-de-monitorizacion-basica","title":"Comandos de monitorizaci\u00f3n b\u00e1sica","text":""},{"location":"08_08_mantenimiento_logs/#free-ver-uso-de-memoria","title":"free - Ver uso de memoria","text":"<pre><code># Ver uso de memoria en MB\nfree -m\n\n# Ver en GB\nfree -g\n\n# Ver en formato legible (KB, MB, GB)\nfree -h\n\n# Actualizar cada 2 segundos\nfree -h -s 2\n</code></pre> <p>Salida t\u00edpica: </p><pre><code>              total        used        free      shared  buff/cache   available\nMem:           7.7G        2.1G        3.2G        156M        2.4G        5.2G\nSwap:          2.0G          0B        2.0G\n</code></pre><p></p> <p>Interpretaci\u00f3n:</p> <ul> <li>total: RAM total instalada</li> <li>used: RAM usada por procesos</li> <li>free: RAM completamente libre</li> <li>shared: RAM compartida entre procesos</li> <li>buff/cache: RAM usada para buffers y cach\u00e9 (se libera autom\u00e1ticamente si se necesita)</li> <li>available: RAM disponible para nuevas aplicaciones (incluye parte del cach\u00e9)</li> <li>Swap: Espacio de intercambio en disco</li> </ul> <p>Cu\u00e1ndo preocuparse por la memoria</p> <ul> <li>Swap usado constantemente: El sistema est\u00e1 sin RAM y va lento</li> <li>Available muy bajo: Poco margen para nuevos procesos</li> <li>Used cerca del 100%: Normal si buff/cache es alto, problem\u00e1tico si no</li> </ul>"},{"location":"08_08_mantenimiento_logs/#uptime-tiempo-de-funcionamiento-y-carga","title":"uptime - Tiempo de funcionamiento y carga","text":"<pre><code>uptime\n</code></pre> <p>Salida t\u00edpica: </p><pre><code>16:45:32 up 3 days, 2:15,  2 users,  load average: 0.52, 0.58, 0.59\n</code></pre><p></p> <p>Interpretaci\u00f3n:</p> <ul> <li>16:45:32: Hora actual</li> <li>up 3 days, 2:15: El servidor lleva 3 d\u00edas y 2 horas encendido</li> <li>2 users: Usuarios conectados</li> <li>load average: 0.52, 0.58, 0.59: Carga del sistema en 1, 5 y 15 minutos</li> </ul> <p>\u00bfQu\u00e9 significa la carga (load average)?</p> <ul> <li>Representa el n\u00famero de procesos esperando CPU</li> <li>En un sistema con 4 n\u00facleos:</li> <li>Load &lt; 4: Sistema saludable</li> <li>Load \u2248 4: Sistema al l\u00edmite</li> <li>Load &gt; 4: Sistema sobrecargado (procesos esperando)</li> </ul> <p>Regla general</p> <p>Si tu load average es consistentemente mayor que el n\u00famero de n\u00facleos de CPU, el sistema est\u00e1 sobrecargado.</p> <p>Ver n\u00famero de n\u00facleos: </p><pre><code>nproc\n</code></pre><p></p>"},{"location":"08_08_mantenimiento_logs/#vmstat-estadisticas-de-memoria-virtual","title":"vmstat - Estad\u00edsticas de memoria virtual","text":"<pre><code># Mostrar estad\u00edsticas cada 2 segundos\nvmstat 2\n\n# Mostrar 5 muestras con intervalo de 2 segundos\nvmstat 2 5\n</code></pre> <p>Salida t\u00edpica: </p><pre><code>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----\n r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\n 1  0      0 3247680 245760 2458624    0    0     5    12   89  156  2  1 97  0  0\n</code></pre><p></p> <p>Columnas importantes:</p> <p>Procesos: - r: Procesos ejecut\u00e1ndose o esperando CPU - b: Procesos bloqueados (esperando I/O)</p> <p>Memoria: - swpd: Memoria swap usada - free: Memoria libre - buff: Memoria en buffers - cache: Memoria en cach\u00e9</p> <p>Swap: - si: Memoria intercambiada desde disco (swap in) - so: Memoria intercambiada a disco (swap out)</p> <p>I/O: - bi: Bloques le\u00eddos desde dispositivos (KB/s) - bo: Bloques escritos a dispositivos (KB/s)</p> <p>CPU: - us: Tiempo en modo usuario (%) - sy: Tiempo en modo kernel (%) - id: Tiempo inactivo (%) - wa: Tiempo esperando I/O (%)</p> <p>Se\u00f1ales de problemas</p> <ul> <li>si/so altos: Sistema usando swap constantemente (necesita m\u00e1s RAM)</li> <li>wa alto: Procesos esperando mucho por disco (disco lento o saturado)</li> <li>b alto: Muchos procesos bloqueados esperando I/O</li> </ul>"},{"location":"08_08_mantenimiento_logs/#iotop-monitor-de-io-de-disco","title":"iotop - Monitor de I/O de disco","text":"<p><code>iotop</code> muestra qu\u00e9 procesos est\u00e1n usando el disco (lectura/escritura).</p>"},{"location":"08_08_mantenimiento_logs/#instalar-iotop","title":"Instalar iotop","text":"<pre><code>sudo apt install iotop\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#usar-iotop","title":"Usar iotop","text":"<pre><code># Ejecutar iotop\nsudo iotop\n\n# Solo mostrar procesos con actividad de I/O\nsudo iotop -o\n\n# Modo acumulativo (total desde inicio)\nsudo iotop -a\n</code></pre> iotop mostrando uso de disco por proceso <p>Columnas importantes:</p> <ul> <li>TID: Thread ID</li> <li>PRIO: Prioridad</li> <li>USER: Usuario</li> <li>DISK READ: Velocidad de lectura (KB/s o MB/s)</li> <li>DISK WRITE: Velocidad de escritura</li> <li>SWAPIN: Porcentaje de tiempo esperando swap</li> <li>IO: Porcentaje de tiempo esperando I/O</li> <li>COMMAND: Proceso/comando</li> </ul> <p>Teclas \u00fatiles:</p> <ul> <li>o: Mostrar solo procesos con I/O activo</li> <li>p: Alternar entre procesos e hilos</li> <li>a: Modo acumulativo</li> <li>q: Salir</li> <li>r: Invertir orden</li> <li>flechas: Navegar</li> </ul> <p>Caso de uso: Disco lento</p> <p>Si el servidor va lento y sospechas del disco:</p> <ol> <li>Ejecuta <code>sudo iotop -o</code></li> <li>Observa qu\u00e9 proceso est\u00e1 escribiendo/leyendo mucho</li> <li>Decide si es normal o hay que investigar m\u00e1s</li> </ol>"},{"location":"08_08_mantenimiento_logs/#iostat-estadisticas-de-cpu-y-disco","title":"iostat - Estad\u00edsticas de CPU y disco","text":"<pre><code># Instalar (parte del paquete sysstat)\nsudo apt install sysstat\n\n# Mostrar estad\u00edsticas de CPU y disco\niostat\n\n# Actualizar cada 2 segundos\niostat 2\n\n# Mostrar solo estad\u00edsticas de disco extendidas\niostat -x\n\n# Mostrar en MB/s\niostat -m 2\n</code></pre> <p>Salida t\u00edpica (extendida): </p><pre><code>Device            r/s     w/s     rMB/s     wMB/s   %util\nsda              2.14    5.67      0.08      0.15    1.23\n</code></pre><p></p> <p>Columnas importantes:</p> <ul> <li>r/s: Lecturas por segundo</li> <li>w/s: Escrituras por segundo</li> <li>rMB/s: MB le\u00eddos por segundo</li> <li>wMB/s: MB escritos por segundo</li> <li>%util: Porcentaje de utilizaci\u00f3n del disco</li> </ul> <p>Disco saturado</p> <p>Si %util est\u00e1 consistentemente cerca del 100%, el disco es un cuello de botella.</p>"},{"location":"08_08_mantenimiento_logs/#monitorizacion-de-red","title":"Monitorizaci\u00f3n de red","text":""},{"location":"08_08_mantenimiento_logs/#ss-ver-conexiones-de-red","title":"ss - Ver conexiones de red","text":"<p><code>ss</code> es el reemplazo moderno de <code>netstat</code>.</p> <pre><code># Ver todas las conexiones TCP\nss -t\n\n# Ver solo conexiones establecidas\nss -t state established\n\n# Ver puertos en escucha\nss -tln\n\n# Ver conexiones con informaci\u00f3n de procesos\nsudo ss -tlnp\n\n# Ver todas las conexiones (TCP + UDP)\nss -tuna\n</code></pre> <p>Opciones:</p> <ul> <li>-t: TCP</li> <li>-u: UDP</li> <li>-l: Solo conexiones en escucha (listening)</li> <li>-n: Mostrar n\u00fameros de puerto (no resolver nombres)</li> <li>-p: Mostrar proceso asociado</li> <li>-a: Todas las conexiones</li> </ul> <p>Salida t\u00edpica de <code>sudo ss -tlnp</code>: </p><pre><code>State    Recv-Q   Send-Q   Local Address:Port   Peer Address:Port   Process\nLISTEN   0        50       0.0.0.0:445           0.0.0.0:*           users:((\"smbd\",pid=1568,fd=30))\nLISTEN   0        128      0.0.0.0:22            0.0.0.0:*           users:((\"sshd\",pid=745,fd=3))\n</code></pre><p></p> <p>Verificar si un servicio est\u00e1 escuchando</p> <pre><code># Ver si Samba est\u00e1 escuchando en puerto 445\nsudo ss -tlnp | grep :445\n\n# Ver si SSH est\u00e1 escuchando en puerto 22\nsudo ss -tlnp | grep :22\n\n# Ver todas las conexiones activas a Samba\nsudo ss -tnp | grep smbd\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#nethogs-monitor-de-ancho-de-banda-por-proceso","title":"nethogs - Monitor de ancho de banda por proceso","text":"<p><code>nethogs</code> muestra qu\u00e9 procesos est\u00e1n usando la red y cu\u00e1nto ancho de banda consumen.</p> <pre><code># Instalar\nsudo apt install nethogs\n\n# Ejecutar (especificar interfaz de red)\nsudo nethogs eth0\n\n# Todas las interfaces\nsudo nethogs\n</code></pre> nethogs mostrando uso de red por proceso <p>Muestra en tiempo real:</p> <ul> <li>Proceso/programa</li> <li>Velocidad de env\u00edo (sent)</li> <li>Velocidad de recepci\u00f3n (received)</li> </ul>"},{"location":"08_08_mantenimiento_logs/#iftop-monitor-de-trafico-de-red","title":"iftop - Monitor de tr\u00e1fico de red","text":"<pre><code># Instalar\nsudo apt install iftop\n\n# Ejecutar\nsudo iftop\n\n# Especificar interfaz\nsudo iftop -i eth0\n</code></pre> <p>Muestra conexiones de red en tiempo real con gr\u00e1ficos de barras del ancho de banda.</p>"},{"location":"08_08_mantenimiento_logs/#nload-visualizar-trafico-de-red","title":"nload - Visualizar tr\u00e1fico de red","text":"<pre><code># Instalar\nsudo apt install nload\n\n# Ejecutar\nnload\n\n# Especificar interfaz\nnload eth0\n</code></pre> <p>Muestra gr\u00e1ficos ASCII del tr\u00e1fico entrante y saliente en tiempo real.</p>"},{"location":"08_08_mantenimiento_logs/#analisis-de-espacio-en-disco","title":"An\u00e1lisis de espacio en disco","text":""},{"location":"08_08_mantenimiento_logs/#df-ver-uso-de-sistemas-de-archivos","title":"df - Ver uso de sistemas de archivos","text":"<pre><code># Ver uso de disco en formato legible\ndf -h\n\n# Ver uso en MB\ndf -m\n\n# Ver solo sistemas de archivos locales (excluir montajes de red)\ndf -hl\n\n# Ver informaci\u00f3n de inodos\ndf -i\n</code></pre> <p>Salida t\u00edpica de <code>df -h</code>: </p><pre><code>Filesystem      Size  Used Avail Use% Mounted on\n/dev/sda1        20G  8.5G   11G  45% /\n/dev/sdb1        50G   25G   23G  52% /srv\ntmpfs           3.9G  1.2M  3.9G   1% /run\n</code></pre><p></p> <p>Columnas:</p> <ul> <li>Filesystem: Dispositivo o sistema de archivos</li> <li>Size: Tama\u00f1o total</li> <li>Used: Espacio usado</li> <li>Avail: Espacio disponible</li> <li>Use%: Porcentaje usado</li> <li>Mounted on: Punto de montaje</li> </ul> <p>Disco casi lleno</p> <ul> <li>Use% &gt; 80%: Empezar a preocuparse</li> <li>Use% &gt; 90%: Problema inminente</li> <li>Use% = 100%: Sistema puede volverse inestable</li> </ul> <p>Algunos servicios (como bases de datos) fallan si no hay espacio en disco.</p>"},{"location":"08_08_mantenimiento_logs/#du-analizar-uso-de-espacio-por-directorio","title":"du - Analizar uso de espacio por directorio","text":"<pre><code># Ver tama\u00f1o de un directorio\ndu -sh /srv/compartido\n\n# Ver tama\u00f1o de todos los subdirectorios\ndu -h /srv/compartido\n\n# Limitar profundidad a 1 nivel\ndu -h --max-depth=1 /srv\n\n# Ordenar por tama\u00f1o (mayor primero)\ndu -h /srv | sort -rh | head -n 10\n\n# Ver tama\u00f1o de directorios en el nivel actual\ndu -sh *\n\n# Excluir ciertos tipos de archivo\ndu -sh --exclude='*.log' /var\n</code></pre> <p>Encontrar qu\u00e9 est\u00e1 llenando el disco</p> <pre><code># Ver qu\u00e9 carpetas en /var ocupan m\u00e1s espacio\nsudo du -h --max-depth=1 /var | sort -rh\n\n# Ver los 10 archivos m\u00e1s grandes en /var/log\nsudo find /var/log -type f -exec du -h {} + | sort -rh | head -n 10\n\n# Buscar archivos mayores de 100MB en todo el sistema\nsudo find / -type f -size +100M -exec ls -lh {} \\; 2&gt;/dev/null\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#ncdu-navegador-interactivo-de-uso-de-disco","title":"ncdu - Navegador interactivo de uso de disco","text":"<p><code>ncdu</code> (NCurses Disk Usage) es una herramienta interactiva muy \u00fatil para explorar el uso de disco.</p>"},{"location":"08_08_mantenimiento_logs/#instalar-ncdu","title":"Instalar ncdu","text":"<pre><code>sudo apt install ncdu\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#usar-ncdu","title":"Usar ncdu","text":"<pre><code># Analizar directorio actual\nncdu\n\n# Analizar un directorio espec\u00edfico\nncdu /srv\n\n# Analizar sistema completo (puede tardar)\nsudo ncdu /\n</code></pre> ncdu mostrando uso de disco de forma interactiva <p>Navegaci\u00f3n:</p> <ul> <li>Flechas arriba/abajo: Navegar por directorios y archivos</li> <li>Enter: Entrar en un directorio</li> <li>Flecha izquierda: Subir un nivel</li> <li>d: Eliminar archivo/directorio seleccionado (con confirmaci\u00f3n)</li> <li>n: Ordenar por nombre</li> <li>s: Ordenar por tama\u00f1o</li> <li>g: Mostrar/ocultar gr\u00e1fico de barras</li> <li>q: Salir</li> </ul> <p>Uso pr\u00e1ctico de ncdu</p> <p><code>ncdu</code> es perfecto para investigar qu\u00e9 est\u00e1 ocupando espacio:</p> <ol> <li>Ejecuta <code>sudo ncdu /</code></li> <li>Espera a que termine el an\u00e1lisis</li> <li>Navega a las carpetas m\u00e1s grandes</li> <li>Identifica archivos o logs innecesarios</li> <li>Elimina lo que no necesites (con cuidado)</li> </ol>"},{"location":"08_08_mantenimiento_logs/#limpiar-espacio-en-disco","title":"Limpiar espacio en disco","text":""},{"location":"08_08_mantenimiento_logs/#limpiar-paquetes-no-necesarios","title":"Limpiar paquetes no necesarios","text":"<pre><code># Eliminar paquetes que ya no se necesitan\nsudo apt autoremove\n\n# Limpiar cach\u00e9 de paquetes descargados\nsudo apt clean\n\n# Limpiar solo paquetes antiguos\nsudo apt autoclean\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#limpiar-logs-del-sistema","title":"Limpiar logs del sistema","text":"<pre><code># Ver tama\u00f1o de logs\nsudo journalctl --disk-usage\n\n# Limpiar logs m\u00e1s antiguos de 3 d\u00edas\nsudo journalctl --vacuum-time=3d\n\n# Limitar tama\u00f1o total a 500M\nsudo journalctl --vacuum-size=500M\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#buscar-y-eliminar-archivos-grandes-innecesarios","title":"Buscar y eliminar archivos grandes innecesarios","text":"<pre><code># Buscar archivos mayores de 500MB\nsudo find / -type f -size +500M -exec ls -lh {} \\; 2&gt;/dev/null\n\n# Buscar logs antiguos (mayores de 30 d\u00edas)\nsudo find /var/log -type f -name \"*.log\" -mtime +30\n\n# Eliminar logs comprimidos antiguos\nsudo find /var/log -type f -name \"*.gz\" -mtime +30 -delete\n\n# Buscar archivos core dump (pueden ser grandes)\nsudo find / -type f -name \"core\" -size +100M 2&gt;/dev/null\n</code></pre> <p>Precauci\u00f3n al eliminar archivos</p> <p>Antes de eliminar archivos grandes:</p> <ol> <li>Verifica qu\u00e9 son y para qu\u00e9 sirven</li> <li>Aseg\u00farate de que no son cr\u00edticos para el sistema</li> <li>Haz backup si hay dudas</li> <li>Prueba el sistema despu\u00e9s de eliminar</li> </ol>"},{"location":"08_08_mantenimiento_logs/#resolucion-de-incidencias-metodologia","title":"Resoluci\u00f3n de incidencias - Metodolog\u00eda","text":""},{"location":"08_08_mantenimiento_logs/#proceso-sistematico-de-diagnostico","title":"Proceso sistem\u00e1tico de diagn\u00f3stico","text":"<p>Cuando surge un problema en un servidor, sigue esta metodolog\u00eda:</p>"},{"location":"08_08_mantenimiento_logs/#1-identificar-el-sintoma","title":"1. Identificar el s\u00edntoma","text":"<ul> <li>\u00bfQu\u00e9 est\u00e1 fallando exactamente?</li> <li>\u00bfCu\u00e1ndo empez\u00f3 el problema?</li> <li>\u00bfHa cambiado algo recientemente?</li> <li>\u00bfAfecta a todos los usuarios o solo a algunos?</li> </ul>"},{"location":"08_08_mantenimiento_logs/#2-recopilar-informacion","title":"2. Recopilar informaci\u00f3n","text":"<pre><code># Estado general del sistema\nuptime\nfree -h\ndf -h\n\n# Revisar logs recientes\nsudo journalctl -p err --since \"1 hour ago\"\nsudo journalctl -b -p warning\n\n# Ver procesos problem\u00e1ticos\nhtop\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#3-aislar-la-causa","title":"3. Aislar la causa","text":"<ul> <li>\u00bfEs un problema de recursos (CPU, RAM, disco)?</li> <li>\u00bfEs un problema de red?</li> <li>\u00bfEs un problema de configuraci\u00f3n?</li> <li>\u00bfEs un problema de permisos?</li> </ul>"},{"location":"08_08_mantenimiento_logs/#4-formular-hipotesis","title":"4. Formular hip\u00f3tesis","text":"<p>Bas\u00e1ndote en la informaci\u00f3n, plantea posibles causas:</p> <ul> <li>\"El disco est\u00e1 lleno, por eso el servicio no puede escribir logs\"</li> <li>\"El servicio no arranca porque hay un error de sintaxis en la configuraci\u00f3n\"</li> <li>\"La conexi\u00f3n falla porque el firewall est\u00e1 bloqueando el puerto\"</li> </ul>"},{"location":"08_08_mantenimiento_logs/#5-probar-la-hipotesis","title":"5. Probar la hip\u00f3tesis","text":"<p>Realiza pruebas para confirmar o descartar:</p> <pre><code># \u00bfHay espacio en disco?\ndf -h\n\n# \u00bfEl servicio est\u00e1 corriendo?\nsudo systemctl status nombre_servicio\n\n# \u00bfHay errores en la configuraci\u00f3n?\ntestparm  # Para Samba\nnginx -t   # Para Nginx\napache2ctl -t  # Para Apache\n\n# \u00bfEl puerto est\u00e1 escuchando?\nsudo ss -tlnp | grep :puerto\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#6-aplicar-solucion","title":"6. Aplicar soluci\u00f3n","text":"<p>Una vez identificada la causa, aplica la correcci\u00f3n:</p> <ul> <li>Liberar espacio en disco</li> <li>Corregir configuraci\u00f3n</li> <li>Reiniciar servicio</li> <li>Ajustar permisos</li> </ul>"},{"location":"08_08_mantenimiento_logs/#7-verificar-la-solucion","title":"7. Verificar la soluci\u00f3n","text":"<pre><code># Verificar que el servicio arranc\u00f3\nsudo systemctl status nombre_servicio\n\n# Ver logs para confirmar que funciona\nsudo journalctl -u nombre_servicio -f\n\n# Probar desde un cliente\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#8-documentar","title":"8. Documentar","text":"<p>Registra:</p> <ul> <li>Qu\u00e9 fall\u00f3</li> <li>Cu\u00e1ndo ocurri\u00f3</li> <li>C\u00f3mo se diagnostic\u00f3</li> <li>Qu\u00e9 soluci\u00f3n se aplic\u00f3</li> <li>C\u00f3mo evitarlo en el futuro</li> </ul>"},{"location":"08_08_mantenimiento_logs/#problemas-comunes-y-soluciones","title":"Problemas comunes y soluciones","text":""},{"location":"08_08_mantenimiento_logs/#servicio-no-arranca","title":"Servicio no arranca","text":"<p>S\u00edntoma: <code>sudo systemctl start servicio</code> falla</p> <p>Diagn\u00f3stico:</p> <pre><code># Ver estado detallado\nsudo systemctl status servicio\n\n# Ver logs del servicio\nsudo journalctl -u servicio -n 50\n\n# Ver errores espec\u00edficos\nsudo journalctl -u servicio -p err\n</code></pre> <p>Causas comunes:</p> <ol> <li> <p>Error de configuraci\u00f3n </p><pre><code># Verificar sintaxis (ejemplo con Samba)\ntestparm\n\n# Corregir y reintentar\nsudo systemctl restart smbd\n</code></pre><p></p> </li> <li> <p>Puerto ya en uso </p><pre><code># Ver qu\u00e9 est\u00e1 usando el puerto\nsudo ss -tlnp | grep :445\n\n# Detener el proceso conflictivo o cambiar puerto\n</code></pre><p></p> </li> <li> <p>Permisos incorrectos </p><pre><code># Verificar permisos de archivos de configuraci\u00f3n\nls -l /etc/samba/smb.conf\n\n# Corregir permisos\nsudo chmod 644 /etc/samba/smb.conf\n</code></pre><p></p> </li> <li> <p>Dependencias no satisfechas </p><pre><code># Ver qu\u00e9 servicios necesita\nsystemctl list-dependencies servicio\n\n# Iniciar servicios dependientes\nsudo systemctl start servicio_dependiente\n</code></pre><p></p> </li> </ol>"},{"location":"08_08_mantenimiento_logs/#sistema-muy-lento","title":"Sistema muy lento","text":"<p>S\u00edntoma: El servidor responde con mucha latencia</p> <p>Diagn\u00f3stico:</p> <pre><code># Ver carga del sistema\nuptime\n\n# Ver uso de CPU y memoria\nhtop\n\n# Ver uso de disco\nsudo iotop -o\n\n# Ver si est\u00e1 usando swap\nfree -h\n</code></pre> <p>Causas comunes:</p> <ol> <li> <p>CPU saturada </p><pre><code># En htop, presiona F6 y ordena por CPU%\n# Identifica el proceso problem\u00e1tico\n\n# Si es un proceso leg\u00edtimo, considera:\n# - Limitar su uso de CPU (nice/renice)\n# - Mejorar hardware (m\u00e1s CPUs)\n# - Optimizar la aplicaci\u00f3n\n</code></pre><p></p> </li> <li> <p>Memoria insuficiente (usando swap) </p><pre><code># Ver uso de swap\nfree -h\n\n# Si swap est\u00e1 alto, el sistema necesita m\u00e1s RAM\n# Soluciones:\n# - Cerrar servicios innecesarios\n# - Optimizar configuraci\u00f3n de servicios\n# - A\u00f1adir m\u00e1s RAM f\u00edsica\n</code></pre><p></p> </li> <li> <p>Disco lento </p><pre><code># Ver qu\u00e9 proceso est\u00e1 saturando el disco\nsudo iotop -o\n\n# Verificar con iostat\niostat -x 2\n\n# Soluciones:\n# - Mover operaciones intensivas a horas valle\n# - Usar SSD en lugar de HDD\n# - Optimizar bases de datos (\u00edndices, consultas)\n</code></pre><p></p> </li> </ol>"},{"location":"08_08_mantenimiento_logs/#disco-lleno","title":"Disco lleno","text":"<p>S\u00edntoma: Errores de \"No space left on device\"</p> <p>Diagn\u00f3stico:</p> <pre><code># Ver qu\u00e9 filesystem est\u00e1 lleno\ndf -h\n\n# Encontrar qu\u00e9 est\u00e1 ocupando espacio\nsudo ncdu /\n\n# Buscar archivos grandes\nsudo find / -type f -size +100M -exec ls -lh {} \\; 2&gt;/dev/null\n</code></pre> <p>Soluciones:</p> <ol> <li> <p>Limpiar logs </p><pre><code># Limpiar logs del sistema\nsudo journalctl --vacuum-size=500M\n\n# Eliminar logs antiguos\nsudo find /var/log -type f -name \"*.log\" -mtime +30 -delete\n</code></pre><p></p> </li> <li> <p>Limpiar paquetes </p><pre><code>sudo apt autoremove\nsudo apt clean\n</code></pre><p></p> </li> <li> <p>Eliminar archivos temporales </p><pre><code># Limpiar /tmp (con cuidado)\nsudo rm -rf /tmp/*\n\n# Limpiar cach\u00e9s de aplicaciones\n</code></pre><p></p> </li> <li> <p>Aumentar espacio (LVM) </p><pre><code># Si usas LVM, puedes extender vol\u00famenes\nsudo lvextend -L +10G /dev/mapper/ubuntu--vg-lv_datos\nsudo resize2fs /dev/mapper/ubuntu--vg-lv_datos\n</code></pre><p></p> </li> </ol>"},{"location":"08_08_mantenimiento_logs/#problema-de-redconectividad","title":"Problema de red/conectividad","text":"<p>S\u00edntoma: No hay conexi\u00f3n a internet o entre m\u00e1quinas</p> <p>Diagn\u00f3stico:</p> <pre><code># Verificar interfaz de red\nip addr\n\n# Ver rutas\nip route\n\n# Verificar DNS\ncat /etc/resolv.conf\n\n# Hacer ping al gateway\nping 192.168.100.1\n\n# Hacer ping a internet\nping 8.8.8.8\n\n# Probar DNS\nping google.com\n</code></pre> <p>Causas comunes:</p> <ol> <li> <p>Interfaz de red ca\u00edda </p><pre><code># Ver estado de interfaces\nip link\n\n# Levantar interfaz\nsudo ip link set eth0 up\n\n# Reiniciar NetworkManager o systemd-networkd\nsudo systemctl restart NetworkManager\n</code></pre><p></p> </li> <li> <p>Configuraci\u00f3n IP incorrecta </p><pre><code># Verificar configuraci\u00f3n de Netplan\ncat /etc/netplan/*.yaml\n\n# Aplicar configuraci\u00f3n\nsudo netplan apply\n</code></pre><p></p> </li> <li> <p>Firewall bloqueando </p><pre><code># Ver reglas de firewall\nsudo ufw status verbose\n\n# Permitir tr\u00e1fico si es necesario\nsudo ufw allow 22/tcp\n</code></pre><p></p> </li> <li> <p>Problema de DNS </p><pre><code># Si ping a IP funciona pero a nombre no:\n# Verificar /etc/resolv.conf\ncat /etc/resolv.conf\n\n# Agregar DNS manualmente (temporalmente)\necho \"nameserver 8.8.8.8\" | sudo tee -a /etc/resolv.conf\n</code></pre><p></p> </li> </ol>"},{"location":"08_08_mantenimiento_logs/#permisos-denegados","title":"Permisos denegados","text":"<p>S\u00edntoma: Errores de \"Permission denied\"</p> <p>Diagn\u00f3stico:</p> <pre><code># Ver permisos del archivo/carpeta\nls -l archivo_o_carpeta\n\n# Ver propietario\nls -ld /srv/compartido/prueba\n\n# Ver qu\u00e9 usuario est\u00e1 ejecutando el proceso\nps aux | grep nombre_proceso\n</code></pre> <p>Soluciones:</p> <ol> <li> <p>Ajustar permisos </p><pre><code># Dar permisos de escritura\nsudo chmod 775 /srv/compartido/prueba\n\n# Cambiar propietario\nsudo chown usuario:grupo /srv/compartido/prueba\n\n# Aplicar recursivamente\nsudo chown -R usuario:grupo /srv/compartido/prueba\nsudo chmod -R 775 /srv/compartido/prueba\n</code></pre><p></p> </li> <li> <p>Para Samba, verificar force user </p><pre><code># En smb.conf, aseg\u00farate de tener:\nforce user = usuario_correcto\n\n# Y que la carpeta pertenezca a ese usuario\n</code></pre><p></p> </li> </ol>"},{"location":"08_08_mantenimiento_logs/#scripts-utiles-para-monitorizacion","title":"Scripts \u00fatiles para monitorizaci\u00f3n","text":""},{"location":"08_08_mantenimiento_logs/#script-de-chequeo-general-del-sistema","title":"Script de chequeo general del sistema","text":"<p>Crear <code>/usr/local/bin/check-system.sh</code>:</p> <pre><code>#!/bin/bash\n\necho \"=== ESTADO DEL SISTEMA ===\"\necho\n\necho \"Fecha: $(date)\"\necho \"Uptime: $(uptime -p)\"\necho\n\necho \"=== USO DE CPU Y MEMORIA ===\"\nuptime\nfree -h\necho\n\necho \"=== USO DE DISCO ===\"\ndf -h | grep -E '^/dev/'\necho\n\necho \"=== SERVICIOS CR\u00cdTICOS ===\"\nsystemctl is-active smbd &amp;&amp; echo \"Samba: OK\" || echo \"Samba: FAILED\"\nsystemctl is-active ssh &amp;&amp; echo \"SSH: OK\" || echo \"SSH: FAILED\"\nsystemctl is-active systemd-networkd &amp;&amp; echo \"Network: OK\" || echo \"Network: FAILED\"\necho\n\necho \"=== ERRORES RECIENTES ===\"\njournalctl -p err --since \"1 hour ago\" --no-pager | tail -n 10\necho\n\necho \"=== TOP 5 PROCESOS POR CPU ===\"\nps aux --sort=-%cpu | head -n 6\necho\n\necho \"=== TOP 5 PROCESOS POR MEMORIA ===\"\nps aux --sort=-%mem | head -n 6\n</code></pre> <p>Hacer ejecutable:</p> <pre><code>sudo chmod +x /usr/local/bin/check-system.sh\n</code></pre> <p>Ejecutar:</p> <pre><code>sudo /usr/local/bin/check-system.sh\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#script-para-alertar-si-disco-esta-lleno","title":"Script para alertar si disco est\u00e1 lleno","text":"<p>Crear <code>/usr/local/bin/check-disk-space.sh</code>:</p> <pre><code>#!/bin/bash\n\nTHRESHOLD=80  # Porcentaje de alerta\n\ndf -h | grep -vE '^Filesystem|tmpfs|cdrom' | awk '{ print $5 \" \" $1 }' | while read output;\ndo\n  usage=$(echo $output | awk '{ print $1}' | sed 's/%//g')\n  partition=$(echo $output | awk '{ print $2 }')\n\n  if [ $usage -ge $THRESHOLD ]; then\n    echo \"ALERTA: La partici\u00f3n \\\"$partition\\\" est\u00e1 al $usage%\"\n  fi\ndone\n</code></pre> <p>Hacer ejecutable y programar con cron:</p> <pre><code>sudo chmod +x /usr/local/bin/check-disk-space.sh\n\n# Editar crontab\ncrontab -e\n\n# Agregar l\u00ednea para ejecutar cada hora\n0 * * * * /usr/local/bin/check-disk-space.sh\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#herramientas-adicionales","title":"Herramientas adicionales","text":""},{"location":"08_08_mantenimiento_logs/#dmesg-mensajes-del-kernel","title":"dmesg - Mensajes del kernel","text":"<pre><code># Ver mensajes del kernel (hardware, drivers)\ndmesg\n\n# Ver mensajes recientes\ndmesg | tail -n 50\n\n# Buscar errores\ndmesg | grep -i error\n\n# Ver con marcas de tiempo legibles\ndmesg -T\n\n# Seguir en tiempo real\ndmesg -w\n</code></pre> <p>\u00datil para diagnosticar problemas de hardware, discos, red a nivel bajo.</p>"},{"location":"08_08_mantenimiento_logs/#lsof-ver-archivos-abiertos","title":"lsof - Ver archivos abiertos","text":"<pre><code># Ver todos los archivos abiertos\nsudo lsof\n\n# Ver qu\u00e9 proceso est\u00e1 usando un archivo espec\u00edfico\nsudo lsof /srv/compartido/prueba/archivo.txt\n\n# Ver qu\u00e9 est\u00e1 usando un puerto\nsudo lsof -i :445\n\n# Ver archivos abiertos por un proceso\nsudo lsof -p PID\n\n# Ver archivos abiertos por un usuario\nsudo lsof -u nombre_usuario\n</code></pre> <p>Caso de uso: No puedo desmontar un dispositivo</p> <pre><code># Ver qu\u00e9 proceso est\u00e1 usando el dispositivo\nsudo lsof /mnt/disco_externo\n\n# Cerrar los procesos que lo usan\n# Luego desmontar\nsudo umount /mnt/disco_externo\n</code></pre>"},{"location":"08_08_mantenimiento_logs/#strace-rastrear-llamadas-del-sistema","title":"strace - Rastrear llamadas del sistema","text":"<pre><code># Rastrear un comando\nstrace ls\n\n# Rastrear un proceso en ejecuci\u00f3n\nsudo strace -p PID\n\n# Guardar output en archivo\nstrace -o output.txt comando\n\n# Solo mostrar llamadas de archivo\nstrace -e trace=file comando\n</code></pre> <p>Herramienta avanzada para debugging de bajo nivel.</p>"},{"location":"08_08_mantenimiento_logs/#resumen-de-comandos-clave","title":"Resumen de comandos clave","text":"Tarea Comando Ver logs del sistema <code>sudo journalctl</code> Seguir logs en tiempo real <code>sudo journalctl -f</code> Ver logs de un servicio <code>sudo journalctl -u servicio</code> Ver errores recientes <code>sudo journalctl -p err --since \"1 hour ago\"</code> Monitor de procesos interactivo <code>htop</code> Ver uso de memoria <code>free -h</code> Ver uso de disco <code>df -h</code> Analizar uso de carpeta <code>du -sh /ruta</code> Navegador de uso de disco <code>ncdu /ruta</code> Monitor de I/O de disco <code>sudo iotop -o</code> Ver conexiones de red <code>sudo ss -tlnp</code> Monitor de ancho de banda <code>sudo nethogs</code> Ver servicios activos <code>systemctl list-units --type=service --state=running</code> Ver carga del sistema <code>uptime</code>"},{"location":"08_08_mantenimiento_logs/#conclusion","title":"Conclusi\u00f3n","text":"<p>La monitorizaci\u00f3n y el an\u00e1lisis de logs son habilidades fundamentales para cualquier administrador de sistemas. Un buen administrador:</p> <p>\u2705 Monitoriza proactivamente - No espera a que haya problemas \u2705 Interpreta logs correctamente - Sabe distinguir mensajes normales de problemas reales \u2705 Diagnostica sistem\u00e1ticamente - Sigue una metodolog\u00eda l\u00f3gica, no adivina \u2705 Documenta incidencias - Aprende de los problemas para evitarlos en el futuro \u2705 Automatiza chequeos - Usa scripts y alertas para detectar problemas temprano</p> <p>Las herramientas que hemos visto te permitir\u00e1n:</p> <ul> <li>Detectar problemas de rendimiento antes de que afecten a usuarios</li> <li>Investigar la causa ra\u00edz de fallos y errores</li> <li>Mantener el servidor saludable y optimizado</li> <li>Responder r\u00e1pidamente cuando surjan incidencias</li> </ul> <p>Pr\u00e1ctica regularmente con estas herramientas. Cuanto m\u00e1s familiarizado est\u00e9s con el comportamiento normal de tu servidor, m\u00e1s f\u00e1cil ser\u00e1 detectar anomal\u00edas.</p> <p>Siguientes pasos</p> <ol> <li>Configura alertas autom\u00e1ticas para disco lleno y servicios ca\u00eddos</li> <li>Establece una rutina de revisi\u00f3n semanal de logs y recursos</li> <li>Documenta los valores normales de tu servidor (CPU, RAM, carga)</li> <li>Crea scripts personalizados para tus necesidades espec\u00edficas</li> <li>Aprende a usar herramientas de monitorizaci\u00f3n m\u00e1s avanzadas (Prometheus, Grafana)</li> </ol>"},{"location":"09_01_introduccion_scripts/","title":"Introducci\u00f3n y scripts b\u00e1sicos","text":""},{"location":"09_01_introduccion_scripts/#que-es-un-script","title":"\ud83d\udcd6 \u00bfQu\u00e9 es un Script?","text":"<p>Un script es un archivo de texto que contiene comandos que se ejecutan autom\u00e1ticamente, uno tras otro. Es como una \"receta\" que le das al ordenador.</p> <p>\u00bfPara qu\u00e9 sirve? - Automatizar tareas repetitivas - Hacer backups autom\u00e1ticos - Crear m\u00faltiples usuarios de una vez - Generar informes del sistema - Cualquier cosa que hagas manualmente, puedes automatizarla</p>"},{"location":"09_01_introduccion_scripts/#tu-primer-script","title":"\ud83d\ude80 Tu Primer Script","text":"<p>Crear el archivo</p> <pre><code>nano hola.sh\n</code></pre> <p>Escribir el contenido</p> <p>Mi primer Script</p> <pre><code>#!/bin/bash\n# Mi primer script\n\necho \"\u00a1Hola! Este es mi primer script\"\necho \"Hoy es: $(date)\"\necho \"Soy el usuario: $USER\"\n</code></pre> <p>Dar permisos de ejecuci\u00f3n</p> <pre><code>chmod +x hola.sh\n</code></pre> <p>Ejecutar el script</p> <pre><code>./hola.sh\n</code></pre> <p>Salida esperada: </p><pre><code>\u00a1Hola! Este es mi primer script\nHoy es: jue 13 feb 2026 10:30:45 UTC\nSoy el usuario: sergio\n</code></pre><p></p> <p>Explicaci\u00f3n l\u00ednea por l\u00ednea</p> <ul> <li><code>#!/bin/bash</code> \u2192 Shebang: indica que es un script de Bash</li> <li><code># Mi primer script</code> \u2192 Comentario: se ignora, sirve para documentar</li> <li><code>echo \"texto\"</code> \u2192 Muestra texto en pantalla</li> <li><code>$(date)</code> \u2192 Ejecuta el comando <code>date</code> y pone el resultado</li> <li><code>$USER</code> \u2192 Variable del sistema con tu nombre de usuario</li> </ul>"},{"location":"09_01_introduccion_scripts/#variables","title":"\ud83d\udce6 Variables","text":"<p>Las variables son como \"cajas\" donde guardamos informaci\u00f3n para usarla despu\u00e9s.</p> <p>Crear y usar variables</p> <p>Scripts con variables</p> <pre><code>#!/bin/bash\n\n# Crear variables\nnombre=\"Sergio\"\nedad=20\nciudad=\"Valencia\"\n\n# Usar variables (con $)\necho \"Me llamo $nombre\"\necho \"Tengo $edad a\u00f1os\"\necho \"Vivo en $ciudad\"\n</code></pre> <p>Salida: </p><pre><code>Me llamo Sergio\nTengo 20 a\u00f1os\nVivo en Valencia\n</code></pre><p></p> <p>\u26a0\ufe0f Reglas importantes</p> <ol> <li> <p>NO poner espacios alrededor del <code>=</code></p> <ul> <li>\u2705 Correcto: <code>nombre=\"Sergio\"</code></li> <li>\u274c Incorrecto: <code>nombre = \"Sergio\"</code></li> </ul> </li> <li> <p>Para usar una variable, poner <code>$</code> delante</p> <ul> <li><code>echo $nombre</code></li> </ul> </li> <li> <p>Los nombres distinguen may\u00fasculas</p> <ul> <li><code>nombre</code> es diferente de <code>NOMBRE</code></li> </ul> </li> <li> <p>Sin espacios en los valores (o usar comillas)</p> <ul> <li>\u2705 <code>nombre=\"Sergio Rey\"</code></li> <li>\u274c <code>nombre=Sergio Rey</code></li> </ul> </li> </ol>"},{"location":"09_01_introduccion_scripts/#pedir-informacion-al-usuario-read","title":"\ud83c\udfa4 Pedir Informaci\u00f3n al Usuario (<code>read</code>)","text":"<p>El comando <code>read</code> permite que el script pida informaci\u00f3n al usuario.</p> <p>Ejemplo b\u00e1sico</p> <pre><code>#!/bin/bash\n\necho \"\u00bfC\u00f3mo te llamas?\"\nread nombre\n\necho \"\u00bfCu\u00e1ntos a\u00f1os tienes?\"\nread edad\n\necho \"Hola $nombre, tienes $edad a\u00f1os\"\n</code></pre> <p>El comando <code>echo</code> muestra por pantalla, mientras que el comando <code>read</code> queda a la espera de una entrada, de forma que la variable que tiene el <code>read</code> tendr\u00e1 esa informaci\u00f3n.</p> <p>Podemos hacer el mismo ejemplo de otra manera, y nos ahorramos el <code>echo</code></p> <p>Usando <code>-p</code> (m\u00e1s compacto)</p> <pre><code>#!/bin/bash\n\nread -p \"\u00bfC\u00f3mo te llamas? \" nombre\nread -p \"\u00bfCu\u00e1ntos a\u00f1os tienes? \" edad\n\necho \"Hola $nombre, tienes $edad a\u00f1os\"\n</code></pre> <p>Ejecuci\u00f3n:** </p><pre><code>\u00bfC\u00f3mo te llamas? Sergio\n\u00bfCu\u00e1ntos a\u00f1os tienes? 20\nHola Sergio, tienes 20 a\u00f1os\n</code></pre><p></p>"},{"location":"09_01_introduccion_scripts/#parametros-del-script","title":"\ud83d\udccb Par\u00e1metros del Script","text":"<p>Los par\u00e1metros son valores que se pasan al script al ejecutarlo.</p>"},{"location":"09_01_introduccion_scripts/#variables-especiales-de-parametros","title":"Variables especiales de par\u00e1metros","text":"<ul> <li><code>$0</code> \u2192 Nombre del script</li> <li><code>$1</code> \u2192 Primer par\u00e1metro</li> <li><code>$2</code> \u2192 Segundo par\u00e1metro</li> <li><code>$3</code> \u2192 Tercer par\u00e1metro</li> <li><code>$#</code> \u2192 N\u00famero total de par\u00e1metros</li> <li><code>$@</code> \u2192 Todos los par\u00e1metros</li> </ul> <p>Ejemplo b\u00e1sico</p> <pre><code>#!/bin/bash\n# Script: saludo.sh\n\necho \"Nombre del script: $0\"\necho \"Primer par\u00e1metro: $1\"\necho \"Segundo par\u00e1metro: $2\"\n</code></pre> <p>Ejecutar: </p><pre><code>./saludo.sh Sergio Valencia\n</code></pre><p></p> <p>Salida: </p><pre><code>Nombre del script: ./saludo.sh\nPrimer par\u00e1metro: Sergio\nSegundo par\u00e1metro: Valencia\n</code></pre><p></p> <p>Ejemplo pr\u00e1ctico 2: Script de saludo</p> <pre><code>#!/bin/bash\n# Script: saludar.sh\n# Uso: ./saludar.sh NOMBRE EDAD\n\nnombre=$1\nedad=$2\n\necho \"Hola $nombre, tienes $edad a\u00f1os\"\n</code></pre> <p>Ejecutar: </p><pre><code>./saludar.sh Mar\u00eda 22\n</code></pre><p></p> <p>Salida: </p><pre><code>Hola Mar\u00eda, tienes 22 a\u00f1os\n</code></pre><p></p>"},{"location":"09_01_introduccion_scripts/#verificar-numero-de-parametros","title":"Verificar n\u00famero de par\u00e1metros","text":"<p>Podemos conocer cuantos par\u00e1metros nos han pasado y m\u00e1s datos:</p> <ul> <li><code>$0</code>: Indica el nombre del script</li> <li><code>$@</code>: Variable que contiene todos los par\u00e1metros en formato lista, separados por espacios en blanco</li> <li><code>$#</code>: Variable que contiene el n\u00famero de par\u00e1metros</li> </ul> <p>Ejemplo demostraci\u00f3n</p> <pre><code>#!/bin/bash\n# Script: info.sh\n\necho \"Nombre del script: $0\"\necho \"N\u00famero de par\u00e1metros: $#\"\necho \"Todos los par\u00e1metros: $@\"\n</code></pre> <p>Ejecutar: </p><pre><code>./info.sh uno dos tres\n</code></pre><p></p> <p>Salida: </p><pre><code>Nombre del script: ./info.sh\nN\u00famero de par\u00e1metros: 3\nTodos los par\u00e1metros: uno dos tres\n</code></pre><p></p> <p>Veamos un ejemplo para crear archivos</p> <p>Ejemplo completo: Creador de archivos</p> <pre><code>#!/bin/bash\n# Script: crear_archivo.sh\n# Uso: ./crear_archivo.sh NOMBRE_ARCHIVO\n\narchivo=$1\n\ntouch \"$archivo\"\necho \"Archivo creado: $archivo\"\necho \"Fecha de creaci\u00f3n: $(date)\" &gt; \"$archivo\"\n</code></pre> <p>Ejecutar: </p><pre><code>./crear_archivo.sh mi_archivo.txt\ncat mi_archivo.txt\n</code></pre><p></p> <p>Salida: </p><pre><code>Archivo creado: mi_archivo.txt\nFecha de creaci\u00f3n: jue 13 feb 2026 10:35:12 UTC\n</code></pre><p></p>"},{"location":"09_01_introduccion_scripts/#operaciones-matematicas-basicas","title":"\ud83d\udd22 Operaciones Matem\u00e1ticas B\u00e1sicas","text":"<p>Para hacer c\u00e1lculos, usamos <code>$(( ))</code></p> <p>Operaciones b\u00e1sicas</p> <pre><code>#!/bin/bash\n\nnum1=10\nnum2=5\n\nsuma=$((num1 + num2))\nresta=$((num1 - num2))\nmultiplicacion=$((num1 * num2))\ndivision=$((num1 / num2))\n\necho \"$num1 + $num2 = $suma\"\necho \"$num1 - $num2 = $resta\"\necho \"$num1 \u00d7 $num2 = $multiplicacion\"\necho \"$num1 \u00f7 $num2 = $division\"\n</code></pre> <p>Salida: </p><pre><code>10 + 5 = 15\n10 - 5 = 5\n10 \u00d7 5 = 50\n10 \u00f7 5 = 2\n</code></pre><p></p> <p>Ejemplo de operaciones matem\u00e1ticas con par\u00e1metros</p> <pre><code>#!/bin/bash\n# Script: calculadora.sh\n# Uso: ./calculadora.sh NUM1 NUM2\n\nnum1=$1\nnum2=$2\n\nsuma=$((num1 + num2))\n\necho \"$num1 + $num2 = $suma\"\n</code></pre> <p>Ejecutar: </p><pre><code>./calculadora.sh 8 3\n</code></pre><p></p> <p>Salida: </p><pre><code>8 + 3 = 11\n</code></pre><p></p>"},{"location":"09_01_introduccion_scripts/#ejercicios-practicos","title":"\ud83d\udcbb Ejercicios Pr\u00e1cticos","text":""},{"location":"09_01_introduccion_scripts/#ejercicio-1-presentacion-personal","title":"Ejercicio 1: Presentaci\u00f3n Personal","text":"<p>Objetivo: Crear un script que pida informaci\u00f3n y la muestre.</p> <p>Instrucciones:</p> <ol> <li>Crear archivo <code>presentacion.sh</code></li> <li>Pedir nombre, edad y ciudad con <code>read</code></li> <li>Mostrar un mensaje con toda la informaci\u00f3n</li> </ol> Int\u00e9ntalo tu antes de mirar la soluci\u00f3n <pre><code>#!/bin/bash\n\nread -p \"\u00bfC\u00f3mo te llamas? \" nombre\nread -p \"\u00bfCu\u00e1ntos a\u00f1os tienes? \" edad\nread -p \"\u00bfDe qu\u00e9 ciudad eres? \" ciudad\n\necho \"==========================================\"\necho \"Hola $nombre\"\necho \"Tienes $edad a\u00f1os y eres de $ciudad\"\necho \"==========================================\"\n</code></pre> <p>Ejecutar y probar: </p><pre><code>chmod +x presentacion.sh\n./presentacion.sh\n</code></pre><p></p>"},{"location":"09_01_introduccion_scripts/#ejercicio-2-script-con-parametros","title":"Ejercicio 2: Script con Par\u00e1metros","text":"<p>Objetivo: Crear un script que use par\u00e1metros en lugar de <code>read</code>.</p> <p>Instrucciones:</p> <ol> <li>Crear archivo <code>info_usuario.sh</code></li> <li>Recibir nombre y ciudad como par\u00e1metros</li> <li>Mostrar la informaci\u00f3n</li> </ol> Int\u00e9ntalo tu antes de mirar la soluci\u00f3n <pre><code>#!/bin/bash\n# Script: info_usuario.sh\n# Uso: ./info_usuario.sh NOMBRE CIUDAD\n\nnombre=$1\nciudad=$2\n\necho \"Usuario: $nombre\"\necho \"Ciudad: $ciudad\"\necho \"Directorio actual: $(pwd)\"\necho \"Fecha: $(date +%d/%m/%Y)\"\n</code></pre> <p>Ejecutar: </p><pre><code>chmod +x info_usuario.sh\n./info_usuario.sh Sergio Valencia\n</code></pre><p></p>"},{"location":"09_01_introduccion_scripts/#ejercicio-3-calculadora-simple","title":"Ejercicio 3: Calculadora Simple","text":"<p>Objetivo: Crear un script que sume 4 n\u00fameros pasados como par\u00e1metros.</p> <p>Requisitos:</p> <ol> <li>El script debe llamarse <code>sumar.sh</code></li> <li>Debe recibir dos n\u00fameros como par\u00e1metros: <code>./sumar.sh 5 8 20 1</code></li> <li>Debe mostrar el resultado: <code>5 + 8 + 20 + 1 = 34</code></li> </ol> <p>Estructura esperada: </p><pre><code>#!/bin/bash\n# Script: sumar.sh\n# Uso: ./sumar.sh NUM1 NUM2 NUM3 NUM4\n\n# TODO: Capturar par\u00e1metros en variables\n# TODO: Calcular la suma\n# TODO: Mostrar el resultado\n</code></pre><p></p>"},{"location":"09_01_introduccion_scripts/#resumen-de-comandos","title":"\ud83d\udcdd Resumen de Comandos","text":"<p>Crear y ejecutar scripts </p><pre><code>nano script.sh          # Crear/editar script\nchmod +x script.sh      # Dar permisos de ejecuci\u00f3n\n./script.sh             # Ejecutar script\n</code></pre><p></p> <p>Variables </p><pre><code>variable=\"valor\"        # Crear variable\necho $variable          # Usar variable\n</code></pre><p></p> <p>Lectura de usuario </p><pre><code>read variable                      # Pedir input\nread -p \"Pregunta: \" variable      # Con mensaje\n</code></pre><p></p> <p>Par\u00e1metros</p> Par\u00e1metro Significado <code>$0</code> # Nombre del script <code>$1</code> # Primer par\u00e1metro <code>$2</code> # Segundo par\u00e1metro <code>$#</code> # N\u00famero de par\u00e1metros <code>$@</code> # Todos los par\u00e1metros <p>Operaciones </p><pre><code>suma=$((num1 + num2))\nresta=$((num1 - num2))\nmult=$((num1 * num2))\ndiv=$((num1 / num2))\n</code></pre><p></p> <p>Comandos \u00fatiles en scripts </p><pre><code>$(date)                 # Fecha y hora actual\n$(date +%Y%m%d)         # Fecha formato YYYYMMDD\n$(pwd)                  # Directorio actual\n$USER                   # Usuario actual\n</code></pre><p></p>"},{"location":"09_02_condicionales/","title":"Condicionales y Verificaci\u00f3n de Archivos","text":"<p>Los condicionales permiten que el script tome decisiones y ejecute diferentes comandos seg\u00fan las condiciones.</p> <p>Ejemplo del mundo real: </p><pre><code>SI tengo m\u00e1s de 18 a\u00f1os\n    ENTONCES puedo votar\nSI NO\n    ENTONCES no puedo votar\n</code></pre><p></p> <p>En scripting es igual: el script puede verificar condiciones y actuar en consecuencia.</p>"},{"location":"09_02_condicionales/#estructura-basica-del-if","title":"Estructura B\u00e1sica del <code>if</code>","text":"<p>Sintaxis</p> <pre><code>if [ condici\u00f3n ]; then\n    # Comandos si la condici\u00f3n es VERDADERA\nfi\n</code></pre> <p>Elementos importantes:</p> <ul> <li>Espacios alrededor de los corchetes: <code>[ condici\u00f3n ]</code></li> <li>Punto y coma antes de <code>then</code>: <code>]; then</code></li> <li>Cerrar con <code>fi</code> (if al rev\u00e9s)</li> </ul> <p>Ejemplo: Mayor de edad</p> <pre><code>#!/bin/bash\n\nread -p \"\u00bfCu\u00e1ntos a\u00f1os tienes? \" edad\n\nif [ $edad -ge 18 ]; then\n    echo \"Eres mayor de edad\"\nfi\n</code></pre> <p>Explicaci\u00f3n:</p> <ul> <li><code>$edad -ge 18</code> \u2192 si edad es mayor o igual a 18</li> <li><code>-ge</code> significa \"greater or equal\" (mayor o igual)</li> </ul>"},{"location":"09_02_condicionales/#operadores-de-comparacion-numerica","title":"Operadores de Comparaci\u00f3n Num\u00e9rica","text":"<p>Para comparar n\u00fameros, usamos estos operadores:</p> Operador Significado Ejemplo <code>-eq</code> igual (equal) <code>[ $edad -eq 18 ]</code> <code>-ne</code> distinto (not equal) <code>[ $edad -ne 18 ]</code> <code>-gt</code> mayor que (greater than) <code>[ $edad -gt 18 ]</code> <code>-lt</code> menor que (less than) <code>[ $edad -lt 18 ]</code> <code>-ge</code> mayor o igual <code>[ $edad -ge 18 ]</code> <code>-le</code> menor o igual <code>[ $edad -le 18 ]</code> <p>Ejemplo completo</p> <pre><code>#!/bin/bash\n\nread -p \"Introduce un n\u00famero: \" num\n\nif [ $num -eq 10 ]; then\n    echo \"El n\u00famero es 10\"\nfi\n\nif [ $num -gt 10 ]; then\n    echo \"El n\u00famero es mayor que 10\"\nfi\n\nif [ $num -lt 10 ]; then\n    echo \"El n\u00famero es menor que 10\"\nfi\n</code></pre>"},{"location":"09_02_condicionales/#ifelse-si-no","title":"if/else - Si no...","text":"<p>Cuando queremos hacer algo diferente si la condici\u00f3n NO se cumple:</p> <pre><code>if [ condici\u00f3n ]; then\n    # Si la condici\u00f3n es verdadera\nelse\n    # Si la condici\u00f3n es falsa\nfi\n</code></pre> <p>Ejemplo: Mayor o menor de edad</p> <pre><code>#!/bin/bash\n\nread -p \"\u00bfCu\u00e1ntos a\u00f1os tienes? \" edad\n\nif [ $edad -ge 18 ]; then\n    echo \"Eres mayor de edad\"\nelse\n    echo \"Eres menor de edad\"\nfi\n</code></pre>"},{"location":"09_02_condicionales/#ifelifelse-multiples-condiciones","title":"if/elif/else - M\u00faltiples Condiciones","text":"<p>Para comprobar varias condiciones:</p> <pre><code>if [ condici\u00f3n1 ]; then\n    # Si se cumple condici\u00f3n1\nelif [ condici\u00f3n2 ]; then\n    # Si se cumple condici\u00f3n2\nelif [ condici\u00f3n3 ]; then\n    # Si se cumple condici\u00f3n3\nelse\n    # Si no se cumple ninguna\nfi\n</code></pre> <p>Ejemplo: Clasificador de notas</p> <pre><code>#!/bin/bash\n\nread -p \"Introduce tu nota (0-10): \" nota\n\nif [ $nota -ge 9 ]; then\n    echo \"Sobresaliente\"\nelif [ $nota -ge 7 ]; then\n    echo \"Notable\"\nelif [ $nota -ge 5 ]; then\n    echo \"Aprobado\"\nelse\n    echo \"Suspenso\"\nfi\n</code></pre> <p>Ejecuci\u00f3n: </p><pre><code>Introduce tu nota (0-10): 8\nNotable\n</code></pre><p></p>"},{"location":"09_02_condicionales/#comparar-textos","title":"Comparar Textos","text":"<p>Para comparar textos usamos <code>=</code> y <code>!=</code></p> <p>Sintaxis</p> <pre><code>if [ \"$texto\" = \"valor\" ]; then\n    # Si son iguales\nfi\n\nif [ \"$texto\" != \"valor\" ]; then\n    # Si son diferentes\nfi\n</code></pre> <p>\u26a0\ufe0f IMPORTANTE:</p> <p>Siempre poner las variables entre comillas: <code>\"$variable\"</code></p> <p>Ejemplo: Verificar respuesta</p> <pre><code>#!/bin/bash\n\nread -p \"\u00bfQuieres continuar? (si/no): \" respuesta\n\nif [ \"$respuesta\" = \"si\" ]; then\n    echo \"Continuando...\"\nelse\n    echo \"Operaci\u00f3n cancelada\"\nfi\n</code></pre> <p>Ejemplo: Verificar color favorito</p> <pre><code>#!/bin/bash\n\nread -p \"\u00bfCu\u00e1l es tu color favorito? \" color\n\nif [ \"$color\" = \"rojo\" ]; then\n    echo \"El rojo es un color energ\u00e9tico\"\nelif [ \"$color\" = \"azul\" ]; then\n    echo \"El azul es relajante\"\nelif [ \"$color\" = \"verde\" ]; then\n    echo \"El verde es el color de la naturaleza\"\nelse\n    echo \"Buen color: $color\"\nfi\n</code></pre>"},{"location":"09_02_condicionales/#verificar-archivos-y-directorios","title":"Verificar Archivos y Directorios (\u2b50)","text":"<p>Esta es una de las funcionalidades m\u00e1s \u00fatiles en scripts de administraci\u00f3n.</p> <p>Operadores de Archivos</p> Operador Significado <code>-f archivo</code> Existe y es un archivo regular <code>-d directorio</code> Existe y es un directorio <code>-e ruta</code> Existe (archivo o directorio) <code>-r archivo</code> Es legible <code>-w archivo</code> Es escribible <code>-x archivo</code> Es ejecutable <code>-s archivo</code> No est\u00e1 vac\u00edo <p>Ejemplo: Verificar si existe un archivo</p> <pre><code>#!/bin/bash\n\nread -p \"Introduce nombre de archivo: \" archivo\n\nif [ -f \"$archivo\" ]; then\n    echo \"El archivo existe\"\nelse\n    echo \"El archivo NO existe\"\nfi\n</code></pre> <p>Ejemplo: Verificar si es archivo o directorio</p> <pre><code>#!/bin/bash\n\nread -p \"Introduce una ruta: \" ruta\n\nif [ -f \"$ruta\" ]; then\n    echo \"$ruta es un ARCHIVO\"\nelif [ -d \"$ruta\" ]; then\n    echo \"$ruta es un DIRECTORIO\"\nelse\n    echo \"$ruta NO EXISTE\"\nfi\n</code></pre> <p>Ejemplo: Comprobar permisos \u2b50</p> <pre><code>#!/bin/bash\n\narchivo=$1\n\nif [ ! -e \"$archivo\" ]; then\n    echo \"El archivo NO existe\"\n    exit 1\nfi\n\necho \"Informaci\u00f3n de: $archivo\"\n\nif [ -f \"$archivo\" ]; then\n    echo \"Tipo: Archivo\"\nelif [ -d \"$archivo\" ]; then\n    echo \"Tipo: Directorio\"\nfi\n\nif [ -r \"$archivo\" ]; then\n    echo \"Permiso de lectura: S\u00cd\"\nelse\n    echo \"Permiso de lectura: NO\"\nfi\n\nif [ -w \"$archivo\" ]; then\n    echo \"Permiso de escritura: S\u00cd\"\nelse\n    echo \"Permiso de escritura: NO\"\nfi\n\nif [ -x \"$archivo\" ]; then\n    echo \"Permiso de ejecuci\u00f3n: S\u00cd\"\nelse\n    echo \"Permiso de ejecuci\u00f3n: NO\"\nfi\n</code></pre> <p>Nota:</p> <p><code>!</code> invierte la condici\u00f3n (<code>-e</code> = existe, <code>! -e</code> = NO existe)</p>"},{"location":"09_02_condicionales/#operadores-logicos","title":"Operadores L\u00f3gicos","text":""},{"location":"09_02_condicionales/#and","title":"AND (&amp;&amp;)","text":"<p>Ambas condiciones deben cumplirse</p> <pre><code>if [ condici\u00f3n1 ] &amp;&amp; [ condici\u00f3n2 ]; then\n    # Solo si AMBAS son verdaderas\nfi\n</code></pre> <p>Ejemplo:</p> <pre><code>#!/bin/bash\n\nread -p \"Edad: \" edad\nread -p \"\u00bfTienes carnet? (si/no): \" carnet\n\nif [ $edad -ge 18 ] &amp;&amp; [ \"$carnet\" = \"si\" ]; then\n    echo \"Puedes conducir\"\nelse\n    echo \"No puedes conducir\"\nfi\n</code></pre>"},{"location":"09_02_condicionales/#or","title":"OR (||)","text":"<p>Al menos una debe cumplirse</p> <pre><code>if [ condici\u00f3n1 ] || [ condici\u00f3n2 ]; then\n    # Si CUALQUIERA de las dos es verdadera\nfi\n</code></pre> <p>Ejemplo:</p> <pre><code>#!/bin/bash\n\nread -p \"\u00bfEs fin de semana? (si/no): \" finde\nread -p \"\u00bfEst\u00e1s de vacaciones? (si/no): \" vacaciones\n\nif [ \"$finde\" = \"si\" ] || [ \"$vacaciones\" = \"si\" ]; then\n    echo \"\u00a1A descansar!\"\nelse\n    echo \"Toca trabajar\"\nfi\n</code></pre>"},{"location":"09_02_condicionales/#ejercicios-practicos","title":"Ejercicios Pr\u00e1cticos","text":"<p>Ejercicio 1: Clasificador de Notas</p> <p>Objetivo: Crear un script que clasifique notas.</p> <p>Instrucciones: 1. Crear archivo <code>notas.sh</code> 2. Pedir una nota (0-10) 3. Mostrar la calificaci\u00f3n seg\u00fan la nota</p> Int\u00e9ntalo tu antes de mirar la soluci\u00f3n <pre><code>#!/bin/bash\n\nread -p \"Introduce tu nota (0-10): \" nota\n\nif [ $nota -ge 9 ]; then\n    echo \"Calificaci\u00f3n: Sobresaliente\"\nelif [ $nota -ge 7 ]; then\n    echo \"Calificaci\u00f3n: Notable\"\nelif [ $nota -ge 5 ]; then\n    echo \"Calificaci\u00f3n: Aprobado\"\nelse\n    echo \"Calificaci\u00f3n: Suspenso\"\nfi\n</code></pre> <p>Probar: </p><pre><code>chmod +x notas.sh\n./notas.sh\n</code></pre><p></p> <p>Ejercicio 2: Verificador de Archivos</p> <p>Objetivo: Crear un script que verifique si existe un archivo y muestre informaci\u00f3n.</p> <p>Instrucciones: 1. Crear archivo <code>verificar.sh</code> 2. Recibir nombre de archivo como par\u00e1metro 3. Verificar si existe 4. Si existe, mostrar si es archivo o directorio 5. Mostrar permisos</p> Int\u00e9ntalo tu antes de mirar la soluci\u00f3n <pre><code>#!/bin/bash\n# Uso: ./verificar.sh ARCHIVO\n\narchivo=$1\n\n# Verificar que se pas\u00f3 un par\u00e1metro\nif [ $# -eq 0 ]; then\n    echo \"Uso: $0 ARCHIVO\"\n    exit 1\nfi\n\n# Verificar si existe\nif [ ! -e \"$archivo\" ]; then\n    echo \"ERROR: $archivo no existe\"\n    exit 1\nfi\n\necho \"====================================\"\necho \"Informaci\u00f3n de: $archivo\"\necho \"====================================\"\n\n# Tipo\nif [ -f \"$archivo\" ]; then\n    echo \"Tipo: Archivo regular\"\nelif [ -d \"$archivo\" ]; then\n    echo \"Tipo: Directorio\"\nfi\n\n# Permisos\necho -n \"Lectura: \"\nif [ -r \"$archivo\" ]; then\n    echo \"S\u00cd\"\nelse\n    echo \"NO\"\nfi\n\necho -n \"Escritura: \"\nif [ -w \"$archivo\" ]; then\n    echo \"S\u00cd\"\nelse\n    echo \"NO\"\nfi\n\necho -n \"Ejecuci\u00f3n: \"\nif [ -x \"$archivo\" ]; then\n    echo \"S\u00cd\"\nelse\n    echo \"NO\"\nfi\n\necho \"====================================\"\n</code></pre> <p>Probar: </p><pre><code>chmod +x verificar.sh\n./verificar.sh /etc/passwd\n./verificar.sh /home\n./verificar.sh archivo_inexistente\n</code></pre><p></p> <p>Ejercicio 3: Creador de Directorio Seguro</p> <p>Objetivo: Crear un script que cree un directorio solo si no existe.</p> <p>Requisitos:</p> <ol> <li>El script debe llamarse <code>crear_dir.sh</code></li> <li>Debe recibir el nombre del directorio como par\u00e1metro</li> <li>Debe verificar si el directorio ya existe</li> <li>Si NO existe, crearlo y mostrar mensaje de \u00e9xito</li> <li>Si YA existe, mostrar mensaje de error y NO crear nada</li> </ol> <p>Estructura esperada: </p><pre><code>#!/bin/bash\n# Script: crear_dir.sh\n# Uso: ./crear_dir.sh NOMBRE_DIRECTORIO\n\n# TODO: Verificar que se pas\u00f3 un par\u00e1metro\n# TODO: Capturar el par\u00e1metro en una variable\n# TODO: Verificar si el directorio existe\n# TODO: Si NO existe, crearlo\n# TODO: Si S\u00cd existe, mostrar error\n</code></pre><p></p> <p>Ejemplo de ejecuci\u00f3n: </p><pre><code>./crear_dir.sh mi_carpeta\n</code></pre><p></p> <p>Salida esperada (si no existe): </p><pre><code>\u2713 Directorio 'mi_carpeta' creado exitosamente\n</code></pre><p></p> <p>Salida esperada (si ya existe): </p><pre><code>\u2717 ERROR: El directorio 'mi_carpeta' ya existe\n</code></pre><p></p> <p>Pistas: - Usa <code>$#</code> para verificar n\u00famero de par\u00e1metros - Usa <code>-d</code> para verificar si existe el directorio - Usa <code>mkdir</code> para crear el directorio - Usa <code>!</code> para invertir la condici\u00f3n</p>"},{"location":"09_02_condicionales/#resumen-de-comandos","title":"\ud83d\udcdd Resumen de Comandos","text":""},{"location":"09_02_condicionales/#estructura-if","title":"Estructura if","text":"<pre><code>if [ condici\u00f3n ]; then\n    comandos\nfi\n\nif [ condici\u00f3n ]; then\n    comandos\nelse\n    otros_comandos\nfi\n\nif [ condici\u00f3n1 ]; then\n    comandos1\nelif [ condici\u00f3n2 ]; then\n    comandos2\nelse\n    comandos3\nfi\n</code></pre>"},{"location":"09_02_condicionales/#comparacion-numerica","title":"Comparaci\u00f3n num\u00e9rica","text":"<pre><code>[ $num -eq 5 ]    # Igual\n[ $num -ne 5 ]    # Distinto\n[ $num -gt 5 ]    # Mayor que\n[ $num -lt 5 ]    # Menor que\n[ $num -ge 5 ]    # Mayor o igual\n[ $num -le 5 ]    # Menor o igual\n</code></pre>"},{"location":"09_02_condicionales/#comparacion-de-texto","title":"Comparaci\u00f3n de texto","text":"<pre><code>[ \"$texto\" = \"hola\" ]     # Igual\n[ \"$texto\" != \"hola\" ]    # Distinto\n</code></pre>"},{"location":"09_02_condicionales/#verificacion-de-archivos","title":"Verificaci\u00f3n de archivos","text":"<pre><code>[ -f archivo ]      # Es un archivo\n[ -d directorio ]   # Es un directorio\n[ -e ruta ]        # Existe\n[ -r archivo ]     # Es legible\n[ -w archivo ]     # Es escribible\n[ -x archivo ]     # Es ejecutable\n[ ! -e archivo ]   # NO existe\n</code></pre>"},{"location":"09_02_condicionales/#operadores-logicos_1","title":"Operadores l\u00f3gicos","text":"<pre><code>[ cond1 ] &amp;&amp; [ cond2 ]    # AND - ambas verdaderas\n[ cond1 ] || [ cond2 ]    # OR - alguna verdadera\n</code></pre>"},{"location":"09_02_condicionales/#tarea-para-casa","title":"\ud83c\udfe0 Tarea para Casa","text":""},{"location":"09_02_condicionales/#tarea-1-verificador-de-espacio-en-disco","title":"Tarea 1: Verificador de Espacio en Disco","text":"<p>Crear un script llamado <code>verificar_espacio.sh</code> que: 1. Compruebe el espacio libre en el disco 2. Si hay menos del 80% usado, mostrar \"OK: Espacio suficiente\" 3. Si hay m\u00e1s del 80% usado, mostrar \"ADVERTENCIA: Poco espacio\"</p> <p>Pistas: </p><pre><code># Obtener porcentaje de uso del disco ra\u00edz\nuso=$(df -h / | tail -n 1 | awk '{print $5}' | sed 's/%//')\n\n# Comparar con 80\nif [ $uso -gt 80 ]; then\n    echo \"ADVERTENCIA\"\nfi\n</code></pre><p></p>"},{"location":"09_02_condicionales/#tarea-2-script-de-backup-condicional","title":"Tarea 2: Script de Backup Condicional","text":"<p>Crear un script llamado <code>backup_condicional.sh</code> que: 1. Reciba como par\u00e1metro un directorio a respaldar 2. Verifique que el directorio existe 3. Si NO existe, mostrar error y salir 4. Si S\u00cd existe, crear un backup con tar:    - Nombre: <code>backup_YYYYMMDD.tar.gz</code>    - Mostrar mensaje de \u00e9xito con el tama\u00f1o del backup</p> <p>Estructura: </p><pre><code>#!/bin/bash\n# Uso: ./backup_condicional.sh DIRECTORIO\n\ndirectorio=$1\n\n# Verificar par\u00e1metro\n\n# Verificar que existe el directorio\n\n# Crear backup\nfecha=$(date +%Y%m%d)\ntar -czf \"backup_$fecha.tar.gz\" \"$directorio\"\n\n# Mostrar mensaje de \u00e9xito\n</code></pre><p></p>"},{"location":"09_02_condicionales/#checklist-de-la-sesion","title":"\u2705 Checklist de la Sesi\u00f3n","text":"<p>Antes de terminar, verifica que puedes:</p> <ul> <li>[ ] Usar <code>if/then/fi</code> correctamente</li> <li>[ ] Usar <code>if/else/fi</code></li> <li>[ ] Usar <code>if/elif/else/fi</code></li> <li>[ ] Comparar n\u00fameros con <code>-eq</code>, <code>-gt</code>, <code>-lt</code>, etc.</li> <li>[ ] Comparar textos con <code>=</code> y <code>!=</code></li> <li>[ ] Verificar si existe un archivo con <code>-f</code></li> <li>[ ] Verificar si existe un directorio con <code>-d</code></li> <li>[ ] Comprobar permisos con <code>-r</code>, <code>-w</code>, <code>-x</code></li> <li>[ ] Usar operadores l\u00f3gicos <code>&amp;&amp;</code> y <code>||</code></li> <li>[ ] Invertir condiciones con <code>!</code></li> </ul>"},{"location":"09_02_condicionales/#errores-comunes-y-soluciones","title":"\ud83d\udca1 Errores Comunes y Soluciones","text":""},{"location":"09_02_condicionales/#error-unary-operator-expected","title":"Error: \"unary operator expected\"","text":"<p>Causa: Variable vac\u00eda o sin comillas </p><pre><code># \u274c Mal\nif [ $variable = \"texto\" ]; then\n\n# \u2705 Bien\nif [ \"$variable\" = \"texto\" ]; then\n</code></pre><p></p>"},{"location":"09_02_condicionales/#error-espacios-en-los-corchetes","title":"Error: Espacios en los corchetes","text":"<pre><code># \u274c Mal\nif [$num -eq 5]; then\n\n# \u2705 Bien\nif [ $num -eq 5 ]; then\n</code></pre>"},{"location":"09_02_condicionales/#error-usar-en-lugar-de-eq-para-numeros","title":"Error: Usar = en lugar de -eq para n\u00fameros","text":"<pre><code># \u274c Mal\nif [ $num = 5 ]; then\n\n# \u2705 Bien\nif [ $num -eq 5 ]; then\n</code></pre>"},{"location":"09_02_condicionales/#error-olvidar-el-fi","title":"Error: Olvidar el <code>fi</code>","text":"<pre><code># \u274c Mal\nif [ condici\u00f3n ]; then\n    echo \"algo\"\n\n# \u2705 Bien\nif [ condici\u00f3n ]; then\n    echo \"algo\"\nfi\n</code></pre>"},{"location":"09_02_condicionales/#proxima-sesion","title":"\ud83c\udfaf Pr\u00f3xima Sesi\u00f3n","text":"<p>En la pr\u00f3xima sesi\u00f3n aprenderemos: - Bucles <code>for</code> para repetir acciones - Procesar m\u00faltiples archivos autom\u00e1ticamente - Crear archivos en masa - Hacer backups de m\u00faltiples directorios</p> <p>Prep\u00e1rate para automatizar tareas repetitivas de forma eficiente.</p>"},{"location":"09_03_bucles%20%28Copiar%29/","title":"Bucles for y Procesamiento de Archivos","text":"<p>Los bucles permiten repetir acciones sin escribir el mismo c\u00f3digo muchas veces.</p> <p>Sin bucle (repetitivo y tedioso): </p><pre><code>echo \"Procesando archivo1.txt\"\necho \"Procesando archivo2.txt\"\necho \"Procesando archivo3.txt\"\necho \"Procesando archivo4.txt\"\n# ... y as\u00ed hasta 100 archivos\n</code></pre><p></p> <p>Con bucle (eficiente): </p><pre><code>for i in {1..100}\ndo\n    echo \"Procesando archivo$i.txt\"\ndone\n</code></pre><p></p>"},{"location":"09_03_bucles%20%28Copiar%29/#bucle-for-basico","title":"Bucle <code>for</code> B\u00e1sico","text":"<p>Sintaxis</p> <pre><code>for variable in lista\ndo\n    # Comandos a repetir\ndone\n</code></pre> <p>Ejemplo: Lista de nombres</p> <pre><code>#!/bin/bash\n\nfor nombre in Sergio Ana Mar\u00eda Juan\ndo\n    echo \"Hola $nombre\"\ndone\n</code></pre> <p>Salida: </p><pre><code>Hola Sergio\nHola Ana\nHola Mar\u00eda\nHola Juan\n</code></pre><p></p> <p>Explicaci\u00f3n:</p> <ul> <li><code>for nombre in ...</code> \u2192 por cada elemento de la lista</li> <li><code>nombre</code> toma el valor de cada elemento (Sergio, luego Ana, etc.)</li> <li><code>do ... done</code> \u2192 comandos que se repiten</li> </ul>"},{"location":"09_03_bucles%20%28Copiar%29/#bucle-for-con-rangos-numericos","title":"Bucle for con Rangos Num\u00e9ricos","text":"<p>Al hacer un bucle con un rango num\u00e9rico, establecemos el primer elementos de la lista y el \u00faltimo, y en cada iteraci\u00f3n del bucle, la variable definida se incrementa en 1 o tambi\u00e9n es posible indicar el incremento que queremos hacer:</p> <p>Sintaxis del rango:</p> <ul> <li><code>{inicio..fin}</code> \u2192 de inicio a fin de 1 en 1</li> <li><code>{inicio..fin..incremento}</code> \u2192 con incremento personalizado</li> </ul> <p>Veamos un ejemplo de un incremento sencillo de uno en uno</p> <p>Rango simple</p> <pre><code>#!/bin/bash\n\nfor numero in {1..5}\ndo\n    echo \"N\u00famero: $numero\"\ndone\n</code></pre> <p>Salida: </p><pre><code>N\u00famero: 1\nN\u00famero: 2\nN\u00famero: 3\nN\u00famero: 4\nN\u00famero: 5\n</code></pre><p></p> <p>Y ahora de un incremento personalizado, en este caso, comenzamos por el 0 e incrementamos de 2 en 2 hasta el 10, o sea, los n\u00fameros pares entre 0 y 10:</p> <p>Rango con incremento</p> <pre><code>#!/bin/bash\n\n# De 2 en 2\nfor numero in {0..10..2}\ndo\n    echo \"N\u00famero: $numero\"\ndone\n</code></pre> <p>Salida: </p><pre><code>N\u00famero: 0\nN\u00famero: 2\nN\u00famero: 4\nN\u00famero: 6\nN\u00famero: 8\nN\u00famero: 10\n</code></pre><p></p>"},{"location":"09_03_bucles%20%28Copiar%29/#procesar-archivos-con-bucles","title":"Procesar Archivos con Bucles \u2b50","text":"<p>Esta es una de las funcionalidades m\u00e1s \u00fatiles en administraci\u00f3n de sistemas.</p> <p>Listar archivos por tipo</p> <pre><code>#!/bin/bash\n\necho \"Archivos .txt encontrados:\"\n\nfor archivo in *.txt\ndo\n    echo \"- $archivo\"\ndone\n</code></pre> <p>Si tienes: <code>documento1.txt</code>, <code>notas.txt</code>, <code>informe.txt</code></p> <p>Salida: </p><pre><code>Archivos .txt encontrados:\n- documento1.txt\n- notas.txt\n- informe.txt\n</code></pre><p></p> <p>Copiar m\u00faltiples archivos</p> <pre><code>#!/bin/bash\n\n# Crear directorio de backup si no existe\nif [ ! -d \"backup\" ]; then\n    mkdir backup\nfi\n\n# Copiar todos los .txt\nfor archivo in *.txt\ndo\n    cp \"$archivo\" backup/\n    echo \"Copiado: $archivo\"\ndone\n\necho \"Backup completado\"\n</code></pre> <p>Renombrar m\u00faltiples archivos</p> <pre><code>#!/bin/bash\n\n# Cambiar extensi\u00f3n .txt a .bak\nfor archivo in *.txt\ndo\n    nuevo=\"${archivo%.txt}.bak\"\n    mv \"$archivo\" \"$nuevo\"\n    echo \"$archivo \u2192 $nuevo\"\ndone\n</code></pre> <p>Explicaci\u00f3n de <code>${archivo%.txt}</code>:</p> <ul> <li>Elimina <code>.txt</code> del final del nombre</li> <li>Ejemplo: <code>documento.txt</code> \u2192 <code>documento</code></li> <li>Luego a\u00f1adimos <code>.bak</code> \u2192 <code>documento.bak</code></li> </ul>"},{"location":"09_03_bucles%20%28Copiar%29/#combinar-bucles-con-condicionales","title":"Combinar Bucles con Condicionales","text":"<p>Ejemplo: Procesar solo archivos que existen</p> <pre><code>#!/bin/bash\n\nfor archivo in *.txt\ndo\n    if [ -f \"$archivo\" ]; then\n        echo \"Procesando: $archivo\"\n        # Hacer algo con el archivo\n    fi\ndone\n</code></pre> <p>Ejemplo: Copiar solo archivos no vac\u00edos</p> <pre><code>#!/bin/bash\n\nmkdir -p backup\n\nfor archivo in *.txt\ndo\n    if [ -s \"$archivo\" ]; then\n        cp \"$archivo\" backup/\n        echo \"\u2713 Copiado: $archivo (no vac\u00edo)\"\n    else\n        echo \"\u2717 Omitido: $archivo (vac\u00edo)\"\n    fi\ndone\n</code></pre> <p>Nota: <code>-s</code> verifica que el archivo NO est\u00e1 vac\u00edo</p>"},{"location":"09_03_bucles%20%28Copiar%29/#ejemplos-practicos-completos","title":"Ejemplos Pr\u00e1cticos Completos","text":"<p>Ejemplo 1: Crear m\u00faltiples archivos</p> <pre><code>#!/bin/bash\n\necho \"Creando archivos de prueba...\"\n\nfor i in {1..10}\ndo\n    touch \"archivo$i.txt\"\n    echo \"Creado: archivo$i.txt\"\ndone\n\necho \"\u2713 10 archivos creados\"\n</code></pre> <p>Ejemplo 2: Mostrar informaci\u00f3n de archivos</p> <pre><code>#!/bin/bash\n\necho \"==========================================\"\necho \"INFORMACI\u00d3N DE ARCHIVOS .SH\"\necho \"==========================================\"\n\nfor script in *.sh\ndo\n    if [ -f \"$script\" ]; then\n        tamano=$(du -h \"$script\" | cut -f1)\n\n        echo \"Archivo: $script\"\n        echo \"  Tama\u00f1o: $tamano\"\n\n        if [ -x \"$script\" ]; then\n            echo \"  Ejecutable: S\u00cd\"\n        else\n            echo \"  Ejecutable: NO\"\n        fi\n\n        echo \"---\"\n    fi\ndone\n</code></pre> <p>Ejemplo 3: Backup selectivo</p> <pre><code>#!/bin/bash\n# Hacer backup solo de archivos modificados hoy\n\nfecha_hoy=$(date +%Y-%m-%d)\nmkdir -p \"backup_$fecha_hoy\"\n\ncontador=0\n\nfor archivo in *\ndo\n    if [ -f \"$archivo\" ]; then\n        # Verificar si fue modificado hoy\n        fecha_mod=$(date -r \"$archivo\" +%Y-%m-%d)\n\n        if [ \"$fecha_mod\" = \"$fecha_hoy\" ]; then\n            cp \"$archivo\" \"backup_$fecha_hoy/\"\n            echo \"\u2713 Respaldado: $archivo\"\n            contador=$((contador + 1))\n        fi\n    fi\ndone\n\necho \"==========================================\"\necho \"Total de archivos respaldados: $contador\"\necho \"Ubicaci\u00f3n: backup_$fecha_hoy/\"\necho \"==========================================\"\n</code></pre>"},{"location":"09_03_bucles%20%28Copiar%29/#ejercicios-practicos","title":"Ejercicios Pr\u00e1cticos","text":"<p>Ejercicio 1: Crear M\u00faltiples Directorios</p> <p>Objetivo: Crear un script que cree directorios de manera autom\u00e1tica.</p> <p>Instrucciones:</p> <ol> <li>Crear archivo <code>crear_carpetas.sh</code></li> <li>Crear 5 carpetas llamadas <code>carpeta1</code>, <code>carpeta2</code>, ..., <code>carpeta5</code></li> <li>Mostrar mensaje por cada carpeta creada</li> </ol> Soluci\u00f3n: Intenta resolver sin mirar soluci\u00f3n <pre><code>#!/bin/bash\n\necho \"Creando carpetas...\"\n\nfor i in {1..5}\ndo\n    mkdir \"carpeta$i\"\n    echo \"\u2713 Creada: carpeta$i\"\ndone\n\necho \"==========================================\"\necho \"5 carpetas creadas exitosamente\"\n</code></pre> <p>Probar: </p><pre><code>chmod +x crear_carpetas.sh\n./crear_carpetas.sh\nls -d carpeta*\n</code></pre><p></p> <p>Ejercicio 2: Backup de Archivos de Texto</p> <p>Objetivo: Crear un script que copie todos los archivos .txt a una carpeta de backup.</p> <p>Instrucciones:</p> <ol> <li>Crear archivo <code>backup_txt.sh</code></li> <li>Crear carpeta <code>backup_txt</code> si no existe</li> <li>Copiar todos los .txt a esa carpeta</li> <li>Contar cu\u00e1ntos archivos se copiaron</li> </ol> Soluci\u00f3n: Intenta resolver sin mirar soluci\u00f3n <pre><code>#!/bin/bash\n\n# Crear directorio de backup\nif [ ! -d \"backup_txt\" ]; then\n    mkdir backup_txt\n    echo \"\u2713 Directorio backup_txt creado\"\nfi\n\n# Contador\ncontador=0\n\n# Copiar archivos\necho \"Iniciando backup...\"\n\nfor archivo in *.txt\ndo\n    # Verificar que existe (por si no hay .txt)\n    if [ -f \"$archivo\" ]; then\n        cp \"$archivo\" backup_txt/\n        echo \"\u2713 Copiado: $archivo\"\n        contador=$((contador + 1))\n    fi\ndone\n\n# Resumen\necho \"==========================================\"\nif [ $contador -eq 0 ]; then\n    echo \"No se encontraron archivos .txt\"\nelse\n    echo \"Total de archivos copiados: $contador\"\n    echo \"Ubicaci\u00f3n: backup_txt/\"\nfi\necho \"==========================================\"\n</code></pre> <p>Probar: </p><pre><code># Crear algunos archivos de prueba\ntouch archivo1.txt archivo2.txt archivo3.txt\n\n# Ejecutar script\nchmod +x backup_txt.sh\n./backup_txt.sh\n\n# Verificar\nls backup_txt/\n</code></pre><p></p> <p>Ejercicio 3: Renombrador Masivo</p> <p>Objetivo: Crear un script que a\u00f1ada prefijo a m\u00faltiples archivos.</p> <p>Requisitos:</p> <ol> <li>El script debe llamarse <code>renombrar.sh</code></li> <li>Debe recibir como par\u00e1metro el prefijo a a\u00f1adir</li> <li>Debe renombrar todos los archivos .txt a\u00f1adiendo el prefijo</li> <li>Ejemplo: Si ejecutas <code>./renombrar.sh old_</code>, el archivo <code>archivo.txt</code> se renombra a <code>old_archivo.txt</code></li> <li>Debe contar cu\u00e1ntos archivos se renombraron</li> </ol> <p>Estructura esperada: </p><pre><code>#!/bin/bash\n# Script: renombrar.sh\n# Uso: ./renombrar.sh PREFIJO\n\n# Verificar que se pas\u00f3 un par\u00e1metro\n# Capturar el prefijo\n# Inicializar contador\n# Bucle for por cada .txt\n#   - Crear nuevo nombre con prefijo\n#   - Renombrar archivo\n#   - Incrementar contador\n# Mostrar resumen\n</code></pre><p></p> <p>Ejemplo de ejecuci\u00f3n: </p><pre><code># Crear archivos de prueba\ntouch doc1.txt doc2.txt doc3.txt\n\n# Ejecutar script\n./renombrar.sh backup_\n</code></pre><p></p> <p>Salida esperada: </p><pre><code>Renombrando archivos...\n\u2713 doc1.txt \u2192 backup_doc1.txt\n\u2713 doc2.txt \u2192 backup_doc2.txt\n\u2713 doc3.txt \u2192 backup_doc3.txt\n==========================================\nTotal de archivos renombrados: 3\n</code></pre><p></p> <p>Pistas:</p> <ul> <li>Usa <code>$1</code> para capturar el prefijo</li> <li>Usa <code>mv</code> para renombrar: <code>mv \"$archivo\" \"$prefijo$archivo\"</code></li> <li>Usa un contador: <code>contador=$((contador + 1))</code></li> </ul> <p>Ejercicio Avanzado (Opcional). Organizador de Archivos por Extensi\u00f3n</p> <p>Crear un script que organice archivos en carpetas seg\u00fan su extensi\u00f3n:</p> <pre><code>??? success \"Soluci\u00f3n: Intenta resolver sin mirar soluci\u00f3n\"\n\n```bash\n#!/bin/bash\n# organizador.sh\n\necho \"Organizando archivos...\"\n\n# Crear carpetas para cada tipo\nmkdir -p imagenes documentos scripts otros\n\n# Procesar cada archivo\nfor archivo in *\ndo\n    # Solo procesar archivos (no directorios)\n    if [ -f \"$archivo\" ]; then\n\n        # Obtener extensi\u00f3n\n        if [[ \"$archivo\" == *.jpg ]] || [[ \"$archivo\" == *.png ]]; then\n            mv \"$archivo\" imagenes/\n            echo \"\u2713 $archivo \u2192 imagenes/\"\n\n        elif [[ \"$archivo\" == *.txt ]] || [[ \"$archivo\" == *.pdf ]]; then\n            mv \"$archivo\" documentos/\n            echo \"\u2713 $archivo \u2192 documentos/\"\n\n        elif [[ \"$archivo\" == *.sh ]]; then\n            mv \"$archivo\" scripts/\n            echo \"\u2713 $archivo \u2192 scripts/\"\n\n        else\n            mv \"$archivo\" otros/\n            echo \"\u2713 $archivo \u2192 otros/\"\n        fi\n    fi\ndone\n\necho \"==========================================\"\necho \"Archivos organizados correctamente\"\n```\n</code></pre>"},{"location":"09_03_bucles%20%28Copiar%29/#resumen-de-comandos","title":"Resumen de Comandos","text":"<p>Bucle for b\u00e1sico</p> <pre><code>for variable in lista\ndo\n    comandos\ndone\n</code></pre> <p>Rangos num\u00e9ricos</p> <pre><code>for i in {1..10}; do          # Del 1 al 10\nfor i in {0..20..2}; do       # Del 0 al 20 de 2 en 2\nfor i in {10..1}; do          # Del 10 al 1 (descendente)\n</code></pre> <p>Procesar archivos</p> <pre><code>for archivo in *.txt; do      # Todos los .txt\nfor archivo in *.sh; do       # Todos los .sh\nfor archivo in *; do          # Todos los archivos\n</code></pre> <p>Manipulaci\u00f3n de nombres</p> <pre><code>${archivo%.txt}               # Quita .txt del final\n${archivo#prefijo_}           # Quita prefijo_ del inicio\n</code></pre> <p>Incrementar contador</p> <pre><code>contador=0\ncontador=$((contador + 1))\n</code></pre>"},{"location":"09_03_bucles%20%28Copiar%29/#tareas-extra","title":"Tareas extra","text":"<p>Tarea 1: Generador de Estructura de Proyecto</p> <p>Crear un script <code>proyecto.sh</code> que:</p> <ol> <li>Reciba como par\u00e1metro el nombre del proyecto</li> <li>Cree la siguiente estructura: <pre><code>nombre_proyecto/\n\u251c\u2500\u2500 src/\n\u251c\u2500\u2500 docs/\n\u251c\u2500\u2500 tests/\n\u251c\u2500\u2500 config/\n\u2514\u2500\u2500 README.txt\n</code></pre></li> <li>Dentro de cada carpeta, cree un archivo <code>README.txt</code> con el texto: \"Carpeta para [nombre de la carpeta]\"</li> </ol> Pistas: <pre><code>proyecto=$1\nmkdir -p \"$proyecto\"/{src,docs,tests,config}\n\nfor carpeta in src docs tests config\ndo\n    echo \"Carpeta para $carpeta\" &gt; \"$proyecto/$carpeta/README.txt\"\ndone\n</code></pre> <p>Tarea 2: Informe de Archivos</p> <p>Crear un script <code>informe.sh</code> que:</p> <ol> <li>Cuente cu\u00e1ntos archivos hay de cada tipo (.txt, .sh, .pdf)</li> <li>Muestre el total de cada tipo</li> <li>Muestre el tama\u00f1o total de todos los archivos</li> </ol> <p>Ejemplo de salida: </p><pre><code>========================================\nINFORME DE ARCHIVOS\n========================================\nArchivos .txt: 5\nArchivos .sh: 3\nArchivos .pdf: 2\n----------------------------------------\nTotal de archivos: 10\nTama\u00f1o total: 2.3M\n========================================\n</code></pre><p></p> <p>Reto Extra </p> <p>Crear un script que:</p> <ol> <li>Busque todos los archivos <code>.sh</code> en el directorio actual</li> <li>Por cada uno, verifique si tiene permisos de ejecuci\u00f3n</li> <li>Si NO los tiene, a\u00f1adirlos autom\u00e1ticamente</li> <li>Contar cu\u00e1ntos scripts se modificaron</li> </ol> Intenta antes de mirar la soluci\u00f3n <pre><code>#!/bin/bash\n\nmodificados=0\n\nfor script in *.sh\ndo\n    if [ -f \"$script\" ]; then\n        if [ ! -x \"$script\" ]; then\n            chmod +x \"$script\"\n            echo \"\u2713 Permisos a\u00f1adidos a: $script\"\n            modificados=$((modificados + 1))\n        else\n            echo \"\u25cb $script ya es ejecutable\"\n        fi\n    fi\ndone\n\necho \"==========================================\"\necho \"Scripts modificados: $modificados\"\n</code></pre>"},{"location":"09_03_bucles%20%28Copiar%29/#consejos-y-buenas-practicas","title":"Consejos y Buenas Pr\u00e1cticas","text":"<p>1. Siempre verificar que los archivos existen</p> <pre><code>for archivo in *.txt\ndo\n    if [ -f \"$archivo\" ]; then\n        # Procesar archivo\n    fi\ndone\n</code></pre> <p>2. Usar comillas en nombres de archivos</p> <pre><code># \u2705 Bien (funciona con espacios en nombres)\ncp \"$archivo\" backup/\n\n# \u274c Mal (falla con espacios)\ncp $archivo backup/\n</code></pre> <p>3. Inicializar contadores</p> <pre><code>contador=0\n\nfor item in lista\ndo\n    # hacer algo\n    contador=$((contador + 1))\ndone\n\necho \"Total: $contador\"\n</code></pre> <p>4. Mostrar progreso</p> <pre><code>for i in {1..100}\ndo\n    echo \"Procesando archivo $i de 100...\"\n    # hacer algo\ndone\n</code></pre> <p>5. Combinar con par\u00e1metros</p> <pre><code>#!/bin/bash\n# Procesar archivos con extensi\u00f3n pasada como par\u00e1metro\n\nextension=$1\n\nfor archivo in *.$extension\ndo\n    if [ -f \"$archivo\" ]; then\n        echo \"Procesando: $archivo\"\n    fi\ndone\n</code></pre>"},{"location":"09_03_bucles/","title":"Bucles for y Procesamiento de Archivos","text":"<p>Los bucles permiten repetir acciones sin escribir el mismo c\u00f3digo muchas veces.</p> <p>Sin bucle (repetitivo y tedioso): </p><pre><code>echo \"Procesando archivo1.txt\"\necho \"Procesando archivo2.txt\"\necho \"Procesando archivo3.txt\"\necho \"Procesando archivo4.txt\"\n# ... y as\u00ed hasta 100 archivos\n</code></pre><p></p> <p>Con bucle (eficiente): </p><pre><code>for i in {1..100}\ndo\n    echo \"Procesando archivo$i.txt\"\ndone\n</code></pre><p></p>"},{"location":"09_03_bucles/#bucle-for-basico","title":"Bucle <code>for</code> B\u00e1sico","text":"<p>Sintaxis</p> <pre><code>for variable in lista\ndo\n    # Comandos a repetir\ndone\n</code></pre> <p>Ejemplo: Lista de nombres</p> <pre><code>#!/bin/bash\n\nfor nombre in Sergio Ana Mar\u00eda Juan\ndo\n    echo \"Hola $nombre\"\ndone\n</code></pre> <p>Salida: </p><pre><code>Hola Sergio\nHola Ana\nHola Mar\u00eda\nHola Juan\n</code></pre><p></p> <p>Explicaci\u00f3n:</p> <ul> <li><code>for nombre in ...</code> \u2192 por cada elemento de la lista</li> <li><code>nombre</code> toma el valor de cada elemento (Sergio, luego Ana, etc.)</li> <li><code>do ... done</code> \u2192 comandos que se repiten</li> </ul> <p>Como hemos visto en el ejemplo anterior, se produce una interaci\u00f3n por cada uno de los elementos separados por espacios en blanco que tenemos. Por lo tanto si usamos una variable con diferentes elementos separados por espacios en blanco, ser\u00e1 lo mismo:</p> <p>Ejemplo: Lista de nombres dentro de variable</p> <pre><code>#!/bin/bash\n\n# Lista de elementos separados por comas, entre comillas\nlista=\"Sergio Ana Mar\u00eda Juan\"\nfor nombre in $lista\ndo\n    echo \"Hola $nombre\"\ndone\n</code></pre> <p>Salida: (la mismma que en el ejemplo anterior) </p><pre><code>Hola Sergio\nHola Ana\nHola Mar\u00eda\nHola Juan\n</code></pre><p></p> <p>y si damos una vuelta a lo que acabamos de hacer, supongamos que ejecutamos un comando, por ejemplo el comando <code>ls</code> y el resultado de su ejecuci\u00f3n lo mentemos en una variable en forma de lista. El resultado ser\u00e1 que el bucle recorre todos los elementos de la lista</p> <p>Ejemplo: Lista de nombres dentro de variable</p> <pre><code>#!/bin/bash\n\n# Lista de los ficheros que se encuentren en esta carpeta\nlista=$(ls)\nfor nombre in $lista\ndo\n    echo \"Fichero: $nombre\"\ndone\n</code></pre> <p>Salida: Lista de archivos de la carpeta </p><pre><code>Fichero: Archivo1.txt\nFichero: Archivo2.txt\nFichero: Archivo3.txt\n...\n</code></pre><p></p> <p>Explicaci\u00f3n:</p> <ul> <li>en la variable <code>lista</code> ahora tenemos el resultado de ejecutar el comando <code>ls</code></li> <li>se puede ejecutar cualquier comando que tenga como resultado elementos separados por espacios en blanco, por ejemplo <code>cat listado.txt</code> (listado de nombres en un fichero), <code>cat /etc/passwd | cut -f1 -d:</code> (listado de usuarios del sistema), ...</li> </ul>"},{"location":"09_03_bucles/#bucle-for-con-rangos-numericos","title":"Bucle for con Rangos Num\u00e9ricos","text":"<p>Al hacer un bucle con un rango num\u00e9rico, establecemos el primer elementos de la lista y el \u00faltimo, y en cada iteraci\u00f3n del bucle, la variable definida se incrementa en 1 o tambi\u00e9n es posible indicar el incremento que queremos hacer:</p> <p>Sintaxis del rango:</p> <ul> <li><code>{inicio..fin}</code> \u2192 de inicio a fin de 1 en 1</li> <li><code>{inicio..fin..incremento}</code> \u2192 con incremento personalizado</li> </ul> <p>Veamos un ejemplo de un incremento sencillo de uno en uno</p> <p>Rango simple</p> <pre><code>#!/bin/bash\n\nfor numero in {1..5}\ndo\n    echo \"N\u00famero: $numero\"\ndone\n</code></pre> <p>Salida: </p><pre><code>N\u00famero: 1\nN\u00famero: 2\nN\u00famero: 3\nN\u00famero: 4\nN\u00famero: 5\n</code></pre><p></p> <p>Y ahora de un incremento personalizado, en este caso, comenzamos por el 0 e incrementamos de 2 en 2 hasta el 10, o sea, los n\u00fameros pares entre 0 y 10:</p> <p>Rango con incremento</p> <pre><code>#!/bin/bash\n\n# De 2 en 2\nfor numero in {0..10..2}\ndo\n    echo \"N\u00famero: $numero\"\ndone\n</code></pre> <p>Salida: </p><pre><code>N\u00famero: 0\nN\u00famero: 2\nN\u00famero: 4\nN\u00famero: 6\nN\u00famero: 8\nN\u00famero: 10\n</code></pre><p></p>"},{"location":"09_03_bucles/#procesar-archivos-con-bucles","title":"Procesar Archivos con Bucles \u2b50","text":"<p>Esta es una de las funcionalidades m\u00e1s \u00fatiles en administraci\u00f3n de sistemas.</p> <p>Listar archivos por tipo</p> <pre><code>#!/bin/bash\n\necho \"Archivos .txt encontrados:\"\n\nfor archivo in *.txt\ndo\n    echo \"- $archivo\"\ndone\n</code></pre> <p>Si tienes: <code>documento1.txt</code>, <code>notas.txt</code>, <code>informe.txt</code></p> <p>Salida: </p><pre><code>Archivos .txt encontrados:\n- documento1.txt\n- notas.txt\n- informe.txt\n</code></pre><p></p> <p>Copiar m\u00faltiples archivos</p> <pre><code>#!/bin/bash\n\n# Crear directorio de backup si no existe\nif [ ! -d \"backup\" ]; then\n    mkdir backup\nfi\n\n# Copiar todos los .txt\nfor archivo in *.txt\ndo\n    cp \"$archivo\" backup/\n    echo \"Copiado: $archivo\"\ndone\n\necho \"Backup completado\"\n</code></pre> <p>Renombrar m\u00faltiples archivos</p> <pre><code>#!/bin/bash\n\n# Cambiar extensi\u00f3n .txt a .bak\nfor archivo in *.txt\ndo\n    nuevo=\"${archivo%.txt}.bak\"\n    mv \"$archivo\" \"$nuevo\"\n    echo \"$archivo \u2192 $nuevo\"\ndone\n</code></pre> <p>Explicaci\u00f3n de <code>${archivo%.txt}</code>:</p> <ul> <li>Elimina <code>.txt</code> del final del nombre</li> <li>Ejemplo: <code>documento.txt</code> \u2192 <code>documento</code></li> <li>Luego a\u00f1adimos <code>.bak</code> \u2192 <code>documento.bak</code></li> </ul>"},{"location":"09_03_bucles/#leer-archivos-linea-por-linea","title":"Leer Archivos L\u00ednea por L\u00ednea","text":"<p>En muchas ocasiones necesitamos procesar archivos de texto que contienen listas: usuarios, servidores, tareas, etc. El bucle <code>for</code> puede leer cada l\u00ednea de un archivo y procesarla autom\u00e1ticamente.</p> <p>Supongamos que tenemos un archivo <code>usuarios.txt</code> con este contenido:</p> <pre><code>sergio\nana\njuan\nmaria\n</code></pre> <p>Podemos procesar cada l\u00ednea as\u00ed:</p> <pre><code>#!/bin/bash\n\nfor usuario in $(cat usuarios.txt)\ndo\n    echo \"Procesando usuario: $usuario\"\n    # Aqu\u00ed podr\u00edamos crear el usuario, verificar si existe, etc.\ndone\n</code></pre> <p>Ejemplo: Crear usuarios desde un archivo</p> <p>Archivo <code>usuarios.txt</code>: </p><pre><code>alumno1\nalumno2\nalumno3\n</code></pre><p></p> <p>Script: </p><pre><code>#!/bin/bash\n\necho \"Creando usuarios desde archivo...\"\n\nfor usuario in $(cat usuarios.txt)\ndo\n    sudo useradd -m \"$usuario\"\n    echo \"Usuario creado: $usuario\"\ndone\n\necho \"Proceso completado\"\n</code></pre><p></p> <p>Ejemplo: Hacer ping a m\u00faltiples servidores</p> <p>Archivo <code>servidores.txt</code>: </p><pre><code>192.168.1.1\n192.168.1.10\n192.168.1.20\n8.8.8.8\n</code></pre><p></p> <p>Script: </p><pre><code>#!/bin/bash\n\necho \"Verificando conectividad...\"\n\nfor servidor in $(cat servidores.txt)\ndo\n    if ping -c 1 \"$servidor\" &amp;&gt; /dev/null; then\n        echo \"$servidor - Accesible\"\n    else\n        echo \"\u2717 $servidor - No accesible\"\n    fi\ndone\n</code></pre><p></p> <p>Limitaci\u00f3n importante</p> <p>Este m\u00e9todo funciona bien para archivos simples de una palabra por l\u00ednea. Si las l\u00edneas contienen espacios (ej: \"Juan P\u00e9rez\"), no funcionar\u00e1 correctamente porque el espacio se interpreta como separador.</p> <p>Para casos m\u00e1s complejos (l\u00edneas con espacios, caracteres especiales), se usa <code>while read</code>, que veremos en cursos m\u00e1s avanzados.</p>"},{"location":"09_03_bucles/#combinar-bucles-con-condicionales","title":"Combinar Bucles con Condicionales","text":"<p>Ejemplo: Procesar solo archivos que existen</p> <pre><code>#!/bin/bash\n\nfor archivo in *.txt\ndo\n    if [ -f \"$archivo\" ]; then\n        echo \"Procesando: $archivo\"\n        # Hacer algo con el archivo\n    fi\ndone\n</code></pre> <p>Ejemplo: Copiar solo archivos no vac\u00edos</p> <pre><code>#!/bin/bash\n\nmkdir -p backup\n\nfor archivo in *.txt\ndo\n    if [ -s \"$archivo\" ]; then\n        cp \"$archivo\" backup/\n        echo \"Copiado: $archivo (no vac\u00edo)\"\n    else\n        echo \"\u2717 Omitido: $archivo (vac\u00edo)\"\n    fi\ndone\n</code></pre> <p>Nota: <code>-s</code> verifica que el archivo NO est\u00e1 vac\u00edo</p>"},{"location":"09_03_bucles/#ejemplos-practicos-completos","title":"Ejemplos Pr\u00e1cticos Completos","text":"<p>Ejemplo 1: Crear m\u00faltiples archivos</p> <pre><code>#!/bin/bash\n\necho \"Creando archivos de prueba...\"\n\nfor i in {1..10}\ndo\n    touch \"archivo$i.txt\"\n    echo \"Creado: archivo$i.txt\"\ndone\n\necho \"10 archivos creados\"\n</code></pre> <p>Ejemplo 2: Mostrar informaci\u00f3n de archivos</p> <pre><code>#!/bin/bash\n\necho \"==========================================\"\necho \"INFORMACI\u00d3N DE ARCHIVOS .SH\"\necho \"==========================================\"\n\nfor script in *.sh\ndo\n    if [ -f \"$script\" ]; then\n        tamano=$(du -h \"$script\" | cut -f1)\n\n        echo \"Archivo: $script\"\n        echo \"  Tama\u00f1o: $tamano\"\n\n        if [ -x \"$script\" ]; then\n            echo \"  Ejecutable: S\u00cd\"\n        else\n            echo \"  Ejecutable: NO\"\n        fi\n\n        echo \"---\"\n    fi\ndone\n</code></pre> <p>Ejemplo 3: Backup selectivo</p> <pre><code>#!/bin/bash\n# Hacer backup solo de archivos modificados hoy\n\nfecha_hoy=$(date +%Y-%m-%d)\nmkdir -p \"backup_$fecha_hoy\"\n\ncontador=0\n\nfor archivo in *\ndo\n    if [ -f \"$archivo\" ]; then\n        # Verificar si fue modificado hoy\n        fecha_mod=$(date -r \"$archivo\" +%Y-%m-%d)\n\n        if [ \"$fecha_mod\" = \"$fecha_hoy\" ]; then\n            cp \"$archivo\" \"backup_$fecha_hoy/\"\n            echo \"Respaldado: $archivo\"\n            contador=$((contador + 1))\n        fi\n    fi\ndone\n\necho \"==========================================\"\necho \"Total de archivos respaldados: $contador\"\necho \"Ubicaci\u00f3n: backup_$fecha_hoy/\"\necho \"==========================================\"\n</code></pre>"},{"location":"09_03_bucles/#ejercicios-practicos","title":"Ejercicios Pr\u00e1cticos","text":"<p>Ejercicio 1: Crear M\u00faltiples Directorios</p> <p>Objetivo: Crear un script que cree directorios de manera autom\u00e1tica.</p> <p>Instrucciones:</p> <ol> <li>Crear archivo <code>crear_carpetas.sh</code></li> <li>Crear 5 carpetas llamadas <code>carpeta1</code>, <code>carpeta2</code>, ..., <code>carpeta5</code></li> <li>Mostrar mensaje por cada carpeta creada</li> </ol> Soluci\u00f3n: Intenta resolver sin mirar soluci\u00f3n <pre><code>#!/bin/bash\n\necho \"Creando carpetas...\"\n\nfor i in {1..5}\ndo\n    mkdir \"carpeta$i\"\n    echo \"Creada: carpeta$i\"\ndone\n\necho \"==========================================\"\necho \"5 carpetas creadas exitosamente\"\n</code></pre> <p>Probar: </p><pre><code>chmod +x crear_carpetas.sh\n./crear_carpetas.sh\nls -d carpeta*\n</code></pre><p></p> <p>Ejercicio 2: Backup de Archivos de Texto</p> <p>Objetivo: Crear un script que copie todos los archivos .txt a una carpeta de backup.</p> <p>Instrucciones:</p> <ol> <li>Crear archivo <code>backup_txt.sh</code></li> <li>Crear carpeta <code>backup_txt</code> si no existe</li> <li>Copiar todos los .txt a esa carpeta</li> <li>Contar cu\u00e1ntos archivos se copiaron</li> </ol> Soluci\u00f3n: Intenta resolver sin mirar soluci\u00f3n <pre><code>#!/bin/bash\n\n# Crear directorio de backup\nif [ ! -d \"backup_txt\" ]; then\n    mkdir backup_txt\n    echo \"Directorio backup_txt creado\"\nfi\n\n# Contador\ncontador=0\n\n# Copiar archivos\necho \"Iniciando backup...\"\n\nfor archivo in *.txt\ndo\n    # Verificar que existe (por si no hay .txt)\n    if [ -f \"$archivo\" ]; then\n        cp \"$archivo\" backup_txt/\n        echo \"Copiado: $archivo\"\n        contador=$((contador + 1))\n    fi\ndone\n\n# Resumen\necho \"==========================================\"\nif [ $contador -eq 0 ]; then\n    echo \"No se encontraron archivos .txt\"\nelse\n    echo \"Total de archivos copiados: $contador\"\n    echo \"Ubicaci\u00f3n: backup_txt/\"\nfi\necho \"==========================================\"\n</code></pre> <p>Probar: </p><pre><code># Crear algunos archivos de prueba\ntouch archivo1.txt archivo2.txt archivo3.txt\n\n# Ejecutar script\nchmod +x backup_txt.sh\n./backup_txt.sh\n\n# Verificar\nls backup_txt/\n</code></pre><p></p> <p>Ejercicio 3: Renombrador Masivo</p> <p>Objetivo: Crear un script que a\u00f1ada prefijo a m\u00faltiples archivos.</p> <p>Requisitos:</p> <ol> <li>El script debe llamarse <code>renombrar.sh</code></li> <li>Debe recibir como par\u00e1metro el prefijo a a\u00f1adir</li> <li>Debe renombrar todos los archivos .txt a\u00f1adiendo el prefijo</li> <li>Ejemplo: Si ejecutas <code>./renombrar.sh old_</code>, el archivo <code>archivo.txt</code> se renombra a <code>old_archivo.txt</code></li> <li>Debe contar cu\u00e1ntos archivos se renombraron</li> </ol> <p>Estructura esperada: </p><pre><code>#!/bin/bash\n# Script: renombrar.sh\n# Uso: ./renombrar.sh PREFIJO\n\n# Verificar que se pas\u00f3 un par\u00e1metro\n# Capturar el prefijo\n# Inicializar contador\n# Bucle for por cada .txt\n#   - Crear nuevo nombre con prefijo\n#   - Renombrar archivo\n#   - Incrementar contador\n# Mostrar resumen\n</code></pre><p></p> <p>Ejemplo de ejecuci\u00f3n: </p><pre><code># Crear archivos de prueba\ntouch doc1.txt doc2.txt doc3.txt\n\n# Ejecutar script\n./renombrar.sh backup_\n</code></pre><p></p> <p>Salida esperada: </p><pre><code>Renombrando archivos...\n\u2713 doc1.txt \u2192 backup_doc1.txt\n\u2713 doc2.txt \u2192 backup_doc2.txt\n\u2713 doc3.txt \u2192 backup_doc3.txt\n==========================================\nTotal de archivos renombrados: 3\n</code></pre><p></p> <p>Pistas:</p> <ul> <li>Usa <code>$1</code> para capturar el prefijo</li> <li>Usa <code>mv</code> para renombrar: <code>mv \"$archivo\" \"$prefijo$archivo\"</code></li> <li>Usa un contador: <code>contador=$((contador + 1))</code></li> </ul> <p>Ejercicio Avanzado (Opcional). Organizador de Archivos por Extensi\u00f3n</p> <p>Crear un script que organice archivos en carpetas seg\u00fan su extensi\u00f3n:</p> Soluci\u00f3n: Intenta resolver sin mirar soluci\u00f3n <pre><code>#!/bin/bash\n# organizador.sh\n\necho \"Organizando archivos...\"\n\n# Crear carpetas para cada tipo\nmkdir -p imagenes documentos scripts otros\n\n# Procesar cada archivo\nfor archivo in *\ndo\n    # Solo procesar archivos (no directorios)\n    if [ -f \"$archivo\" ]; then\n\n        # Obtener extensi\u00f3n\n        if [[ \"$archivo\" == *.jpg ]] || [[ \"$archivo\" == *.png ]]; then\n            mv \"$archivo\" imagenes/\n            echo \"$archivo \u2192 imagenes/\"\n\n        elif [[ \"$archivo\" == *.txt ]] || [[ \"$archivo\" == *.pdf ]]; then\n            mv \"$archivo\" documentos/\n            echo \"$archivo \u2192 documentos/\"\n\n        elif [[ \"$archivo\" == *.sh ]]; then\n            mv \"$archivo\" scripts/\n            echo \"$archivo \u2192 scripts/\"\n\n        else\n            mv \"$archivo\" otros/\n            echo \"$archivo \u2192 otros/\"\n        fi\n    fi\ndone\n\necho \"==========================================\"\necho \"Archivos organizados correctamente\"\n</code></pre>"},{"location":"09_03_bucles/#resumen-de-comandos","title":"Resumen de Comandos","text":"<p>Bucle for b\u00e1sico</p> <pre><code>for variable in lista\ndo\n    comandos\ndone\n</code></pre> <p>Rangos num\u00e9ricos</p> <pre><code>for i in {1..10}; do          # Del 1 al 10\nfor i in {0..20..2}; do       # Del 0 al 20 de 2 en 2\nfor i in {10..1}; do          # Del 10 al 1 (descendente)\n</code></pre> <p>Procesar archivos</p> <pre><code>for archivo in *.txt; do      # Todos los .txt\nfor archivo in *.sh; do       # Todos los .sh\nfor archivo in *; do          # Todos los archivos\n</code></pre> <p>Manipulaci\u00f3n de nombres</p> <pre><code>${archivo%.txt}               # Quita .txt del final\n${archivo#prefijo_}           # Quita prefijo_ del inicio\n</code></pre> <p>Incrementar contador</p> <pre><code>contador=0\ncontador=$((contador + 1))\n</code></pre>"},{"location":"09_03_bucles/#tareas-extra","title":"Tareas extra","text":"<p>Tarea 1: Generador de Estructura de Proyecto</p> <p>Crear un script <code>proyecto.sh</code> que:</p> <ol> <li>Reciba como par\u00e1metro el nombre del proyecto</li> <li>Cree la siguiente estructura: <pre><code>nombre_proyecto/\n\u251c\u2500\u2500 src/\n\u251c\u2500\u2500 docs/\n\u251c\u2500\u2500 tests/\n\u251c\u2500\u2500 config/\n\u2514\u2500\u2500 README.txt\n</code></pre></li> <li>Dentro de cada carpeta, cree un archivo <code>README.txt</code> con el texto: \"Carpeta para [nombre de la carpeta]\"</li> </ol> Pistas: <pre><code>proyecto=$1\nmkdir -p \"$proyecto\"/{src,docs,tests,config}\n\nfor carpeta in src docs tests config\ndo\n    echo \"Carpeta para $carpeta\" &gt; \"$proyecto/$carpeta/README.txt\"\ndone\n</code></pre> <p>Tarea 2: Informe de Archivos</p> <p>Crear un script <code>informe.sh</code> que:</p> <ol> <li>Cuente cu\u00e1ntos archivos hay de cada tipo (.txt, .sh, .pdf)</li> <li>Muestre el total de cada tipo</li> <li>Muestre el tama\u00f1o total de todos los archivos</li> </ol> <p>Ejemplo de salida: </p><pre><code>========================================\nINFORME DE ARCHIVOS\n========================================\nArchivos .txt: 5\nArchivos .sh: 3\nArchivos .pdf: 2\n----------------------------------------\nTotal de archivos: 10\nTama\u00f1o total: 2.3M\n========================================\n</code></pre><p></p> <p>Reto Extra </p> <p>Crear un script que:</p> <ol> <li>Busque todos los archivos <code>.sh</code> en el directorio actual</li> <li>Por cada uno, verifique si tiene permisos de ejecuci\u00f3n</li> <li>Si NO los tiene, a\u00f1adirlos autom\u00e1ticamente</li> <li>Contar cu\u00e1ntos scripts se modificaron</li> </ol> Intenta antes de mirar la soluci\u00f3n <pre><code>#!/bin/bash\n\nmodificados=0\n\nfor script in *.sh\ndo\n    if [ -f \"$script\" ]; then\n        if [ ! -x \"$script\" ]; then\n            chmod +x \"$script\"\n            echo \"Permisos a\u00f1adidos a: $script\"\n            modificados=$((modificados + 1))\n        else\n            echo \"\u25cb $script ya es ejecutable\"\n        fi\n    fi\ndone\n\necho \"==========================================\"\necho \"Scripts modificados: $modificados\"\n</code></pre>"},{"location":"09_03_bucles/#consejos-y-buenas-practicas","title":"Consejos y Buenas Pr\u00e1cticas","text":"<p>1. Siempre verificar que los archivos existen</p> <pre><code>for archivo in *.txt\ndo\n    if [ -f \"$archivo\" ]; then\n        # Procesar archivo\n    fi\ndone\n</code></pre> <p>2. Usar comillas en nombres de archivos</p> <pre><code># \u2705 Bien (funciona con espacios en nombres)\ncp \"$archivo\" backup/\n\n# \u274c Mal (falla con espacios)\ncp $archivo backup/\n</code></pre> <p>3. Inicializar contadores</p> <pre><code>contador=0\n\nfor item in lista\ndo\n    # hacer algo\n    contador=$((contador + 1))\ndone\n\necho \"Total: $contador\"\n</code></pre> <p>4. Mostrar progreso</p> <pre><code>for i in {1..100}\ndo\n    echo \"Procesando archivo $i de 100...\"\n    # hacer algo\ndone\n</code></pre> <p>5. Combinar con par\u00e1metros</p> <pre><code>#!/bin/bash\n# Procesar archivos con extensi\u00f3n pasada como par\u00e1metro\n\nextension=$1\n\nfor archivo in *.$extension\ndo\n    if [ -f \"$archivo\" ]; then\n        echo \"Procesando: $archivo\"\n    fi\ndone\n</code></pre>"},{"location":"09_04_backups_tar/","title":"Uso Profesional de tar para Backups","text":"<p><code>tar</code> (Tape ARchive) es la herramienta est\u00e1ndar de Linux para crear archivos comprimidos. Se utiliza principalmente para backups porque empaqueta m\u00faltiples archivos en uno solo, comprime para ahorrar espacio y preserva permisos y estructura de directorios.</p> <p>Usos comunes: - Backup de documentos importantes - Backup de configuraciones del sistema - Archivar proyectos completos - Distribuir software</p>"},{"location":"09_04_backups_tar/#comandos-basicos","title":"Comandos B\u00e1sicos","text":"<p>La sintaxis b\u00e1sica para crear un backup comprimido es:</p> <pre><code>tar -czf backup.tar.gz /ruta/a/respaldar\n</code></pre> <p>Opciones explicadas: - <code>-c</code> \u2192 crear archivo (create) - <code>-z</code> \u2192 comprimir con gzip - <code>-f</code> \u2192 especificar nombre del archivo (file)</p> <p>El orden importa</p> <p>Siempre usa <code>-czf</code> para crear o <code>-xzf</code> para extraer. El orden de las opciones es importante.</p> <p>Ejemplo b\u00e1sico: Backup de Documentos</p> <pre><code># Hacer backup de Documentos\ntar -czf backup_documentos.tar.gz /home/usuario/Documentos\n</code></pre> <p>Esto crea el archivo <code>backup_documentos.tar.gz</code> con todo el contenido de Documentos comprimido.</p>"},{"location":"09_04_backups_tar/#anadir-fecha-al-nombre","title":"A\u00f1adir Fecha al Nombre","text":"<p>Es fundamental incluir la fecha en el nombre del backup para saber cu\u00e1ndo se cre\u00f3 y mantener m\u00faltiples versiones.</p> <p>Formatos de fecha \u00fatiles: </p><pre><code># Formato: AAAAMMDD\nfecha=$(date +%Y%m%d)\necho $fecha\n# Salida: 20260213\n\n# Formato: AAAAMMDD_HHMMSS\nfecha=$(date +%Y%m%d_%H%M%S)\necho $fecha\n# Salida: 20260213_143527\n</code></pre><p></p> <p>Backup con fecha</p> <pre><code>#!/bin/bash\n\nfecha=$(date +%Y%m%d)\ntar -czf \"backup_$fecha.tar.gz\" /home/usuario/Documentos\n\necho \"Backup creado: backup_$fecha.tar.gz\"\n</code></pre> <p>Resultado: <code>backup_20260213.tar.gz</code></p>"},{"location":"09_04_backups_tar/#extraer-backups","title":"Extraer Backups","text":"<p>Para recuperar los datos de un backup, usamos la opci\u00f3n <code>-x</code> (extract):</p> <pre><code># Extraer en directorio actual\ntar -xzf backup.tar.gz\n\n# Extraer en ubicaci\u00f3n espec\u00edfica\ntar -xzf backup.tar.gz -C /ruta/destino/\n</code></pre> <p>Ver contenido sin extraer</p> <p>Antes de extraer, puedes ver qu\u00e9 contiene el backup: </p><pre><code>tar -tzf backup.tar.gz\n\n# Ver solo los primeros 10 archivos\ntar -tzf backup.tar.gz | head -n 10\n</code></pre><p></p>"},{"location":"09_04_backups_tar/#excluir-archivos-innecesarios","title":"Excluir Archivos Innecesarios","text":"<p>No todos los archivos deben incluirse en el backup. Hay archivos temporales, cach\u00e9s y descargas que ocupan mucho espacio sin aportar valor.</p> <p>Archivos comunes a excluir: - <code>*.tmp</code> \u2192 Archivos temporales - <code>*.cache</code> \u2192 Archivos de cach\u00e9 - <code>*~</code> \u2192 Copias de respaldo de editores - <code>Descargas</code> \u2192 Carpeta de descargas - <code>.cache</code> \u2192 Cach\u00e9 del sistema - <code>.thumbnails</code> \u2192 Miniaturas de im\u00e1genes</p> <p>Backup con exclusiones</p> <pre><code>#!/bin/bash\n\ntar -czf backup.tar.gz \\\n    --exclude='*.tmp' \\\n    --exclude='*.cache' \\\n    --exclude='*~' \\\n    --exclude='Descargas' \\\n    --exclude='.cache' \\\n    /home/usuario/\n</code></pre> <p>Backup limpio del home</p> <pre><code>#!/bin/bash\n\ntar -czf backup_limpio.tar.gz \\\n    --exclude='Descargas' \\\n    --exclude='.cache' \\\n    --exclude='.thumbnails' \\\n    /home/usuario/Documentos\n</code></pre>"},{"location":"09_04_backups_tar/#verificar-tamano-y-contenido","title":"Verificar Tama\u00f1o y Contenido","text":"<p>Despu\u00e9s de crear un backup, es \u00fatil verificar su tama\u00f1o:</p> <pre><code># Ver tama\u00f1o legible\ndu -h backup.tar.gz\n# Salida: 2.3M    backup.tar.gz\n</code></pre> <p>Script con verificaci\u00f3n de tama\u00f1o</p> <pre><code>#!/bin/bash\n\ntar -czf backup.tar.gz /home/usuario/Documentos\n\ntamano=$(du -h backup.tar.gz | cut -f1)\necho \"Backup creado: $tamano\"\n</code></pre> <p>Comparar tama\u00f1o original vs comprimido</p> <pre><code>#!/bin/bash\n\n# Tama\u00f1o original\noriginal=$(du -sh /home/usuario/Documentos | cut -f1)\n\n# Crear backup\ntar -czf backup.tar.gz /home/usuario/Documentos\n\n# Tama\u00f1o del backup\ncomprimido=$(du -h backup.tar.gz | cut -f1)\n\necho \"Tama\u00f1o original: $original\"\necho \"Tama\u00f1o comprimido: $comprimido\"\n</code></pre>"},{"location":"09_04_backups_tar/#verificar-integridad-del-backup","title":"Verificar Integridad del Backup","text":"<p>Es crucial verificar que el backup se cre\u00f3 correctamente y no est\u00e1 corrupto.</p> <p>M\u00e9todo 1: Verificar c\u00f3digo de salida</p> <pre><code>#!/bin/bash\n\ntar -czf backup.tar.gz /home/usuario/Documentos\n\nif [ $? -eq 0 ]; then\n    echo \"\u2713 Backup creado correctamente\"\nelse\n    echo \"\u2717 Error al crear el backup\"\nfi\n</code></pre> <p>C\u00f3digo de salida</p> <p>La variable <code>$?</code> contiene el c\u00f3digo de salida del \u00faltimo comando: - <code>0</code> = \u00e9xito - Cualquier otro n\u00famero = error</p> <p>M\u00e9todo 2: Intentar listar contenido</p> <pre><code>#!/bin/bash\n\n# Crear backup\ntar -czf backup.tar.gz /home/usuario/Documentos\n\n# Verificar integridad\nif tar -tzf backup.tar.gz &gt; /dev/null 2&gt;&amp;1; then\n    echo \"\u2713 Backup \u00edntegro\"\nelse\n    echo \"\u2717 Backup corrupto\"\n    rm backup.tar.gz\nfi\n</code></pre>"},{"location":"09_04_backups_tar/#rotacion-de-backups-antiguos","title":"Rotaci\u00f3n de Backups Antiguos","text":"<p>Mantener todos los backups ocupa mucho espacio. Es necesario eliminar los antiguos autom\u00e1ticamente.</p> <pre><code># Eliminar backups de m\u00e1s de 7 d\u00edas\nfind /backups -name \"backup_*.tar.gz\" -mtime +7 -delete\n</code></pre> <p>Explicaci\u00f3n: - <code>find /backups</code> \u2192 buscar en /backups - <code>-name \"backup_*.tar.gz\"</code> \u2192 archivos que coincidan con el patr\u00f3n - <code>-mtime +7</code> \u2192 modificados hace m\u00e1s de 7 d\u00edas - <code>-delete</code> \u2192 eliminarlos</p> <p>Script con rotaci\u00f3n</p> <pre><code>#!/bin/bash\n\nDESTINO=\"/backups\"\nDIAS_RETENCION=7\n\necho \"Eliminando backups antiguos (&gt;$DIAS_RETENCION d\u00edas)...\"\n\n# Contar cu\u00e1ntos se eliminar\u00e1n\ncantidad=$(find \"$DESTINO\" -name \"backup_*.tar.gz\" -mtime +$DIAS_RETENCION | wc -l)\n\nif [ $cantidad -gt 0 ]; then\n    find \"$DESTINO\" -name \"backup_*.tar.gz\" -mtime +$DIAS_RETENCION -delete\n    echo \"\u2713 Eliminados $cantidad backups antiguos\"\nelse\n    echo \"\u25cb No hay backups antiguos que eliminar\"\nfi\n</code></pre>"},{"location":"09_04_backups_tar/#script-de-backup-completo","title":"Script de Backup Completo","text":"<p>Versi\u00f3n b\u00e1sica</p> <pre><code>#!/bin/bash\n# Script de backup b\u00e1sico\n\nORIGEN=\"/home/$USER/Documentos\"\nDESTINO=\"/backups\"\nFECHA=$(date +%Y%m%d_%H%M%S)\nNOMBRE=\"backup_$FECHA.tar.gz\"\n\n# Crear directorio de backups si no existe\nif [ ! -d \"$DESTINO\" ]; then\n    mkdir -p \"$DESTINO\"\n    echo \"\u2713 Directorio de backups creado\"\nfi\n\n# Realizar backup\necho \"Iniciando backup...\"\ntar -czf \"$DESTINO/$NOMBRE\" \"$ORIGEN\"\n\n# Verificar resultado\nif [ $? -eq 0 ]; then\n    tamano=$(du -h \"$DESTINO/$NOMBRE\" | cut -f1)\n    echo \"\u2713 Backup creado: $NOMBRE\"\n    echo \"  Tama\u00f1o: $tamano\"\nelse\n    echo \"\u2717 Error al crear el backup\"\n    exit 1\nfi\n</code></pre> <p>Versi\u00f3n profesional</p> <pre><code>#!/bin/bash\n# Script de backup profesional\n\n# Configuraci\u00f3n\nORIGEN=\"/home/$USER/Documentos\"\nDESTINO=\"/backups\"\nFECHA=$(date +%Y%m%d_%H%M%S)\nNOMBRE=\"backup_$FECHA.tar.gz\"\nDIAS_RETENCION=7\nLOG=\"/var/log/backup.log\"\n\n# Funci\u00f3n de log\nlog_mensaje() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" | tee -a \"$LOG\"\n}\n\n# Inicio\nlog_mensaje \"Iniciando backup\"\n\n# Verificar que existe el origen\nif [ ! -d \"$ORIGEN\" ]; then\n    log_mensaje \"ERROR: $ORIGEN no existe\"\n    exit 1\nfi\n\n# Crear destino si no existe\nif [ ! -d \"$DESTINO\" ]; then\n    mkdir -p \"$DESTINO\"\n    log_mensaje \"Directorio de backups creado\"\nfi\n\n# Verificar espacio disponible (m\u00ednimo 1GB)\nespacio=$(df -BG \"$DESTINO\" | tail -n 1 | awk '{print $4}' | sed 's/G//')\nif [ $espacio -lt 1 ]; then\n    log_mensaje \"ERROR: Espacio insuficiente ($espacio GB)\"\n    exit 1\nfi\n\nlog_mensaje \"Espacio disponible: $espacio GB\"\n\n# Crear backup\nlog_mensaje \"Creando backup: $NOMBRE\"\n\ntar -czf \"$DESTINO/$NOMBRE\" \\\n    --exclude='*.tmp' \\\n    --exclude='*.cache' \\\n    --exclude='*~' \\\n    \"$ORIGEN\" 2&gt;&gt; \"$LOG\"\n\n# Verificar resultado\nif [ $? -eq 0 ]; then\n    tamano=$(du -h \"$DESTINO/$NOMBRE\" | cut -f1)\n    log_mensaje \"OK: Backup creado - $tamano\"\n\n    # Verificar integridad\n    if tar -tzf \"$DESTINO/$NOMBRE\" &gt; /dev/null 2&gt;&amp;1; then\n        log_mensaje \"OK: Integridad verificada\"\n    else\n        log_mensaje \"ERROR: Backup corrupto\"\n        rm \"$DESTINO/$NOMBRE\"\n        exit 1\n    fi\nelse\n    log_mensaje \"ERROR: Fallo al crear backup\"\n    exit 1\nfi\n\n# Rotaci\u00f3n de backups antiguos\nlog_mensaje \"Eliminando backups antiguos (&gt;$DIAS_RETENCION d\u00edas)\"\n\ncantidad=$(find \"$DESTINO\" -name \"backup_*.tar.gz\" -mtime +$DIAS_RETENCION | wc -l)\n\nif [ $cantidad -gt 0 ]; then\n    find \"$DESTINO\" -name \"backup_*.tar.gz\" -mtime +$DIAS_RETENCION -delete\n    log_mensaje \"Eliminados $cantidad backups antiguos\"\nelse\n    log_mensaje \"No hay backups antiguos\"\nfi\n\n# Resumen final\ntotal=$(ls -1 \"$DESTINO\"/backup_*.tar.gz 2&gt;/dev/null | wc -l)\nespacio_usado=$(du -sh \"$DESTINO\" | cut -f1)\n\nlog_mensaje \"==========================================\"\nlog_mensaje \"RESUMEN:\"\nlog_mensaje \"- Backups totales: $total\"\nlog_mensaje \"- Espacio usado: $espacio_usado\"\nlog_mensaje \"==========================================\"\nlog_mensaje \"Backup completado exitosamente\"\n</code></pre>"},{"location":"09_04_backups_tar/#ejercicios-practicos","title":"Ejercicios Pr\u00e1cticos","text":"<p>Ejercicio 1: Backup B\u00e1sico con Fecha</p> <p>Objetivo: Crear un script de backup simple con fecha.</p> <p>Instrucciones: 1. Crear archivo <code>backup_simple.sh</code> 2. Hacer backup de <code>~/Documentos</code> 3. Guardar en <code>~/backups/</code> 4. Incluir fecha en el nombre</p> Soluci\u00f3n <pre><code>#!/bin/bash\n\nORIGEN=\"$HOME/Documentos\"\nDESTINO=\"$HOME/backups\"\nFECHA=$(date +%Y%m%d)\nNOMBRE=\"backup_$FECHA.tar.gz\"\n\n# Crear directorio si no existe\nmkdir -p \"$DESTINO\"\n\n# Crear backup\necho \"Creando backup...\"\ntar -czf \"$DESTINO/$NOMBRE\" \"$ORIGEN\"\n\nif [ $? -eq 0 ]; then\n    tamano=$(du -h \"$DESTINO/$NOMBRE\" | cut -f1)\n    echo \"\u2713 Backup creado: $NOMBRE\"\n    echo \"  Tama\u00f1o: $tamano\"\n    echo \"  Ubicaci\u00f3n: $DESTINO/\"\nelse\n    echo \"\u2717 Error al crear backup\"\nfi\n</code></pre> <p>Probar: </p><pre><code>chmod +x backup_simple.sh\n./backup_simple.sh\nls -lh ~/backups/\n</code></pre><p></p> <p>Ejercicio 2: Backup con Exclusiones</p> <p>Objetivo: Crear backup excluyendo archivos innecesarios.</p> <p>Instrucciones: 1. Crear archivo <code>backup_limpio.sh</code> 2. Hacer backup de tu home 3. Excluir: <code>.cache</code>, <code>Descargas</code>, <code>*.tmp</code> 4. Mostrar tama\u00f1o</p> Soluci\u00f3n <pre><code>#!/bin/bash\n\nORIGEN=\"$HOME\"\nDESTINO=\"$HOME/backups\"\nFECHA=$(date +%Y%m%d_%H%M%S)\nNOMBRE=\"backup_home_$FECHA.tar.gz\"\n\nmkdir -p \"$DESTINO\"\n\necho \"Creando backup de $ORIGEN...\"\necho \"Excluyendo archivos innecesarios...\"\n\ntar -czf \"$DESTINO/$NOMBRE\" \\\n    --exclude='.cache' \\\n    --exclude='Descargas' \\\n    --exclude='*.tmp' \\\n    --exclude='backups' \\\n    \"$ORIGEN\" 2&gt;/dev/null\n\nif [ $? -eq 0 ]; then\n    tamano=$(du -h \"$DESTINO/$NOMBRE\" | cut -f1)\n    echo \"==========================================\"\n    echo \"\u2713 Backup completado\"\n    echo \"  Archivo: $NOMBRE\"\n    echo \"  Tama\u00f1o: $tamano\"\n    echo \"  Ubicaci\u00f3n: $DESTINO/\"\n    echo \"==========================================\"\nelse\n    echo \"\u2717 Error al crear backup\"\nfi\n</code></pre> <p>Ejercicio 3: Backup con Rotaci\u00f3n (PARA ENTREGAR)</p> <p>Objetivo: Crear un sistema de backup que mantenga solo los \u00faltimos 7 d\u00edas.</p> <p>Requisitos: 1. El script debe llamarse <code>backup_rotacion.sh</code> 2. Debe hacer backup de <code>~/Documentos</code> en <code>~/backups/</code> 3. Debe incluir fecha y hora en el nombre 4. Debe excluir archivos <code>.tmp</code> y <code>.cache</code> 5. Debe eliminar backups de m\u00e1s de 7 d\u00edas 6. Debe mostrar:    - Mensaje de backup creado con tama\u00f1o    - Cu\u00e1ntos backups antiguos se eliminaron    - Total de backups existentes</p> <p>Estructura esperada: </p><pre><code>#!/bin/bash\n# Script: backup_rotacion.sh\n\n# Definir variables (origen, destino, fecha)\n# Crear directorio de backups si no existe\n# Crear backup con exclusiones\n# Verificar que se cre\u00f3 correctamente\n# Mostrar tama\u00f1o del backup\n# Eliminar backups antiguos (&gt;7 d\u00edas)\n# Contar backups eliminados\n# Mostrar resumen final\n</code></pre><p></p> <p>Ejemplo de salida esperada: </p><pre><code>Creando backup...\n\u2713 Backup creado: backup_20260213_143527.tar.gz\n  Tama\u00f1o: 1.2M\n\nEliminando backups antiguos...\n\u2713 Eliminados 3 backups antiguos\n\n==========================================\nRESUMEN:\n- Backups actuales: 5\n- Espacio usado: 6.8M\n==========================================\n</code></pre><p></p> Pistas <pre><code># Eliminar antiguos\nfind \"$DESTINO\" -name \"backup_*.tar.gz\" -mtime +7 -delete\n\n# Contar backups actuales\ntotal=$(ls -1 \"$DESTINO\"/backup_*.tar.gz 2&gt;/dev/null | wc -l)\n\n# Espacio usado\nespacio=$(du -sh \"$DESTINO\" | cut -f1)\n</code></pre>"},{"location":"09_04_backups_tar/#resumen-de-comandos","title":"Resumen de Comandos","text":"<p>Crear backup</p> <pre><code>tar -czf archivo.tar.gz /ruta/          # Crear comprimido\ntar -czf archivo.tar.gz directorio/     # Sin ruta completa\ntar -czf backup.tar.gz dir1/ dir2/      # M\u00faltiples directorios\n</code></pre> <p>Extraer backup</p> <pre><code>tar -xzf archivo.tar.gz                 # En directorio actual\ntar -xzf archivo.tar.gz -C /destino/    # En ubicaci\u00f3n espec\u00edfica\n</code></pre> <p>Listar contenido</p> <pre><code>tar -tzf archivo.tar.gz                 # Listar todo\ntar -tzf archivo.tar.gz | grep archivo  # Buscar archivo espec\u00edfico\ntar -tzf archivo.tar.gz | wc -l         # Contar archivos\n</code></pre> <p>Exclusiones</p> <pre><code>tar -czf backup.tar.gz --exclude='*.tmp' dir/\ntar -czf backup.tar.gz --exclude='carpeta' dir/\n</code></pre> <p>Verificar</p> <pre><code># Verificar que se cre\u00f3\n[ $? -eq 0 ] &amp;&amp; echo \"OK\"\n\n# Verificar integridad\ntar -tzf backup.tar.gz &gt; /dev/null 2&gt;&amp;1\n</code></pre>"},{"location":"09_04_backups_tar/#tareas-extra","title":"Tareas Extra","text":"<p>Tarea 1: Backup M\u00faltiple</p> <p>Crear un script <code>backup_multiple.sh</code> que: 1. Haga backup de 3 directorios diferentes:    - Documentos    - Im\u00e1genes    - Descargas 2. Cada uno en un archivo separado con fecha 3. Todos en la carpeta <code>~/backups/</code> 4. Muestre un resumen al final con:    - Nombre de cada backup    - Tama\u00f1o de cada uno    - Tama\u00f1o total</p> <p>Ejemplo de salida: </p><pre><code>==========================================\nBACKUPS CREADOS:\n==========================================\n\u2713 backup_documentos_20260213.tar.gz - 2.1M\n\u2713 backup_imagenes_20260213.tar.gz - 15M\n\u2713 backup_descargas_20260213.tar.gz - 8.3M\n------------------------------------------\nTama\u00f1o total: 25.4M\n==========================================\n</code></pre><p></p> <p>Tarea 2: Script de Restauraci\u00f3n</p> <p>Crear un script <code>restaurar.sh</code> que: 1. Muestre lista de backups disponibles en <code>~/backups/</code> 2. Pida al usuario que elija uno (por n\u00famero) 3. Pregunte d\u00f3nde restaurar 4. Extraiga el backup en esa ubicaci\u00f3n 5. Confirme que se restaur\u00f3 correctamente</p> Pistas <pre><code># Listar backups numerados\nls -1 ~/backups/*.tar.gz | nl\n\n# Leer elecci\u00f3n del usuario\nread -p \"Elige backup (n\u00famero): \" numero\n\n# Obtener archivo seleccionado\narchivo=$(ls -1 ~/backups/*.tar.gz | sed -n \"${numero}p\")\n</code></pre>"},{"location":"09_04_backups_tar/#buenas-practicas-de-backup","title":"Buenas Pr\u00e1cticas de Backup","text":"<p>1. Siempre incluir fecha en el nombre</p> <pre><code>FECHA=$(date +%Y%m%d_%H%M%S)\nNOMBRE=\"backup_$FECHA.tar.gz\"\n</code></pre> <p>2. Excluir archivos innecesarios</p> <pre><code>--exclude='*.tmp' \\\n--exclude='*.cache' \\\n--exclude='Descargas'\n</code></pre> <p>3. Verificar espacio antes de crear backup</p> <pre><code>espacio=$(df -BG /backups | tail -n 1 | awk '{print $4}' | sed 's/G//')\nif [ $espacio -lt 5 ]; then\n    echo \"ERROR: Espacio insuficiente\"\n    exit 1\nfi\n</code></pre> <p>4. Verificar integridad despu\u00e9s de crear</p> <pre><code>if tar -tzf backup.tar.gz &gt; /dev/null 2&gt;&amp;1; then\n    echo \"Backup verificado\"\nelse\n    echo \"Backup corrupto\"\n    rm backup.tar.gz\nfi\n</code></pre> <p>5. Registrar operaciones en log</p> <pre><code>echo \"$(date): Backup creado\" &gt;&gt; backup.log\n</code></pre> <p>6. Implementar rotaci\u00f3n autom\u00e1tica</p> <pre><code>find /backups -name \"backup_*.tar.gz\" -mtime +7 -delete\n</code></pre> <p>7. Mantener backup en m\u00faltiples ubicaciones</p> <ul> <li>Disco local</li> <li>Disco externo</li> <li>Servidor remoto (veremos con rsync)</li> </ul>"},{"location":"09_05_rsync_cron/","title":"Sincronizaci\u00f3n con rsync y Automatizaci\u00f3n con cron","text":"<p>En esta sesi\u00f3n aprenderemos dos herramientas fundamentales: <code>rsync</code> para sincronizar directorios de forma eficiente (copiando solo cambios) y <code>cron</code> para automatizar tareas y ejecutar scripts a horas programadas sin intervenci\u00f3n manual.</p>"},{"location":"09_05_rsync_cron/#parte-1-rsync-sincronizacion-de-directorios","title":"PARTE 1: rsync - Sincronizaci\u00f3n de Directorios","text":""},{"location":"09_05_rsync_cron/#que-es-rsync","title":"\u00bfQu\u00e9 es rsync?","text":"<p><code>rsync</code> es una herramienta que sincroniza directorios copiando solo los archivos nuevos o modificados, lo que lo hace mucho m\u00e1s eficiente que copiar todo cada vez.</p> <p>Diferencias con tar:</p> Caracter\u00edstica tar rsync Resultado Archivo comprimido Copia de directorios Velocidad Siempre copia todo Solo copia cambios Uso Backups archivados Sincronizaci\u00f3n, backups incrementales Espacio Un archivo por backup Mantiene estructura de carpetas <p>Cu\u00e1ndo usar cada uno: - tar: Backups que quieres archivar y comprimir - rsync: Mantener dos directorios sincronizados</p>"},{"location":"09_05_rsync_cron/#comandos-basicos","title":"Comandos B\u00e1sicos","text":"<p>La sintaxis b\u00e1sica es:</p> <pre><code>rsync -av origen/ destino/\n</code></pre> <p>Opciones importantes: - <code>-a</code> \u2192 modo archivo (preserva permisos, fechas, enlaces) - <code>-v</code> \u2192 verbose (muestra qu\u00e9 est\u00e1 haciendo)</p> <p>La barra final importa</p> <ul> <li><code>origen/</code> \u2192 copia el CONTENIDO de origen</li> <li><code>origen</code> \u2192 copia la CARPETA origen completa</li> </ul> <p>Sincronizar Documentos a backup</p> <pre><code># Sincronizar Documentos a backup\nrsync -av ~/Documentos/ ~/backup_documentos/\n</code></pre> <p>Primera vez: Copia todo Siguientes veces: Solo copia archivos nuevos o modificados</p>"},{"location":"09_05_rsync_cron/#opciones-utiles","title":"Opciones \u00datiles","text":"<p>Ver qu\u00e9 har\u00eda sin copiar (simulaci\u00f3n):</p> <pre><code>rsync -avn origen/ destino/\n</code></pre> <p>La opci\u00f3n <code>-n</code> hace una simulaci\u00f3n (dry-run) sin ejecutar nada. Muy \u00fatil para verificar qu\u00e9 se va a copiar antes de hacerlo.</p> <p>Simular sincronizaci\u00f3n</p> <pre><code># Ver qu\u00e9 se copiar\u00eda sin copiar realmente\nrsync -avn ~/Documentos/ ~/backup_documentos/\n</code></pre> <p>Mostrar progreso:</p> <pre><code>rsync -av --progress origen/ destino/\n</code></pre> <p>Excluir archivos:</p> <pre><code>rsync -av --exclude='*.tmp' --exclude='.cache' origen/ destino/\n</code></pre> <p>Sincronizaci\u00f3n espejo (elimina en destino lo que no est\u00e1 en origen):</p> <pre><code>rsync -av --delete origen/ destino/\n</code></pre> <p>Cuidado con --delete</p> <p>La opci\u00f3n <code>--delete</code> elimina archivos en destino que no existen en origen. Usar con precauci\u00f3n.</p>"},{"location":"09_05_rsync_cron/#script-de-sincronizacion-basico","title":"Script de Sincronizaci\u00f3n B\u00e1sico","text":"<p>Script simple de sincronizaci\u00f3n</p> <pre><code>#!/bin/bash\n# Script de sincronizaci\u00f3n con rsync\n\nORIGEN=\"$HOME/Documentos/\"\nDESTINO=\"$HOME/backup_sync/\"\n\necho \"Sincronizando $ORIGEN a $DESTINO...\"\n\nrsync -av --progress \"$ORIGEN\" \"$DESTINO\"\n\nif [ $? -eq 0 ]; then\n    echo \"\u2713 Sincronizaci\u00f3n completada\"\nelse\n    echo \"\u2717 Error en la sincronizaci\u00f3n\"\nfi\n</code></pre>"},{"location":"09_05_rsync_cron/#backup-incremental-con-rsync","title":"Backup Incremental con rsync","text":"<p>Una de las ventajas principales de rsync es que solo copia lo que ha cambiado, ahorrando tiempo y espacio.</p> <p>Backup incremental</p> <pre><code>#!/bin/bash\n# Backup incremental\n\nORIGEN=\"$HOME/Documentos/\"\nDESTINO=\"$HOME/backup_incremental/\"\n\n# Crear destino si no existe\nmkdir -p \"$DESTINO\"\n\necho \"Realizando backup incremental...\"\necho \"Solo se copiar\u00e1n archivos nuevos o modificados\"\n\nrsync -av \\\n    --exclude='*.tmp' \\\n    --exclude='.cache' \\\n    \"$ORIGEN\" \"$DESTINO\"\n\nif [ $? -eq 0 ]; then\n    echo \"\u2713 Backup completado\"\n\n    # Mostrar estad\u00edsticas\n    total=$(find \"$DESTINO\" -type f | wc -l)\n    espacio=$(du -sh \"$DESTINO\" | cut -f1)\n\n    echo \"  Archivos totales: $total\"\n    echo \"  Espacio usado: $espacio\"\nfi\n</code></pre>"},{"location":"09_05_rsync_cron/#parte-2-cron-automatizacion-de-tareas","title":"PARTE 2: cron - Automatizaci\u00f3n de Tareas","text":""},{"location":"09_05_rsync_cron/#que-es-cron","title":"\u00bfQu\u00e9 es cron?","text":"<p><code>cron</code> es un servicio que ejecuta comandos o scripts autom\u00e1ticamente en horarios programados. Funciona continuamente en segundo plano revisando si hay tareas que ejecutar.</p> <p>Usos comunes: - Backup todas las noches a las 2 AM - Limpiar archivos temporales cada domingo - Actualizar el sistema semanalmente - Generar informes cada lunes - Verificar servicios cada 5 minutos</p> <p>\u00bfC\u00f3mo funciona? 1. Cron revisa constantemente tu tabla de tareas (crontab) 2. Cuando llega la hora programada, ejecuta el comando 3. Todo sucede autom\u00e1ticamente, incluso sin estar conectado</p>"},{"location":"09_05_rsync_cron/#sintaxis-de-crontab","title":"Sintaxis de crontab","text":"<p>Cada l\u00ednea en el crontab tiene este formato:</p> <pre><code>* * * * * comando\n\u2502 \u2502 \u2502 \u2502 \u2502\n\u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500 D\u00eda de semana (0-7, 0 y 7 = domingo)\n\u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Mes (1-12)\n\u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 D\u00eda del mes (1-31)\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Hora (0-23)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Minuto (0-59)\n</code></pre> <p>Tabla de patrones:</p> Patr\u00f3n Significado <code>*</code> Cualquier valor <code>*/5</code> Cada 5 unidades <code>2,4,6</code> Valores espec\u00edficos (2, 4 y 6) <code>1-5</code> Rango (1 a 5) <code>0-23/2</code> Cada 2 horas <p>Ejemplos de horarios comunes</p> <pre><code># Todos los d\u00edas a las 2:00 AM\n0 2 * * * /ruta/script.sh\n\n# Cada hora en punto\n0 * * * * /ruta/script.sh\n\n# Cada 15 minutos\n*/15 * * * * /ruta/script.sh\n\n# Cada 30 minutos\n*/30 * * * * /ruta/script.sh\n\n# De lunes a viernes a las 8:00 AM\n0 8 * * 1-5 /ruta/script.sh\n\n# Domingos a las 3:00 AM\n0 3 * * 0 /ruta/script.sh\n\n# Primer d\u00eda de cada mes a las 00:00\n0 0 1 * * /ruta/script.sh\n\n# Lunes y viernes a las 18:30\n30 18 * * 1,5 /ruta/script.sh\n</code></pre>"},{"location":"09_05_rsync_cron/#gestionar-crontab","title":"Gestionar crontab","text":"<p>Ver tu crontab actual:</p> <pre><code>crontab -l\n</code></pre> <p>Si no has creado ninguna tarea, dir\u00e1: <code>no crontab for usuario</code></p> <p>Editar tu crontab:</p> <pre><code>crontab -e\n</code></pre> <p>Primera vez</p> <p>Te preguntar\u00e1 qu\u00e9 editor usar. Elige <code>nano</code> (opci\u00f3n 1) si eres principiante.</p> <p>Eliminar todo tu crontab:</p> <pre><code>crontab -r\n</code></pre> <p>Sin confirmaci\u00f3n</p> <p>Este comando borra todas tus tareas sin preguntar.</p>"},{"location":"09_05_rsync_cron/#anadir-tareas-a-cron-paso-a-paso","title":"A\u00f1adir Tareas a cron - Paso a Paso","text":"<p>1. Crear el script: </p><pre><code>nano ~/scripts/backup_diario.sh\n</code></pre><p></p> <pre><code>#!/bin/bash\n# Script de backup para cron\n\nFECHA=$(date +%Y%m%d)\ntar -czf ~/backups/backup_$FECHA.tar.gz ~/Documentos\n\necho \"$(date): Backup completado\" &gt;&gt; ~/logs/backup.log\n</code></pre> <p>2. Dar permisos: </p><pre><code>chmod +x ~/scripts/backup_diario.sh\n</code></pre><p></p> <p>3. Editar crontab: </p><pre><code>crontab -e\n</code></pre><p></p> <p>4. A\u00f1adir l\u00ednea: </p><pre><code># Backup diario a las 2 AM\n0 2 * * * /home/usuario/scripts/backup_diario.sh\n</code></pre><p></p> <p>5. Guardar y salir: - En nano: <code>Ctrl+O</code>, <code>Enter</code>, <code>Ctrl+X</code></p> <p>6. Verificar: </p><pre><code>crontab -l\n</code></pre><p></p>"},{"location":"09_05_rsync_cron/#reglas-importantes-para-cron","title":"Reglas Importantes para cron","text":"<p>1. Usar rutas ABSOLUTAS</p> <pre><code># \u274c Mal - ruta relativa\n0 2 * * * ./backup.sh\n\n# \u2705 Bien - ruta absoluta\n0 2 * * * /home/usuario/scripts/backup.sh\n</code></pre> <p>2. Especificar rutas completas en el script</p> <pre><code>#!/bin/bash\n# \u274c Mal\ncd ~/backups\ntar -czf backup.tar.gz ~/Documentos\n\n# \u2705 Bien\ntar -czf /home/usuario/backups/backup.tar.gz /home/usuario/Documentos\n</code></pre> <p>3. Redirigir salida a logs</p> <pre><code># Sin log (output se pierde)\n0 2 * * * /home/usuario/backup.sh\n\n# Con log (puedes ver qu\u00e9 pas\u00f3)\n0 2 * * * /home/usuario/backup.sh &gt;&gt; /home/usuario/backup.log 2&gt;&amp;1\n</code></pre> <p>Explicaci\u00f3n: - <code>&gt;&gt;</code> \u2192 A\u00f1ade al archivo (no sobrescribe) - <code>2&gt;&amp;1</code> \u2192 Redirige errores tambi\u00e9n al mismo archivo</p>"},{"location":"09_05_rsync_cron/#ver-logs-de-cron","title":"Ver Logs de cron","text":"<p>Ver ejecuciones de cron:</p> <pre><code>grep CRON /var/log/syslog | tail -n 20\n</code></pre> <p>Seguir en tiempo real:</p> <pre><code>sudo tail -f /var/log/syslog | grep CRON\n</code></pre> <p>Ver logs de tu script:</p> <p>Si tu script registra en un log propio:</p> <pre><code>tail -f ~/logs/backup.log\n</code></pre>"},{"location":"09_05_rsync_cron/#ejemplos-completos","title":"Ejemplos Completos","text":"<p>Ejemplo 1: Backup Diario Autom\u00e1tico</p> <p>Script: <code>~/scripts/backup_auto.sh</code> </p><pre><code>#!/bin/bash\n# Backup autom\u00e1tico para ejecutar con cron\n\nLOG=\"/home/$USER/logs/backup.log\"\nDESTINO=\"/home/$USER/backups\"\nFECHA=$(date +%Y%m%d_%H%M%S)\n\n# Crear directorios si no existen\nmkdir -p \"$DESTINO\"\nmkdir -p \"$(dirname $LOG)\"\n\n# Registrar inicio\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Iniciando backup\" &gt;&gt; \"$LOG\"\n\n# Crear backup\ntar -czf \"$DESTINO/backup_$FECHA.tar.gz\" \\\n    --exclude='*.tmp' \\\n    --exclude='.cache' \\\n    /home/$USER/Documentos 2&gt;&gt; \"$LOG\"\n\nif [ $? -eq 0 ]; then\n    tamano=$(du -h \"$DESTINO/backup_$FECHA.tar.gz\" | cut -f1)\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - Backup OK: $tamano\" &gt;&gt; \"$LOG\"\nelse\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - ERROR en backup\" &gt;&gt; \"$LOG\"\nfi\n\n# Eliminar backups antiguos (m\u00e1s de 7 d\u00edas)\nfind \"$DESTINO\" -name \"backup_*.tar.gz\" -mtime +7 -delete\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Limpieza completada\" &gt;&gt; \"$LOG\"\n</code></pre><p></p> <p>Crontab: </p><pre><code># Ejecutar todos los d\u00edas a las 2 AM\n0 2 * * * /home/usuario/scripts/backup_auto.sh\n</code></pre><p></p> <p>Ejemplo 2: Sincronizaci\u00f3n con rsync</p> <p>Script: <code>~/scripts/sincronizar.sh</code> </p><pre><code>#!/bin/bash\n# Sincronizaci\u00f3n autom\u00e1tica con rsync\n\nORIGEN=\"/home/$USER/Documentos/\"\nDESTINO=\"/home/$USER/backup_sync/\"\nLOG=\"/home/$USER/logs/sync.log\"\n\nmkdir -p \"$DESTINO\"\nmkdir -p \"$(dirname $LOG)\"\n\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Iniciando sincronizaci\u00f3n\" &gt;&gt; \"$LOG\"\n\nrsync -av \\\n    --exclude='*.tmp' \\\n    --exclude='.cache' \\\n    --delete \\\n    \"$ORIGEN\" \"$DESTINO\" &gt;&gt; \"$LOG\" 2&gt;&amp;1\n\nif [ $? -eq 0 ]; then\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - Sincronizaci\u00f3n OK\" &gt;&gt; \"$LOG\"\nelse\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - ERROR\" &gt;&gt; \"$LOG\"\nfi\n</code></pre><p></p> <p>Crontab: </p><pre><code># Sincronizar cada hora\n0 * * * * /home/usuario/scripts/sincronizar.sh\n</code></pre><p></p> <p>Ejemplo 3: Limpieza Semanal</p> <p>Script: <code>~/scripts/limpieza.sh</code> </p><pre><code>#!/bin/bash\n# Limpieza semanal de archivos temporales\n\nLOG=\"/home/$USER/logs/limpieza.log\"\n\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Iniciando limpieza\" &gt;&gt; \"$LOG\"\n\n# Eliminar archivos .tmp\neliminados=$(find /home/$USER -name \"*.tmp\" -type f | wc -l)\nfind /home/$USER -name \"*.tmp\" -type f -delete\n\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Eliminados $eliminados archivos .tmp\" &gt;&gt; \"$LOG\"\n\n# Limpiar cach\u00e9\nrm -rf /home/$USER/.cache/thumbnails/*\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Cach\u00e9 limpiada\" &gt;&gt; \"$LOG\"\n</code></pre><p></p> <p>Crontab: </p><pre><code># Ejecutar cada domingo a las 3 AM\n0 3 * * 0 /home/usuario/scripts/limpieza.sh\n</code></pre><p></p>"},{"location":"09_05_rsync_cron/#ejercicios-practicos","title":"Ejercicios Pr\u00e1cticos","text":"<p>Ejercicio 1: Sincronizaci\u00f3n con rsync</p> <p>Objetivo: Crear un script que sincronice Documentos.</p> <p>Instrucciones: 1. Crear <code>sincronizar.sh</code> 2. Sincronizar <code>~/Documentos/</code> a <code>~/backup_sync/</code> 3. Excluir <code>.cache</code> y <code>*.tmp</code> 4. Mostrar mensaje de \u00e9xito</p> Soluci\u00f3n <pre><code>#!/bin/bash\n\nORIGEN=\"$HOME/Documentos/\"\nDESTINO=\"$HOME/backup_sync/\"\n\necho \"Sincronizando...\"\n\nrsync -av \\\n    --exclude='.cache' \\\n    --exclude='*.tmp' \\\n    \"$ORIGEN\" \"$DESTINO\"\n\nif [ $? -eq 0 ]; then\n    echo \"\u2713 Sincronizaci\u00f3n completada\"\n    archivos=$(find \"$DESTINO\" -type f | wc -l)\n    echo \"  Total de archivos: $archivos\"\nelse\n    echo \"\u2717 Error en sincronizaci\u00f3n\"\nfi\n</code></pre> <p>Probar: </p><pre><code>chmod +x sincronizar.sh\n./sincronizar.sh\n\n# Modificar un archivo en Documentos\necho \"prueba\" &gt; ~/Documentos/test.txt\n\n# Ejecutar de nuevo (solo copiar\u00e1 el cambio)\n./sincronizar.sh\n</code></pre><p></p> <p>Ejercicio 2: Primera Tarea con cron</p> <p>Objetivo: Programar un script simple que se ejecute cada 2 minutos (para pruebas).</p> <p>Instrucciones: 1. Crear script <code>prueba_cron.sh</code> que escriba la fecha en un log 2. Darle permisos 3. Programarlo con cron para cada 2 minutos 4. Verificar que funciona</p> Soluci\u00f3n paso a paso <p>1. Crear script: </p><pre><code>nano ~/prueba_cron.sh\n</code></pre><p></p> <pre><code>#!/bin/bash\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Cron funcionando\" &gt;&gt; ~/cron_test.log\n</code></pre> <p>2. Dar permisos: </p><pre><code>chmod +x ~/prueba_cron.sh\n</code></pre><p></p> <p>3. Editar crontab: </p><pre><code>crontab -e\n</code></pre><p></p> <p>A\u00f1adir: </p><pre><code># Prueba cada 2 minutos\n*/2 * * * * /home/usuario/prueba_cron.sh\n</code></pre><p></p> <p>4. Verificar: </p><pre><code># Ver que se a\u00f1adi\u00f3\ncrontab -l\n\n# Esperar 4-5 minutos y ver el log\ncat ~/cron_test.log\n</code></pre><p></p> <p>5. Eliminar la tarea cuando funcione: </p><pre><code>crontab -e\n# Borrar o comentar la l\u00ednea (a\u00f1adir # al inicio)\n</code></pre><p></p> <p>Ejercicio 3: Sistema de Backup Automatizado (PARA ENTREGAR)</p> <p>Objetivo: Crear un sistema completo de backup automatizado con cron.</p> <p>Requisitos: 1. Script llamado <code>backup_sistema.sh</code> que:    - Haga backup de <code>~/Documentos</code> con tar    - Lo guarde en <code>~/backups/</code> con fecha    - Excluya <code>.cache</code> y <code>*.tmp</code>    - Registre en <code>~/logs/backup.log</code> con fecha y hora    - Elimine backups de m\u00e1s de 5 d\u00edas    - Muestre resumen al final del log</p> <ol> <li>Programar con cron para:</li> <li>Ejecutarse todos los d\u00edas a las 3 AM</li> <li>Redirigir salida al log</li> </ol> <p>Estructura del script: </p><pre><code>#!/bin/bash\n# Sistema de backup automatizado\n\nLOG=\"$HOME/logs/backup.log\"\nDESTINO=\"$HOME/backups\"\nFECHA=$(date +%Y%m%d_%H%M%S)\n\n# Crear directorios\n# Registrar inicio\n# Crear backup con exclusiones\n# Verificar resultado\n# Registrar tama\u00f1o\n# Eliminar backups antiguos\n# Registrar resumen\n</code></pre><p></p> <p>Crontab esperado: </p><pre><code># Backup diario a las 3 AM\n0 3 * * * /home/usuario/backup_sistema.sh &gt;&gt; /home/usuario/logs/backup.log 2&gt;&amp;1\n</code></pre><p></p> <p>Ejemplo de log esperado: </p><pre><code>2026-02-13 03:00:01 - Iniciando backup\n2026-02-13 03:00:15 - Backup OK: 2.3M\n2026-02-13 03:00:15 - Eliminados 2 backups antiguos\n2026-02-13 03:00:15 - Backups actuales: 5\n2026-02-13 03:00:15 - Espacio usado: 11.5M\n</code></pre><p></p> Pistas <pre><code># Registrar en log\necho \"$(date '+%Y-%m-%d %H:%M:%S') - mensaje\" &gt;&gt; \"$LOG\"\n\n# Eliminar antiguos\nfind \"$DESTINO\" -name \"backup_*.tar.gz\" -mtime +5 -delete\n\n# Contar backups\ntotal=$(ls -1 \"$DESTINO\"/backup_*.tar.gz 2&gt;/dev/null | wc -l)\n</code></pre>"},{"location":"09_05_rsync_cron/#resumen-de-comandos","title":"Resumen de Comandos","text":"<p>rsync</p> <pre><code>rsync -av origen/ destino/           # Sincronizar\nrsync -avn origen/ destino/          # Simular (dry-run)\nrsync -av --progress origen/ dest/   # Con progreso\nrsync -av --delete origen/ dest/     # Espejo (elimina en destino)\nrsync -av --exclude='*.tmp' or/ de/  # Excluir archivos\n</code></pre> <p>cron</p> <pre><code>crontab -e         # Editar crontab\ncrontab -l         # Ver crontab\ncrontab -r         # Borrar crontab\n</code></pre> <p>Sintaxis cron</p> <pre><code>*/5 * * * *        # Cada 5 minutos\n0 * * * *          # Cada hora\n0 2 * * *          # Diario 2 AM\n0 3 * * 0          # Domingos 3 AM\n0 0 1 * *          # D\u00eda 1 de mes 00:00\n0 8 * * 1-5        # Lunes a viernes 8 AM\n</code></pre>"},{"location":"09_05_rsync_cron/#tareas-extra","title":"Tareas Extra","text":"<p>Tarea 1: Doble Backup</p> <p>Crear un sistema que: 1. Haga backup con tar cada noche 2. Sincronice con rsync cada 6 horas 3. Ambos registren en logs separados 4. Programar ambos con cron</p> <p>Tarea 2: Monitor de Sistema</p> <p>Crear un script <code>monitor.sh</code> que: 1. Verifique espacio en disco 2. Si est\u00e1 &gt; 80%, registre alerta en log 3. Programarlo para ejecutarse cada hora</p> Pista <pre><code>#!/bin/bash\nuso=$(df -h / | tail -n 1 | awk '{print $5}' | sed 's/%//')\nif [ $uso -gt 80 ]; then\n    echo \"$(date): ALERTA - Disco al $uso%\" &gt;&gt; ~/alertas.log\nfi\n</code></pre>"},{"location":"09_05_rsync_cron/#errores-comunes-en-cron","title":"Errores Comunes en cron","text":"<p>1. Usar rutas relativas</p> <pre><code># \u274c Mal\n0 2 * * * ./backup.sh\n\n# \u2705 Bien  \n0 2 * * * /home/usuario/backup.sh\n</code></pre> <p>2. Olvidar permisos de ejecuci\u00f3n</p> <pre><code># Soluci\u00f3n\nchmod +x /home/usuario/script.sh\n</code></pre> <p>3. Script funciona manual pero no con cron</p> <p>Causa: Variables de entorno diferentes</p> <p>Soluci\u00f3n: Usar rutas absolutas en TODO el script</p> <p>4. No redirigir salida</p> <pre><code># Sin esto, no ver\u00e1s qu\u00e9 pas\u00f3\n0 2 * * * /ruta/script.sh &gt;&gt; /ruta/log 2&gt;&amp;1\n</code></pre>"},{"location":"09_06_logs_grep/","title":"Logs y Control con Redirecci\u00f3n","text":"<p>Los logs son registros de lo que hace el sistema o tus scripts. Son fundamentales para saber qu\u00e9 pas\u00f3, detectar errores, ver el historial de operaciones y depurar problemas. Sin logs, es imposible saber si un backup funcion\u00f3, cu\u00e1ndo se ejecut\u00f3 por \u00faltima vez, o qu\u00e9 error caus\u00f3 un fallo.</p> <p>En esta sesi\u00f3n aprenderemos a redirigir la salida de comandos a archivos, crear logs profesionales con fecha y hora, y buscar informaci\u00f3n en logs usando <code>grep</code>.</p>"},{"location":"09_06_logs_grep/#redireccion-basica","title":"Redirecci\u00f3n B\u00e1sica","text":"<p>Hay dos operadores principales para redirigir salida a archivos:</p> <p>Sobrescribir archivo (&gt;):</p> <pre><code># Borra el contenido anterior y escribe nuevo\necho \"Hola\" &gt; archivo.txt\n</code></pre> <pre><code>echo \"Hola\" &gt; archivo.txt\necho \"Adi\u00f3s\" &gt; archivo.txt\n\n# archivo.txt ahora solo contiene \"Adi\u00f3s\"\n</code></pre> <p>A\u00f1adir al final (&gt;&gt;):</p> <pre><code># NO borra el contenido, a\u00f1ade al final\necho \"Hola\" &gt;&gt; archivo.txt\necho \"Adi\u00f3s\" &gt;&gt; archivo.txt\n\n# archivo.txt contiene:\n# Hola\n# Adi\u00f3s\n</code></pre> <p>Diferencia clave</p> Operador Acci\u00f3n Uso <code>&gt;</code> Sobrescribe Crear archivo nuevo <code>&gt;&gt;</code> A\u00f1ade al final A\u00f1adir a archivo existente (logs) <p>Para logs siempre usa <code>&gt;&gt;</code></p>"},{"location":"09_06_logs_grep/#redirigir-salida-de-comandos","title":"Redirigir Salida de Comandos","text":"<p>Cualquier comando puede redirigir su salida a un archivo:</p> <p>Guardar listado de archivos</p> <pre><code># Guardar listado en archivo\nls -la &gt; listado.txt\n\n# Ver el archivo\ncat listado.txt\n</code></pre> <p>Guardar informaci\u00f3n del sistema</p> <pre><code># Guardar info de disco\ndf -h &gt; espacio_disco.txt\n\n# Guardar procesos\nps aux &gt; procesos.txt\n\n# Guardar fecha de ejecuci\u00f3n\ndate &gt;&gt; registro.txt\n</code></pre>"},{"location":"09_06_logs_grep/#redirigir-errores","title":"Redirigir Errores","text":"<p>Hay dos tipos de salida: - Salida est\u00e1ndar (stdout): Output normal - Salida de error (stderr): Mensajes de error</p> <p>Redirigir solo errores (2&gt;):</p> <pre><code># Solo errores van al archivo\ncomando 2&gt; errores.txt\n</code></pre> <p>Redirigir salida Y errores juntos:</p> <pre><code># M\u00e9todo 1: A archivos separados\ncomando &gt; salida.txt 2&gt; errores.txt\n\n# M\u00e9todo 2: Al mismo archivo\ncomando &gt; todo.txt 2&gt;&amp;1\n\n# M\u00e9todo 3: Forma corta (igual que m\u00e9todo 2)\ncomando &amp;&gt; todo.txt\n</code></pre> <p>Explicaci\u00f3n de 2&gt;&amp;1</p> <ul> <li><code>2</code> = stderr (errores)</li> <li><code>&gt;&amp;1</code> = redirigir al mismo sitio que stdout (salida normal)</li> </ul>"},{"location":"09_06_logs_grep/#logs-con-fecha-y-hora","title":"Logs con Fecha y Hora","text":"<p>Los logs siempre deben tener fecha y hora para saber cu\u00e1ndo pas\u00f3 algo.</p> <p>Formato de fecha para logs:</p> <pre><code># Formato: YYYY-MM-DD HH:MM:SS\ndate '+%Y-%m-%d %H:%M:%S'\n# Salida: 2026-02-13 14:30:15\n</code></pre> <p>Registrar con fecha</p> <pre><code>#!/bin/bash\n\nLOG=\"registro.log\"\n\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Script iniciado\" &gt;&gt; \"$LOG\"\n\n# Hacer operaciones...\n\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Script finalizado\" &gt;&gt; \"$LOG\"\n</code></pre> <p>Resultado en registro.log: </p><pre><code>2026-02-13 14:30:15 - Script iniciado\n2026-02-13 14:30:18 - Script finalizado\n</code></pre><p></p>"},{"location":"09_06_logs_grep/#script-con-logging-profesional","title":"Script con Logging Profesional","text":"<p>Versi\u00f3n b\u00e1sica</p> <pre><code>#!/bin/bash\n# Script con logging b\u00e1sico\n\nLOG=\"operacion.log\"\n\n# Registrar inicio\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Iniciando operaci\u00f3n\" &gt;&gt; \"$LOG\"\n\n# Hacer backup\ntar -czf backup.tar.gz /home/usuario/Documentos 2&gt;&gt; \"$LOG\"\n\n# Registrar resultado\nif [ $? -eq 0 ]; then\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - Backup OK\" &gt;&gt; \"$LOG\"\nelse\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - Backup FALL\u00d3\" &gt;&gt; \"$LOG\"\nfi\n\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Operaci\u00f3n finalizada\" &gt;&gt; \"$LOG\"\n</code></pre> <p>Versi\u00f3n con funci\u00f3n de log</p> <pre><code>#!/bin/bash\n# Script con funci\u00f3n de logging\n\nLOG=\"/var/log/mi_script.log\"\n\n# Funci\u00f3n para registrar\nlog() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - $1\" &gt;&gt; \"$LOG\"\n}\n\n# Usar la funci\u00f3n\nlog \"Script iniciado\"\n\n# Hacer operaciones\ntar -czf backup.tar.gz /home/usuario/Documentos 2&gt;&gt; \"$LOG\"\n\nif [ $? -eq 0 ]; then\n    log \"Backup creado exitosamente\"\nelse\n    log \"ERROR: Backup fall\u00f3\"\nfi\n\nlog \"Script finalizado\"\n</code></pre>"},{"location":"09_06_logs_grep/#grep-buscar-en-archivos","title":"grep - Buscar en Archivos","text":"<p><code>grep</code> busca texto en archivos o en la salida de comandos. Es fundamental para analizar logs.</p> <p>Sintaxis b\u00e1sica:</p> <pre><code>grep \"texto_a_buscar\" archivo\n</code></pre> <p>Ejemplos b\u00e1sicos</p> <pre><code># Buscar \"error\" en un log\ngrep \"error\" backup.log\n\n# Buscar \"OK\" en un log\ngrep \"OK\" backup.log\n</code></pre>"},{"location":"09_06_logs_grep/#opciones-utiles-de-grep","title":"Opciones \u00datiles de grep","text":"<p>Ignorar may\u00fasculas/min\u00fasculas (-i):</p> <pre><code># Busca error, Error, ERROR, eRRor, etc.\ngrep -i \"error\" backup.log\n</code></pre> <p>Mostrar n\u00famero de l\u00ednea (-n):</p> <pre><code># Muestra en qu\u00e9 l\u00ednea est\u00e1 cada coincidencia\ngrep -n \"error\" backup.log\n\n# Salida:\n# 15:2026-02-13 14:30:20 - ERROR: Archivo no encontrado\n# 48:2026-02-13 15:45:10 - ERROR: Sin espacio\n</code></pre> <p>Contar coincidencias (-c):</p> <pre><code># Cuenta cu\u00e1ntas veces aparece\ngrep -c \"error\" backup.log\n\n# Salida: 5\n</code></pre> <p>Buscar en m\u00faltiples archivos:</p> <pre><code># Buscar en todos los .log\ngrep \"error\" *.log\n\n# Buscar recursivamente en directorio\ngrep -r \"error\" /var/log/\n</code></pre>"},{"location":"09_06_logs_grep/#combinar-comandos-con-grep","title":"Combinar Comandos con grep","text":"<p>El pipe <code>|</code> env\u00eda la salida de un comando a otro, permitiendo filtrar resultados.</p> <p>Usar pipes con grep</p> <pre><code># Ver solo l\u00edneas con ERROR\ncat backup.log | grep \"ERROR\"\n\n# Ver procesos de un usuario\nps aux | grep usuario\n\n# Ver conexiones de red de un puerto\nss -tulpn | grep :445\n</code></pre> <p>Ejemplos pr\u00e1cticos de filtrado</p> <pre><code># Ver errores de hoy\ngrep \"2026-02-13\" backup.log | grep -i \"error\"\n\n# Contar backups exitosos\ngrep \"Backup OK\" backup.log | wc -l\n\n# Ver \u00faltimos errores\ngrep -i \"error\" backup.log | tail -n 5\n</code></pre>"},{"location":"09_06_logs_grep/#analizar-logs","title":"Analizar Logs","text":"<p>Ver \u00faltimas l\u00edneas de un log:</p> <pre><code># \u00daltimas 10 l\u00edneas\ntail backup.log\n\n# \u00daltimas 20 l\u00edneas\ntail -n 20 backup.log\n\n# Seguir el log en tiempo real\ntail -f backup.log\n</code></pre> <p>Ver primeras l\u00edneas:</p> <pre><code># Primeras 10 l\u00edneas\nhead backup.log\n\n# Primeras 5 l\u00edneas\nhead -n 5 backup.log\n</code></pre> <p>Filtrar y analizar</p> <pre><code># Ver solo backups del d\u00eda 13\ngrep \"2026-02-13\" backup.log\n\n# Ver errores del \u00faltimo mes de febrero\ngrep \"2026-02\" backup.log | grep -i \"error\"\n\n# Contar operaciones por d\u00eda\ngrep \"2026-02-13\" backup.log | wc -l\n</code></pre>"},{"location":"09_06_logs_grep/#ejemplos-completos","title":"Ejemplos Completos","text":"<p>Ejemplo 1: Backup con Log Detallado</p> <pre><code>#!/bin/bash\n# Backup con logging completo\n\nORIGEN=\"/home/$USER/Documentos\"\nDESTINO=\"/backups\"\nFECHA=$(date +%Y%m%d_%H%M%S)\nNOMBRE=\"backup_$FECHA.tar.gz\"\nLOG=\"/var/log/backup.log\"\n\n# Funci\u00f3n de log\nlog() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') [$1] $2\" &gt;&gt; \"$LOG\"\n}\n\n# Inicio\nlog \"INFO\" \"==========================================\"\nlog \"INFO\" \"Iniciando backup\"\n\n# Verificar origen\nif [ ! -d \"$ORIGEN\" ]; then\n    log \"ERROR\" \"Origen $ORIGEN no existe\"\n    exit 1\nfi\n\nlog \"INFO\" \"Origen verificado: $ORIGEN\"\n\n# Verificar espacio\nespacio=$(df -BG \"$DESTINO\" | tail -n 1 | awk '{print $4}' | sed 's/G//')\nlog \"INFO\" \"Espacio disponible: ${espacio}GB\"\n\nif [ $espacio -lt 5 ]; then\n    log \"ERROR\" \"Espacio insuficiente: ${espacio}GB\"\n    exit 1\nfi\n\n# Crear backup\nlog \"INFO\" \"Creando backup: $NOMBRE\"\ntar -czf \"$DESTINO/$NOMBRE\" \"$ORIGEN\" 2&gt;&gt; \"$LOG\"\n\n# Verificar resultado\nif [ $? -eq 0 ]; then\n    tamano=$(du -h \"$DESTINO/$NOMBRE\" | cut -f1)\n    log \"INFO\" \"Backup creado exitosamente: $tamano\"\nelse\n    log \"ERROR\" \"Fallo al crear backup\"\n    exit 1\nfi\n\n# Limpiar antiguos\nlog \"INFO\" \"Limpiando backups antiguos...\"\neliminados=$(find \"$DESTINO\" -name \"backup_*.tar.gz\" -mtime +7 | wc -l)\nfind \"$DESTINO\" -name \"backup_*.tar.gz\" -mtime +7 -delete\nlog \"INFO\" \"Eliminados $eliminados backups antiguos\"\n\n# Resumen\ntotal=$(ls -1 \"$DESTINO\"/backup_*.tar.gz 2&gt;/dev/null | wc -l)\nlog \"INFO\" \"Backups actuales: $total\"\nlog \"INFO\" \"Backup completado exitosamente\"\nlog \"INFO\" \"==========================================\"\n</code></pre> <p>Ejemplo 2: Monitor con Alertas</p> <pre><code>#!/bin/bash\n# Monitor de sistema con logging\n\nLOG=\"/var/log/monitor.log\"\n\nlog() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') [$1] $2\" &gt;&gt; \"$LOG\"\n}\n\n# Verificar espacio en disco\nuso=$(df -h / | tail -n 1 | awk '{print $5}' | sed 's/%//')\n\nif [ $uso -gt 80 ]; then\n    log \"ALERTA\" \"Disco al ${uso}% - Poco espacio\"\nelif [ $uso -gt 60 ]; then\n    log \"WARNING\" \"Disco al ${uso}% - Vigilar espacio\"\nelse\n    log \"INFO\" \"Disco al ${uso}% - OK\"\nfi\n\n# Verificar memoria\nmem_uso=$(free | grep Mem | awk '{printf \"%.0f\", $3/$2 * 100}')\n\nif [ $mem_uso -gt 90 ]; then\n    log \"ALERTA\" \"Memoria al ${mem_uso}% - Cr\u00edtico\"\nelif [ $mem_uso -gt 70 ]; then\n    log \"WARNING\" \"Memoria al ${mem_uso}% - Alto\"\nelse\n    log \"INFO\" \"Memoria al ${mem_uso}% - OK\"\nfi\n</code></pre> <p>Ejemplo 3: An\u00e1lisis de Logs</p> <pre><code>#!/bin/bash\n# Script para analizar logs de backup\n\nLOG=\"/var/log/backup.log\"\n\necho \"==========================================\"\necho \"   AN\u00c1LISIS DE LOGS DE BACKUP\"\necho \"==========================================\"\necho\n\n# Total de backups\ntotal=$(grep -c \"Backup creado\" \"$LOG\")\necho \"Total de backups realizados: $total\"\n\n# Backups exitosos\nexitosos=$(grep -c \"exitosamente\" \"$LOG\")\necho \"Backups exitosos: $exitosos\"\n\n# Errores\nerrores=$(grep -c \"ERROR\" \"$LOG\")\necho \"Errores totales: $errores\"\n\necho\necho \"--- \u00daltimos 5 errores ---\"\ngrep \"ERROR\" \"$LOG\" | tail -n 5\n\necho\necho \"--- Backups de hoy ---\"\nfecha_hoy=$(date +%Y-%m-%d)\ngrep \"$fecha_hoy\" \"$LOG\" | grep \"Backup creado\"\n\necho\necho \"==========================================\"\n</code></pre>"},{"location":"09_06_logs_grep/#ejercicios-practicos","title":"Ejercicios Pr\u00e1cticos","text":"<p>Ejercicio 1: Logging B\u00e1sico</p> <p>Objetivo: Crear un script que registre sus operaciones en un log.</p> <p>Instrucciones: 1. Crear <code>operaciones.sh</code> 2. Crear 3 archivos de prueba 3. Registrar cada operaci\u00f3n en <code>operaciones.log</code> con fecha</p> Soluci\u00f3n <pre><code>#!/bin/bash\n\nLOG=\"operaciones.log\"\n\n# Registrar inicio\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Inicio de operaciones\" &gt;&gt; \"$LOG\"\n\n# Crear archivos\nfor i in {1..3}\ndo\n    touch \"archivo$i.txt\"\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') - Creado archivo$i.txt\" &gt;&gt; \"$LOG\"\ndone\n\n# Registrar fin\necho \"$(date '+%Y-%m-%d %H:%M:%S') - Operaciones completadas\" &gt;&gt; \"$LOG\"\n\necho \"\u2713 Operaciones registradas en $LOG\"\ncat \"$LOG\"\n</code></pre> <p>Probar: </p><pre><code>chmod +x operaciones.sh\n./operaciones.sh\ncat operaciones.log\n</code></pre><p></p> <p>Ejercicio 2: Buscar en Logs</p> <p>Objetivo: Analizar un log existente con grep.</p> <p>Instrucciones: 1. Usar el log del ejercicio anterior 2. Buscar todas las l\u00edneas con \"Creado\" 3. Contar cu\u00e1ntos archivos se crearon</p> Soluci\u00f3n <pre><code>#!/bin/bash\n# analizar_log.sh\n\nLOG=\"operaciones.log\"\n\necho \"==========================================\"\necho \"   AN\u00c1LISIS DEL LOG\"\necho \"==========================================\"\n\n# Buscar operaciones de creaci\u00f3n\necho \"Archivos creados:\"\ngrep \"Creado\" \"$LOG\"\n\necho\necho \"Total de archivos creados:\"\ngrep -c \"Creado\" \"$LOG\"\n\necho\necho \"Fecha del primer archivo:\"\ngrep \"Creado\" \"$LOG\" | head -n 1 | cut -d' ' -f1,2\n\necho\necho \"Fecha del \u00faltimo archivo:\"\ngrep \"Creado\" \"$LOG\" | tail -n 1 | cut -d' ' -f1,2\n\necho \"==========================================\"\n</code></pre> <p>Ejercicio 3: Sistema de Backup con Logging Completo (PARA ENTREGAR)</p> <p>Objetivo: Crear un sistema de backup con logging profesional.</p> <p>Requisitos: 1. Script llamado <code>backup_logging.sh</code> 2. Hacer backup de <code>~/Documentos</code> 3. Log en <code>~/logs/backup.log</code> con:    - Fecha y hora de cada operaci\u00f3n    - Nivel de mensaje: [INFO], [ERROR], [WARNING]    - Verificaci\u00f3n de espacio    - Tama\u00f1o del backup    - N\u00famero de backups eliminados    - Resumen final 4. Funci\u00f3n <code>log()</code> para registrar mensajes</p> <p>Estructura esperada: </p><pre><code>#!/bin/bash\n# Sistema de backup con logging profesional\n\nORIGEN=\"$HOME/Documentos\"\nDESTINO=\"$HOME/backups\"\nFECHA=$(date +%Y%m%d_%H%M%S)\nLOG=\"$HOME/logs/backup.log\"\n\n# Crear funci\u00f3n log()\n# Registrar inicio\n# Verificar origen existe\n# Verificar espacio (m\u00ednimo 2GB)\n# Crear backup\n# Verificar resultado\n# Registrar tama\u00f1o\n# Limpiar backups antiguos (&gt;5 d\u00edas)\n# Registrar resumen\n</code></pre><p></p> <p>Ejemplo de log esperado: </p><pre><code>2026-02-13 14:30:15 [INFO] ==========================================\n2026-02-13 14:30:15 [INFO] Iniciando backup\n2026-02-13 14:30:15 [INFO] Origen verificado: /home/usuario/Documentos\n2026-02-13 14:30:15 [INFO] Espacio disponible: 15GB\n2026-02-13 14:30:15 [INFO] Creando backup: backup_20260213_143015.tar.gz\n2026-02-13 14:30:18 [INFO] Backup creado exitosamente: 2.3M\n2026-02-13 14:30:18 [INFO] Limpiando backups antiguos...\n2026-02-13 14:30:18 [INFO] Eliminados 2 backups antiguos\n2026-02-13 14:30:18 [INFO] Backups actuales: 4\n2026-02-13 14:30:18 [INFO] Backup completado exitosamente\n2026-02-13 14:30:18 [INFO] ==========================================\n</code></pre><p></p> <p>Crear tambi\u00e9n un script de an\u00e1lisis: </p><pre><code>#!/bin/bash\n# analizar_backups.sh\n\nLOG=\"$HOME/logs/backup.log\"\n\necho \"Total de backups: $(grep -c \"Backup creado\" \"$LOG\")\"\necho \"Errores: $(grep -c \"\\[ERROR\\]\" \"$LOG\")\"\necho \"\"\necho \"\u00daltimos 5 backups:\"\ngrep \"Backup creado exitosamente\" \"$LOG\" | tail -n 5\n</code></pre><p></p>"},{"location":"09_06_logs_grep/#resumen-de-comandos","title":"Resumen de Comandos","text":"<p>Redirecci\u00f3n</p> <pre><code>comando &gt; archivo          # Sobrescribir\ncomando &gt;&gt; archivo         # A\u00f1adir al final\ncomando 2&gt; errores         # Solo errores\ncomando &amp;&gt; todo            # Salida + errores\ncomando &gt;&gt; log 2&gt;&amp;1        # Todo al mismo archivo\n</code></pre> <p>grep</p> <pre><code>grep \"texto\" archivo       # Buscar\ngrep -i \"texto\" archivo    # Ignorar may\u00fasculas\ngrep -n \"texto\" archivo    # Con n\u00famero de l\u00ednea\ngrep -c \"texto\" archivo    # Contar coincidencias\ngrep -r \"texto\" dir/       # Buscar recursivo\ngrep -v \"texto\" archivo    # Invertir (no contiene)\n</code></pre> <p>Analizar logs</p> <pre><code>tail archivo               # \u00daltimas l\u00edneas\ntail -f archivo           # Seguir en tiempo real\nhead archivo              # Primeras l\u00edneas\ncat archivo | grep txt    # Filtrar contenido\n</code></pre> <p>Fecha para logs</p> <pre><code>date '+%Y-%m-%d %H:%M:%S'  # 2026-02-13 14:30:15\n</code></pre>"},{"location":"09_06_logs_grep/#tareas-extra","title":"Tareas Extra","text":"<p>Tarea 1: Monitor de Servicios</p> <p>Crear un script <code>monitor_servicios.sh</code> que: 1. Verifique si est\u00e1n activos: <code>ssh</code>, <code>cron</code> 2. Registre el estado en <code>~/logs/servicios.log</code> 3. Use niveles: [OK], [ERROR] 4. Incluya fecha y hora</p> Pista <pre><code>#!/bin/bash\nLOG=\"$HOME/logs/servicios.log\"\n\nlog() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') [$1] $2\" &gt;&gt; \"$LOG\"\n}\n\nif systemctl is-active --quiet ssh; then\n    log \"OK\" \"SSH activo\"\nelse\n    log \"ERROR\" \"SSH inactivo\"\nfi\n\n# Repetir para cron...\n</code></pre> <p>Tarea 2: Analizador de Logs Avanzado</p> <p>Crear un script <code>analisis_completo.sh</code> que analice <code>backup.log</code> y muestre: 1. Total de backups 2. Backups exitosos vs fallidos 3. D\u00eda con m\u00e1s backups 4. Tama\u00f1o total de backups 5. Promedio de tama\u00f1o por backup</p>"},{"location":"09_06_logs_grep/#buenas-practicas-de-logging","title":"Buenas Pr\u00e1cticas de Logging","text":"<p>1. Siempre incluir fecha y hora</p> <pre><code>echo \"$(date '+%Y-%m-%d %H:%M:%S') - mensaje\" &gt;&gt; log\n</code></pre> <p>2. Usar niveles de severidad</p> <pre><code>[INFO] - Informaci\u00f3n normal\n[WARNING] - Advertencia\n[ERROR] - Error grave\n[ALERTA] - Situaci\u00f3n cr\u00edtica\n</code></pre> <p>3. Crear funci\u00f3n de log reutilizable</p> <pre><code>log() {\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') [$1] $2\" &gt;&gt; \"$LOG\"\n}\n</code></pre> <p>4. Separar logs por tipo</p> <pre><code>LOG_BACKUP=\"/var/log/backup.log\"\nLOG_SISTEMA=\"/var/log/sistema.log\"\nLOG_ERRORES=\"/var/log/errores.log\"\n</code></pre> <p>5. Registrar inicio y fin</p> <pre><code>log \"INFO\" \"==========================================\"\nlog \"INFO\" \"Script iniciado\"\n# ... operaciones\nlog \"INFO\" \"Script finalizado\"\nlog \"INFO\" \"==========================================\"\n</code></pre> <p>6. Registrar todo lo importante</p> <ul> <li>Inicio/fin de operaciones</li> <li>Verificaciones previas</li> <li>Resultados de comandos cr\u00edticos</li> <li>Errores con contexto</li> <li>Estad\u00edsticas finales</li> </ul> <p>7. Facilitar el an\u00e1lisis posterior</p> <p>Usa formatos consistentes para que grep pueda encontrar informaci\u00f3n f\u00e1cilmente.</p>"}]}