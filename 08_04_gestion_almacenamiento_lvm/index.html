<!DOCTYPE html><html lang="es" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Redes híbridas. Linux Server e integración básica con Windows.">
      
      
        <meta name="author" content="Sergio Rey Martínez">
      
      
        <link rel="canonical" href="https://sergio-apuntes.github.io/sox/08_04_gestion_almacenamiento_lvm/">
      
      
        <link rel="prev" href="../08_03_gestion_almacenamiento_linux/">
      
      
        <link rel="next" href="../08_05_instalacion_configuracion_samba/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Gestión de almacenamiento con LVM - Apuntes Sistemas Operativos en Red</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#que-es-lvm-y-por-que-usarlo" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="Apuntes Sistemas Operativos en Red" class="md-header__button md-logo" aria-label="Apuntes Sistemas Operativos en Red" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Apuntes Sistemas Operativos en Red
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Gestión de almacenamiento con LVM
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Cambiar a modo oscuro" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Cambiar a modo claro" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo claro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Apuntes Sistemas Operativos en Red" class="md-nav__button md-logo" aria-label="Apuntes Sistemas Operativos en Red" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    Apuntes Sistemas Operativos en Red
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href=".." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Presentación
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Presentación
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UD01 Introducción a los Sistemas Operativos de Servidor
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    UD01 Introducción a los Sistemas Operativos de Servidor
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_1_introducci%C3%B3n/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducción
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_2_arquitectura_cliente_servidor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arquitectura cliente/servidor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_3_funciones_SO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funciones de Sistemas Operativos en Red
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_4_sistemas_operativos_servidor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Principales sistemas operativos servidor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_5_recordatorio_red/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Repaso conceptos de red
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UD02 Instalación de sistemas operativos de servidor privativos
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    UD02 Instalación de sistemas operativos de servidor privativos
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_1_instalacion_SO_introduccion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducción
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_2_instalacion_windows_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instalación de Windows Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_3_config_basica/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuración básica
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_4_documentar_instalacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentación
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_5_administrar_discos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Administrar discos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_6_dominio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Active Directory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UD03 Administración de usuarios y grupos en Windows Server
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    UD03 Administración de usuarios y grupos en Windows Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_01_objetos_dominios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Objetos del Dominio en Active Directory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_02_usuarios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cuentas de Usuario en un Dominio Windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_03_grupos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grupos en Active Directory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_04_equipos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Equipos en Active Directory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_05_unidades_organizativas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidades Organizativas en Active Directory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_06_herramientas_administracion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Herramientas de administración en Windows Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_07_perfiles_usuarios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Perfiles de usuario en Active Directory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UD04 Gestión de recursos compartidos en Windows Server
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    UD04 Gestión de recursos compartidos en Windows Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_01_permisos_derechos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Permisos y derechos en sistemas Windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_02_servidor_archivos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    El servidor de archivos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_03_compartir_impresoras/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Compartir impresoras en red
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6">
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UD05 Directivas de grupo en Windows Server
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    UD05 Directivas de grupo en Windows Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_01_introduccion_directivas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducción a las directivas de grupo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_02_creacion_directivas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creación y ámbito de aplicación de GPO
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_03_herencia_directivas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Herencia de directivas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_04_configuacion_directivas_comunes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuración de directivas comunes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_05_verificacion_problemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Verificación y resolución de problemas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7">
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UD06 Configuración avanzada de Windows Server
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    UD06 Configuración avanzada de Windows Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_01_configuraciones_adicionales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuración avanzada de Windows Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_02_carpetas_compartidas_ocultas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Recursos Compartidos Ocultos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_03_cuotas_discos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cuotas de discos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_04_servidor_dhcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Servidor DHCP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_05_escritorio_remoto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Escritorio Remoto
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_06_redes_virtuales_VPN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Red VPN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_07_rsat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Herramientas de Administración Remota del Servidor (RSAT)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_08_backups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Copias de seguridad
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_09_controlador_secundario/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controlador de Dominio Secundario
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_10_supervision_monitorizacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Monitorización Windows Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_11_servicios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Servicios en Windows Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_12_actualizacion_despliegue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WSUS &amp; WDS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8">
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UD07 Instalación de sistemas operativos libres
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    UD07 Instalación de sistemas operativos libres
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_01_introduccion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducción. Redes heterogéneas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_02_ubuntudesktop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ubuntu Desktop. Primeros pasos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_03_ubuntudesktop_red/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ubuntu Desktop. Configuración de red con Netplan y NetworkManager
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_04_ubuntudesktop_varios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ubuntu Desktop. Organización de discos y carpetas en Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_05_ubuntudesktop_ad/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ubuntu Desktop. Integración con Active Directory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UD08 Linux Server e integración básica con Windows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    UD08 Linux Server e integración básica con Windows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_01_instalacion_ubuntu_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instalación de Ubuntu Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_02_configuracion_red_netplan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuración de red estática con Netplan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_03_gestion_almacenamiento_linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gestión básica de almacenamiento en Linux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Gestión de almacenamiento con LVM
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Gestión de almacenamiento con LVM
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#que-es-lvm-y-por-que-usarlo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Qué es LVM y por qué usarlo
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Qué es LVM y por qué usarlo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comparacion-particiones-tradicionales-vs-lvm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparación: Particiones tradicionales vs LVM
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conceptos-fundamentales-de-lvm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conceptos fundamentales de LVM
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anadir-discos-a-la-maquina-virtual" class="md-nav__link">
    <span class="md-ellipsis">
      
        Añadir discos a la máquina virtual
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-la-estructura-lvm-paso-a-paso" class="md-nav__link">
    <span class="md-ellipsis">
      
        Crear la estructura LVM paso a paso
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Crear la estructura LVM paso a paso">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-physical-volumes-pvs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 1: Crear Physical Volumes (PVs)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-crear-volume-group-vg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 2: Crear Volume Group (VG)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-crear-logical-volumes-lvs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 3: Crear Logical Volumes (LVs)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-4-crear-sistemas-de-archivos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 4: Crear sistemas de archivos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-5-crear-puntos-de-montaje" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 5: Crear puntos de montaje
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-6-montar-los-volumenes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 6: Montar los volúmenes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-7-montaje-automatico-con-etcfstab" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 7: Montaje automático con /etc/fstab
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ampliar-un-volumen-logico" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ampliar un volumen lógico
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ampliar-con-un-nuevo-disco" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ampliar con un nuevo disco
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comandos-utiles-de-lvm-para-el-dia-a-dia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comandos útiles de LVM para el día a día
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_05_instalacion_configuracion_samba/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instalación y configuración básica de Samba
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_06_integracion_active_directory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integración con Active Directory usando Winbind
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_07_cron-rsync/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Administración avanzada - Automatización y copias de seguridad
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_08_mantenimiento_logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mantenimiento y control - Monitorización y logs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10">
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UD09 Script de administración en Linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    UD09 Script de administración en Linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_01_introduccion_scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducción y scripts básicos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_02_condicionales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Condicionales y Verificación de Archivos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_03_bucles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bucles for y Procesamiento de Archivos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_04_backups_tar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Uso Profesional de tar para Backups
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_05_rsync_cron/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sincronización con rsync y Automatización con cron
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_06_logs_grep/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Logs y Control con Redirección
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#que-es-lvm-y-por-que-usarlo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Qué es LVM y por qué usarlo
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Qué es LVM y por qué usarlo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comparacion-particiones-tradicionales-vs-lvm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparación: Particiones tradicionales vs LVM
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conceptos-fundamentales-de-lvm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conceptos fundamentales de LVM
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anadir-discos-a-la-maquina-virtual" class="md-nav__link">
    <span class="md-ellipsis">
      
        Añadir discos a la máquina virtual
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-la-estructura-lvm-paso-a-paso" class="md-nav__link">
    <span class="md-ellipsis">
      
        Crear la estructura LVM paso a paso
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Crear la estructura LVM paso a paso">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-physical-volumes-pvs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 1: Crear Physical Volumes (PVs)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-crear-volume-group-vg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 2: Crear Volume Group (VG)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-crear-logical-volumes-lvs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 3: Crear Logical Volumes (LVs)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-4-crear-sistemas-de-archivos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 4: Crear sistemas de archivos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-5-crear-puntos-de-montaje" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 5: Crear puntos de montaje
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-6-montar-los-volumenes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 6: Montar los volúmenes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-7-montaje-automatico-con-etcfstab" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paso 7: Montaje automático con /etc/fstab
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ampliar-un-volumen-logico" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ampliar un volumen lógico
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ampliar-con-un-nuevo-disco" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ampliar con un nuevo disco
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comandos-utiles-de-lvm-para-el-dia-a-dia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comandos útiles de LVM para el día a día
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Gestión de almacenamiento con LVM</h1>

<h2 id="que-es-lvm-y-por-que-usarlo">Qué es LVM y por qué usarlo</h2>
<p><strong>LVM</strong> (Logical Volume Manager) es un sistema de gestión de almacenamiento que añade una capa de abstracción entre los discos físicos y el sistema de archivos. Esta abstracción nos proporciona una flexibilidad extraordinaria que no existe con las particiones tradicionales.</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lvm-LogialVolumeManager.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lvm-LogialVolumeManager.png" width="60%"></a>
</figure>
<h3 id="comparacion-particiones-tradicionales-vs-lvm">Comparación: Particiones tradicionales vs LVM</h3>
<p><strong>Con particiones tradicionales</strong>:</p>
<p>Cuando creamos una partición, definimos su tamaño de forma fija en el disco. Si esa partición se queda sin espacio más adelante, ampliarla es extremadamente complicado y arriesgado. Normalmente requiere:</p>
<ul>
<li>Parar el sistema completamente</li>
<li>Redimensionar la partición con herramientas especiales</li>
<li>Rezar para que no haya corrupción de datos</li>
<li>Reiniciar el sistema</li>
</ul>
<p>No podemos "mover" espacio libre de una partición a otra fácilmente. Si tenemos 50GB libres en una partición y otra se ha quedado sin espacio, no hay forma sencilla de transferir ese espacio.</p>
<p>Tampoco podemos combinar varios discos físicos para formar una única partición grande. Cada disco es independiente.</p>
<p><strong>Con LVM</strong>:</p>
<ul>
<li>Podemos <strong>ampliar</strong> volúmenes fácilmente, incluso con el sistema en funcionamiento y sin parar servicios. Los usuarios ni se enterarán.</li>
<li>Podemos <strong>reducir</strong> volúmenes si necesitamos recuperar espacio para asignarlo a otro volumen.</li>
<li>Podemos <strong>combinar</strong> varios discos físicos en un único espacio de almacenamiento lógico.</li>
<li>Podemos crear <strong>snapshots</strong> (copias instantáneas) de volúmenes, ideales para backups o pruebas.</li>
<li>Podemos <strong>mover</strong> datos entre discos sin detener el sistema ni afectar a las aplicaciones.</li>
</ul>
<p><strong>Analogía práctica</strong>: </p>
<p>Las particiones tradicionales son como habitaciones de una casa con paredes de hormigón. Una vez construidas, cambiar su tamaño implica derribar paredes, lo cual es costoso y arriesgado.</p>
<p>LVM es como una oficina moderna con paneles modulares. Puedes mover los "tabiques" fácilmente, combinar espacios, dividirlos o reorganizarlos según las necesidades cambien, todo sin obras mayores.</p>
<p>En Windows Server existe algo similar llamado <strong>Storage Spaces</strong> o <strong>Espacios de almacenamiento</strong>, aunque LVM es más maduro, estable y potente al tener décadas de desarrollo.</p>
<h2 id="conceptos-fundamentales-de-lvm">Conceptos fundamentales de LVM</h2>
<p>LVM funciona con tres niveles jerárquicos que debemos entender claramente:</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lvm-diagram-linux-training-academy.webp" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lvm-diagram-linux-training-academy.webp" width="90%"></a>
<br>
<figcaption>Niveles jerárquicos de LVM</figcaption>
</figure>
<p><strong>1. PV (Physical Volume - Volumen Físico)</strong>:</p>
<p>Es la base de todo. Un PV es un disco duro físico (o partición) que hemos "preparado" para que LVM pueda trabajar con él. Básicamente le decimos a LVM: "este disco está disponible para que lo gestiones".</p>
<div class="admonition note">
<p class="admonition-title">Comandos principales:</p>
<ul>
<li><code>pvcreate</code>: convierte un disco en PV</li>
<li><code>pvs</code> o <code>pvdisplay</code>: muestra información de los PVs</li>
</ul>
</div>
<p><strong>2. VG (Volume Group - Grupo de Volúmenes)</strong>:</p>
<p>Es un "contenedor" que agrupa uno o varios PVs. Pensad en el VG como una "bolsa común de espacio" donde depositamos todos nuestros discos. Este espacio conjunto luego lo repartiremos como queramos.</p>
<p>Por ejemplo, si tenemos tres discos de 10GB cada uno, los agrupamos en un VG y tenemos 30GB de espacio total para trabajar.</p>
<div class="admonition note">
<p class="admonition-title">Comandos principales:</p>
<ul>
<li><code>vgcreate</code>: crea un nuevo grupo de volúmenes</li>
<li><code>vgs</code> o <code>vgdisplay</code>: muestra información de los VGs</li>
</ul>
</div>
<p><strong>3. LV (Logical Volume - Volumen Lógico)</strong>:</p>
<p>Es el "volumen" que usaremos realmente. Los LV se crean dentro de un VG, tomando el espacio que necesitemos de la "bolsa común". Este es el que finalmente montaremos como carpeta en el sistema y donde guardaremos datos.</p>
<p>Por ejemplo, de nuestros 30GB totales del VG, podemos crear:
- Un LV de 15GB para datos de empresa
- Un LV de 10GB para carpetas de usuarios
- Un LV de 5GB para backups</p>
<div class="admonition note">
<p class="admonition-title">Comandos principales:</p>
<ul>
<li><code>lvcreate</code>: crea un nuevo volumen lógico</li>
<li><code>lvs</code> o <code>lvdisplay</code>: muestra información de los LVs</li>
</ul>
</div>
<p><strong>Diagrama conceptual</strong>:</p>
<p>Em el siguiente esquema podemos ver como unimos 3 discos de 10GB en un Grupo de Volúmenes (VG) de 60GB y posteriormente lo distribuimos en 3 volúmenes lógicos de diferentes capacidades que asignamos a diferentes ubicaciones</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Discos físicos:  [Disco 10GB] [Disco 10GB] [Disco 10GB]
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>                    ↓           ↓             ↓
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>                    └───────── PVs ───────────┘
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>                                ↓
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>                      [VG: vg_datos - 30GB]
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>                                ↓
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>                ┌───────────────┴───────────────┐
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>                ↓               ↓               ↓
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>        [LV: lv_empresa]  [LV: lv_usuarios]  [LV: lv_backup]
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            15GB              10GB              5GB
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>                ↓               ↓               ↓
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>          /srv/empresa    /srv/usuarios    /srv/backup
</span></code></pre></div>
<p>y teniendo en cuenta los comandos asociados tenemos el siguiente esquema:</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lvm-esquema-comandos.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lvm-esquema-comandos.png" width="90%"></a>
<br>
<figcaption>Esquema conceptual: Comandos</figcaption>
</figure>
<h2 id="anadir-discos-a-la-maquina-virtual">Añadir discos a la máquina virtual</h2>
<p>Antes de poder trabajar con LVM, necesitamos añadir discos adicionales a nuestra máquina virtual. Vamos a añadir tres discos de 10GB cada uno.</p>
<p><strong>Apagar la máquina virtual</strong>:</p>
<p>Desde la terminal del servidor ejecutamos:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo<span class="w"> </span>poweroff
</span></code></pre></div>
<p>El sistema se apagará de forma ordenada, cerrando todos los servicios correctamente.</p>
<p><strong>Añadir 3 discos en VirtualBox</strong>:</p>
<p>Con la VM completamente apagada (no pausada, apagada), en VirtualBox:</p>
<ol>
<li>Seleccionamos nuestra VM <code>SRVXXX_Linux</code></li>
<li>Click en <strong>Configuración</strong></li>
<li>Navegamos a la sección <strong>Almacenamiento</strong></li>
<li>En el controlador <strong>Controladora: SATA</strong>, hacemos click en el icono de disco con el símbolo <code>+</code> (Añadir disco duro)</li>
<li>Click en <strong>Crear</strong></li>
<li>Configuramos el nuevo disco:</li>
<li>Tipo de archivo: <strong>VDI (VirtualBox Disk Image)</strong></li>
<li>Almacenamiento: <strong>Reservado dinámicamente</strong> (solo usa espacio real cuando se escribe en él)</li>
<li>Tamaño: <strong>10 GB</strong></li>
<li>Nombre: dejamos el sugerido (VirtualBox le pondrá un nombre automático)</li>
<li>Click en <strong>Crear</strong></li>
<li>Repetimos todo el proceso 2 veces más para tener un total de <strong>3 discos nuevos de 10GB</strong></li>
</ol>
<p>Al finalizar, en la sección de almacenamiento de la controladora SATA deberíamos ver:</p>
<ul>
<li><code>SRVXXX_Linux.vdi</code> (disco principal del sistema, 25GB)</li>
<li><code>SRVXXX_Linux_1.vdi</code> (disco adicional 1, 10GB)</li>
<li><code>SRVXXX_Linux_2.vdi</code> (disco adicional 2, 10GB)</li>
<li><code>SRVXXX_Linux_3.vdi</code> (disco adicional 3, 10GB)</li>
</ul>
<p>Hacemos click en <strong>Aceptar</strong> para guardar todos los cambios.</p>
<p><strong>Iniciar la VM y verificar discos</strong>:</p>
<p>Iniciamos la máquina virtual normalmente y hacemos login con nuestro usuario <code>admin</code>.</p>
<p>Verificamos que el sistema ha detectado los nuevos discos:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>lsblk
</span></code></pre></div>
<p>Este comando lista todos los dispositivos de bloque (discos) disponibles en el sistema. Deberíamos ver algo similar a:</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lsblk_1.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lsblk_1.png" width="90%"></a>
<br>
<figcaption>Vista de 3 nuevos discos</figcaption>
</figure>
<p><strong>Interpretación de la salida</strong>:</p>
<ul>
<li><code>sda</code>: nuestro disco principal (25GB) donde ya está instalado Ubuntu. Vemos sus particiones (<code>sda1</code>, <code>sda2</code>, <code>sda3</code>)</li>
<li><code>sdb</code>, <code>sdc</code>, <code>sdd</code>: los tres discos nuevos de 10GB que acabamos de añadir. Aparecen sin particiones ni formato, completamente vírgenes.</li>
<li><code>sr0</code>: es el disco magnético: Disquete.</li>
</ul>
<p><strong>Nota importante</strong>: Los nombres de los discos (<code>sda</code>, <code>sdb</code>, etc.) pueden variar ligeramente según la configuración. En algunos sistemas pueden aparecer como <code>vda</code>, <code>vdb</code>, etc. Lo importante es identificar visualmente los tres discos de 10GB que acabamos de añadir.</p>
<h2 id="crear-la-estructura-lvm-paso-a-paso">Crear la estructura LVM paso a paso</h2>
<p>Ahora vamos a crear nuestra estructura LVM completa, nivel por nivel, de forma muy detallada.</p>
<h3 id="paso-1-crear-physical-volumes-pvs">Paso 1: Crear Physical Volumes (PVs)</h3>
<p>El primer paso es convertir nuestros tres discos físicos en volúmenes físicos que LVM pueda gestionar:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo<span class="w"> </span>pvcreate<span class="w"> </span>/dev/sdb<span class="w"> </span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>sudo<span class="w"> </span>pvcreate<span class="w"> </span>/dev/sdc<span class="w"> </span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>sudo<span class="w"> </span>pvcreate<span class="w"> </span>/dev/sdd<span class="w"> </span>
</span></code></pre></div>
<p>Deberíamos ver una confirmación para cada disco:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>  Physical volume "/dev/sdb" successfully created.
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>  Physical volume "/dev/sdc" successfully created.
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>  Physical volume "/dev/sdd" successfully created.
</span></code></pre></div>
<p>Verificamos que se han creado correctamente:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sudo<span class="w"> </span>pvs
</span></code></pre></div>
<p>La salida mostrará:</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lsblk_2.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lsblk_2.png" width="90%"></a>
<br>
<figcaption>Vista de 3 nuevos discos como PV</figcaption>
</figure>
<p><strong>Interpretación</strong>:</p>
<ul>
<li><code>/dev/sda3</code>: el PV que se creó automáticamente durante la instalación para el sistema</li>
<li><code>/dev/sdb</code>, <code>/dev/sdc</code>, <code>/dev/sdd</code>: nuestros tres PVs nuevos, todavía sin asignar a ningún VG (columna VG vacía)</li>
<li>La columna <code>PFree</code> muestra que los 10GB de cada disco están completamente disponibles</li>
</ul>
<h3 id="paso-2-crear-volume-group-vg">Paso 2: Crear Volume Group (VG)</h3>
<p>Ahora agrupamos nuestros tres PVs en un único grupo llamado <code>vg_datos</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>sudo<span class="w"> </span>vgcreate<span class="w"> </span>vg_datos<span class="w"> </span>/dev/sdb<span class="w"> </span>/dev/sdc<span class="w"> </span>/dev/sdd
</span></code></pre></div>
<p>Confirmación:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>  Volume group "vg_datos" successfully created
</span></code></pre></div>
<p>Verificamos el grupo creado:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>sudo<span class="w"> </span>vgs
</span></code></pre></div>
<p>Salida:</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lsblk_3.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lsblk_3.png" width="90%"></a>
<br>
<figcaption>Vista de 3 nuevos discos como un único VG</figcaption>
</figure>
<p><strong>Interpretación</strong>:</p>
<ul>
<li><code>vg_datos</code>: nuestro nuevo grupo de volúmenes</li>
<li><code>#PV</code>: 3 (contiene 3 volúmenes físicos)</li>
<li><code>#LV</code>: 0 (todavía no hemos creado volúmenes lógicos dentro)</li>
<li><code>VSize</code>: ~30GB (10GB × 3 discos, menos un pequeño espacio para metadatos de LVM)</li>
<li><code>VFree</code>: ~30GB (todo el espacio está disponible)</li>
</ul>
<p>Podemos ver más detalles con:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>sudo<span class="w"> </span>vgdisplay<span class="w"> </span>vg_datos
</span></code></pre></div>
<p>Esto muestra información completa sobre el grupo, incluyendo el tamaño exacto de las unidades de asignación (PE - Physical Extents), cuántas hay libres, etc.</p>
<h3 id="paso-3-crear-logical-volumes-lvs">Paso 3: Crear Logical Volumes (LVs)</h3>
<p>Ahora creamos tres volúmenes lógicos dentro de <code>vg_datos</code>. Estos serán los "discos virtuales" que montaremos y usaremos realmente.</p>
<p><strong>Volumen para datos de empresa (15GB)</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>sudo<span class="w"> </span>lvcreate<span class="w"> </span>-L<span class="w"> </span>15G<span class="w"> </span>-n<span class="w"> </span>lv_empresa<span class="w"> </span>vg_datos
</span></code></pre></div>
<p><strong>Explicación del comando</strong>:</p>
<ul>
<li><code>-L 15G</code>: tamaño del volumen (15 gigabytes)</li>
<li><code>-n lv_empresa</code>: nombre del volumen lógico</li>
<li><code>vg_datos</code>: grupo de volúmenes donde se crea</li>
</ul>
<p>Confirmación:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>  Logical volume "lv_empresa" created.
</span></code></pre></div>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lvcreate_1.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lvcreate_1.png" width="90%"></a>
<br>
<figcaption>Creación de un volumen lógico de 15 GB</figcaption>
</figure>
<p><strong>Volumen para carpetas de usuarios (10GB)</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>sudo<span class="w"> </span>lvcreate<span class="w"> </span>-L<span class="w"> </span>10G<span class="w"> </span>-n<span class="w"> </span>lv_usuarios<span class="w"> </span>vg_datos
</span></code></pre></div>
<p><strong>Volumen para datos compartidos (5GB)</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>sudo<span class="w"> </span>lvcreate<span class="w"> </span>-L<span class="w"> </span>5G<span class="w"> </span>-n<span class="w"> </span>lv_compartido<span class="w"> </span>vg_datos
</span></code></pre></div>
<p>Verificamos todos los volúmenes creados:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>sudo<span class="w"> </span>lvs
</span></code></pre></div>
<p>Salida:</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lvs_1.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lvs_1.png" width="90%"></a>
<br>
<figcaption>Creación de un volumen lógico de 15 GB + 10 GB + 4.5GB</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Interpretación de error al crear el último Volumen Lógico</p>
<p>Si observamos el mensaje que nos da el sistema:</p>
<p><code>Volume group "vb_datos" has insufficient free space (1277 extends): **1280 required**</code></p>
<p>Nos indica que para crear un <strong>Volumen Lógico</strong> de 5GB nos hacen falta <code>1280 extends</code>, pero nos faltan 3 que se han perdido al crear partiiciones y guardar información de los todo el sistema LVM, por lo que el último volumen lo hemos creado de un tamaño más pequeño.</p>
<p>Un <strong>Extend</strong> es la unidad mínima de espacio direccionable que se asigna a un volumen lógico para permitir que su tamaño crezca de forma flexible</p>
</div>
<p>Ahora ya tenemos nuestros tres volúmenes lógicos creados con los tamaños especificados.</p>
<p>Verificamos el espacio restante en el grupo de volúmenes:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>sudo<span class="w"> </span>vgs
</span></code></pre></div>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/vgs_1.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/vgs_1.png" width="90%"></a>
<br>
<figcaption>Espacio utilizado en los dos VG (Volumen Group)</figcaption>
</figure>
<p>Tenemos aproximadamente 500MB libres en <code>vg_datos</code> que podremos usar más adelante para ampliar volúmenes existentes o crear nuevos.</p>
<h3 id="paso-4-crear-sistemas-de-archivos">Paso 4: Crear sistemas de archivos</h3>
<p>Los volúmenes lógicos están creados, pero son como "discos en blanco" sin formato. Necesitan un sistema de archivos para poder almacenar datos.</p>
<p>En Linux, el sistema de archivos más común y recomendado es <strong>ext4</strong>. Es estable, eficiente y ampliamente soportado.</p>
<p>Formateamos cada volumen lógico:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>sudo<span class="w"> </span>mkfs.ext4<span class="w"> </span>/dev/vg_datos/lv_empresa
</span></code></pre></div>
<p>Este comando tardará unos segundos y mostrará información sobre el sistema de archivos creado:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>mke2fs 1.46.5 (30-Dec-2021)
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>Creating filesystem with 3932160 4k blocks and 983040 inodes
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>Filesystem UUID: abc123-def456-...
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>Superblock backups stored on blocks: ...
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>...
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>Allocating group tables: done
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>Writing inode tables: done
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>Creating journal (16384 blocks): done
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>Writing superblocks and filesystem accounting information: done
</span></code></pre></div>
<p>Repetimos para los otros dos volúmenes:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>sudo<span class="w"> </span>mkfs.ext4<span class="w"> </span>/dev/vg_datos/lv_usuarios
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>sudo<span class="w"> </span>mkfs.ext4<span class="w"> </span>/dev/vg_datos/lv_compartido
</span></code></pre></div>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/mkfs_1.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/mkfs_1.png" width="90%"></a>
<br>
<figcaption>Formateando los Volúmenes Lógicos creados</figcaption>
</figure>
<p>Ahora nuestros volúmenes tienen un sistema de archivos y están listos para usarse.</p>
<h3 id="paso-5-crear-puntos-de-montaje">Paso 5: Crear puntos de montaje</h3>
<p>En Linux, para acceder a un volumen debemos <strong>montarlo</strong> en una carpeta del sistema. Esa carpeta se llama <strong>punto de montaje</strong>.</p>
<p>Por convención, los datos de servidores suelen montarse en <code>/srv/</code> (de "service" - servicio).</p>
<p>Creamos las carpetas donde montaremos nuestros volúmenes:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/srv/empresa
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/srv/usuarios
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/srv/compartido
</span></code></pre></div>
<p>El parámetro <code>-p</code> (parent) crea todas las carpetas necesarias en la ruta. Si <code>/srv</code> no existiera (aunque normalmente sí existe), también la crearía.</p>
<p>Verificamos que se han creado:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>ls<span class="w"> </span>-l<span class="w"> </span>/srv/
</span></code></pre></div>
<p>Deberíamos ver:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>total 12
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>drwxr-xr-x 2 root root 4096 ... compartido
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>drwxr-xr-x 2 root root 4096 ... empresa
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>drwxr-xr-x 2 root root 4096 ... usuarios
</span></code></pre></div>
<h3 id="paso-6-montar-los-volumenes">Paso 6: Montar los volúmenes</h3>
<p>Ahora montamos cada volumen lógico en su carpeta correspondiente:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>sudo<span class="w"> </span>mount<span class="w"> </span>/dev/vg_datos/lv_empresa<span class="w"> </span>/srv/empresa
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>sudo<span class="w"> </span>mount<span class="w"> </span>/dev/vg_datos/lv_usuarios<span class="w"> </span>/srv/usuarios
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>sudo<span class="w"> </span>mount<span class="w"> </span>/dev/vg_datos/lv_compartido<span class="w"> </span>/srv/compartido
</span></code></pre></div>
<p>Estos comandos no muestran ninguna salida si todo va bien (en Linux, "ninguna noticia es buena noticia").</p>
<p>Verificamos que los volúmenes están montados correctamente:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>df<span class="w"> </span>-h
</span></code></pre></div>
<p>El comando <code>df</code> (disk free) muestra el espacio de todos los sistemas de archivos montados. Con la opción <code>-h</code> (human-readable) muestra los tamaños en formato legible.</p>
<p>Al final de la lista deberíamos ver:</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/Lv_montados_1.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/Lv_montados_1.png" width="90%"></a>
<br>
<figcaption>Volúmenes lógicos montados</figcaption>
</figure>
<p><strong>Interpretación</strong>:</p>
<ul>
<li>Los volúmenes están montados en las rutas correctas</li>
<li>El espacio disponible es ligeramente menor que el tamaño asignado (normal, el sistema de archivos necesita espacio para metadatos)</li>
<li>Uso actual: casi 0% (solo metadatos del sistema de archivos)</li>
</ul>
<p>Podemos probar a crear un archivo de prueba:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>sudo<span class="w"> </span>touch<span class="w"> </span>/srv/empresa/prueba.txt
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>ls<span class="w"> </span>-l<span class="w"> </span>/srv/empresa/
</span></code></pre></div>
<p>Deberíamos ver el archivo creado.</p>
<h3 id="paso-7-montaje-automatico-con-etcfstab">Paso 7: Montaje automático con /etc/fstab</h3>
<p>Hay un problema: si reiniciamos el servidor ahora, los volúmenes NO se montarán automáticamente. Después de cada reinicio tendríamos que montarlos manualmente.</p>
<p>Para que se monten automáticamente al iniciar el sistema, debemos configurar el archivo <code>/etc/fstab</code> (file systems table - tabla de sistemas de archivos).</p>
<p>Primero, hacemos una copia de seguridad del archivo (buena práctica antes de modificar archivos críticos):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>sudo<span class="w"> </span>cp<span class="w"> </span>/etc/fstab<span class="w"> </span>/etc/fstab.backup
</span></code></pre></div>
<p>Editamos el archivo:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/fstab
</span></code></pre></div>
<p>Veremos líneas similares a estas (puede variar):</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a># /etc/fstab: static file system information.
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>UUID=abc-123... / ext4 defaults 0 1
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>UUID=def-456... /boot ext4 defaults 0 2
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>/swap.img none swap sw 0 0
</span></code></pre></div>
<p>Nos desplazamos al final del archivo y añadimos estas tres líneas:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>/dev/vg_datos/lv_empresa    /srv/empresa     ext4  defaults  0  2
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>/dev/vg_datos/lv_usuarios   /srv/usuarios    ext4  defaults  0  2
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>/dev/vg_datos/lv_compartido /srv/compartido  ext4  defaults  0  2
</span></code></pre></div>
<p><strong>Explicación de cada campo</strong>:</p>
<ol>
<li>Dispositivo: <code>/dev/vg_datos/lv_empresa</code> (ruta al volumen)</li>
<li>Punto de montaje: <code>/srv/empresa</code> (dónde se monta)</li>
<li>Tipo de sistema de archivos: <code>ext4</code></li>
<li>Opciones: <code>defaults</code> (usa opciones por defecto: lectura/escritura, etc.)</li>
<li>Dump: <code>0</code> (no hacer backup automático con dump)</li>
<li>Pass: <code>2</code> (orden de comprobación en el arranque. 0=no comprobar, 1=primero el root, 2=después los demás)</li>
</ol>
<p>Guardamos el archivo (<code>Ctrl+O</code>, <code>Enter</code>, <code>Ctrl+X</code>).</p>
<p><strong>Verificar que no hay errores</strong> (PASO CRÍTICO):</p>
<p>Antes de reiniciar, SIEMPRE debemos verificar que el archivo <code>/etc/fstab</code> no contiene errores. Un error en este archivo puede hacer que el sistema no arranque.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>sudo<span class="w"> </span>mount<span class="w"> </span>-a
</span></code></pre></div>
<p>Este comando intenta montar todos los sistemas de archivos listados en <code>/etc/fstab</code>. Si hay algún error, nos lo mostrará. Si no muestra nada, significa que todo está correcto.</p>
<p>Verificamos de nuevo que los volúmenes siguen montados:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>df<span class="w"> </span>-h<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>srv
</span></code></pre></div>
<p>Deberíamos ver nuestros tres volúmenes.</p>
<p><strong>Reiniciar para comprobar que funciona</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>sudo<span class="w"> </span>reboot
</span></code></pre></div>
<p>El sistema se reiniciará. Esperamos unos 30 segundos y volvemos a hacer login.</p>
<p>Tras el reinicio, verificamos inmediatamente que los volúmenes se han montado automáticamente:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>df<span class="w"> </span>-h<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>srv
</span></code></pre></div>
<p>Si vemos los tres volúmenes montados, ¡perfecto! El montaje automático funciona correctamente.</p>
<h2 id="ampliar-un-volumen-logico">Ampliar un volumen lógico</h2>
<p>Una de las grandes ventajas de LVM es la capacidad de ampliar volúmenes fácilmente, incluso con el sistema en funcionamiento. Vamos a demostrarlo ampliando <code>lv_empresa</code> en 3GB adicionales.</p>
<p>Este proceso se hace sin detener el servidor, sin desmontar el volumen y sin interrumpir el acceso a los datos. Es una funcionalidad extraordinaria que no existe con particiones tradicionales.</p>
<p><strong>Paso 1: Verificar espacio disponible en el VG</strong>:</p>
<p>Antes de ampliar, confirmamos que tenemos espacio libre en el grupo de volúmenes:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>sudo<span class="w"> </span>vgs
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>  VG        #PV #LV #SN Attr   VSize  VFree 
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>  vg_datos    3   3   0 wz--n- 29.99g 500M
</span></code></pre></div>
<p>Tenemos aproximadamente 500MB libres, suficiente para añadir 400MB a un volumen.</p>
<p><strong>Paso 2: Ampliar el volumen lógico</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>sudo<span class="w"> </span>lvextend<span class="w"> </span>-L<span class="w"> </span>+400M<span class="w"> </span>/dev/vg_datos/lv_empresa
</span></code></pre></div>
<p><strong>Explicación</strong>:</p>
<ul>
<li><code>lvextend</code>: comando para extender (ampliar) un volumen lógico</li>
<li><code>-L +3G</code>: añadir 3 gigabytes al tamaño actual (el <code>+</code> indica que es adicional, no el tamaño total)</li>
<li><code>/dev/vg_datos/lv_empresa</code>: ruta al volumen que queremos ampliar</li>
</ul>
<p>Confirmación:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>  Size of logical volume vg_datos/lv_empresa changed from 15.00 GiB to 18.00 GiB.
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>  Logical volume vg_datos/lv_empresa successfully resized.
</span></code></pre></div>
<p><strong>Paso 3: Ampliar el sistema de archivos</strong>:</p>
<p>Hemos ampliado el volumen lógico, pero el sistema de archivos ext4 que hay dentro todavía "piensa" que tiene 15GB. Debemos indicarle que ocupe todo el nuevo espacio:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>sudo<span class="w"> </span>resize2fs<span class="w"> </span>/dev/vg_datos/lv_empresa
</span></code></pre></div>
<p>Salida:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>resize2fs 1.46.5 (30-Dec-2021)
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>Filesystem at /dev/vg_datos/lv_empresa is mounted on /srv/empresa; on-line resizing required
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>old_desc_blocks = 2, new_desc_blocks = 3
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>The filesystem on /dev/vg_datos/lv_empresa is now 4718592 (4k) blocks long.
</span></code></pre></div>
<p>La línea clave es <code>on-line resizing required</code> que confirma que se está redimensionando con el sistema en funcionamiento.</p>
<p><strong>Paso 4: Verificar el resultado</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>df<span class="w"> </span>-h<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>empresa
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>/dev/mapper/vg_datos-lv_empresa  18G  24K  17G   1% /srv/empresa
</span></code></pre></div>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lgextend_1.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lgextend_1.png" width="90%"></a>
<br>
<figcaption>Resultado del cambio de tamaño del volumen</figcaption>
</figure>
<p>¡Perfecto! El volumen ahora tiene 15.4GB en lugar de 15GB.</p>
<p><strong>Reflexión sobre lo que hemos hecho</strong>:</p>
<p>Acabamos de ampliar un volumen de 15GB a 15.4GB:</p>
<ul>
<li>Sin detener el servidor</li>
<li>Sin desmontar el volumen</li>
<li>Sin interrumpir el acceso a los datos</li>
<li>En menos de un minuto</li>
<li>Sin riesgo de pérdida de datos</li>
</ul>
<p>Con particiones tradicionales, esto habría requerido:</p>
<ol>
<li>Hacer backup completo de los datos</li>
<li>Apagar el servidor</li>
<li>Particionar de nuevo el disco</li>
<li>Formatear</li>
<li>Restaurar los datos</li>
<li>Reiniciar y cruzar los dedos</li>
</ol>
<p>Esta es la potencia de LVM.</p>
<h2 id="ampliar-con-un-nuevo-disco">Ampliar con un nuevo disco</h2>
<p>Podemos pensar que hemos llegado al final, pero todavía podemos ampliar más nuestro almacenamiento a<strong>ñadiendo nuevos discos</strong> que vamos convertir en <strong>Physical Volumes</strong> (<code>pvcreate</code>) que servirá para ampliar o extender cualquiera de los <strong>Logical Volumes</strong> (<code>vgextend</code>) y a su vez para poder hacer más grandes nuestras <strong>Logical Volumes</strong> (<code>lvextend</code>) tal y como hemos hecho en el paso anterior.</p>
<p>Así pues, vamos a parar de nuevo nuestro servidor (ahora si), para añadir un nuevo disco, por ejemplo de 15GB.</p>
<p>Iniciemos de nuevo el servidor y comprobemos que el nuevo disco esta ahí:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>lsblk
</span></code></pre></div>
<p>debe aparecer un nuevo disco <code>/dev/sde</code>.</p>
<p>Ahora creemos de nuevo ese disco en un <strong>Physical Volume</strong> usando <code>pvcreate</code></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>sudo<span class="w"> </span>pvcreate<span class="w"> </span>/dev/sde
</span></code></pre></div>
<p>El siguiente paso será añadir mediante el comando <code>vgextend</code> este nuevo <strong>Physical Volume</strong> al <strong>Volume Group</strong> exitente <code>vb_datos</code>, ejecutando el siguiente comando:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>sudo<span class="w"> </span>vgextend<span class="w"> </span>vg_datos<span class="w"> </span>/dev/sde
</span></code></pre></div>
<p>y ahora podremos ver que tenemos un nuevo <strong>Physical Volume</strong> en nuestro <strong>Volume Group</strong> mediante el comando <code>pvs</code></p>
<p>Ejecutamos ahora el comando para ver el estado de nuestros <strong>Volume Group</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>sudo<span class="w"> </span>vgs
</span></code></pre></div>
<p>y nos saldrá que ahora tenemos 15GB mas de espacio disponible en <code>vg_datos</code>.</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/nuevo_disco.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/nuevo_disco.png" width="90%"></a>
<br>
<figcaption>Resultado del cambio de tamaño del volumen</figcaption>
</figure>
<p>y con esto, podemos volver a ampliar de nuevo uno de nuestros <strong>Logical Volume</strong>, por ejemplo <code>lv_empresa</code> con 10GB más:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>sudo<span class="w"> </span>lvextend<span class="w"> </span>-L<span class="w"> </span>+10G<span class="w"> </span>/dev/vg_datos/lv_empresa
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>sudo<span class="w"> </span>resize2fs<span class="w"> </span>/dev/vg_datos/lv_empresa
</span></code></pre></div>
<p>el segundo comando, <code>resize2fs</code> permite ampliar el tamaño de la partición al tamaño nuevo de la <strong>Logical Volume</strong></p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lgextend_2.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lgextend_2.png" width="90%"></a>
<br>
<figcaption>Resultado del cambio de tamaño del volumen lógico</figcaption>
</figure>
<p>y así podemos seguir ampliando mientras tengamos capacidad física en nuestro servidor para seguir creciendo.</p>
<p>Por último, por curiosidad, si ejecutamos <code>lsblk</code> podremos observar que por ejemplo el <strong>Logical Volume</strong> <code>lv_empresa</code> realmente se encuentra repartido por 3 discos duros; <code>sdb</code>, <code>sdc</code> y <code>sde</code>.</p>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../imgs/ubuntu/lvm/lsblk_4.png" data-desc-position="bottom"><img alt="" src="../imgs/ubuntu/lvm/lsblk_4.png" width="90%"></a>
<br>
<figcaption>Ubicación física de /srv/empresa</figcaption>
</figure>
<h2 id="comandos-utiles-de-lvm-para-el-dia-a-dia">Comandos útiles de LVM para el día a día</h2>
<p><strong>Ver información resumida</strong>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>sudo<span class="w"> </span>pvs<span class="w">    </span><span class="c1"># Resumen de volúmenes físicos</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>sudo<span class="w"> </span>vgs<span class="w">    </span><span class="c1"># Resumen de grupos de volúmenes</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>sudo<span class="w"> </span>lvs<span class="w">    </span><span class="c1"># Resumen de volúmenes lógicos</span>
</span></code></pre></div><p></p>
<p><strong>Ver información detallada</strong>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>sudo<span class="w"> </span>pvdisplay<span class="w">                    </span><span class="c1"># Detalle de todos los PVs</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>sudo<span class="w"> </span>vgdisplay<span class="w"> </span>vg_datos<span class="w">          </span><span class="c1"># Detalle de un VG específico</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>sudo<span class="w"> </span>lvdisplay<span class="w"> </span>/dev/vg_datos/lv_empresa<span class="w">  </span><span class="c1"># Detalle de un LV específico</span>
</span></code></pre></div><p></p>
<p><strong>Ampliar un grupo</strong> :
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>sudo<span class="w"> </span>vgextend<span class="w"> </span>vg_datos<span class="w"> </span>/dev/sde
</span></code></pre></div><p></p>
<p><strong>Ampliar un volumen o un grupo</strong> :
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>sudo<span class="w"> </span>lvextend<span class="w"> </span>-L<span class="w"> </span>+2G<span class="w"> </span>/dev/vg_datos/lv_usuarios
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>sudo<span class="w"> </span>resize2fs<span class="w"> </span>/dev/vg_datos/lv_usuarios
</span></code></pre></div><p></p>
<p><strong>Añadir un disco nuevo a un VG existente</strong>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>sudo<span class="w"> </span>pvcreate<span class="w"> </span>/dev/sde<span class="w">          </span><span class="c1"># Preparar el disco nuevo</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>sudo<span class="w"> </span>vgextend<span class="w"> </span>vg_datos<span class="w"> </span>/dev/sde<span class="w"> </span><span class="c1"># Añadirlo al grupo</span>
</span></code></pre></div><p></p>
<p><strong>Ver estado del montaje</strong>:
</p><div class="language-bash highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>df<span class="w"> </span>-h<span class="w">               </span><span class="c1"># Ver todos los sistemas de archivos montados</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>mount<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>srv<span class="w">    </span><span class="c1"># Ver solo nuestros volúmenes</span>
</span></code></pre></div><p></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pie">
        
          
          <a href="../08_03_gestion_almacenamiento_linux/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Gestión básica de almacenamiento en Linux">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Anterior
              </span>
              <div class="md-ellipsis">
                Gestión básica de almacenamiento en Linux
              </div>
            </div>
          </a>
        
        
          
          <a href="../08_05_instalacion_configuracion_samba/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: Instalación y configuración básica de Samba">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Siguiente
              </span>
              <div class="md-ellipsis">
                Instalación y configuración básica de Samba
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Sergio Rey Martínez - SMX - SOX - 2025
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.indexes", "navigation.footer", "navigation.instant", "navigation.instant.progress", "toc.follow", "navigation.top", "content.code.copy"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>